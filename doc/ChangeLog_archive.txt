2008-05-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* share/extensions/*.py: Use gettext for (many) error messages.
	share/extensions/inkex.py: (errormsg): New function.

2007-06-24  Joel Holdsworth  <joelholdsworth@yahoo.com>
    
    * modified the windows RC files to add version info and manifest data

2007-03-16  Tim Dwyer  <Tim.Dwyer@infotech.monash.edu.au>

	* src/graphlayout/graphlayout.cpp: handle null bounding boxes

2007-03-01  Markus Schwarzenberg <Markus.Schwarzenberg@ipms.fraunhofer.de>

  Solaris 8 / gcc-3.2.3 fixes (selectively effecting only this special

  * src/display/nr-filter-gaussian.cpp:
    
    * include compatibility header "isnormal.h"
    * template calcTriggsSdikaInitialization<PC> needs to be
      specified explicitely for gcc 3.2.3
  
  * src/display/pixblock-transform.cpp, src/display/nr-filter.cpp, 
    src/display/nr-filter.cpp
    
    * include compatibility header "round.h"
    * using Inkscape::round
    
  * src/extension/internal/ps.cpp, src/print.cpp
   
    include <unistd.h> on SOLARIS_2_8 for open, unlink
    
  * src/libcola/gradient_projection.cpp
  
    include and use compatibility headers "isnan.h" "isinf.h"
    
  * removed obsolete src/libvpsc/isnan.h
  
  * added src/isinf.h
  
  * configure.ac: Added Detection of solaris2.8 --> CXXFLAGS += -DSOLARIS_2_8

2006-08-05  John Bintz  <jcoswell@coswellproductions.org>

  * node-context.cpp, nodepath.cpp:

    add checks to make sure given nodepath pointers are not 
    null before working with them

2006-08-01  MenTaLguY  <mental@rydia.net>

	* configure.ac: refactor pkg-config tests and add explicit cairo test

2006-07-29  John Bintz  <jcoswell@coswellproductions.org>

  * src/nodepath.cpp:
  
    Fix bug where deleting a node broke the symmetry of neighboring
    smooth nodes and failed to convert those nodes to cusp nodes

2006-07-29  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp:

	  remove GObject signals from SPObject

	* src/desktop.cpp, src/desktop.h, src/sp-gradient.cpp,
	  src/sp-gradient.h, src/sp-pattern.cpp, src/sp-pattern.h,
	  src/sp-switch.cpp, src/sp-switch.h, src/widgets/desktop-widget.cpp,
	  src/widgets/desktop-widget.h, src/widgets/gradient-image.cpp,
	  src/widgets/gradient-image.h, src/widgets/gradient-toolbar.cpp,
	  src/widgets/gradient-toolbar.cpp:

	  switch to sigc++ SPObject signals

2006-07-27  MenTaLguY  <mental@rydia.net>

	* src/dialogs/sp-attribute-widget.cpp,
	  src/dialogs/sp-attribute-widget.h, src/sp-offset.cpp,
	  src/sp-offset.h, src/sp-shape.cpp, src/sp-shape.h,
	  src/sp-use-reference.cpp, src/sp-use-reference.h:

	  switch to sigc++ SPObject signals

2006-07-26  MenTaLguY  <mental@rydia.net>

	* src/dialogs/object-attributes.cpp:

	  switch to sigc++ "release"

2006-07-26  MenTaLguY  <mental@rydia.net>

	* src/style.cpp, src/style.h:

	  finish switching to sigc++ SPObject signals for SPStyle

2006-07-25  MenTaLguY  <mental@rydia.net>

	* src/widgets/gradient-vector.cpp, src/widgets/gradient-vector.h:

	  switch to sigc++ SPObject signals for SPGradientVectorSelector

2006-07-25  MenTaLguY  <mental@rydia.net>

	* autogen.sh, configure.ac, debian/control, tools-version.sh:

	  un-libtoolize the build process (yay!) -- we haven't actually
	  used libtool for ages

2006-07-25  MenTaLguY  <mental@rydia.net>

	* src/extension/plugin, src/extension/plugin/Makefile_insert,
	  src/extension/plugin/makefile.in, src/extension/plugin/.cvsignore,
	  src/Makefile.am, configure.ac:

	  remove vestigal plugin support

2006-07-24  MenTaLguY  <mental@rydia.net>

    * configure.ac: further work on LSB build configuration

2006-07-23  John Bintz  <jcoswell@coswellproductions.org>

  * src/verbs.cpp, src/event-context.cpp, src/node-context.cpp:

    forced redraw of canvas upon completion of zooming or upon
    starting rubber band selection events to work around event
    starvation issue at high zoom levels

2006-07-23  MenTaLguY  <mental@rydia.net>

  * src/widgets/paint-selector.cpp:

    Update pattern creation help text to reflect new menu layout.  We
    probably need some way to automatically generate
    "menu navigation strings" for a given verb.

2006-07-23  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh, packaging/macosx/inkscape.ds_store
	  packaging/macosx/dmg_background.svg, packaging/macosx/osx-dmg.sh,
	  packaging/macosx/dmg_background.png, Makefile.am,
	  packaging/macosx/dmg_set_style.scpt:

	  Improve the disk image layout for Mac OS X releases.  This is 
	  based on Jean-Olivier Irisson's work and patches, submitted as
	  #1516212.

2006-07-23  John Bintz  <jcoswell@coswellproductions.org>

	* src/desktop.cpp, src/desktop.h:

	  added SPDesktop::updateNow()

	* src/event-context.cpp, src/select-context.cpp, src/node-context.cpp:

	  forced redraw of canvas upon completion of selection or panning
	  to work around event starvation issue at high zoom levels

2006-07-22  John Bintz  <jcoswell@coswellproductions.org>

	* src/desktop.cpp, src/desktop.h, src/document-undo.cpp,
	  src/document.h, src/document-private.h, src/document.cpp:

	  forced redraw of canvas upon document commit to work
	  around event starvation issue at high zoom levels

2006-07-21  MenTaLguY  <mental@rydia.net>

	* src/splivarot.cpp:
	
	  patch from John Bintz, adding pref to simplify multiple
	  paths separately

2006-07-21  MenTaLguY  <mental@rydia.net>

	* configure.ac: first shot at implementing --enable-lsb

2006-07-21  MenTaLguY  <mental@rydia.net>

	* src/style.cpp, src/style.h:

	  switch to using sigc++ signals

2006-07-21  MenTaLguY  <mental@rydia.net>

	* src/layer-manager.cpp, src/layer-manager.h:

	  switch to sigc++ signals and manually clean up signal connections
	  (although it may not be strictly necessary to do so here)

2006-07-21  MenTaLguY  <mental@rydia.net>

	* src/document-subset.cpp, src/object-hierarchy.cpp,
	  src/object-hierarchy.h, src/selection.cpp, src/selection.h,
	  src/ui/view/edit-widget.cpp, src/ui/view/edit-widget.h,
	  src/uri-references.cpp, src/uri-references.h:
	
	  switch to sigc++ signals for "modified" and "release"

2006-07-21  MenTaLguY  <mental@rydia.net>

	* src/document.cpp, src/sp-object.cpp, src/sp-object.h:

	  sp_object_invoke_release -> SPObject::releaseReferences,
	  plus the introduction of sigc++ signals for "release" and 
	  "modified" which will eventually replace the GObject signals

2006-07-20  MenTaLguY  <mental@rydia.net>

	* src/libnrtype/RasterFont.h, src/libnrtype/font-instance.h:

	  replace two uses of hash_map with standard STL map

2006-07-18  Bryce Harrington <bryce@bryceharrington.org>

	* src/document.h, src/document.cpp:  Refactoring from mental &
	  bryce to consolidate document update functionality from
	  sp_document_ensure_is_up_to_date() and
	  sp_document_idle_handler().  This is the first step in getting
	  updates of defs (and markers) fixed.

2006-07-18  Tim Dwyer  <Tim.Dwyer@infotech.monash.edu.au>

	* src/graphlayout/graphlayout.cpp, src/conn-avoid-ref.h:
	  We now use connector spacing to determine the minimum space required
	  between shape bounding boxes when graph layout with avoid overlap
	  constraints is applied.  This means that there should always be enough
	  room for connectors to route between shapes.  Also changed the default
	  connector spacing to a less extreme 3.

2006-07-17  Tim Dwyer  <Tim.Dwyer@infotech.monash.edu.au>

	* src/libcola/cola.h, src/libcola/connected_components.cpp,
	  src/graphlayout/graphlayout.cpp:
	  Disconnected graphs are now handled more gracefully,
	  connected components are arranged separated (in place) and
	  then overlaps between components are removed.

2006-07-13  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/Makefile_insert, src/Makefile.am, src/svg/Makefile_insert,
	  src/xml/Makefile_insert, src/libnr/Makefile_insert:
	  Add "$(srcdir)/" to some things so that "make check" works in 
	  the case that the build directory is somewhere other than the
	  source directory.

	* src/sp-conn-end-pair.cpp, src/connector-context.cpp,
	  src/document.cpp, src/libavoid/*:
	  Update libavoid with upstream fixes, optimisations and new features.

2006-07-13  Tim Dwyer  <Tim.Dwyer@infotech.monash.edu.au>

	* src/libvpsc/*,
	  src/graphlayout/graphlayout.cpp:
	  Toggle on connector toolbar can force connectors with 
	  end-markers (arrows) to point downwards

2006-07-13  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/libavoid/router.cpp: Fixed a bug in the libavoid function
	  Router::attachedConns().  Previously unused, but needed by Tim
	  for new Graph Layout code.

2006-07-13  Jon Phillips  <jon@rejon.org>

	* src/inkview: Added commandline option capability to inkview and 
	  got code ready to add a timer for an automatic slideshow capability.

2006-07-12 Tim Dwyer  <Tim.Dwyer@infotech.monash.edu.au>

	* src/libvpsc/*,
	  src/libcola/*,
	  src/graphlayout/graphlayout.cpp,
	  src/removeoverlaps/removeoverlaps.cpp:
	  Boost graph layout algorithms replaced by custom constraint layout
	  algorithm (implemented in libcola).  New layout supports constraints
	  such as downward pointing connectors (directed graph layout) or
	  non-overlapping shapes.
	  libvpsc contains updated code for quadratic program solver used by
	  libcola and removeoverlaps.  Fixes bug #1441411.

2006-07-02  Colin Marquardt  <colin@marquardt-home.de>

	* AUTHORS, src/ui/dialog/aboutbox.cpp: Add Niko, Hugo, Dale and
	  Gustav.

2006-06-30  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp, src/widgets/toolbox.cpp:
	  Add undo event descriptions for the connector context.

2006-06-27  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/macosx/ScriptExec/main.c:
	  Add some quotes to fix a problem for people on OS X with 
	  spaces in their home directory path.  Fixes bug #1512019.

2006-06-21  Colin Marquardt  <colin@marquardt-home.de>

	* share/templates/DVD_cover_regular_300dpi.svg,
	  share/templates/DVD_cover_slim_300dpi.svg,
	  share/templates/DVD_cover_superslim_300dpi.svg,
	  share/templates/DVD_cover_ultraslim_300dpi.svg:
	  DVD templates by Aleksandar Urosevic. Closes #1507164.

2006-06-19  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/macosx/Resources/script,
	  packaging/macosx/Resources/bin/inkscape:

	  Improve quoting of shell variables.

	* packaging/macosx/ScriptExec/ScriptExec.xcodeproj/project.pbxproj:

	  Xcode 2 project file for the OS X launcher.  This will build a
	  Universal version of the launcher by default.  The project files for
	  different versions are named differently, so this will be picked up and
	  used if the package builder has a sufficiently new version of Xcode.

	* packaging/macosx/ScriptExec/ScriptExec.xcode/sveinbjornt.pbxuser,
	  packaging/macosx/ScriptExec/ScriptExec.xcode/voisine.pbxuser:

	  Remove unnecessary user preference files.

	* Makefile.am:
	
	  Update the Xcode project files included when creating releases.

2006-06-13  Jon A. Cruz  <jon@joncruz.org>

	* TRANSLATORS, src/ui/dialog/aboutbox.cpp:

	  Applied patch #1505715.

2006-06-13  Jon A. Cruz  <jon@joncruz.org>

	* packaging/macosx/Resources/etc/fonts/fonts.conf:

	  Applied patch #1505765.

2006-06-09  Jon A. Cruz  <jon@joncruz.org>

	* src/object-snapper.cpp, src/selection.cpp, src/selection.h,
	  src/seltrans.cpp:

	  Applied patch #1503864.

2006-06-09  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/toolbox.cpp:

	  Handle case when function call fails.
	  Fixes bug #1501150.

2006-06-07  Jon A. Cruz  <jon@joncruz.org>

	* src/seltrans.cpp:

	  Work-around for seltrans not getting calls to grab() and ungrab() as
	  expected.
	  Fixes bug #1501156.

2006-06-07  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/toolbox.cpp:

	  Applied patch #1502407.
	  Fixes bug #1500049.

2006-06-07  Jon A. Cruz  <jon@joncruz.org>

	* packaging/macosx/ScriptExec/main.c, packaging/osx-app.sh:

	  Fixing OS X fc-cache problem.
	  Applied patch #1502063.

2006-06-07  Jon A. Cruz  <jon@joncruz.org>

	* src/sp-item-group.cpp, src/sp-path.cpp, src/sp-star.cpp,
	  src/sp-switch.cpp, src/ui/widget/ruler.cpp:

	  Applied patch #1501709.

2006-06-05  Jon A. Cruz  <jon@joncruz.org>

	* trace/siox.cpp, trace/siox.h, trace/trace.cpp,
	  src/ui/dialog/tracedialog.cpp:

	  Applied patch #1501375.

2006-06-05  Jon A. Cruz  <jon@joncruz.org>

	* trace/siox.cpp, trace/trace.cpp:

	  Applied patch #1501134.

2006-06-05  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/layers-panel.cpp:

	  Allow action when no layer selected.
	  Fixes bugs #1494646.

2006-06-05  Jon A. Cruz  <jon@joncruz.org>

	* trace/siox.cpp:

	  Applied patch #1500659.

2006-06-05  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/layers-panel.h, src/dialogs/layers-panel.cpp:

	  Blocked signal when changes are not from the layers UI.
	  Fixes bugs #1495406 and most of #1494646.

2006-06-02  Colin Marquardt  <colin@marquardt-home.de>

	* TRANSLATORS: Add Stefan Graubner.

2006-06-01  Jon A. Cruz  <jon@joncruz.org>

	* src/extension/internal/pdf-mini.h

	  Fix for delete[] mismatch and binary tweak from Ulf Erikson.

2006-06-01  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/layers-panel.h, src/dialogs/layers-panel.cpp:

	  Added layer opacity slider.
	  Fixes RFE #1496569.

2006-05-31  Colin Marquardt  <colin@marquardt-home.de>

	* TRANSLATORS: Add vonHalenbach for tutorial translations.

2006-05-29  Jon A. Cruz  <jon@joncruz.org>

	* src/extension/internal/odf.cpp:
	Corrected deletes and uninitizlied variables.
	Fixes bug# 1489961.

2006-05-30 John Cliff <simarilius@yahoo.com>
	src/trace/potrace/inkscape-potrace.cpp
	Changed bitsPerSample from hardcoded to calculated for multi color traces
	to fix bugs 1188811 and 1484076

2006-05-29  Jon A. Cruz  <jon@joncruz.org>

	* src/xml/repr-io.cpp:
	Changed to strip leading BOM from input.
	Fixes bug# 1121666.

2006-05-29  Bryce <bryce@bryceharrington.org>
	* sp-shape.cpp:  Adding documentation

2006-05-29  Jon A. Cruz  <jon@joncruz.org>

	* src/desktop.cpp, src/layer-manager.cpp, src/dialogs/layers-panel.cpp:
	Workaround to avoid assertion upon file revert.

2006-05-28  Bryce <bryce@bryceharrington.org>
	* sp-marker.cpp:  Adding documentation

2006-05-28  MenTaLguY  <mental@rydia.net>

	* src/dialogs/clonetiler.cpp, src/dialogs/iconpreview.cpp,
	  src/dialogs/stroke-style.cpp, src/display/curve.cpp,
	  src/display/sp-canvas.cpp, src/dyna-draw-context.cpp,
	  src/extension/internal/gnome.cpp, src/extension/internal/pdf.cpp,
	  src/extension/internal/ps.cpp, src/extension/internal/win32.cpp,
	  src/file.cpp, src/inkview.cpp, src/libnr/nr-macros.h,
	  src/libnr/nr-object.cpp, src/libnr/nr-path.cpp,
	  src/libnr/nr-pixblock.cpp, src/libnr/nr-pixblock-pattern.cpp,
	  src/libnr/nr-svp.cpp, src/libnr/nr-svp-render.cpp,
	  src/libnrtype/FontFactory.cpp, src/libnrtype/Layout-TNG-Output.cpp,
	  src/libnrtype/nr-type-primitives.cpp, src/path-chemistry.cpp,
	  src/splivarot.cpp, src/sp-marker.cpp, src/ui/widget/icon-widget.cpp,
	  src/widgets/icon.cpp:

	  replace nr_new() with g_new(), and try to converge on using the
	  glib allocator a little more instead of the others (aside from
	  libgc)

2006-05-28  MenTaLguY  <mental@rydia.net>

	* share/icons/icons.svg:

	  correct vertical text flow icon to  correctly reflect lines stacking
	  right-to-left, as well as improving pixel alignment on both text flow
	  icons

2006-05-28  MenTaLguY  <mental@rydia.net>

	* src/widgets/toolbox.cpp:

	  add tooltips to text toolbar widgets

2006-05-28  Jon A. Cruz  <jon@joncruz.org>

	* src/layer-manager.cpp, src/layer-manager.h,
	  src/preferences-skeleton.h, src/ui/dialog/inkscape-preferences.cpp,
	  src/ui/dialog/inkscape-preferences.h,
	  src/widgets/layer-selector.cpp, src/dialogs/layers-panel.cpp:

	  Finished option to turn on or off deslecting when switching layers.
	  Fixes RFE #1495701.

2006-05-28  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/layers-panel.h, src/dialogs/layers-panel.cpp:

	  Changed clicking on visibility and locked toggles to not switch
	  selected layer.
	  Fixes bug #1495856.

2006-05-28  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end-pair.cpp: Detach connectors from empty groups
	  before trying to route connectors to them.  This is required
	  since empty groups have no physical position.  Fixes bug #1448811.

2006-05-27  Kees Cook  <kees@outflux.net>

	* src/extension/implementation/script.cpp: allow output extension
	  parameters to be prompted and used, closes bug #1495310.

2006-05-26  MenTaLguY  <mental@rydia.net>

	* src/dialogs/layers-panel.h, src/dialogs/layers-panel.cpp:

	  make button labels translatable, and use HButtonBox instead of HBox for
	  better appearance

2006-05-26  Jon A. Cruz  <jon@joncruz.org>

	* src/layer-manager.cpp, src/layer-manager.h,
	  src/dialogs/layer-properties.cpp, src/dialogs/layers-panel.cpp:

	  Prevent layer name duplication.
	  Fixes bug #1115407.

2006-05-26  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/desktop-widget.cpp:

	  Fixed resize handle in corner of main UI.
	  Fixes bug #1493995.

2006-05-26  Jon A. Cruz  <jon@joncruz.org>

	* src/layer-manager.cpp, src/layer-manager.h,
	  src/widgets/layer-selector.cpp:

	  Cleaned up propagation of status changes.
	  Fixes bug #1495333.

2006-05-26  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/path-prefix.h: Add missing CREATE_* directory locations
	  for building an OS X application bundle.  Fixes bug #1495284.

2006-05-25  Bryce Harrington <bryce@bryceharrington.org>

	* src/inkscape.cpp:  i18n on error messages (fix for bug 1490928) 

2006-05-23  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/layers-panel.cpp, src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h, src/preferences-skeleton.h,
	  src/ui/previewfillable.h, src/ui/previewholder.cpp,
	  src/ui/previewholder.h, src/ui/widget/panel.cpp,
	  src/ui/widget/panel.h, src/verbs.cpp,
	  src/widgets/desktop-widget.cpp:
	  Refactored panels.
	  Fixes RFE #1453153. Fixes RFE #1453152.
	

2006-05-23  MenTaLguY  <mental@rydia.net>

	* src/extension/internal/ps.cpp:

	  move %%EOF to end of output document

2006-05-22  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/swatches.cpp, src/ui/widget/panel.cpp,
	  src/ui/widget/panel.h:
	  Removed panel menu unless requested. Fixes bug #1492597.

2006-05-22  MenTaLguY  <mental@rydia.net>

	* src/extension/internal/svg.cpp:

	  replace EXTREMELY inefficient (O(n^2), I think?) stacked C string
	  concatenations with appends to a std::vector, which is amortized O(1)

2006-05-21  Marco Scholten  <mscholtn@xs4all.nl>

	* src/ui/dialog/inkscape-preferences.cpp, 
	  src/ui/dialog/inkscape-preferences.h: 
	  Added 'Show close button on dialogs' option.

2006-05-21  MenTaLguY  <mental@rydia.net>

	* src/ui/view/view-widget.cpp:
	
	  request collection pass after destruction of a view widget

2006-05-21  MenTaLguY  <mental@rydia.net>

	* src/gc-core.h, src/gc.cpp:
	
	  add GC::request_early_collection() to force a collection from the idle
	  loop at opportune times

	* src/dialogs/filedialog.cpp:

	  call GC::request_early_collection() after switching preview images

2006-05-21  Jon A. Cruz  <jon@joncruz.org>

	* src/layer-manager.cpp, src/layer-manager.h,
	  src/dialogs/layers-panel.cpp, src/dialogs/layers-panel.h:
	  Adding notification when managed layers change.

2006-05-21  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/extension/internal/pdf.cpp: Compilation fix.  For versions
	  of glib older that 2.9.0, use g_date_set_time() instead of
	  g_date_set_time_t().

2006-05-20  MenTaLguY  <mental@rydia.net>

	* src/extensin/internal/ps.cpp:

	  add %%EOF trailer for DSC-compliance

2006-05-20  Colin Marquardt  <colin@marquardt-home.de>

	* share/extensions/lindenmayer.inx,
	  share/extensions/kochify_load.inx, 
	  share/extensions/kochify.inx:
	  Rename slightly, also makes for easier translation.

2006-05-20  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/icon.h, src/widgets/icon.cpp, src/dialogs/layers-panel.cpp:
	  Changled dialog from checkboxes to icons for visible and locked.

2006-05-20  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/libnrtype/FontInstance.cpp: patch from David Turner of the
	  FreeType Project.  Fixes a compilation problem and a possible
	  segmentation fault.

2006-05-19  Jon A. Cruz  <jon@joncruz.org>
	* src/preferences-skeleton.h, src/dialogs/layers-panel.h,
	  src/dialogs/layers-panel.cpp:
	  Selection and event handling cleanup. Added deeper display.

2006-05-18  Jon A. Cruz  <jon@joncruz.org>
	* src/layer-manager.cpp, src/dialogs/layers-panel.h,
	  src/dialogs/layers-panel.cpp:
	  Next round of layer dialog updates.

2006-05-17  Kees Cook  <kees@outflux.net>
	* src/dialogs/rdf.cpp: corrected localization on array, added comments.
	* src/ui/widget/licensor.cpp: Localized the license name.
	* configure.ac: added comment about why sigc++ was upgraded

2006-05-17  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/layers-panel.cpp:
	  Flipped top/bottom in layers UI to reflect visible stacking.

2006-05-16  verbalshadow  <verbalshadow@gmail.com>

	* src/desktop-style.h, src/desktop-style.cpp:
	  Fixes calligraphy tool so drawing now uses the the correct opacity.

2006-05-17  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/layers-panel.cpp, src/dialogs/layers-panel.h:
	  Switched icons to stock generic.

2006-05-17  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/dialogs/layers-panel.cpp: Compile fix from Mathieu Dimanche.

2006-05-16  Jon A. Cruz  <jon@joncruz.org>

	* src/document-subset.cpp:
	  Corrected ordering of children in subset.

2006-05-15  Jon A. Cruz  <jon@joncruz.org>
	* src/Makefile_insert, src/desktop.cpp, src/desktop.h,
	  src/layer-manager.cpp, src/menus-skeleton.h, src/verbs.cpp,
	  src/verbs.h, src/dialogs/layers-panel.cpp,
	  src/dialogs/layers-panel.h, src/dialogs/Makefile_insert:
	  Base implementation of a layers dialog.

2006-05-14  Colin Marquardt  <colin@marquardt-home.de>

	* src/ui/dialog/inkscape-preferences.cpp (initPageTools): 
	  Typofix ("conector").

2006-05-14  Jon A. Cruz  <jon@joncruz.org>

	* src/document-subset.cpp, src/layer-manager.h, src/layer-manager.cpp:
	  Corrected base structure and avoiding infinite loop.

2006-05-14  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/widgets/toolbox.cpp: Slightly increase size of the
	 connector toolbar buttons to match button sizes on other
	 toolbars.

2006-05-13  verbalshadow  <verbalshadow@gmail.com>

	* src/dyna-draw-context.cpp, src/desktop-style.cpp,
	  src/desktop-style.h:

	  Calligraphy tool now draws in the last used color or the
	  tool style depending on the Preference setting.
	  
2006-05-11  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/selection-chemistry.cpp, src/sp-conn-end-pair.cpp:

	  When moving/transforming connectors, only detach connectors
	  from objects that are not part of the selection.  Previously,
	  connectors moved as part of a selection would be detached from
	  all objects.  This has been requested several times via email.
	  The change also fixes bug #1383806.

	* src/ui/dialog/inkscape-preferences.cpp,
	  src/ui/dialog/inkscape-preferences.h, src/connector-context.cpp:

	  Add a preferences setting to the connector tool for setting
	  whether or not connectors attach to text objects.  This change
	  addresses feature request #1434292.
	  
2006-05-09  Carl Hetherington  <inkscape@carlh.net>

	* src/nodepath.cpp: fix silly bug with snapping node edits.
	
	* src/snapper.cpp, src/snapper.h, src/sp-namedview.cpp:
	  re-enable link between grid visibility and grid snap.

2006-05-08  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* conn-avoid-ref.cpp: Fix a crashbug that could occur in files
	  containing connectors if they were loaded from the file chooser
	  or from the recent file list.  Fixes bug #1458820.

2006-05-08  MenTaLguY  <mental@rydia.net>

	* src/display/curve.cpp:

	  always make local copy of path data so that we have control over memory
	  policy

2006-05-08  MenTaLguY  <mental@rydia.net>

	* src/display/curve.h, src/display/curve.cpp, src/dropper-context.cpp:

	  get rid of sp_curve_new_from_static_bpath() in a bid to simplify curve
	  memory management

2006-05-08  MenTaLguY  <mental@rydia.net>

	* src/display/canvas-bpath.cpp, src/display/curve.cpp, src/display/curve.h,
	  src/display/nr-arena-shape.cpp, src/draw-context.cpp,
	  src/extension/internal/odf.cpp, src/extension/internal/pov-out.cpp,
	  src/nodepath.cpp, src/object-snapper.cpp, src/path-chemistry.cpp,
	  src/sp-flowregion.cpp, src/splivarot.cpp, src/sp-offset.cpp,
	  src/sp-path.cpp, src/sp-shape.cpp, src/sp-spiral.cpp, src/sp-star.cpp,
	  src/sp-use-reference.cpp:

	  eliminate direct accesses to SPCurve::bpath

2006-05-08  MenTaLguY  <mental@rydia.net>

	* src/streams-zlib.cpp, src/streams-jar.cpp, src/splivarot.cpp,
	  src/extension/internal/bluredge.cpp:

	  use std::vector rather than dynamically-sized automatic arrays,
	  plus cleanups and minor fixes, and dead code removal

2006-05-08  MenTaLguY  <mental@rydia.net>

	* src/debug/demangle.cpp, src/debug/demangle.h, src/sp-object.cpp,
	  src/gc-anchored.cpp, src/debug/Makefile_insert:

	  use c++filt for symbol demangling if available

2006-05-08  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-util.cpp:
	
	  comments explaining namespace mapping for the broken sodipodi namespace

2006-05-08  Carl Hetherington  <inkscape@carlh.net>

	* src/seltrans.cpp, src/snap.cpp, src/snap.h: fix ctrl-scaling
	when there is no snap.  More snapping cleanups.

2006-05-07  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* knot.h, knot.cpp, connector-context.cpp:
	  Fix glib-gobject-warnings for knots in the connector tool.

2006-05-07  Jon A. Cruz  <jon@joncruz.org>

	* src/document-subset.cpp:
	  Corrected two bugs, with the minor one hiding the more severe.

2006-05-06  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-util.cpp, src/xml/repr.h:

	  add fixup for incorrect sodipodi namespace

2006-05-06  MenTaLguY  <mental@rydia.net>

	* doc/NewAppArchitecture/01-title.svg,
	  doc/NewAppArchitecture/04-current-main.svg,
	  doc/NewAppArchitecture/05-current-objects.svg,
	  doc/NewAppArchitecture/06-current-desktop-view.svg,
	  doc/NewAppArchitecture/07-current-problems.svg,
	  doc/NewAppArchitecture/08-inkscape-gtkmm.svg
	  doc/NewAppArchitecture/09-future-capabilities.svg,
	  doc/NewAppArchitecture/10-future-main.svg,
	  doc/NewAppArchitecture/11-future-ink-app.svg,
	  doc/NewAppArchitecture/12-future-run-modes.svg,
	  doc/NewAppArchitecture/13-future-ink-app-editor.svg,
	  doc/NewAppArchitecture/14-evolving.svg,
	  share/examples/art-nouveau-P3.svg,
	  share/examples/eastern-motive-P4G.svg,
	  share/examples/i18n.svg,
	  share/examples/markers.svg,
	  share/examples/tesselation-P3.svg,
	  share/examples/text-on-path.svg,
	  share/icons/David_icons.svg,
	  share/icons/icons.svg,
	  share/icons/legacy_icons.svg,
	  share/screens/about.svg,
	  share/templates/business_card_85x54mm.svg,
	  share/templates/default.cs.svg,
	  share/templates/default.lt.svg,
	  share/templates/default.pl.svg,
	  share/tutorials/gpl-2.svg,
	  share/tutorials/tutorial-advanced.es.svg,
	  share/tutorials/tutorial-advanced.fr.svg,
	  share/tutorials/tutorial-advanced.ja.svg,
	  share/tutorials/tutorial-advanced.sl.svg,
	  share/tutorials/tutorial-advanced.svg,
	  share/tutorials/tutorial-basic.ca.svg,
	  share/tutorials/tutorial-basic.de.svg,
	  share/tutorials/tutorial-basic.es.svg,
	  share/tutorials/tutorial-basic.fr.svg,
	  share/tutorials/tutorial-basic.ja.svg,
	  share/tutorials/tutorial-basic.nn.svg,
	  share/tutorials/tutorial-basic.sl.svg,
	  share/tutorials/tutorial-basic.svg,
	  share/tutorials/tutorial-calligraphy.es.svg,
	  share/tutorials/tutorial-calligraphy.fr.svg,
	  share/tutorials/tutorial-calligraphy.sl.svg,
	  share/tutorials/tutorial-calligraphy.svg,
	  share/tutorials/tutorial-elements.es.svg,
	  share/tutorials/tutorial-elements.fr.svg,
	  share/tutorials/tutorial-elements.sl.svg,
	  share/tutorials/tutorial-elements.svg,
	  share/tutorials/tutorial-shapes.ca.svg,
	  share/tutorials/tutorial-shapes.es.svg,
	  share/tutorials/tutorial-shapes.fr.svg,
	  share/tutorials/tutorial-shapes.ja.svg,
	  share/tutorials/tutorial-shapes.sl.svg,
	  share/tutorials/tutorial-shapes.svg,
	  share/tutorials/tutorial-tips.es.svg,
	  share/tutorials/tutorial-tips.fr.svg,
	  share/tutorials/tutorial-tips.sl.svg,
	  share/tutorials/tutorial-tips.svg,
	  share/tutorials/tutorial-tracing.de.svg,
	  share/tutorials/tutorial-tracing.es.svg,
	  share/tutorials/tutorial-tracing.fr.svg,
	  share/tutorials/tutorial-tracing.sl.svg,
	  share/tutorials/tutorial-tracing.svg,
	  src/extension/dxf2svg/dxf2svg.cpp,
	  src/menus-skeleton.h,
	  src/preferences-skeleton.h:

	  get the CORRECT sodipodi namespace in there

2006-05-06  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-util.cpp:

	  fix for #1483198 ("infectious namespaces")

2006-05-01  Jon A. Cruz  <jon@joncruz.org>

	* src/verbs.h, src/verbs.cpp, src/verbs-test.h:
	  Fixed problem with std::map use making last verb inaccessible.

2006-05-05  Carl Hetherington  <inkscape@carlh.net>

	* src/draw-context.cpp, src/line-snapper.h, src/snap.cpp,
	src/snapper.cpp, src/line-snapper.cpp, src/snap.h,
	src/context-fns.cpp, src/object-snapper.h, src/seltrans.cpp,
	src/nodepath.cpp, src/snapper.h, src/object-snapper.cpp: various
	snapping fixes and cleanups.

06-05-04  Carl Hetherington  <inkscape@carlh.net>

	* src/guide-snapper.h, src/line-snapper.h, src/snap.cpp,
	src/snap.h, src/object-snapper.h, src/sp-namedview.cpp,
	src/grid-snapper.h: clean up knutux's fix for the snapper crash.

2006-05-03  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* po/pt_BR.po: Fix some "Unmatched closing </b>" warnings.

	* src/jabber_whiteboard/pedrodom.cpp: Compile fix for Mac OS.
	
2006-05-03  Carl Hetherington  <inkscape@carlh.net>

	* src/arc-context.cpp, src/connector-context.cpp,
	src/context-fns.cpp, src/desktop.cpp, src/draw-context.cpp,
	src/nodepath.cpp, src/object-edit.cpp, src/pencil-context.cpp,
	src/rect-context.cpp, src/selection-chemistry.cpp,
	src/seltrans.cpp, src/snap.cpp, src/snap.h, src/sp-namedview.cpp,
	src/sp-namedview.h, src/spiral-context.cpp, src/star-context.cpp,
	src/ui/dialog/document-properties.cpp: Give SPNamedView a
	SnapManager instance and use it for all management of snapping
	settings.

	* src/snap.cpp, src/snap.h: remove the unused namedview_dim_snap_list()

2006-05-01  Jon A. Cruz  <jon@joncruz.org>

	* src/Makefile.am, src/Makefile_insert, src/attributes-test.h,
	  src/color-profile-test.h, src/mod360-test.cpp, src/mod360-test.h,
	  src/round-test.cpp, src/round-test.h, src/sp-gradient-test.cpp,
	  src/sp-gradient-test.h, src/sp-style-elem-test.cpp,
	  src/sp-style-elem-test.h, src/style-test.h, src/test-helpers.h:
	  Replaced four more tests with CxxTest versions.

2006-05-01  MenTaLguY  <mental@rydia.net>

	* src/display/nr-arena-item.cpp:

	  use GC allocator for bitmap cache and transform

2006-05-01  Marco Scholten  <mscholtn@xs4all.nl>

	* src/dialogs/inkscape-preferences.cpp: Moved 'compass like
    display of angles' from 'windows' to 'steps'.

2006-04-30  MenTaLguY  <mental@rydia.net>

	* src/libnr/nr-object.cpp:

	  log finalization of NRObjects

2006-04-29  Jon Phillips  <jon@rejon.org>

	* src/dialogs/rdf.cpp: Updated cc licenses to 2.5 by default.

	* src/ui/dialog/document-metadata.cpp: Made metadata window
	resizable so that one can see the licenses and enter long entries.

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/display/nr-arena-group.cpp, src/display/nr-arena-item.cpp,
	  src/display/nr-arena-item.h, src/display/nr-arena-shape.cpp:

	  rationalize function names and remove spurious soft_ptr

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/document.cpp:
	
	  use proper unref function on SPRoot to avoid appearance of leak

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/gc-anchored.cpp, src/xml/simple-node.cpp, src/sp-object.cpp:

	  switch everyone to simpler debug event API

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/gc-finalized.cpp, src/gc-finalized.h:

	  add finalizer logging

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/debug/simple-event.h: simplify the SimpleEvent API more

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/debug/simple-event.h: make Debug::SimpleEvent more convenient

	* src/debug/event.h, src/debug/logger.cpp: add FINALIZERS category

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/debug/logger.cpp:
	
	finish interrupted refactoring of log filter configuration

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/doc/Makefile.am, src/doc/refcounting.txt:
	
	  some developer documentation about refcounting

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/ui/view/view.cpp:

	  Wait a minute -- UI::View::View and SPDocument are both managed
	  by the collector -- the view doesn't need to ref the document!

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/ui/view/view.cpp: add missing unref

2006-04-29  MenTaLguY  <mental@rydia.net>

	* src/gc-anchored.cpp, src/gc-anchored.h:

	  added refcount logging to GC::Anchored

	* src/util/Makefile_insert, src/util/format.h:

	  shared string printf

2006-04-28  MenTaLguY  <mental@rydia.net>

    * src/sp-object.cpp: make refcount logging a little more useful
	  by including the relevent class name

2006-04-28  Jon A. Cruz  <jon@joncruz.org>

	* src/Makefile_insert, src/Makefile.am, src/dir-util-test.h,
	  src/dir-util-test.cpp, src/extract-uri-test.h,
	  src/extract-uri-test.cpp:
	  Replaced two tests with CxxTest versions.

2006-04-28  Jon A. Cruz  <jon@joncruz.org>

	* src/Makefile_insert, src/MultiPrinter.h, src/verbs.h,
	  src/verbs-test.h:
	  Adding unit test for verbs.

2006-04-27  verbalshadow <verbalshadow@gmail.com>
	
	* src/io/resource.h, src/io/resource.cpp, 
	  src/dialogs/swatches.cpp, src/helper/stock-items.cpp:
	  Added CREATE v0.1 support for gradients/swatches/patterns
	  Support for Linux & Win32. Mac support waiting final support
	  Directory info.

2006-04-26  Jon A. Cruz  <jon@joncruz.org>

	* src/Makefile.am, src/MultiPrinter.h, src/PylogFormatter.h,
	  src/TRPIFormatter.h, src/selfname.tpl, src/libnr/Makefile_insert,
	  src/svg/Makefile_insert, src/xml/Makefile_insert:
	  Adding multiple test output formats.

2006-04-23  verbalshadow  <verbalshadow@gmail.com>

    * path-prefix.h:
	  Added beginnings of CREATE support in path-prefix.h

2006-04-23  verbalshadow  <verbalshadow@gmail.com>

    * src/object-ui.cpp, src/object-ui.h:
	  moved to src/ui/context-menu.cpp, src/ui/context-menu.h
	  to make it easier to find

2006-04-20  MenTaLguY  <mental@rydia.net>

    * src/dyna-draw-context.cpp, src/dyna-draw-context.h:
	  remove unused timer code

2006-04-19 Andrius R. <knutux@gmail.com>
	* src\display\nr-arena-item.cpp, src\display\canvas-arena.cpp,
	  src\display\nr-arena-shape.cpp, src\display\sp-canvas.h,
	  src\display\nr-arena.cpp, src\display\nr-arena-shape.h,
	  src\display\nr-arena-glyphs.cpp, src\display\nr-gradient-gpl.cpp,
	  src\display\sp-canvas.cpp, src\display\sp-ctrlline.cpp,
	  src\livarot\ShapeSweep.cpp, src\livarot\Shape.h, src\livarot\Shape.cpp,
	  src\livarot\Path.h, src\livarot\PathConversion.cpp,
	  src\livarot\ShapeMisc.cpp, src\livarot\Path.cpp, src\libnr\nr-pixblock.h,
	  src\libnr\nr-pixblock.cpp

	  Rendering optimisation, which gives best results for zoomed in drawings
	  with complex (multi-node) paths. Optimisation focus - eliminating cubicTo
	  and LineTo nodes outside of visible area, so no unneeded calculations is
	  needed and less memory is consumed (this avoids crashes which were
	  occurring previously if zooming into a complex drawing)

2006-04-18 njh <njh@njhurst.com>
	* share/extensions/measure.inx, share/extensions/measure.py, share/extensions/Makefile.am

	  Added the measure extension that marks lengths onto paths.

2006-04-17  MenTaLguY  <mental@rydia.net>

	* src/application/editor.cpp, src/arc-context.cpp, src/conn-avoid-ref.cpp,
	  src/connector-context.cpp, src/desktop-events.cpp, src/desktop-handles.h,
	  src/dialogs/clonetiler.cpp, src/dialogs/export.cpp,
	  src/dialogs/fill-style.cpp, src/dialogs/find.cpp,
	  src/dialogs/iconpreview.cpp, src/dialogs/item-properties.cpp,
	  src/dialogs/layer-properties.cpp, src/dialogs/object-properties.cpp,
	  src/dialogs/stroke-style.cpp, src/dialogs/swatches.cpp,
	  src/dialogs/text-edit.cpp, src/dialogs/tiledialog.cpp,
	  src/dialogs/xml-tree.cpp, src/draw-anchor.cpp, src/draw-context.cpp,
	  src/dropper-context.cpp, src/dyna-draw-context.cpp,
	  src/event-context.cpp, src/extension/implementation/script.cpp,
	  src/file.cpp, src/gradient-context.cpp, src/gradient-drag.cpp,
	  src/helper/stock-items.cpp, src/inkscape.cpp, src/interface.cpp,
	  src/jabber_whiteboard/callbacks.cpp,
	  src/jabber_whiteboard/chat-handler.cpp,
	  src/jabber_whiteboard/message-processors.cpp,
	  src/jabber_whiteboard/message-queue.cpp,
	  src/jabber_whiteboard/session-manager.cpp, src/knot.cpp,
	  src/node-context.cpp, src/nodepath.cpp, src/object-ui.cpp,
	  src/path-chemistry.cpp, src/pencil-context.cpp, src/pen-context.cpp,
	  src/rect-context.cpp, src/rubberband.cpp, src/satisfied-guide-cns.cpp,
	  src/selcue.cpp, src/select-context.cpp, src/selection-chemistry.cpp,
	  src/selection.cpp, src/seltrans.cpp, src/sp-flowtext.cpp,
	  src/spiral-context.cpp, src/splivarot.cpp, src/sp-namedview.cpp,
	  src/sp-text.cpp, src/star-context.cpp, src/text-chemistry.cpp,
	  src/text-context.cpp, src/tools-switch.cpp,
	  src/trace/potrace/inkscape-potrace.cpp, src/trace/trace.cpp,
	  src/ui/dialog/align-and-distribute.cpp, src/ui/dialog/dialog.cpp,
	  src/ui/dialog/document-metadata.cpp,
	  src/ui/dialog/document-properties.cpp,
	  src/ui/dialog/inkscape-preferences.cpp,
	  src/ui/dialog/session-player.cpp, src/ui/dialog/transformation.cpp,
	  src/ui/widget/color-picker.cpp, src/ui/widget/page-sizer.cpp,
	  src/ui/widget/registered-widget.cpp, src/ui/widget/ruler.cpp,
	  src/ui/widget/selected-style.cpp, src/ui/widget/tolerance-slider.cpp,
	  src/verbs.cpp, src/widgets/gradient-toolbar.cpp,
	  src/widgets/layer-selector.cpp, src/widgets/select-toolbar.cpp,
	  src/widgets/sp-xmlview-content.cpp, src/widgets/toolbox.cpp:

	  Get rid of the SP_DT_* macros which do nothing more than provide
	  additional, confusing, names for other functions.  If shorter names
	  are desired, the actual functions should be renamed -- or better, made
	  into member functions.

2006-04-09  Jon A. Cruz  <jon@joncruz.org>

	* share/icons/icons.svg: Fixed jumping eye (layer visibility).

2006-04-07  Jon A. Cruz  <jon@joncruz.org>

	* po/eu.po: Fix a "Unmatched closing </b>" warnings.

2006-04-07  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/paint-selector.cpp, src/widgets/gradient-toolbar.cpp,
	  src/widgets/select-toolbar.cpp, src/widgets/toolbox.cpp,
	  src/dialogs/clonetiler.cpp, src/dialogs/object-properties.cpp:

	  Shrunk a few icon sizes.

2006-04-07  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/desktop-widget.cpp, src/widgets/icon.cpp,
	  src/widgets/layer-selector.cpp:

	  Added implementation of smaller icon size.

2006-04-06  Jon A. Cruz  <jon@joncruz.org>

	* src/color-profile.cpp, src/sp-image.cpp:

	  Simple debugging #ifdefs added.

2006-04-06  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp, src/dialogs/clonetiler.cpp,
	  src/dialogs/object-properties.cpp, src/dialogs/stroke-style.cpp,
	  src/dialogs/text-edit.cpp, src/dialogs/tiledialog.cpp,
	  src/dialogs/xml-tree.cpp, src/ui/dialog/align-and-distribute.cpp,
	  src/ui/widget/labelled.cpp, src/widgets/button.cpp,
	  src/widgets/button.h, src/widgets/desktop-widget.cpp,
	  src/widgets/gradient-toolbar.cpp, src/widgets/icon.cpp,
	  src/widgets/icon.h, src/widgets/layer-selector.cpp,
	  src/widgets/paint-selector.cpp, src/widgets/select-toolbar.cpp,
	  src/widgets/toolbox.cpp, src/widgets/toolbox.h, src/icon-size.h:

	  Decoupling from direct use of GtkIconSize to allow for smaller
	  custom ones.

2006-04-06  Jon A. Cruz  <jon@joncruz.org>

	* src/Makefile_insert, src/Makefile.am, src/color-profile.cpp
	  src/color-profile.h, src/color-profile-fns.h,
	  src/color-profile-test.h, src/sp-image.cpp:

	  Adding rendering-intent to <color-profile>.

2006-04-05  MenTaLguY  <mental@rydia.net>

	* configure.ac, share/keyboards/.cvsignore, share/keyboards/Makefile.am,
	  share/keyboards/README, share/keys/.cvsignore, share/keys/Makefile.am,
	  share/keys/Makefile.in, share/Makefile.am:

	  share/keyboards -> share/keys

	* share/keys/Makefile.am, share/keys/default.xml, src/Makefile_insert,
	  src/shortcuts.cpp, src/shortcuts-default-xml.cpp:

	  first shot at configurable keymaps

2006-04-05  MenTaLguY  <mental@rydia.net>

	* src/io/Makefile_insert, src/io/resource.cpp, src/io/resource.h:

	  introduce uniform resource path API to replace copy-and-pasted hacks

2006-04-05  Jon A. Cruz  <jon@joncruz.org>

	* src/svg/svg-color-test.h, src/svg/svg-color.cpp:

	  Tuned icc-color() parsing.

2006-04-02  Jon A. Cruz  <jon@joncruz.org>

	* src/color-profile.h, src/color-profile.cpp,
	  src/color-profile-fns.h, src/sp-image.h, src/sp-image.cpp:

	  Initial support of color-profile on <image> elements.

2006-04-02  Jon A. Cruz  <jon@joncruz.org>

	* src/color-profile.h, src/color-profile.cpp,
	  src/color-profile-fns.h, src/Makefile_insert, src/attributes.cpp,
	  src/attributes.h, src/sp-object-repr.cpp:

	  Adding support for <color-profile> element.

2006-04-02  Jon A. Cruz  <jon@joncruz.org>

	* src/knot.h: Fixed warning messages.

2006-04-01  Jon A. Cruz  <jon@joncruz.org>

	* src/ui/widget/selected-style.cpp:

	  Safety check for null pointer.
	
2006-04-01  Jon A. Cruz  <jon@joncruz.org>

	* configure.ac, src/interface.cpp, src/dialogs/swatches.cpp:

	  Introducing optional LittleCms use.
	
2006-03-31  MenTaLguY  <mental@rydia.net>

    * src/dyna-draw-context.cpp, src/dyna-draw-context.cpp:

	  merge ::dragging and ::dynahand

2006-03-31  MenTaLguY  <mental@rydia.net>

    * src/dyna-draw-context.h: add documentation

2006-03-29  Andrius R. <knutux@gmail.com>

	* src/enums.h, src/selection-chemistry.cpp,
	  src/selection.h, src/selection.cpp,
	  src/ui/dialog/inkscape-preferences.cpp,
	  src/ui/dialog/inkscape-preferences.h:

	  patch #1450307 - option for select all to work in layer with it's sub-layers

2006-03-29  Andrius R. <knutux@gmail.com>

	* po/lt.po: Translated and added new language - Lithuanian.

2006-03-28  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp, src/dialogs/swatches.cpp:

	  Fixing name of temporary non-standard tag attributes.
	
2006-03-28  MenTaLguY  <mental@rydia.net>

    * src/layer-manager.cpp, src/layer-manager.h: draft of layer manager

2006-03-28  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp, src/dialogs/eek-color-def.h,
	  src/dialogs/eek-preview.h, src/dialogs/eek-preview.cpp,
	  src/dialogs/swatches.h, src/dialogs/swatches.cpp:

	  Changed objects to only get liked to "linkable" colors.
	
2006-03-28  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp, src/dialogs/swatches.cpp:

	  Objects now change when linked colors change.
	
2006-03-28  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/eek-color-def.h, src/dialogs/eek-color-def.cpp,
	  src/dialogs/eek-preview.h, src/dialogs/eek-preview.cpp,
	  src/dialogs/swatches.h, src/dialogs/swatches.cpp:

	  Experimenting with linked colors.
	
2006-03-26  Aaron C. Spike  <aaron@ekips.org>

	* inkscape.pod, src/main.cpp:

	  Added --export-area-canvas (-C). Area specifying options
	  (--export-area, --export-area-canvas and --export-area-drawing)
	  can now be used in combination with --export-id.

2006-03-23  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/eek-color-def.cpp, src/dialogs/eek-color-def.h,
	  src/dialogs/Makefile_insert, src/dialogs/swatches.h,
	  src/dialogs/swatches.cpp:

	  Bringing in new color class.
	
2006-03-23  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/macosx/Resources/bin/inkscape: Fix a packaging
	  problem on Mac OSX where Inkscape wouldn't open if one of the
	  parent directories containing the app bundle contained a '#' in
	  its name.  Fixes bug #1443072.

2006-03-15  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* share/icons/Makefile.am: Update a makefile after the icon file
	  renaming.

2005-03-14  MenTaLguY  <mental@rydia.net>

	* src/layer-fns.h, src/dialogs/layer-properties.cpp,
	  src/dialogs/layer-properties.h, src/layer-fns.cpp:

	  merged patch #1447043 from Andrius "knutux" R. to create sub-layers

2006-03-14  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/display/nr-arena-item.cpp,
	  src/display/nr-arena-item.cpp, src/gc-finalized.h, src/gc-managed.h,
	  src/gc-soft-ptr.h, src/selection.h, src/selection.cpp:

	  Replace GC::Managed<>::clearOnceInaccessible with GC::soft_ptr<>

2006-03-14  MenTaLguY  <mental@rydia.net>

	* src/debug/event.h, src/debug/gc-heap.h, src/debug/heap.h,
	  src/debug/logger.cpp, src/debug/simple-event.h,
	  src/debug/sysv-heap.h, src/jabber_whiteboard/deserializer.cpp,
	  src/jabber_whiteboard/message-utilities.cpp,
	  src/jabber_whiteboard/message-utilities.h,
	  src/jabber_whiteboard/node-tracker-observer.h,
	  src/jabber_whiteboard/serializer.cpp,
	  src/jabber_whiteboard/serializer.h,
	  src/sp-object.cpp, src/util/share.cpp, src/util/share.h,
	  src/xml/attribute-record.h, src/xml/comment-node.h,
	  src/xml/composite-node-observer.cpp, src/xml/composite-node-observer.h,
	  src/xml/event.cpp, src/xml/event.h, src/xml/log-builder.cpp,
	  src/xml/log-builder.h, src/xml/node-observer.h, src/xml/repr-io.cpp,
	  src/xml/simple-node.cpp, src/xml/simple-node.h,
	  src/xml/simple-session.cpp, src/xml/simple-session.h,
	  src/xml/text-node.h:

	  shared_ptr -> ptr_shared

2006-03-13  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/svg/svg-color.cpp (sp_svg_write_color): More readable colour
	  names when possible: e.g. `red', `#cfc'.

2006-03-10  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp:

	  Shift-drop now sets stroke on target objects.
	
2006-03-11  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp: experiment to verify that we can safely release
	  before removing object from document tree

2006-03-10  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/swatches.cpp:

	  Changed color dragging to have a color preview.
	
2006-03-09  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp:

	  Initial cut of color drag-n-drop to items on canvas.
	
2006-03-09  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/path-chemistry.cpp (sp_selected_path_reverse):
	  Fix when multiple paths are selected.
	  Also fix a small memory leak.

2006-03-06  MenTaLguY  <mental@rydia.net>

	* src/document-subset.h, src/document-subset.cpp:
	  add DocumentSubset::_clear

2006-03-05  MenTaLguY  <mental@rydia.net>

	* src/document-subset.h, src/document-subset.cpp:
	  remove unneeded document parameter from constructor

2006-03-05  MenTaLguY  <mental@rydia.net>

	* src/document-subset.cpp:

	  Wire up new SPObject signal to DocumentSubset, so order changes
	  will be reflected in the subset.

2006-03-05  MenTaLguY  <mental@rydia.net>

	* src/sp-object.h, src/sp-object.cpp:

	  Add signal for notification of object position changes.

2006-03-05  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/document-subset.cpp, src/document-subset.h:

	  Add DocumentSubset as groundwork for layers.

2006-03-04  Jon A. Cruz  <jon@joncruz.org>
	* src/ui/widget/selected-style.h, src/ui/widget/selected-style.cpp:

	  Style minibar now only accepts color drag-n-drop when not N/A.
	  Final tweak for completing RFE #1429027.
	
2006-02-28  Jon A. Cruz  <jon@joncruz.org>
	* src/ui/widget/selected-style.h, src/ui/widget/selected-style.cpp:

	  Made the style minibar a target for color drag-n-drop.
	
2006-03-01  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/conn-avoid-ref.cpp, src/libavoid/connector.h,
	  src/libavoid/shape.cpp, src/libavoid/graph.cpp, src/libavoid/shape.h,
	  src/libavoid/graph.h, src/libavoid/router.cpp, src/libavoid/router.h,
	  src/libavoid/connector.cpp, src/libavoid/debug.h:

	  Some speed improvements and interface cleanups to libavoid.

2006-02-28  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/swatches.cpp:

	  Fixed drag-n-drop out of color to match GTK+ standard.
	
2006-02-27  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/swatches.cpp, src/ui/previewfillable.h,
	  src/ui/previewholder.h, src/ui/previewholder.cpp:

	  Finished cleanup of embedded swatches when switching palettes.
	
2006-02-26  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/swatches.cpp, src/ui/previewholder.h,
	  src/ui/previewholder.cpp:

	  Changing embedded swatches resizing.
	
2006-02-26  Jon A. Cruz  <jon@joncruz.org>
	* src/text-context.cpp:

	  Allow Private Use Area characters. Fixes bug #1439016.
	
2006-02-18  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/swatches.cpp, src/dialogs/iconpreview.cpp,
	  src/ui/widget/panel.cpp, src/ui/widget/panel.h:

	  Refactoring panel containment. Purged ugly 'X'.
	
2006-02-18  Jon A. Cruz  <jon@joncruz.org>
	* src/widgets/desktop-widget.cpp, src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h, src/ui/widget/panel.cpp,
	  src/ui/widget/panel.h, src/ui/previewholder.cpp,
	  src/ui/previewholder.h:

	  Adding spacer to get swatches scrollbar enough room to move.
	  Tuning up API for better embedding.

2006-02-18  Jon A. Cruz  <jon@joncruz.org>
	* src/widgets/desktop-widget.cpp, src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h, src/ui/previewholder.cpp, 
	  src/ui/previewfillable.h, src/ui/previewholder.h:

	  Removed horizontal scroll bar from swatches when embedded.

2006-02-15  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	*  src/document.cpp, src/document.h, src/sp-conn-end-pair.cpp, 
	   src/connector-context.cpp, src/conn-avoid-ref.cpp:

	Keep a seperate connector router for each document.
	   
	*  src/libavoid/Makefile_insert, src/libavoid/connector.cpp,
	   src/libavoid/connector.h, src/libavoid/debug.h,
	   src/libavoid/geometry.cpp, src/libavoid/geometry.h,
	   src/libavoid/geomtypes.h, src/libavoid/graph.cpp,
	   src/libavoid/graph.h, src/libavoid/incremental.cpp,
	   src/libavoid/incremental.h, src/libavoid/libavoid.h,
	   src/libavoid/makepath.cpp, src/libavoid/makepath.h,
	   src/libavoid/polyutil.cpp, src/libavoid/polyutil.h,
	   src/libavoid/router.cpp, src/libavoid/router.h,
	   src/libavoid/shape.cpp, src/libavoid/shape.h,
	   src/libavoid/static.cpp, src/libavoid/static.h,
	   src/libavoid/timer.cpp, src/libavoid/timer.h,
	   src/libavoid/vertices.cpp, src/libavoid/vertices.h,
	   src/libavoid/visibility.cpp, src/libavoid/visibility.h:
	   
	Upstream changes to libavoid that allow multiple connector 
	router instances, as well a few other minor bugfixes.

2006-02-14  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/display/sp-canvas.cpp, display/sp-canvas.h, connector-context.cpp:
	
	Revert a previous change that generated enter events for canvas items
	other than the current one when mouse buttons were depressed.  These 
	events are now only generated in the connector context, where they are
	required.

2006-02-13  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/graphlayout/graphlayout.cpp, src/conn-avoid-ref.cpp,
	  src/conn-avoid-ref.h, src/libavoid/connector.cpp,
	  src/libavoid/connector.h:
	  
	Change the behaviour and naming of some connector querying code
	after feedback from Tim Dwyer in implementing graph drawing
	functionality.

2006-02-11  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end-pair.cpp, src/conn-avoid-ref.cpp:
	  Fix two bugs from my commit yesterday.

2006-02-10  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end-pair.cpp, src/sp-conn-end-pair.h,
	  src/conn-avoid-ref.cpp, src/conn-avoid-ref.h,
	  src/libavoid/connector.cpp, src/libavoid/connector.h,
	  src/libavoid/visibility.cpp:

	Add some code to allow querying of items and connectors to find
	out what is attached to them.  This will allow graph layout
	algorithms (currently being worked on by Tim Dwyer) to determine 
	a graph structure from the diagram.

2006-02-07  MenTaLguY  <mental@rydia.net>

	* src/widgets/icon.cpp: get rid of icon prerender time messages

2006-02-07  MenTaLguY  <mental@rydia.net>

	* src/debug/gc-heap.h, src/debug/logger.cpp, src/debug/sysv-heap.h,
	  src/jabber_whiteboard/deserializer.cpp, src/sp-object.cpp,
	  src/util/share.h, src/xml/simple-node.cpp:

	  share_static -> share_static_string

2006-02-07  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/jabber_whiteboard/message-utilities.h,
	  src/jabber_whiteboard/serializer.cpp,
	  src/jabber_whiteboard/deserializer.cpp,
	  src/jabber_whiteboard/message-utilities.cpp,
	  src/ui/dialog/whiteboard-connect.cpp:
	
	Some fixes to allow the codebase to compile with Inkboard support
	after the recent Util::shared_ptr<> and Dialog::present() changes.

2006-02-05  Marco Scholten  <mscholtn@xs4all.nl>

	* src/verbs.cpp: updated to make double clicking a tool button
	  open the new preferences dialog.
	* src/ui/dialog/inkscape-preferences.cpp: updated to enable opening
	  the dialog on the correct page.
	* src/ui/dialog/dialog.cpp: added virtual void present() so that
	  InkscapePreferences::present() will be called from 
	  DialogManager::showDialog()

2006-02-05  MenTaLguY  <mental@rydia.net>

	* src/debug/event.h, src/debug/gc-heap.h, src/debug/heap.h,
	  src/debug/logger.cpp, src/debug/simple-event.h, src/debug/sysv-heap.h,
	  src/jabber_whiteboard/deserializer.cpp,
	  src/jabber_whiteboard/message-utilities.cpp,
	  src/jabber_whiteboard/message-utilities.h,
	  src/jabber_whiteboard/node-tracker-observer.h,
	  src/jabber_whiteboard/node-utilities.cpp,
	  src/jabber_whiteboard/serializer.cpp,
	  src/jabber_whiteboard/serializer.h,
	  src/sp-object.cpp, src/util/Makefile_insert, src/util/share.cpp,
	  src/util/shared-c-string-ptr.cpp, src/util/shared-c-string-ptr.h,
	  src/util/share.h, src/xml/attribute-record.h, src/xml/comment-node.h,
	  src/xml/composite-node-observer.cpp, src/xml/composite-node-observer.h,
	  src/xml/event.cpp, src/xml/event.h, src/xml/log-builder.cpp,
	  src/xml/log-builder.h, src/xml/node-observer.h, src/xml/repr.cpp,
	  src/xml/repr-io.cpp, src/xml/simple-node.cpp, src/xml/simple-node.h,
	  src/xml/simple-session.cpp, src/xml/simple-session.h,
	  src/xml/text-node.h:

	  replace Util::SharedCStringPtr with the nicer and more general
	  Util::shared_ptr<>

2006-02-03  Jon Phillips  <jon@rejon.org>

	* src/verbs.cpp: Added "..." to "Trace Bitmap" text. Yes, what a
	simple and dumb thing to add for consistency.

2006-01-24  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/libavoid/connector.cpp, src/libavoid/connector.h, 
	  src/libavoid/shape.cpp, src/libavoid/graph.cpp,
	  src/libavoid/incremental.cpp, src/libavoid/incremental.h,
	  src/libavoid/static.cpp, src/libavoid/visibility.cpp, 
	  src/libavoid/makepath.cpp:

	Some minor upstream libavoid fixes.  

2006-01-23  Carl Hetherington  <inkscape@carlh.net>

	* src/selection.cpp: fix a typo in one of my previous commits.
	Closes #1401357.

	* src/xml/repr-io.cpp: catch failures in fopen of XML files.
	Closes #1374551.

2006-01-20  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/widgets/toolbox.cpp, src/widgets/desktop-widget.cpp,
	  src/conn-avoid-ref.cpp, src/conn-avoid-ref.h, src/sp-namedview.cpp,
	  src/sp-namedview.h, src/attributes.cpp, src/attributes.h,
	  src/attributes-test.cpp:

	Added a "Spacing" control to the connector toolbar which allows
	the user to adjust the amount of space left around avoided shapes
	for the purpose of determining auto-routing connector paths.

2006-01-17  Marco Scholten  <mscholtn@xs4all.nl>

	* /src/ui/dialog/inkscape-preferences.cpp:
	  Added style swatches,
	  Changed Gtk::Requisition Gtk::Widget::size_request() to 	
	  void Gtk::Widget::size_request(const Requisition& requisition)	
	* /src/ui/dialog/preferences-widget.cpp & .h:
	  Added DialogPage::set_tip()

2006-01-17  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh, packaging/macosx/Resources/etc/fonts/fonts.conf:
	  Use a modified fonts.conf file for Mac OS X that includes the 
	  standard user font directory ~/Library/Fonts.

2006-01-16  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/svg/Makefile_insert: Updated to reflect a previous header
	  file renaming.

2006-01-12  Marco Scholten  <mscholtn@xs4all.nl>

	* /src/ui/dialog/inkscape-preferences.cpp & .h:
	  Converted preferences dialog to gtkmm
	* src/ui/widget/preferences-widget.cpp & .h:
	  New files.
	* src/verbs.cpp: updated to start new dialog.

2006-01-11  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-item-group.cpp, src/sp-path.cpp, src/sp-star.cpp,
	  src/extension/internal/svg.cpp, src/ui/widget/ruler.cpp:
	  Fix some compilation problems on Mac OS X after recent
	  includes cleanup.

2006-01-05  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/desktop-widget.cpp:
	  Corrected resize behavior of canvas/swatches split.

2006-01-06  Mathieu Dimanche  <mdimanche@free.fr>

	* src/util/units.cpp: forcin 'C' locale for reading units.txt file
	   Fixes bug #1391348.

2006-01-05  MenTaLguY  <mental@rydia.net>

	* src/libnr/nr-maybe.h: fix constness/local reference issues

2006-01-04  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/shortcuts-default-xml.cpp,
	  src/shortcuts.cpp, src/shortcuts.xml:

	  Moved default shortcuts XML file into a string constant (for now);
	  replaced hard-coded structure with code to read XML file.

2006-01-04  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/extension/internal/ps.cpp (setup): Clarify the meaning of
	  `Print destination', mentioning the new possibility of leaving
	  as empty.
	* (PrintPS::begin) If print destination is an empty string, then
	  don't pass `-P %s' to lpr: just let lpr use its default.
	* (PrintPS::init) Change default print destination from `lp' to empty
	  string.

2006-01-04  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/desktop-widget.cpp:
	  Adding split pane for swatches.

2006-01-03  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/libavoid/visibility.cpp: Add operator!= for the EdgePair class.
	  This is needed to compile on Tru64 UNIX.  Fixes bug #1386755.

2005-12-30  Josh Andler  <scislac@users.sf.net>

	* src/ui/widget/selected-style.cpp, src/ui/widget/selected-style.h
	  Added "invert" function to right-click menu of style selector.

2005-12-22  Jon A. Cruz  <jon@joncruz.org>

	* share/palettes/Tango-Palette.gpl:
	  Updated to newer version from the Tango project.

2005-12-21  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp, src/preferences-skeleton.h,
	  src/widgets/desktop-widget.h, src/widgets/desktop-widget.cpp:
	  Adding panels/swatches to main UI.

2005-12-23  Tim Dwyer  <tdwyer@mail.csse.monash.edu.au>

	* src/removeoverlap/*.{cpp,h}: Bug fix in removeoverlap algorithm that
	  should finally get timestamps working properly.  Specifically, heap
	  timestamps are now refreshed before a merge.

2005-12-19  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end.cpp, src/connector-context.cpp: Have connectors
	  draw to the correct position on shape bounding boxes.  Previously
	  the point where connectors were drawn was on straight line between
	  the two endpoints.  These points now lie on the line between the 
	  second last point on the polyline and the center of the shape.
	  
	* src/display/curve.cpp, src/display/curve.hpp: Added a couple of 
	  functions that return the second and second-last points in a curve.

	* src/removeoverlap/generate-constraints.cpp: Moved the 
	  #include "isnan.h" to be the final include.  This fixes a
	  compilation error on OS X.

2005-12-16  Carl Hetherington  <inkscape@carlh.net>

	* src/conn-avoid-ref.cpp, sp-conn-end-pair.cpp, sp-conn-end.cpp,
	sp-item.cpp, sp-shape.cpp, dialogs/clonetiler.cpp,
	dialogs/stroke-style.cpp, dialogs/tiledialog.cpp,
	dialogs/unclump.cpp, display/nr-arena-shape.cpp,
	display/nr-arena-shape.h, widgets/icon.cpp: more NRRect removal.

	* src/desktop.cpp, src/desktop.h, src/dyna-draw-context.cpp,
	src/selection-chemistry.cpp, src/sp-namedview.cpp, src/verbs.cpp,
	src/display/sp-canvas.cpp, src/display/sp-canvas.h,
	src/ui/view/edit-widget.cpp, src/ui/widget/zoom-status.cpp,
	src/widgets/desktop-widget.cpp: more NRRect removals and cleanups.

	* src/grid-snapper.cpp: snap only to visible grid lines (patch
	from mtou).

2005-12-15  Carl Hetherington  <inkscape@carlh.net>

	* src/conn-avoid-ref.cpp, src/gradient-chemistry.cpp,
	src/sp-conn-end.cpp, src/sp-item.{cpp,h}: NR::Rect version of
	sp_item_invoke_bbox (SPItem::invokeBbox).  Use it in some places.

2005-12-14  Carl Hetherington  <inkscape@carlh.net>

	* src/dyna-draw-context.cpp, src/gradient-context.cpp,
	src/selection.h, src/sp-flowtext.cpp, src/sp-item.cpp,
	src/sp-item.h, src/sp-shape.cpp, src/sp-text.cpp,
	src/dialogs/layer-properties.cpp,
	src/extension/internal/bluredge.cpp,
	src/extension/internal/grid.cpp, src/ui/dialog/transformation.cpp,
	src/widgets/desktop-widget.cpp: remove NRMatrix version of
	sp_item_i2d_affine().  Some include file adjustments.

	* src/arc-context.cpp: some very minor cleanups.

	* src/svg/svg-length.{cpp,h}, src/helper/units.cpp: use INCH
	rather than IN to avoid breaking the compile on some systems.

2005-12-13  Carl Hetherington  <inkscape@carlh.net>

	* src/arc-context.cpp, src/connector-context.cpp,
	src/context-fns.cpp, src/desktop-affine.cpp, src/desktop-affine.h,
	src/desktop-events.cpp, src/desktop.cpp, src/desktop.h,
	src/draw-anchor.cpp src/dropper-context.cpp,
	src/dyna-draw-context.cpp, src/event-context.cpp
	src/gradient-context.cpp, src/knot.cpp, src/node-context.cpp,
	src/object-snapper.cpp src/pen-context.cpp,
	src/pencil-context.cpp, src/rect-context.cpp
	src/select-context.cpp, src/selection-chemistry.cpp,
	src/sp-item.cpp, src/sp-item.h src/spiral-context.cpp,
	src/star-context.cpp, src/text-context.cpp src/zoom-context.cpp,
	src/ui/widget/ruler.cpp: make desktop's transforms private
	members.

	* src/document.cpp, src/object-edit.cpp, src/sp-ellipse.cpp,
	src/sp-ellipse.h, src/sp-gradient.cpp, src/sp-image.cpp,
	src/sp-image.h, src/sp-line.cpp, src/sp-line.h,
	src/sp-linear-gradient.h, src/sp-marker.cpp, src/sp-marker.h,
	src/sp-pattern.cpp, src/sp-pattern.h, src/sp-radial-gradient.h,
	src/sp-rect.cpp, src/sp-rect.h, src/sp-root.cpp, src/sp-root.h,
	src/sp-star.cpp, src/sp-symbol.h, src/sp-text.cpp,
	src/sp-textpath.h, src/sp-tspan.cpp, src/sp-use.cpp, src/sp-use.h,
	src/text-tag-attributes.h, src/helper/units.cpp,
	src/helper/units.h, src/libnrtype/Layout-TNG-Compute.cpp,
	src/libnrtype/Layout-TNG-Input.cpp,
	src/libnrtype/Layout-TNG-OutIter.cpp,
	src/libnrtype/Layout-TNG-Output.cpp, src/libnrtype/Layout-TNG.h,
	src/libnrtype/TextWrapper.cpp, src/svg/svg-length.cpp,
	src/svg/svg.h: partial C++-ificiation of SPSVGLength.  Rename it
	to SVGLength.

2005-12-13  Mathieu Dimanche <mdimanche@free.fr>

	* src/snapped-point.{cpp,h} : new files.

	* src/Makefile_insert : Added the new files

	* src/arc-context.cpp, src/connector-context.cpp,
	src/context-fns.cpp, src/draw-context.cpp, src/nodepath.cpp,
	src/object-edit.cpp, src/pencil-context.cpp,
	src/selection-chemistry.cpp, src/seltrans.cpp, src/snap.cpp,
	src/spiral-context.cpp, src/star-context.cpp,
	src/line-snapper.cpp, src/line-snapper.h, src/object-snapper.cpp,
	src/object-snapper.h src/snapper.cpp, src/snapper.h,
	src/event-context.cpp, src/rect-context.cpp,
	src/select-context.cpp : Use SnappedPoint class

	* src/color-rgba.h : Added rgba32 unsigned int handling and
	"inverse" members (NEED TO BE TESTED)

2005-12-12  MenTaLguY  <mental@rydia.net>

	* src/widgets/desktop-widget.cpp: moved some widgets into statusbar
	  widget for more aesthetic appearance

2005-12-12  Carl Hetherington <inkscape@carlh.net>

	* src/arc-context.cpp: minor cleanups.  Use SnapManager more.  Use
	Inkscape::setup_for_drag_start.

	* src/connector-context.cpp, src/draw-context.cpp,
	src/object-edit.cpp, src/pencil-context.cpp, src/rect-context.cpp,
	src/spiral-context.cpp, src/star-context.cpp: use SnapManager.

	* src/rect-context.cpp, src/spiral-context.cpp,
	src/star-context.cpp: use Inkscape::setup_for_drag_start().

	* src/snapper.{cpp,h}: simplify snap point types code.

	* src/context-fns.{cpp,h}: add setup_for_drag_start().

	* src/dyna-draw-context.cpp: remove unused and erroneous snapping code.

	* src/pen-context.cpp: remove unused variable.

	* src/draw-context.cpp: use SnapManager.

	* src/nodepath.cpp: const fixes.  Use SnapManager.

	* src/selection-chemistry.cpp, src/seltrans.cpp: some cleanups.
	Use new snap API.

	* src/snap.{cpp,h}: remove some dead code.

	* src/sp-item.{cpp,h}, src/node-context.cpp, src/draw-context.cpp:
	remove an unnecessary parameter from sp_item_dt2i_affine().

2005-12-09  Carl Hetherington <inkscape@carlh.net>

	* src/object-snapper.cpp: make node snapping work again.

	* src/star-context.cpp: use SnapManager.  Some other minor cleanups.

	* src/arc-context.cpp, src/connector-context.cpp,
	src/dyna-draw-context.cpp, src/pen-context.cpp,
	src/pencil-context.cpp, src/rect-context.cpp,
	src/selection-chemistry.cpp, src/spiral-context.cpp,
	src/star-context.cpp, src/text-context.cpp: use
	Inkscape::have_viable_layer.

	* src/context-fns.{cpp,h}: new files.

	* src/arc-context.cpp, src/context-fns.{cpp,h},
	src/rect-context.cpp: abstract common code into context-fns and
	clean it up a bit.

2005-12-08  Carl Hetherington <inkscape@carlh.net>

	* src/grid-snapper.cpp, src/guide-snapper.cpp, src/line-snapper.h:
	coding style.  Change how lines are defined.

	* src/grid-snapper.h, src/guide-snapper.h: coding style.

	* src/line-snapper.cpp, src/object-snapper.{cpp,h}: Coding style.
	Various cleanups.  Small API changes.

	* src/snap.cpp: changes to Snapper API.  Added work-in-progress SnapManager.

	* src/snapper.{cpp,h}: API cleanups.

	* src/sp-namedview.{cpp,h}: added getSnappers().

	* src/seltrans.cpp: Cleanup and fix moveTo().  Go back to snapping
	to snap points rather than the convex hull, at least for a bit.

2005-12-07  Carl Hetherington <inkscape@carlh.net>

	* src/libnr/nr-convex-hull.h: remove unnecessary includes.

	* src/line-snapper.{cpp,h}, src/object-snapper.{cpp,h},
	src/attributes.{cpp,h}, src/desktop.cpp, src/dyna-draw-context.cpp
	src/arc-context.cpp, src/grid-snapper.h, src/nodepath.cpp,
	src/rect-context.cpp, src/selection-chemistry.cpp,
	src/seltrans.cpp, src/snap.{cpp,h}, src/snapper.{cpp,h},
	src/sp-namedview.{cpp,h}, src/spiral-context.cpp,
	src/star-context.cpp, src/dialogs/desktop-properties.{cpp,h},
	src/Makefile_insert: first cut of object snapping.

	* src/grid-snapper.cpp, src/guide-snapper.{cpp,h}: use Inkscape namespace.

2005-12-06  Carl Hetherington <inkscape@carlh.net>

	* src/libnr/nr-maybe.h: add missing public: to class IsNot.

	* src/splivarot.{cpp,h}: declare some more functions.  Fix
	get_nearest_position_on_Path to not crash if you call it with an
	Item that isn't Shape or Text.

	* src/node-context.cpp: adapt for changes in splivarot.{cpp,h}.

	* src/nodepath.cpp: remove declaration of a function now declared
	in splivarot.h.

2005-12-05  Carl Hetherington <inkscape@carlh.net>

	* src/desktop.cpp, src/tools-switch.cpp,
	src/dialogs/clonetiler.cpp, src/dialogs/display-settings.cpp:
	re-jig #includes slightly.

	* src/seltrans.{cpp,h}, src/selcue.{cpp,h}: C++-ification and cleanup.

	* src/select-context.{cpp,h}, src/seltrans-handles.h: adapt for
	changes to SelTrans.

	* src/event-context.{cpp,h}: adapt for changes to SelCue.

	* src/rect-context.cpp, src/gradient-context.cpp: remove unnecessary include.

	* src/connector-context.h, src/draw-context.h: add a forward
	declaration.

	* src/dropper-context.{cpp,h}: remove an unused variable and its
	associated includes.

	* src/main.cpp: fix comment for renamed SPSelCue.

	* src/dialogs/display-settings.cpp: adapt for slightly re-jigged SelCue.

2005-12-04  Ted Gould  <ted@gould.cx>

	* po/POTFILES.in:

	Adding the .inx files as [type: gettext/xml] so that they will get
	translated.  Good stuff.

	* share/extensions/addnodes.inx, share/extensions/ai_input.inx,
	share/extensions/ai_output.inx, share/extensions/bluredge.inx,
	share/extensions/dia.inx, share/extensions/dots.inx,
	share/extensions/dropshadow.inx, share/extensions/dxf_input.inx,
	share/extensions/dxf_output.inx, share/extensions/embedimage.inx,
	share/extensions/eps_input.inx, share/extensions/epsi_output.inx,
	share/extensions/ffmet.inx, share/extensions/ffms.inx,
	share/extensions/ffset.inx, share/extensions/ffss.inx,
	share/extensions/gimpgrad.inx, share/extensions/grid.inx,
	share/extensions/handles.inx, share/extensions/interp.inx,
	share/extensions/kochify.inx, share/extensions/kochify_load.inx,
	share/extensions/lindenmayer.inx, share/extensions/motion.inx,
	share/extensions/pdf_output.inx, share/extensions/ps_input.inx,
	share/extensions/radiusrand.inx, share/extensions/randompnt.inx,
	share/extensions/randompos.inx, share/extensions/rtree.inx,
	share/extensions/sk_input.inx, share/extensions/straightseg.inx,
	share/extensions/summersnight.inx, share/extensions/svgz_input.inx,
	share/extensions/svgz_output.inx, share/extensions/txt2svg.inx,
	share/extensions/wavy.inx, share/extensions/whirl.inx,
	share/extensions/wmf_input.inx:

	Marking the user visible strings as translatable.

	* src/extension/dependency.cpp, src/extension/extension.cpp,
	src/extension/init.cpp, src/extension/input.cpp, src/extension/output.cpp,
	src/extension/parameter.cpp:

	Changed to handle translated .inx files.  They will find the data, and
	mark the right strings as translated.

	* src/extension/effect.cpp, src/extension/effect.h, src/interface.cpp:

	Changed menu handling to be push instead of pull

2005-12-02  Carl Hetherington <inkscape@carlh.net>

	* src/dropper-context.cpp: coding style.
	* src/sp-namedview.cpp, src/sp-namedview.h, src/desktop.cpp: some
	C++-ification of SPNamedView.

2005-12-01  MenTaLguY  <mental@rydia.net>

	* src/widgets/desktop-widget.cpp: shuffle status bar around again;
	  add a grippie so we don't have to care about the corner of the window
	  getting covered up

2005-12-01  MenTaLguY  <mental@rydia.net>

	* src/widgets/icon.cpp: refactored a bit around the icon prerendering
	  code and added a timer; also kick off the task immediately rather
	  than waiting for the first expose event

2005-12-01  MenTaLguY  <mental@rydia.net>

	* src/widgets/desktop-widget.cpp:

	  moved zoom selector away from the right edge so it won't get covered
	  by window manager decorations

2005-12-01  MenTaLguY  <mental@rydia.net>

	* src/help.cpp, src/ui/dialog/aboutbox.h, src/ui/dialog/aboutbox.cpp:

	  Moved creation of the splash widget into the about dialog code,
	  and tweaked the appearance of the dialog in a lot of subtle ways
	  -- we now use an AspectFrame to constrain the aspect ratio of the
	  splash view, and also finally get the correct initial size for the
	  dialog while still allowing it to be arbitrarily resized.

2005-12-01  Carl Hetherington <inkscape@carlh.net>

	* src/sp-namedview.cpp: coding style.

2005-12-01  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/icon.cpp: added idle calback pre-render.

2005-11-30  MenTaLguY  <mental@rydia.net>

	* src/ui/dialog/aboutbox.cpp: make 'close' button default widget,
	  and rename "About" tab to "_Splash"

2005-11-30  Carl Hetherington <inkscape@carlh.net>

	* src/svg/svg-path.cpp: add missing #include of assert.h for
	assert()
	* src/dialogs/xml-tree.cpp: fix uninitialised variable
	warnings, move some declarations to first use, coding style fixes.
	* src/snap.cpp, src/snap.h, src/sp-namedview.cpp: split
	snap.{cpp,h} up into snapper.{cpp,h}, grid-snapper.{cpp,h},
	guide-snapper.{cpp,h}.  Refactor and simplify.  Add another
	namedview_free_snap().
	* src/geom.cpp, src/geom.h: cosmetic renaming.
	* src/pen-context.cpp: a few minor cleanups to
	pen_handle_button_press().  Other snapping cleanups.
	* src/draw-context.cpp, src/draw-context.h: split
	spdc_endpoint_snap_internal() into two functions.
	* src/pencil-context.cpp: snapping cleanups.
	* src/ui/widget/unit-menu.cpp: remove definition of a variable
	that's just been made static.
	
2005-11-26  MenTaLguY <mental@rydia.net>

	* src/ui/dialog/aboutbox.cpp, src/ui/dialog/aboutbox.h:
	  clean up and simplify About dialog; fix memory management (mostly)

2005-11-25  Robert Crosbie <swingincelt@gmail.com>

	* replaced sp_repr_ref with direct cal to Inkscape::GC::anchor
	* replaced sp_repr_unref with direct call to Inkscape::GC::release
	* replaced sp_repr_set_attr with direct call to repr->setAttribute

2005-11-24  MenTaLguY  <mental@rydia.net>

	* src/shortcuts.cpp, src/interface.cpp: prune back shortcuts API in
	  preparation for configurable key bindings work

2005-11-24  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp: remedy erroneous initialization of doubles with NULL

2005-11-24  MenTaLguY  <mental@rydia.net>

	* src/seltrans.cpp: prune dead wood (sp_sel_trans_handle_click)

2005-11-24  MenTaLguY  <mental@rydia.net>

	* src/display/canvas-arena.cpp, src/display/canvas-bpath.cpp,
	  src/display/canvas-grid.cpp, src/display/guideline.cpp,
	  src/display/sodipodi-ctrl.cpp, src/display/sodipodi-ctrlrect.cpp,
	  src/display/sp-canvas-util.cpp, src/display/sp-canvas-util.h,
	  src/display/sp-ctrlline.cpp, src/display/sp-ctrlquadr.cpp:
	  
	  cosmetic renaming

2005-11-23  Robert Crosbie <swingincelt@gmail.com>

	* replaced sp_repr_change_order with direct cal to repr->changeOrder
	* replaced sp_repr_add_child with direct call to repr->addChild
	* replaced sp_repr_remove_child with direct call to repr->removeChild

2005-11-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/ui/dialog/align-and-distribute.h, src/ui/dialog/align-and-distribute.cpp:
	  Add new action ActionRemoveOverlaps, and add new button & two spin buttons
	  to the Align & Distribute dialog box, to remove overlaps between objects.
	* configure.ac: New directory src/removeoverlap.
	* src/Makefile.am: Build new library removeoverlap/libremoveoverlap.a.
	* src/Makefile_insert: Link against new library removeoverlap/libremoveoverlap.a.

2005-11-23  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh, packaging/macosx/Resources/bin/inkscape:
	  Include some missing modules required by gnome-vfs and set shell
	  variables to point to these modules within the OS X app bundle.
	  Fixes bug #1363390.

2005-11-21  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh: Fix a typo resulting from last change.

2005-11-18  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh: Add libXinerama.1.dylib to the app bundle 
	  since users of OS X 10.3.x will not have this file.

2005-11-12  Jon Phillips <jon@rejon.org>

	* po/it.po po/sr.po po/sr@Latn.po: Fixed these po files so that 
	Inkscape builds okay.


2005-11-12  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/ui/view/edit-widget.h, src/ui/view/edit-widget.cpp:
	  new-gui: made complete statusbar widget, equals old-gui now
	* src/widgets/layer-selector.h, src/ui/widget/selected-style.h:
	  classes have now a constructor with default parameter
	* src/ui/widget/zoom-status.cpp: smaller font

2005-11-12  MenTaLguY  <mental@rydia.net>

	* src/display/canvas-arena.cpp, src/display/canvas-bpath.cpp,
	  src/display/canvas-grid.cpp, src/display/guideline.cpp,
	  src/display/sodipodi-ctrl.cpp, src/display/sodipodi-ctrlrect.cpp,
	  src/display/sp-canvas-util.cpp, src/display/sp-canvas-util.h,
	  src/display/sp-canvas.cpp, src/display/sp-canvas.h,
	  src/display/sp-ctrlline.cpp, src/display/sp-ctrlquadr.cpp:

	  Refactor canvas buffer code a little.   Hint: if you have two flags
	  and an invariant that one will be false if the other is true and
	  vice-versa, you can represent them with a single flag.  Fixed
	  cut-and-paste madness between sp_canvas_buf_ensure_buf and
	  sp_canvas_clear_buf also.  Finally, renamed sp_canvas_buf_ensure_buf
	  to sp_canvas_prepare_buf.

2005-11-09  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-item.cpp: Call updateRepr before emitting the transformed
	  signal in sp_item_write_transform.  This fixes bug #1303423.

	* packaging/osx-app.sh: Fixes to allow building app bundles on both
	  OS X 10.4 and earlier versions of the OS without altering the script.
	  Also, add a note that Inkscape needs to be configured with
	  --enable-osxapp when building the OS X package.

	* po/nl.po: Fix an "Unmatched closing </b>" warning.

2005-11-08  Ralf Stephan <ralf@ark.in-berlin.de>

	merged with branch CXXIFICATION_VIEW_AND_WIDGET
	* src/arc-context.cpp, src/dyna-draw-context.cpp, src/event-context.cpp,
	  src/file.cpp, gradient-context.cpp, src/inkscape.cpp, src/interface.cpp,
	  src/rect-context.cpp, src/select-context.cpp, src/seltrans.cpp,
	  src/sp-namedview.cpp, src/spiral-context.cpp, src/star-context.cpp,
	  src/verbs.cpp, dialogs/dialog-events.cpp, src/dialogs/layer-properties.cpp,
	  src/ui/dialog/dialog.cpp, src/widgets/desktop-widget.cpp,
	  src/widgets/desktop-widget.h:
	  move gtk code into desktop-widget.cpp, called via desktop
	* src/ui/view/Makefile_insert: added files edit-widget-interface.h,
	  edit-widget.cpp, edit-widget.h
	  the EditWidget is the Gtkmm version of the SPDesktopWidget
	* src/ui/widget/Makefile_insert: added files ruler.cpp, ruler.h,
	  svg-canvas.cpp, svg-canvas.h, zoom-status.cpp, zoom-status.h
	  these are widgets part of the EditWidget
	* src/file.cpp, src/inkscape.cpp, src/ui/dialog/dialog.cpp, 
	  src/ui/dialog/dialog.h, src/application/application.h, 
	  src/application/application.cpp:
	  divide code /wrt Application::getNewGui(): if true, it's called by the 
	  Gtkmm application and the inkscape object is meaningless
	* src/application/app-prototype.h:
	  replace UI specific return value of getWindow() with void*
	* src/application/editor.cpp, src/application/editor.h:
	  made Editor a singleton, collect global UI code here that (for Gtk+)
	  lives in inkscape.cpp and elsewhere
	* src/desktop-events.cpp, src/desktop.cpp, src/event-context.cpp,
	  src/nodepath.cpp, src/seltrans.cpp:
	  simplify calls to desktop->set_coordinate_status
	* src/desktop-handles.cpp, src/desktop-handles.h, 
	  src/extension/internal/ps.cpp, src/widgets/gradient-toolbar.cpp, 
	  src/widgets/toolbox.cpp:
	  widget is no longer available through desktop
	* src/Makefile_insert: added files preferences.h preferences.cpp
	  src/inkscape.h, src/inkscape.cpp, src/application/editor.cpp:
	  move preferences handling into preferences.cpp/h
	* src/desktop.cpp, src/desktop.h:
	  use EditWidgetInterface, more cosmetics
	* src/desktop.cpp, src/inkview.cpp, src/slideshow.cpp, src/svg-view-widget.cpp,
	  src/svg-view.cpp, src/svg-view.h, src/ui/view/view.cpp, src/ui/view/view.h:
	  streamline setDoc()/setDocument() logic
	* src/inkview.cpp: include empty func bodies to make linker happy

2005-11-08 ------------0.43

2005-11-06  Ted Gould  <ted@gould.cx>

	* 0.43pre2

2005-11-01  Jon A. Cruz  <jon@joncruz.org>

	* src/io/base64stream.h, src/io/base64stream.cpp:
	  Applied modified patch 1341198.

2005-10-31  Jon A. Cruz  <jon@joncruz.org>

	* src/verbs.cpp:
	  Applied patch from RFE 1247694.

2005-10-26  Jon A. Cruz  <jon@joncruz.org>

	* share/screens/about.svg:
	  Trimmed bad lines. Fixed bug 1310742.

2005-10-24  Ted Gould  <ted@gould.cx>

	* 0.43pre1

2005-10-22  Jon A. Cruz  <jon@joncruz.org>

	* Makefile.mingw, src/io/sys.cpp:
	  Patch 1334818.

2005-10-22  Jon A. Cruz  <jon@joncruz.org>

	* src/main.cpp, src/io/sys.cpp:
	  Updating Win32 parameter filename handling.

2005-10-22  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp: Correct two typos.  Fixes bug #1333915.

2005-10-21  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp: Fix a bug where undoing creation of 
	  new connectors revealed intermediate steps.

	* src/libavoid/connector.cpp, src/libavoid/connector.h,
	  src/libavoid/makepath.cpp, src/libavoid/static.cpp:
	  Applied a couple of libavoid fixes.  One of which addresses
	  a possible crash bug.

2005-10-19  Ted Gould  <ted@gould.cx>

	* 0.43pre0

2005-10-19  Jon A. Cruz  <jon@joncruz.org>

	* inkscape32-16.ico: patch 1323419

2005-10-17  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/conn-avoid-ref.cpp: Don't pass avoided objects to libavoid
	  if they have the 'cloned' flag set.  Fixes bug #1328401.

2005-10-17  Jon A. Cruz  <jon@joncruz.org>

	* src/main.cpp, src/io/sys.h, src/io/sys.cpp:
	  Switched command-line name conversion from filename to locale.
	  Fixes bug #1250124.

2005-10-16  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end.cpp: Don't update the repr for the curve while 
	  manually rerouting connector endpoints.  This speeds up undo/redo
	  and allows responsive rerouting with the xml editor window open.
	  Fixes bug #1315489.

	* po/ca.po: Fix unclosed <b> found in translations.
	
2005-10-15  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/isnan.h: Update to allow compilation on OSX 10.4.

	* src/connector-context.cpp, src/connector-context.h,
	  src/tools-switch.cpp: Allow double-clicking on connectors
	  in the selector tool to swap to the connector tool.

2005-10-14  Jon A. Cruz  <jon@joncruz.org>

	* share/palettes/Makefile.am, share/palettes/Tango-Palette.gpl:
	  Adding the Tango palette.

2005-10-13  MenTaLguY  <mental@rydia.net>

	* share/screens/about.svg: New copy for about dialog; did some
	  vector clean-up and re-enabled the coffee stains.

2005-10-10  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end-pair.cpp, src/sp-conn-end-pair.h:
	  Reroute connector lines if the object itself is moved or
	  transformed.  Previously a routed line would not unroute if it
	  was moved away from the blocking objects.  Fixes bug #1303493.

2005-10-07  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/macosx/Resources/script, src/path-prefix.h:
	  Don't assume the OSX app bundle will be named "Inkscape.app".
	  This caused things like tool icons to disappear if the app
	  bundle was renamed, e.g., to "Inscape-0.42.2.app".
	  Fixes bug #1289648.

2005-10-06  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end-pair.cpp: Fix a bug where connectors could
	  sometimes be given strange routes if there was a transform on
	  either of the objects that the connector was attached to.

	* src/conn-avoid-ref.cpp, src/sp-conn-end.cpp: Add a call to
	  sp_document_ensure_up_to_date before checking bounding boxes
	  in response to a transform signal.  This is because some
	  objects (e.g., text) will not give the correct bbox until its
	  update function has been called and its internal representation
	  has been updated.  This fixes bug #1303523.

	* src/dialogs/display-settings.cpp, src/dialogs/display-settings.h:
	  Restore the Connector tool preferences tab.  Use same ordering
	  for tools as on the toolbar.  Add the standard selection cue
	  option to the connector tool preferences.  Fixes bug #1303360.

2005-10-05  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh: Include locale files in the OSX package and
	  a couple of minor updates for building packages on OSX 10.4.x.

	* packaging/macosx/Resources/bin/inkscape: Fix a problem in setting
	  LANG to the current OSX language before launching Inkscape.
	  With this fix, the Inkscape app bundle will obey the user's
	  language setting in the system preferences on OSX.

2005-09-30  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.*, src/widget/desktop-widget.cpp:
	make empty destructor, fixes #1291009

2005-09-29  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* Info.plist.in: Associate .svgz files with Inkscape on OSX.
	  Fixes bug #1307083.

2005-09-27  MenTaLguY  <mental@rydia.net>

	* src/gc-anchored.h: emphasize initial refcount

	* src/desktop.h, src/svg-view-widget.cpp, src/ui/view/view-widget.cpp,
	  src/ui/view/view.cpp, src/ui/view/view.h,
	  src/widgets/desktop-widget.cpp:

	  Move _whole_ UI::View::View hierarchy over to the garbage collector
	  and fix anchor imbalances; you can't do this piecemeal.

2005-09-23  Ben Fowler  <bpfowler@users.sourceforge.net>

	* autogen.sh: Cleanup error message.

2005-09-20  Carl Hetherington <inkscape@carlh.net>

	* src/file.cpp, src/file.h, src/help.cpp: don't replace empty
	desktops with help files / tutorials.  Fixes 1249067.

2005-09-17  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/jabber_whiteboard/typedefs.h:
	  gcc4 needs more const correctness, fixes #1294298

2005-09-17  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.h, src/desktop.cpp, src/interface.cpp, 
	  src/dialogs/layer-properties.cpp, src/ui/view/view.cpp,
	  src/widgets/desktop-widget.cpp:
	  correcting old and new oversights, fixes #1290982
	  
2005-09-15  Peter Moulder <pmoulder@mail.csse.monash.edu.au>

	* src/xml/repr-util.cpp (sp_repr_set_double): Split into two
	  functions (sp_repr_set_svg_double, sp_repr_set_css_double)
	  according to whether or not an exponent is allowed.  Update callers.
	  (sp_repr_set_double_default): Remove this unused function.

2005-09-15  Carl Hetherington <inkscape@carlh.net>

	* src/object-edit.cpp: fix idiotic bug introduced in previous commit.

2005-09-14  Carl Hetherington <inkscape@carlh.net>

	* src/knot.cpp, src/knotholder.cpp: coding style.

2005-09-13  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.h, src/desktop.cpp, src/svg-view.h, src/svg-view.cpp,
	  src/ui/view/view.h, src/ui/view/view.cpp, src/ui/view/edit.h:
	    View::setDocument() did not call same function in subclass
	* src/widgets/select-toolbar.cpp:   removed usage of SP_DT_WIDGET
	* src/desktop.cpp:   removed last sp_desktop_* function names

2005-09-13  Carl Hetherington <inkscape@carlh.net>

	* src/object-edit.cpp: Add some comments.  Minor refactoring.
	Snap points when editing rectangles; partial fix for bug 1282399.

	* packaging/win32/inkscape.nsi: Correct spelling of associations
	and associated; fix for bug 1283916.

2005-09-12  Jon A. Cruz  <jon@joncruz.org>

	* src/dialogs/iconpreview.cpp, src/dialogs/iconpreview.h,
	  src/widgets/icon.cpp:
	  Icon preview now toggles between selection or whole document.
	  Fixes REF #1281883.

2005-09-12  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/widgets/ruler.cpp:   fixed precision problem (bug #1242995)

2005-09-12  Peter Moulder  <pmoulder@bowman.csse.monash.edu.au>

	* src/libnrtype/Layout-TNG-Compute.cpp (Calculator::_measureUnbrokenSpan):
	  Fix line breaking for [supposedly] non-breaking whitespace characters.

2005-09-11  Ralf Stephan <ralf@ark.in-berlin.de>

	* po/nl.po:   replaced all instances of "verkleint" with "verkleind"
	  (bug #1277695)

2005-09-10  Jon A. Cruz  <jon@joncruz.org>

	* src/preferences-skeleton.h, src/dialogs/iconpreview.cpp:
	  Made icon preview sizes configurable. Fixes REF #1281885.

2005-09-08  Carl Hetherington <inkscape@carlh.net>

	* src/object-edit.cpp: Coding style in SPRect portion.  Add
	Emacs/vim mode blocks.

2005-09-08  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.cpp, src/ui/view/view.cpp:
	  removed placement new signal construction
	* src/desktop.cpp:   selection is no longer anchored
	* src/desktop.cpp, src/desktop.h:   further cleanup
	* src/main.cpp:   minor changes in doxygen main page

2005-09-08  MenTaLguY  <mental@rydia.net>

	* src/xml/document.h, src/xml/session.h, src/xml/simple-session.cpp,
	  src/xml/simple-session.h:

	  Add Session and Document createElementNode, createCommentNode,
	  and createTextNode methods

2005-09-06  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop-handles.h, src/desktop-handles.cpp:
	    added macros SP_DT_MSGSTACK/NAMEDVIEW/WIDGET, moved last
		macros from desktop.h
	* src/desktop.h src/desktop.cpp, src/sp-namedview.h, 
	  src/sp-namedview.cpp:
	    moved default_metric and default_unit into namedview
	* src/desktop.h src/desktop.cpp, src/widgets/desktop-widget.h,
	  src/widgets/desktop-widget.cpp:
	    moved window member into desktop widget
	* src/dialogs/clonetiler.cpp, src/dialogs/color-picker.cpp,
	  src/dialogs/desktop-properties.cpp, src/dialogs/dialog-events.cpp ,
	  src/dialogs/display-settings.cpp, src/dialogs/export.cpp,
	  src/dialogs/stroke-style.cpp, src/dialogs/swatches.cpp,
	  src/dialogs/transformation.cpp, src/dropper-context.cpp,
	  src/extension/internal/ps.cpp, src/gradient-context.cpp,
	  src/jabber_whiteboard/callbacks.cpp,
	  src/jabber_whiteboard/chat-handler.cpp,
	  src/jabber_whiteboard/message-processors.cpp,
	  src/jabber_whiteboard/message-queue.cpp,
	  src/jabber_whiteboard/session-manager.cpp,
	  src/path-chemistry.cpp, src/satisfied-guide-cns.cpp,
	  src/sp-text.cpp, src/text-chemistry.cpp,
	  src/trace/potrace/inkscape-potrace.cpp,
	  src/trace/trace.cpp, src/ui/dialog/align-and-distribute.cpp:
	    removed dependency on desktop.h
	* src/arc-context.cpp, src/desktop-events.cpp, src/inkscape.cpp,
	  src/interface.cpp, src/nodepath.cpp, src/rect-context.cpp,
	  src/select-context.cpp, src/seltrans.cpp, src/spiral-context.cpp,
	  src/star-context.cpp, src/text-context.cpp, src/ui/dialog/dialog.cpp,
	  src/widgets/select-toolbar.cpp, src/widgets/toolbox.cpp:
	    minor adaptation due to the above changes
	* src/ui/dialog/session-player.cpp:   didn't #include config.h
	
2005-09-06  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* doc/keys.html, doc/keys.xml, share/screens/keys.svg,
	  src/shortcuts.cpp:
	  Add keyboard shortcuts for the connector tool -- Ctrl+F2 and 'o'.

2005-09-05  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/document.cpp, src/draw-anchor.cpp, src/knotholder.cpp,
	  src/main.cpp, src/object-ui.cpp, src/selcue.cpp,
	  src/sp-marker.cpp, src/sp-root.cpp, src/sp-shape.cpp,
	  src/sp-star.cpp, src/sp-symbol.cpp, src/sp-tspan.cpp,
	  src/dialogs/docker.cpp, src/dialogs/extensions.cpp,
	  src/dialogs/text-edit.cpp, src/dialogs/tiledialog.cpp,
	  src/extension/system.cpp, src/widgets/gradient-vector.cpp,
	  src/jabber_whiteboard/session-file-player.cpp,
	  src/widgets/paint-selector.cpp, src/widgets/sp-widget.cpp,
	  src/widgets/spw-utilities.cpp, src/extension/implementation/script.cpp,
	  src/ui/dialog/transformation.cpp, src/seltrans.h,
	  src/widgets/sp-widget.h:
	    removed dependency on desktop.h
	* src/select-context.cpp, src/tools-switch.cpp, 
	  src/dialogs/display-settings.cpp, src/dialogs/fill-style.cpp,
	  src/dialogs/object-properties.cpp, src/dialogs/clonetiler.cpp:
	    added dependencies because of above changes
	
2005-09-04  Kees Cook  <kees@outflux.net>

	* TRANSLATORS, Makefile.am, src/verbs.cpp, src/help.cpp,
	  src/ui/dialog/aboutbox.h, src/ui/dialog/aboutbox.cpp,
	  src/menus-skeleton.h, src/ui/dialog/Makefile_insert:
	  Implemented AboutDialog following the Gnome style.
	* packaging/win32/inkscape.nsi: added quotes around execution name.

2005-09-04  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.cpp, src/dropper-context.cpp, src/forward.h,
	  src/interface.cpp, src/main.cpp, src/sp-anchor.cpp,
	  src/sp-text.cpp, src/splivarot.cpp, src/svg-view-widget.cpp,
	  src/svg-view-widget.h, src/svg-view.h, src/extension/effect.h,
	  src/extension/implementation/plugin-link.h, 
	  src/jabber_whiteboard/session-manager.cpp,
	  src/ui/dialog/dialog.cpp, src/ui/view/edit.h, 
	  src/ui/view/view-widget.cpp, src/ui/view/view-widget.h,
	  src/ui/view/view.cpp, src/ui/view/view.h:
	    minor edits to completely remove SPView identifier, and some
		dependencies

2005-09-04  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end-pair.cpp: Fix a crash bug when undoing connectors
	  on Linux x86 where we were calling a signal destructor.

	* src/io/sys.cpp: Build fix - conditionally include <glib/gstdio.h>
	  if using glib 2.6.0 or greater, since it is not available in earlier
	  versions.

2005-09-04  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/svg-view-widget.h, src/svg-view-widget.cpp, src/Makefile_insert:
	    separated SPSVGViewWidget from SPSVGView
	* src/desktop.h, src/svg-view.h, src/ui/view/edit.h,
	  src/ui/view/view-widget.h, src/ui/view/view.h,
	  src/widgets/desktop-widget.h, src/desktop.cpp,
	  src/svg-view.cpp, src/ui/view/view-widget.cpp,
	  src/ui/view/view.cpp, src/widgets/desktop-widget.cpp:
	    moved SPDesktop from GObject to C++/sigc++
	* src/forward.h: 
	    removed SP_DESKTOP*, SP_SVG_VIEW* macros and dependencies
	* src/widgets/layer-selector.h, src/widgets/layer-selector.cpp:
	    changed to sigc++ but disabled call
	* src/desktop-events.cpp:  removed desktop_enter_notify()
	* src/sp-anchor.cpp:  removed handling of mouse over/out
	* src/helper/action.h, src/sp-use.cpp:  added missing dependency
	* src/arc-context.cpp, src/desktop-affine.cpp, src/desktop-events.cpp,
	  src/desktop-handles.cpp, src/dyna-draw-context.cpp,
	  src/event-context.cpp, src/file.cpp, src/gradient-context.cpp,
	  src/gradient-drag.cpp, src/help.cpp, src/inkscape.cpp,
	  src/inkview.cpp, src/interface.cpp, src/knot.cpp,
	  src/knotholder.cpp, src/node-context.cpp, src/nodepath.cpp,
	  src/object-ui.cpp, src/path-chemistry.cpp, src/rect-context.cpp,
	  src/rubberband.cpp, src/satisfied-guide-cns.cpp,
	  src/select-context.cpp, src/selection-chemistry.cpp,
	  src/seltrans.cpp, src/shortcuts.cpp, src/slideshow.cpp,
	  src/sp-anchor.cpp, src/sp-flowtext.cpp, src/sp-namedview.cpp,
	  src/sp-text.cpp, src/spiral-context.cpp, src/splivarot.cpp,
	  src/star-context.cpp, src/text-context.cpp, src/text-editing.cpp,
	  src/tools-switch.cpp, src/verbs.cpp, src/zoom-context.cpp,
	  src/dialogs/clonetiler.cpp, src/dialogs/desktop-properties.cpp,
	  src/dialogs/dialog-events.cpp, src/dialogs/export.cpp,
	  src/dialogs/filedialog.cpp, src/dialogs/iconpreview.cpp,
	  src/dialogs/layer-properties.cpp, src/dialogs/stroke-style.cpp,
	  src/dialogs/transformation.cpp, src/dialogs/xml-tree.cpp,
	  src/extension/effect.cpp, src/extension/implementation/script.cpp,
	  src/extension/internal/grid.cpp, src/extension/internal/ps.cpp,
	  src/helper/window.cpp, src/ui/dialog/dialog.cpp,
	  src/ui/widget/imageicon.cpp, src/widgets/gradient-toolbar.cpp,
	  src/widgets/layer-selector.cpp, src/widgets/select-toolbar.cpp,
	  src/widgets/toolbox.cpp:
	    minor adaptations due to the above changes
	* src/desktop-events.h:  removed dependencies 
	* src/selection.cpp:  improved doxygen documentation
	
2005-09-04  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp: Fix a bug where a data structure was
	  not being freed, triggering an assertion failure and Inkscape to
	  crash sometimes when the connector tool context was switched.

2005-09-03  Aaron Spike <aaron@ekips.org>

	* src/node-context.cpp, src/livarot.cpp: Fixing a problem where node
	  adding and curve dragging operate on fills. A special thank you to
	  Simon Budig of GIMP fame for working with me and giving very 
	  thorough explanations of his curve dragging code.

2005-09-03  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/libavoid/connector.cpp, src/libavoid/connector.h: Autoroute
	  connectors while they are being drawn in the connector context.

	* src/sp-conn-end.cpp: Fix a bug where connectors attached to shapes
	  were not always getting updated.  Their path was sometimes thought
	  to be valid even when it was not.

2005-09-02  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end.cpp: Fix a bug where connectors not attached to
	  shapes were not updating correctly if an object was dropped on
	  their path.

2005-09-01  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/sp-conn-end.cpp, src/sp-conn-end.h, src/sp-conn-end-pair.cpp,
	  src/sp-conn-end-pair.h, src/sp-path.cpp, src/libavoid/graph.cpp,
	  src/libavoid/incremental.cpp:

	Connectors now automagically reroute as a result of any 'avoided'
	object being placed on their path.  They also update to better
	paths when blocking shapes are removed.
	 
	* src/connector-context.cpp: Update TODO list.  Only show endpoints
	  and allow manipulation of paths marked as connectors.

	* src/libavoid/connector.cpp, src/libavoid/connector.h: Connectors
	  with invalid paths can now notify other code via a callback,
	  rather than just setting a boolean flag.

	* src/conn-avoid-ref.cpp: Fix an obscure crash bug in the connector
	  routing code where we were still using a freed data structure.

2005-08-31  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/conn-avoid-ref.cpp, src/conn-avoid-ref.h: Use the correct
	  coordinate system when passing shape geometry to libavoid.
	  Add a small amount of buffer space around objects.
	
	* src/attributes-test.cpp, src/attributes.cpp, src/attributes.h,
	  src/path.cpp: Add code to handle the "inkscape:connector-type"
	  attribute.

	* src/sp-conn-end-pair.cpp, src/sp-conn-end-pair.h: Store information
	  about type paths, to determine whether they are connectors.  Keep
	  a reference to the libavoid representation if necessary.  Add code
	  to call libavoid to get a path for a connector.
	
	* src/sp-conn-end.cpp: Call the connector routing code when connector
	  ends are moved.  Move connector endpoints rather than stretching
	  when adjusting to draw to shape edge.
	  
	* src/libavoid/connector.cpp, src/libavoid/connector.h: Make the
	  connector references aware of their own initialisation state.

	* src/connector-context.cpp:  Update TODO list.  Update for other
	  changes.  Fix a bug where multi-segment connectors had a solid
	  black fill while being dragged.

	* src/display/curve.cpp, src/display/curve.h: Add a function to 
	  simply move the two endpoints of a curve.

2005-08-30  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/conn-avoid-ref.cpp, src/libavoid/connector.cpp,
	  src/libavoid/graph.cpp, src/libavoid/makepath.cpp,
	  src/libavoid/shape.cpp, src/libavoid/vertices.cpp,
	  src/libavoid/vertices.h, src/libavoid/visibility.cpp:

	Use a better system for unique IDs within libavoid.  This properly
	addresses a hack in SPAvoidRef that was unsafe on amd64 machines.

	* configure.ac: Add the src/libavoid subdir.
	
2005-08-29  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/attributes.cpp, src/connector-context.cpp, src/sp-item.cpp:
	  Use "inkscape:connector-avoid" instead of "inkscape:avoid".

2005-08-29  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/libavoid/timer.cpp: Remove some code assuming a fixed size for
	  timer types.

2005-08-29  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp: Fix a problem where the context didn't
	  notice the current selection when it was entered.  Also, fix a 
	  problem where connectors disappeared for a moment when an endpoint
	  was clicked (for rerouting), but before the mouse was moved.

2005-08-29	David Yip		<yipdw@rose-hulman.edu>

	* src/ui/dialog/whiteboard-connect.{cpp,h},
	  src/ui/dialog/whiteboard-sharewithchat.{cpp,h}:
	  Improved widget layout (switched to Gtk::Table)

	* src/jabber_whiteboard/session-manager.cpp:
	  Fixed crash that occurred when connecting via SSL to a Jabber
	  server that does not support SSL
	  
2005-08-28  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/Makefile_insert, src/attributes-test.cpp, src/attributes.cpp,
	  src/attributes.h, src/conn-avoid-ref.cpp, src/conn-avoid-ref.h,
	  src/forward.h, src/sp-item.cpp, src/sp-item.h:
	 
	  Add code that handles the "inkscape:avoid" attribute, used to mark
	  whether an item should be avoided for the purposes of routing
	  connectors.  This code also calls libavoid when an 'avoided'
	  item is moved/transformed.
	
	* src/connector-context.cpp, src/connector-context.h,
	  src/widgets/toolbox.cpp:
	  
	  Add a couple of buttons to the connector context's toolbar to
	  allow selected objects to be marked as avoided or ignored for the
	  purpose of connector routing.
	  
	* src/libavoid/debug.h, src/libavoid/geomtypes.h, 
	  src/libavoid/polyutil.cpp, src/libavoid/polyutil.h,
	  src/libavoid/shape.cpp:
	
	  Misc fixes: turn off debugging output, put types in the Avoid
	  namespace, and add an assertion for a special case that can
	  cause problems.

2005-08-28  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* share/icons/icons.svg: Add a couple of icons for the connector
	  context toolbar.

2005-08-27  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/Makefile.am, src/Makefile_insert, src/libavoid/*:
	  Add libavoid code, the library that does all the path planning
	  work for autorouting connectors.

2005-08-27  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/Makefile_insert: Remove a reference to the previously moved
	  src/desktop-widget.h.  This wasn't breaking the build, but was
	  stopping me from generating tags files.
	  
2005-08-25  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/ui/view/edit.h, src/ui/view/view.h, src/ui/view/view.cpp,
	  src/ui/view/view-widget.h, src/ui/view/view-widget.cpp,
	  src/widgets/desktop-widget.h, src/svg-view.h, src/desktop.cpp:
	    separated SPViewWidget from SPView
	* src/connector-context.cpp, src/dyna-draw-context.cpp,
	  src/file.cpp, src/gradient-context.cpp, src/knot.cpp,
	  src/node-context.cpp, src/nodepath.cpp, src/path-chemistry.cpp,
	  src/pen-context.cpp, src/pencil-context.cpp, src/rect-context.cpp,
	  src/selection-chemistry.cpp, src/spiral-context.cpp,
	  src/splivarot.cpp, src/star-context.cpp, src/text-chemistry.cpp,
	  src/text-context.cpp, src/verbs.cpp, src/dialogs/display-settings.cpp,
	  src/dialogs/layer-properties.cpp, src/dialogs/find.cpp,
	  src/dialogs/clonetiler.cpp, src/trace/trace.cpp,
	  src/trace/potrace/inkscape-potrace.cpp:
	    all these files relied on a dependency in view.h to include
	  code for MessageStack and/or MessageContext which is now removed
	* dialogs/desktop-properties.cpp:   improved doxygen documentation
	
2005-08-25  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.cpp, src/widgets/desktop-widget.h, 
	  src/widgets/desktop-widget.cpp: 
	  abstracted out all Gtk+ calls from SPDesktop into SPDesktopWidget
	* src/Doxyfile, src/main.cpp, src/desktop.cpp:
	  improved doxygen documentation
	  
2005-08-25  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp, src/connector-context.h:
	  Change the connector context to use Inkscape's standard selection
	  mechanism.  Show connector endpoint handles for single connectors
	  in the selection.  This is the proposed interaction changes as
	  discussed on the mailing list.  See the post there for a greater
	  description of the change.

2005-08-24  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/widgets/desktop-widget.h, src/widgets/desktop-widget.cpp:
	  separated SPDesktopWidget from SPDesktop
	* src/desktop-widget.h:   removed
	* src/toolbox.cpp, src/toolbox.h, src/select-toolbar.cpp,
	  src/select-toolbar.h, src/gradient-toolbar.cpp, 
	  src/gradient-toolbar.h:   moved into src/widgets
	* src/desktop.h, src/desktop.cpp, src/desktop-events.cpp,
	  src/verbs.cpp, src/Makefile_insert, src/widgets/Makefile_insert,
	  src/arc-context.cpp, src/dyna-draw-context.cpp,
	  src/gradient-context.cpp, src/rect-context.cpp,
	  src/select-context.cpp, src/spiral-context.cpp,
	  src/star-context.cpp, src/interface.cpp, src/seltrans.cpp:
	  adapted following SPDesktopWidget separation
	
2005-08-24	David Yip	<yipdw@rose-hulman.edu>

	* src/jabber_whiteboard/session-manager.{cpp.h},
	  src/jabber_whiteboard/callbacks.cpp,
	  src/ui/dialog/whiteboard-connect.{cpp,h}:
	  added support for XMPP over SSL to Inkboard

2005-08-22  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/dialogs/desktop-properties.cpp, src/dialogs/display-settings.cpp:
	  both dialogs are now unresizable (bug #1237865)
	* src/main.cpp: enhanced doxygen main page

2005-08-21  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/osx-app.sh: Added a command line option which allows
	  the executable and bundled dylibs to be stripped, significantly
	  reducing the package size.

2005-08-20  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop-style.cpp: fixed bug 1247989: nonstroked objects are
	  no longer counted in stroke_average_width()
	* src/Doxyfile: added 3 more files
	* src/main.cpp: introduced doc hierarchy on doxygen main page
	* src/desktop-style.cpp:  improved doxygen documentation
	  
2005-08-20  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/connector-context.cpp, src/connector-context.h:
	  Rework connector context to extend SPEventContext instead of
	  SPDrawContext, and remove most of the borrowed draw context
	  code.

2005-08-20  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/menus-skeleton.h: correct the verb for "Select All In All Layers"
	  since it was just showing a verb error in the menu.

2005-08-19  Kees Cook  <kees@outflux.net>

	* autogen.sh, tools-version.sh, distro: report Ubuntu correctly, detect
	  and reject unsafe automake versions (1.9.0 -> 1.9.6).

2005-08-19  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/dialogs/display-settings.cpp:
	  Align the "Oversample bitmaps" option in the preferences
	  dialog with all the other options.

2005-08-18  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* src/Makefile_insert: Added connector-context.{cpp,h}

	* src/connector-context.cpp, src/connector-context.h: New code for
	  the connector context.  Handles the interaction of creating and
	  modifying connectors.

	* src/sp-conn-end.cpp, src/sp-conn-end.h: Added sp_conn_adjust_path
	  for adjusting the path of connectors to the edge of shapes, and
	  sp_conn_end_detach to detach a connector endpoint from a shape.
	  Also, when there is only a single shape attached to a connector
	  and it is moved, then reroute the connector leaving its unattached
	  endpoint where it is, rather than just moving the whole thing with
	  the shape.

	* src/preferences-skeleton.h, src/toolbox.cpp, src/tools-switch.cpp,
	  src/tools-switch.h, src/verbs.cpp, src/verbs.h,
	  src/dialogs/display-settings.cpp, src/dialogs/display-settings.h:

	  Enable the connector context.  Give it a preferences tab, toolbox,
	  icon, etc.  Also, correct some vim modelines.
	  
	* src/display/sp-canvas.cpp: Allow enter and leave events to be generated
	  for canvas items when mouse buttons are depressed.

	* src/pixmaps/cursor-connector.xpm: A cursor for connector context.

2005-08-18  Jon A. Cruz  <jon@joncruz.org>

	* src/knot.cpp: Corrected type conflict for crash bugs.

2005-08-18  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/Doxyfile: added 4 more files
	* src/extension/implementation/plugin-link.h,
	  src/extension/internal/gimpgrad.cpp:  improved doxygen documentation
	  
2005-08-16  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/desktop.h, src/desktop.cpp: replaced gboolean with bool
	* src/display/curve.cpp: made is_moveto() inline
	* src/knot.cpp, src/extension/extension.cpp, src/helper/action.cpp:
	  added editor footer
	* src/desktop.h, src/desktop.cpp, src/knot.cpp, src/sp-gradient.cpp,
	  src/display/curve.cpp, src/extension/extension.cpp,
	  src/extension/implementation/plugin.h, 
	  src/extension/implementation/plugin.cpp,
	  src/extension/internal/gimpgrad.cpp, src/helper/action.cpp:
	  improved doxygen documentation

2005-08-14  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp: quick fix for crash bug when
	  deleting unnamed layer [bug 1255843]

2005-08-14  Michael Wybrow  <mjwybrow@users.sourceforge.net>
	
	* packaging/macosx/ScriptExec/main.c: Allow the user to ignore the
	  automatic fixing of the fontconfig problem and fix the problem
	  manually.  Don't pop up the dialog again in this case when they
	  relaunch Inkscape.

2005-08-13  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/menus-skeleton.h: fixed cvs bug where, in the default menus.xml, 
	  given submenus didn't have correct names, so translation on 
	  non-English systems was missed.
	
2005-08-13  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* packaging/macosx/Resources/script, packaging/macosx/ScriptExec/main.c:

	Fix for the fontconfig cache problem on OS X 10.4.  The first time 
	Inkscape is launched on 10.4 machines, after checking X11 is available,
	a dialog is brought up informing users of the fontconfig problem.  The
	dialog has a button to run fc-cache as root.  If chosen, an OS X
	authentication dialog in launched and fc-cache is run following the
	authentication.  A file is stored in ~/.inkscape to mark that fc-cache
	has been run.
	
2005-08-11  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/sp-gradient.cpp,src/sp-gradient-fns.h,src/event-context.h,
	  src/event-context.cpp:  replaced gboolean with bool
	* src/document-undo.cpp:  added editor footer
	* src/sp-gradient.cpp, src/desktop.cpp, src/document.h,
	  src/document.cpp, src/document-undo.cpp, src/event-context.h,
	  src/event-context.cpp, src/selection.h:
	  improved doxygen documentation

2005-08-10	David Yip	<yipdw@rose-hulman.edu>

	* src/Makefile_insert: added composite-undo-stack-observer.{cpp,h}

	* src/document.{cpp.h},
	  src/document-undo.cpp, src/document-private.h: 
	  added hooks for undo stack observer

	* src/jabber_whiteboard/Makefile_insert: added new classes

	* src/jabber_whiteboard/callbacks.cpp: moved document initialization actions
	  here (not the best idea, admittedly...)

	* src/jabber_whiteboard/connection-establishment.cpp,
	  src/jabber_whiteboard/session-manager.*,
	  src/jabber_whiteboard/chat-handler.cpp: updated to work with new listeners

	* src/jabber_whiteboard/message-contexts.cpp,
	  src/jabber_whiteboard/message-handler.*,
	  src/jabber_whiteboard/message-tags.*,
	  src/jabber_whiteboard/defines.h: new message types (TODO: trim out dead
	  types)

	* src/jabber_whiteboard/message-queue.*,
	* src/jabber_whiteboard/message-node.h: made MessageNode capable of
	  representing more message types, as required by callbacks.cpp
	  and new commit model

	* src/jabber_whiteboard/message-utilities.*: new utilities, although
	  this entire class should be going bye-bye soon (its main tasks have been
	  taken over by SerializerNodeObserver)

	* src/jabber_whiteboard/node-tracker.*: removal of node-level locks

	* src/jabber_whiteboard/node-utilities.*: removal of unnecessary methods;
	  this class should also be removed soon

	* src/jabber_whiteboard/session-file-selector.cpp: miscellaneous tweaks

	* src/jabber_whiteboard/typedefs.h: new type definitions to handle the new
	  commit model (TODO: prune unnecessary types)

	* src/xml/event.cpp: small hack to get Inkboard working (shouldn't be
	  there, but I'm still learning my way around XML::Node and
	  XML::Session...help welcome)

	* src/undo-stack-observer.h: interface for classes that watch undo, redo,
	  and undo log commit events

	* src/composite-undo-stack-observer.*: similar to CompositeNodeObserver;
	  combines multiple undo stack observers

	* src/jabber_whiteboard/serializer-node-observer.*: XML::Event serializer

	* src/jabber_whiteboard/deserializer.*: XML::Event deserializer

	* src/jabber_whiteboard/tracker-action-observer.*: simple observer to
	  watch for added and removed nodes in undo/redo actions (put aside for
	  now)

	* src/jabber_whiteboard/undo-stack-observer.*: Inkboard's undo stack
	  observer implementation

2005-08-10  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/main.cpp: introduced doxygen doc main page with links

2005-08-09  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/Doxyfile: added 5 more files
	* src/display/curve.h, src/display/curve.cpp, src/knot.cpp,
	  src/dialogs/export.cpp: replaced gboolean with bool
	* src/display/curve.cpp: removed sp_curve_finish() as it is nowhere 
	  called, made sp_curve_ensure_space() static
	* src/sp-object.cpp, src/sp-item.cpp, src/libnr/n-art-bpath.h,
	  src/libnr/nr-path-code.h, src/ui/view/view.cpp, src/dialogs/export.cpp,
	  src/display/bezier-utils.cpp, src/display/curve.h,
	  src/display/curve.cpp, src/knot.h, src/knot.cpp:
	  improved doxygen documentation

2005-08-08  MenTaLguY  <mental@rydia.net>

	* README.txt, README: make autotools happy

2005-08-06  MenTaLguY  <mental@rydia.net>

	* Makefile.am, HACKING, HACKING_de, HACKING_fr, HACKING_it,
	  HACKING.txt, HACKING.de.txt, HACKING.fr.txt, HACKING.it.txt,
	  README, README_ca, README_de, README_fr, README_it,
	  README.txt, README.ca.txt, README.de.txt, README.fr.txt, README.it.txt:

	  saner filenames

2005-08-06  MenTaLguY  <mental@rydia.net>

	* src/xml/Makefile_insert, src/xml/log-builder.cpp,
	  src/xml/log-builder.h, src/xml/simple-session.cpp,
	  src/xml/simple-session.h:

	  Implement XML::LogBuilder class and use it from XML::SimpleSession.

2005-08-06  MenTaLguY  <mental@rydia.net>

	* src/xml/event.h, src/xml/event.cpp, src/xml/event-fns.h:
	  rejigger the way XML event logs are handled, based on NodeObservers

2005-08-06  MenTaLguY  <mental@rydia.net>

	* src/xml/simple-session.cpp: minor formatting cleanups

2005-08-06  Ted Gould <ted@gould.cx>

	* src/interface.cpp, src/verbs.cpp, src/verbs.h:

	Adding in a hash table for Verb ID lookups.  This makes searching for them
	in the dynamic menus much faster.

2005-08-06  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/sp-offset.cpp: 
	  removed a dependency, made refresh_offset_source() static
	* src/svg-view.cpp, src/svg-view.h, src/sp-spiral.cpp, src/sp-spiral.h: 
	  replaced gboolean with bool
	* src/sp-offset.cpp, src/sp-root.cpp, src/sp-stop.h, src/sp-spiral.h,
	  src/sp-spiral.cpp, src/svg-view.h, src/svg-view.cpp, src/style.cpp:
	  improved doxygen documentation
	
2005-08-05  MenTaLguY  <mental@rydia.net>

	* inkscape.spec.in: include translated manpages

2005-08-05  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* po/nl.po: fix a typo: close a bold tag.

2005-08-03	David Yip	<yipdw@rose-hulman.edu>

	* src/jabber_whiteboard/typedefs.h:
	  fixed incorrect template specialization syntax,
	  removed duplicate definitions (oops...)

	* src/gc-alloc.h:
	  removed explicit keyword from allocator constructors, as it is
	  necessary to allow implicit conversion for rebinding.  Some
	  containers in the libstdc++ in GCC 3.4.x require this, such as anything
	  using the standard library's red-black tree implementation --
	  std::set, std::map, std::multimap

2005-08-03  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/pen-context.cpp: made sp_pen_context_root_handler static
	* src/snap.h: removed getSnapToBBox() declaration
	* src/sp-stop.h: removed three dependencies
	* src/Doxyfile: added further 3 files
	* src/object-hierarchy.cpp, src/pen-context.h, src/pen-context.cpp,
	  src/pencil-context.h, src/pencil-context.cpp, src/snap.h, 
	  src/snap.cpp, src/sp-stop.h, src/sp-gradient.h, src/sp-gradient.cpp,
	  src/sp-linear-gradient.h, src/sp-radial-gradient.h:
	  improved doxygen documentation

2005-08-03	David Yip	<yipdw@rose-hulman.edu>

	* src/jabber_whiteboard/Makefile_insert,
	  src/jabber_whiteboard/message-handler.cpp,
	  src/jabber_whiteboard/empty.cpp:
	  fixing some build issues (Apple's ar doesn't like creating
	  archives with an empty member list, so empty.cpp is a null
	  placeholder to be used as the sole member in the jabber_whiteboard
	  archive in the event that a user does not wish to enable
	  Inkboard)

2005-08-02  Bryce Harrington <bryce@bryceharrington.org>

	* src/ui/dialog/*.*:  Update copyrights

	* doc/WISHLIST:  s/Sodipodi/Inkscape/

	* src/desktop.cpp:  Rename SPView to Inkscape::UI::View::View

	* changing include file syntax from "" to <> where appropriate

	* Changing copyrights to be consistent

2005-08-03	David Yip	<yipdw@rose-hulman.edu>

	* src/menus-skeleton.h:
	  added WITH_INKBOARD ifdef to prevent Inkboard options from being
	  compiled into the menu skeleton if the Inkboard code is not enabled

2005-08-03  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	*  src/display/curve.cpp: Correctly free an array with "delete []".

2005-08-02	David Yip	<yipdw@rose-hulman.edu>

	* src/jabber/whiteboard/node-tracker.cpp:
	  removed unnecessary anchoring of XML::Nodes in XMLNodeTracker

2005-08-02	David Yip	<yipdw@rose-hulman.edu>

	* src/jabber_whiteboard/typedefs.h:
	  moved back to GC::Alloc from traceable_allocator

	* src/jabber_whiteboard/node-tracker.cpp:
	  fixed anchor-release problem with XML::Nodes in XMLNodeTracker

2005-08-01  MenTaLguY  <mental@rydia.net>

	* src/gc.cpp, src/gc-core.h: Hans says it's okay to use
	  GC_malloc_atomic_uncollectable

2005-08-01  MenTaLguY  <mental@rydia.net>

	* src/gc-alloc.h: fix improper allocation size

2005-08-01	David Yip	<yipdw@rose-hulman.edu>

	* src/jabber_whiteboard/message-handler.cpp: removed some
	  debug output

	* src/dialogs/whiteboard-sharewithchat.cpp: removed some excess
	  debugging code

	* src/jabber_whiteboard/session-manager.cpp: removed 
	  redundant if (x == NULL) tests surrounding delete

2005-08-01	David Yip	<yipdw@rose-hulman.edu>

	* src/ui/icons.cpp, src/ui/stock-items.cpp, src/ui/stock.cpp, 
	  src/ui/stock.h:
	  added Inkboard UI stock items

	* src/dialogs/whiteboard*:
	  old C/Gtk Inkboard dialogs for collecting user input necessary
	  to establish Jabber connections and Inkboard sessions (they're
	  still used in some parts of the Inkboard code)

	* src/Makefile.am, src/Makefile_insert, src/desktop.cpp, 
	  src/desktop.h, src/document.cpp, src/file.cpp, src/file.h,
	  src/menus-skeleton.h, src/verbs.cpp, src/verbs.h:
	  added necessary UI code to access Inkboard functions

	* src/jabber_whiteboard/Makefile_insert,
	  src/jabber_whiteboard/buddy-list-manager.*,
	  src/jabber_whiteboard/callbacks.*,
	  src/jabber_whiteboard/chat-handler.*,
	  src/jabber_whiteboard/connection-establishment.*,
	  src/jabber_whiteboard/defines.h,
	  src/jabber_whiteboard/error*,
	  src/jabber_whiteboard/internal-constants.*,
	  src/jabber_whiteboard/invitation-confirm-dialog.*,
	  src/jabber_whiteboard/jabber-handlers.*,
	  src/jabber_whiteboard/makefile*,
	  src/jabber_whiteboard/message-*,
	  src/jabber_whiteboard/node-*,
	  src/jabber_whiteboard/received-message-helpers.cpp,
	  src/jabber_whiteboard/player-functors.*,
	  src/jabber_whiteboard/session-*,
	  src/jabber_whiteboard/tracker-node.h,
	  src/jabber_whiteboard/typedefs.h:
	  Initial commit of Inkboard code
	* src/ui/dialog/session-player*,
	  src/ui/dialog/whiteboard*:
	  C++/Gtkmm replacements for some old C/Gtk dialogs
	* configure.ac:
	  added Inkboard configure checks
	* src/ui/view/edit.cpp,
	  src/ui/view/edit.h,
	  src/ui/view/view.cpp:
	  added Inkboard code stubs to new Gtkmm code
	* share/ui/menus-bars.xml:
	  added Inkboard code stubs to menu UI XML

2005-08-01  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/sp-object.cpp: improved doxygen documentation

2005-07-31  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/nodepath.cpp: removed three dependencies

2005-07-31  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp, src/sp-object.h, src/sp-use.cpp:
	  adopt more consistent refcounting policy

	* src/sp-object.h: make second parameter to sp_object_ref and
	  sp_object_unref optional

2005-07-30  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/draw-anchor.cpp, src/nodepath.h: reduced dependencies
	* src/nodepath.cpp: removed duplicate dependency, added two from 
	  nodepath.h, made triangle_area() inline
	* src/node-context.cpp: added dependency removed from nodepath.h
	* src/Doxyfile: added 2 further files to the scanned list
	* src/nodepath.h: moved function docs into nodepath.cpp
	* src/color.cpp: made file work with src/Doxyfile
	* src/color.cpp, src/draw-anchor.cpp, src/geom.cpp, src/nodepath.cpp:
	  improved doxygen documentation
	* src/event-context.cpp: added a \todo
	* src/geom.cpp: added editor footer

2005-07-30  Ted Gould  <ted@gould.cx>

	* src/Makefile_insert, src/inkscape.cpp, src/inkscape.h,
	src/interface.cpp, src/selection.cpp, src/verbs.cpp, src/verbs.h,
	src/extension/effect.cpp, src/extension/effect.h, src/menus-skeleton.h:

	Doing two things.  One, making menus configurable by an external xml file
	and the second is enabling sensitivity in the verbs.  These are both in
	pretty basic states right now, but workable.

2005-07-29  MenTaLguY  <mental@rydia.net>

	* src/shortcuts.cpp: made Ctrl+Shift+G the "primary" ungroup shortcut

2005-07-28  Carl Hetherington  <inkscape@carlh.net>

	* src/arc-context.cpp: CodingStyle.  Replace gboolean with bool.

	* src/desktop-events.cpp: CodingStyle: whitespace.  Add editor
	variables block.  gboolean exorcism.  Declaration-to-first-use fixes.
	

2005-07-27  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/style.h (SP_SCALE24_MAX): Change from 0xffffff to 0xff0000,
	  and add documentation for choice of value.
	  (SP_SCALE24_TO_FLOAT) Return a double instead of a float.
	  (SP_SCALE24_FROM_FLOAT) Change rounding behaviour.
	  These changes are intended to combat float rounding bugs on x86.

	* src/style.cpp (sp_style_merge_from_style_string): Use libcroco
	  to parse style="..." attribute strings, to improve CSS parsing.

2005-07-27  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/Doxyfile: added 10 further files to the scanned list
	* src/gc-anchored.h, src/gc-managed.h, src/object-hierarchy.h, 
	  src/pencil-context.h, src/selection.h, src/sp-object.h, src/sp-spiral.h, 
	  src/svg-view.h, src/verbs.h, src/livarot/float-line.h, src/util/list.h, 
	  src/widgets/paint-selector.h, src/xml/repr.h: 
	  made file work with src/Doxyfile
	* src/livarot/int-line.h, src/livarot/float-line.h: 
	  moved part of documentation into *.cpp file
	* src/gc-anchored.h, src/knot-holder-entity.h, src/nodepath.h, 
	  src/pen-context.h, src/pencil-context.h, src/selection.h, 
	  src/sp-gradient.h, src/sp-gradient.cpp, src/sp-item.h, src/sp-object.h, 
	  src/sp-spiral.h, src/style.h, src/svg-view.h, src/extension/extension.h, 
	  src/libnr/nr-matrix.h, src/livarot/int-line.h, src/livarot/int-line.cpp, 
	  src/livarot/float-line.h, src/livarot/float-line.cpp, 
	  src/livarot/sweep-event.h, src/livarot/sweep-event-queue.h, 
	  src/util/list.h, src/widgets/paint-selector.h, src/xml/repr.h, 
	  src/xml/repr.cpp: documentation improvements
	* src/sp-item.h: added editor footer

2005-07-26  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/svg/stringstream.h, src/svg/stringstream.cpp:
	  Trim trailing zeros from after the decimal point when writing
	  float or double to Inkscape::SVGOStringStream.
	* src/style-test.cpp: Update expected output accordingly.
	* src/svg/stringstream-test.h: New unit test.
	* src/Makefile.am, src/svg/Makefile_insert: Add the new unit test.
	* src/svg/Makefile_insert:
	  Don't link unused ftos.cpp, but do link new file stringstream.cpp.

2005-07-26  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* share/icons/icons.svg: Add icon for connector context.

2005-07-25  Ralf Stephan <ralf@ark.in-berlin.de>

	* src/libnr/nr-pixblock.h:  interface cleanup of NRPixBlock: size and mode
	  are now named enums, empty is now bool, changes to function interfaces 
	  because of that, changed C macros to C++ inline functions, changed clean 
	  flag in some function interfaces from int to bool.
	* src/libnr/nr-pixblock.cpp:  adaptations due to changes in nr-pixblock.h,
	  added assert to ...setup_extern() which remains a bit ... risky,
	* src/display/sp-canvas.cpp: 
	  made sp_canvas_item_construct() static, inlined two other functions
	* src/svg-view.cpp: piped emit_resized through C++ faade (incomplete)
	* src/ui/view/view.h: removed legacyMessageContext() member
	* src/Doxyfile: added files, and options to collect todo and bugs
	* src/display/curve.cpp: moved member docs into curve.h
	* src/event-context.cpp: long line cosmetics, moved a function for clarity
	* src/sp-offset.h, src/sp-spiral.cpp, src/svg-view.cpp, 
	  src/libnr/nr-types.h: added editor footer
	* src/color-rgba.h, src/draw-anchor.h, src/event-context.*, src/knot-*.h, 
	  src/message-*.h, src/modifier-fns.h, src/nodepath.h, 
	  src/pencil-context.cpp, src/pen-context.*, src/snap.*, src/sp-gradient.h, 
	  src/sp-gradient-fns.h, src/sp-item.cpp, src/sp-item-notify-moveto.h, 
	  src/sp-linear-gradient*, src/sp-offset.*, src/sp-radial-gradient*, 
	  src/sp-spiral.cpp, src/style.cpp, src/svg-view.cpp, src/verbs.cpp, 
	  src/dialogs/export.cpp, src/display/bezier-utils.cpp, 
	  src/display/curve.*, src/diplay/sp-canvas.*, 
	  src/extension/implementation/plugin*, src/extension/internal/gimpgrad.h, 
	  src/libnr/nr-matrix.h, src/libnr/nr-matrix-scale-ops.h, 
	  src/libnr/nr-matrix-translate-ops.h, src/libnr/nr-pixblock.*, 
	  src/libnr/nr-point.h, src/libnr/nr-rotate.h, src/libnr/nr-rotate-fns.h, 
	  src/libnr/nr-scale-matrix-ops.h, src/libnr/nr-types.h, 
	  src/livarot/int-line.h, src/ui/view/view.*:
	  
	  made file work with src/Doxygen, doxygen documentation improvements

2005-07-24  Ted Gould  <ted@gould.cx>

	* 0.42 Release

2005-07-21  Ted Gould  <ted@gould.cx>

	* 0.42pre3

2005-05-21  Kees Cook  <kees@outflux.net>

	* share/icons/*xpm, src/ui/dialog/transformation.cpp,
	  src/ui/widget/labelled.cpp, src/ui/widget/labelled.h:
	  Hooked up Gtkmmified Icon manager correctly.  (bug 1217367)
	* Makefile.mingw, Makefile.mingw.common: patch 1241293 for build fixes

2005-07-12  Ted Gould  <ted@gould.cx>

	* 0.42pre2

2005-07-11  MenTaLguY  <mental@rydia.net>

	* src/debug/logger.cpp: wrap stack vector in method to avoid
	  potential static initialization issues

	* src/sp-object.cpp: add refcount logging

2005-07-09  MenTaLguY  <mental@rydia.net>

	* src/document-undo.cpp, src/inkscape.cpp, src/debug/event.h,
	  src/debug/logger.cpp, src/debug/logger.h, src/debug/simple-event.h,
	  src/xml/composite-node-observer.cpp, src/xml/event.cpp,
	  src/xml/simple-node.cpp:

	  Categorize debugging events and add the ability to filter them
	  via setting the INKSCAPE_DEBUG_FILTER environment variable to
	  a comma-separated list of debug event categories.

2005-07-06  Ben Fowler  <bpfowler@users.sourceforge.net>

	* src/interface.cpp: Spackle for Bug 1217361 "freeze on quitting 
	with transform dialog"

2005-07-06  Ben Fowler  <bpfowler@users.sourceforge.net>

	* src/interface.cpp: Whitespace changes only

2005-07-06  Michael Wybrow  <mjwybrow@users.sourceforge.net>

	* Info.plist.in, packaging/osx-app.sh, packaging/macosx/*:

	Changes and new files required to build an Inkscape dmg on Mac OS X.

2005-07-05  Ted Gould  <ted@gould.cx>

	* 0.42pre1

2005-07-04  MenTaLguY  <mental@rydia.net>

	* src/sp-metadata.cpp: strip id= attributes under rdf:RDF elements

2005-07-04  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp, src/xml/node-fns.h, src/xml/node-fns.cpp:
	  don't force id= attributes on anything except elements in the SVG,
	  Sodipodi, or Inkscape namespaces.

2005-07-04  MenTaLguY  <mental@rydia.net>

	* src/verbs.cpp: redo cryve's fix to use defaultLabel() rather than
	  label()

2005-07-04  Bryce Harrington <bryce@bryceharrington.org>

	* src/livarot/float-line.cpp:  Patch from Ralf Stephan
	<ralf@ark.in-berlin.de> to suppress two warnings.
	
2005-06-28  Ted Gould  <ted@gould.cx>

	* src/verbs.h:

	Changing from gnu::hash_map to std::map.  The only reason this was a
	hash_map before is because I was stealing code that I didn't understand,
	and a std::map works as well.  This fixes bug #1172199 for Tru64.

2005-06-28  Ted Gould  <ted@gould.cx>

	* src/extension/dependency.cpp:

	Fix for #1169396 -- setting the default type for a dependency to file,
	this seems to be the only way that the print function could end up using
	undefined memory, and then passing it on the gettext.

2005-06-28  Ted Gould  <ted@gould.cx>

	* src/extension/implementation/script.cpp,
	src/extension/implementation/script.h:

	Adding support for information coming back on STDERR from scripts.  This
	fixes bug #1220959 and RFE #1178941

2005-07-04  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-stop.h, sp-gradient.cpp, widgets/gradient-vector.cpp:
	  Implement currentColor as possible value for stop-color, as per spec.

2005-07-02  Kees Cook  <kees@outflux.net>

	* src/dialog/rdf.cpp: Added FreeArt license, RFE #1230981.

2005-06-30  Bryce Harrington <bryce@bryceharrington.org>

	* inkscape.nsi:  Fix for bug #1230744 'wrong installer language'
	by theadib.

	* src/swatches.cpp: Fix for bug #1217973.  The KDE swatches file
	consists of 3 column numbers (missing 4th column), and also lacks
	an ending newline.  In this situation, the name variable returned
	from trim() could be null, thus causing a segfault when used as an
	input to Glib::ustring.

	* src/sp-image.cpp: Patch for bug #1210100 by bpfowler to help
	narrow in on the cause of the bug.

	* README:  Requested change for bug #1174991.  Directions for
	installation of perl libs
	
2005-07-01  Ben Fowler  <bpfowler@users.sourceforge.net>

	* src/desktop.cpp src/svg-view.cpp src/dialogs/display-settings.cpp 
	src/dialogs/export.cpp src/dialogs/find.cpp 
	src/extension/internal/ps.cpp: Replaced calls to gtk_widget_set_usize 
	with GTK2 version.

2005-06-30  Bryce Harrington <bryce@bryceharrington.org>

	* inkscape.pod, src/main.cpp: Applying Makzu's patch to implement
	  --vacuum-defs

2005-06-28  Ted Gould  <ted@gould.cx>

	* 0.42pre0

2005-06-23  MenTaLguY  <mental@rydia.net>

	* src/extension/implementation/script.cpp:
	  support for ruby scripts (interpreter="ruby")

2005-06-20  Ted Gould  <ted@gould.cx>

	* src/desktop.cpp, src/desktop.h, src/document-private.h,
	src/document.cpp, src/document.h, src/extension/effect.h,
	src/extension/implementation/script.cpp:

	Adding in a signal to show that the document is being reconstructed from
	another document.  This is used by the scripting extensions implementation
	to say to the desktops that they need to save their object references
	as strings instead of pointers -- and then recreate them when the
	reconstruction is complete.

	* src/extension/prefdialog.cpp: Making "OK" have focus.

	* src/verbs.cpp, src/verbs.h: Some prototype code to start making verbs
	sensitive or not.  Not tied in to anything currently.

2005-06-20  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-io.cpp: whoops... don't emit xmlns:xml

2005-06-18  Richard Hughes  <cyreve@users.sourceforge.net>

	* src/text-context.cpp, src/text-context.h, src/libnrtype/Layout-TNG.h:
	  implement double- and triple-clicking of text for selecting the
	  current word and line respectively

2005-06-16  MenTaLguY  <mental@rydia.net>

	* src/interface.cpp: removed "Go to root" context menu item

	* src/widgets/layer-selector.cpp: hide "(root)" unless it is the current
	  layer

2005-06-11  Aaron Spike  <aaron@ekips.org>

	* confiugre.ac,
	  packaging/autopackage/default.apspec.in:

	  Adding the autopackage specfile

2005-06-10  Richard Hughes  <cyreve@users.sourceforge.net>

	* src/text-context.cpp:
	  use ctrl-left/right for moving cursor by word in text mode,
	  and ctrl-a for select all text

2005-06-09  Bryce Harrington <bryce@bryceharrington.org>

	* src/ui/dialogs/align-and-distribute.cpp,
	  src/ui/dialogs/align-and-distribute.h,
	  src/verbs.cpp:
	  Hooking up Aubanel's new align and distribute dialog

2005-06-09  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/text-context.cpp (sp_text_context_root_handler):
	  Greater conformance to ISO 14755 for unicode entry.  We now
	  implement all of the ``Basic method'' portion of that spec
	  except for non-latin hexadecimal digits (first 6 letters of
	  other alphabets).  (Instead, we do the same as for all other
	  shortcuts, viz. force a group0 (latin) interpretation of the
	  keypress.)

2005-06-07  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/pen-context.cpp (spdc_endpoint_snap): Pen tool: do snapping
	  (i.e. namedview_free_snap_all_types) even for initial point.

	* src/Makefile.am (INCLUDES), src/extension/script/Makefile_insert
	(extension_script_libscript_a_CXXFLAGS):

	  Put PERL_CFLAGS PYTHON_CFLAGS into global INCLUDES rather than
	  using a libscript_a_CXXFLAGS var (which involved creating .o files
	  specific to that lib).

2005-06-06  Ted Gould  <ted@gould.cx>

	* src/extensions/effect.cpp:

	Adding in the code so that effects can be undoable.

	* src/extensions/implementation/script.[cpp,h]

	Adding in the code so that a new window is not displayed when an
	effect is executed.  Now it is in the same window (much nicer).

	* src/extensions/internal/latex*.[cpp,h]

	Patches from the mailing list to add LaTeX output.

2005-06-04  MenTaLguY  <mental@rydia.net>

	* src/extensions/init.cpp:

	  That tears it.  Showing the error dialog on startup goes.  I've
	  had to respond to one too many bloody bug reports.  If we released
	  0.42 with this too we'll drive away users permanently.  As it was,
	  a lot of people were assuming 0.41 was broken when they saw this
	  and reverted to 0.40.

2005-05-31  MenTaLguY  <mental@rydia.net>

	* src/preferences-skeleton.h: disable extension error dialog on startup
	  -- I'm sick of hearing that Inkscape is broken because people see
	  this dialog on startup.  It makes us look bad.
	  
	  We're not going to repeat this for 0.42 -- find a better approach.

2005-05-28  MenTaLguY  <mental@rydia.net>

	* src/document.cpp, src/sp-ellipse.cpp, src/sp-flowdiv.cpp,
	  src/sp-flowtext.cpp, src/sp-object.cpp, src/sp-object.h,
	  src/sp-path.cpp, src/sp-rect.cpp, src/sp-root.cpp, src/sp-root.h,
	  src/sp-shape.cpp, src/version.cpp, src/version.h:

	  propagate SVG version upwards, and move SPVersion into Inkscape
	  namespace

2005-05-24  Simarilius	<Simarilius@yahoo.com>

	* src/verbs.cpp, src/dialogs/tiledialog.cpp, src/dialogs/tiledialog.h,
	src/ui/dialogs/dialog-manager.cpp
	
	Converted the tiledialog over to the inkscape:ui:dialog class and hooked
	it into dialog manager

2005-05-24  Ted Gould  <ted@gould.cx>

	* src/extension/dependency.cpp, src/extension/extension.cpp,
	src/extension/extension.h, src/extension/init.cpp,
	src/extension/implementation/script.cpp:

	Applying patch 1199856 which allows Inkscape to have multiple directories
	for extensions.  Currently those are /share/inkscape/extensions and
	~/.inkscape/extensions.  The patch was written by Aaron Spike.

2005-05-23  Ted Gould  <ted@gould.cx>

	* share/extensions/<alot>

	Adding in Aaron Spike's extensions so that they come with the standard
	build.  Lot's of useful stuff that is worth having for most users.

2005-05-19  MenTaLguY  <mental@rydia.net>

	* src/verbs.cpp, src/ui/dialog/align-and-distribute.h,
	  src/ui/dialog/dialog-manager.cpp, src/ui/dialog/dialog-manager.h,
	  src/ui/dialog/document-preferences.h, src/ui/dialog/export.h,
	  src/ui/dialog/extension-editor.h, src/ui/dialog/fill-and-stroke.h,
	  src/ui/dialog/find.h, src/ui/dialog/inkscape-preferences.h,
	  src/ui/dialog/layer-editor.h, src/ui/dialog/messages.h,
	  src/ui/dialog/text-properties.h, src/ui/dialog/transformation.h,
	  src/ui/dialog/xml-editor.h, src/ui/view/edit.cpp:

	  refactoring of the dialog manager code, introducing factory
	  functions and a method specifically for showing a dialog

2005-05-19  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp, src/widgets/layer-selector.h:

	  fix layer property undo crash bugs (#1192708 and #1171704)

2005-05-19  MenTaLguY  <mental@rydia.net>

	* src/debug/Makefile_insert, src/debug/sysv-heap.cpp,
	  src/debug/sysv-heap.h, src/gc.cpp, src/debug/gc-heap.h,
	  src/debug/heap.cpp:

	  moved GC Heap statistics stuff into libdebug to ease circular
	  dependencies

2005-05-17  MenTaLguY  <mental@rydia.net>

	* src/ui/dialog/memory.cpp:

	  reduce magnitude of memory jitter somewhat by avoiding some vector
	  resizing and copying

2005-05-16  MenTaLguY  <mental@rydia.net>

	* src/gc.cpp, src/debug/heap.cpp, src/debug/heap.h:

	  revised Debug::Heap API slightly

	* src/ui/dialog/memory.cpp, src/ui/dialog/memory.h:

	  thousands separators and other niceties.  'apply' now forces a
	  garbage collection and immediate update.

2005-05-16  MenTaLguY  <mental@rydia.net>

	* src/ui/dialog/memory.cpp: re-use existing rows, though it doesn't
	  seem to help memory jitter much

2005-05-15  MenTaLguY  <mental@rydia.net>

	* src/debug/heap.cpp: fix bounds error

	* src/ui/dialog/memory.cpp, src/ui/dialog/memory.h:
	
	flesh out basic memory info dialog

2005-05-15  MenTaLguY  <mental@rydia.net>

	* configure.ac: cleaned up tests

	* src/debug/heap.cpp: fixed feature macro names

2005-05-15  MenTaLguY  <mental@rydia.net>

	* configure.ac: added tests for mallinfo and malloc.h

	* src/gc.cpp, src/debug/heap.cpp, src/debug/heap.h:

	  fix up Debug::Heap API slightly

2005-05-14  MenTaLguY  <mental@rydia.net>

	* src/interface.cpp, src/verbs.cpp, src/verbs.h,
	  src/ui/dialog/Makefile_insert, src/ui/dialog/dialog-manager.cpp,
	  src/ui/dialog/dialog-manager.h, src/ui/dialog/memory.cpp,
	  src/ui/dialog/memory.h:
	  
	  added skeletal memory statistics dialog

2005-05-12  Juerg Billeter  <j@bitron.ch>

	* configure.ac: Have pkgconfig explicitly require gdkmm-2.4 & glibmm-2.4
	(used directly by Inkscape), rather than relying on transitive
	dependencies.  It's said that this is required in some cases with
	pkgconfig 0.17 and later.

2005-05-08  Bryce Harrington <bryce@bryceharrington.org>

	* ChangeLog configure.ac src/Makefile_insert src/desktop-widget.h
	  src/desktop.h src/dropper-context.cpp src/file.cpp
	  src/shortcuts.cpp src/sp-text.cpp src/splivarot.cpp
	  src/svg-view.h src/text-context.cpp src/verbs.cpp
	  src/extension/implementation/plugin-link.h
	  src/extension/internal/grid.cpp src/helper/action.h
	  src/helper/window.cpp src/ui/dialog/dialog.cpp
	  src/ui/dialog/messages.cpp src/ui/view/view.cpp
	  src/ui/view/view.h:	

	  Moving view.* into src/ui/view/
	
2005-05-09  MenTaLguY  <mental@rydia.net>

	* src/gc-alloc.h: const-correctness fix

2005-05-08  Bryce Harrington <bryce@bryceharrington.org>

	* configure.ac:  Defaulting with-gnome-vfs to on if library is
	  present. 
	
	* po/POTFILES.in : Fixed error causing compile failure

	* src/Makefile_insert src/arc-context.cpp src/desktop-events.cpp
	   src/desktop.cpp src/desktop.h src/dyna-draw-context.cpp
	   src/gradient-context.cpp src/gradient-toolbar.cpp
	   src/interface.cpp src/make.dep src/make.files
	   src/rect-context.cpp src/select-context.cpp
	   src/select-toolbar.cpp src/seltrans.cpp src/spiral-context.cpp
	   src/star-context.cpp src/toolbox.cpp src/verbs.cpp src/view.cpp
	   src/view.h src/application/application.cpp
	   src/application/application.h src/application/editor.cpp
	   src/application/editor.h src/ui/dialog/align-and-distribute.cpp
	   src/ui/dialog/align-and-distribute.h
	   src/ui/dialog/dialog-manager.cpp src/ui/dialog/dialog-manager.h
	   src/ui/dialog/dialog.cpp src/ui/dialog/dialog.h
	   src/ui/dialog/document-preferences.cpp
	   src/ui/dialog/document-preferences.h src/ui/dialog/export.cpp
	   src/ui/dialog/export.h src/ui/dialog/extension-editor.cpp
	   src/ui/dialog/extension-editor.h
	   src/ui/dialog/fill-and-stroke.cpp
	   src/ui/dialog/fill-and-stroke.h src/ui/dialog/find.cpp
	   src/ui/dialog/find.h src/ui/dialog/inkscape-preferences.cpp
	   src/ui/dialog/inkscape-preferences.h
	   src/ui/dialog/layer-editor.cpp src/ui/dialog/layer-editor.h
	   src/ui/dialog/messages.h src/ui/dialog/text-properties.cpp
	   src/ui/dialog/text-properties.h
	   src/ui/dialog/transformation.cpp src/ui/dialog/transformation.h
	   src/ui/dialog/tree-editor.h src/ui/dialog/xml-editor.cpp
	   src/ui/dialog/xml-editor.h src/ui/view/Makefile_insert
	   src/ui/view/edit.cpp src/ui/view/edit.h :

	   Renaming sp-desktop-widget.h to desktop-widget.h for
	   consistency with other desktop files.  Beginning migration of
	   desktop-* and view* files into ui/view/ subdir.  Incorporating
	   DialogManager into existing SPDesktop code.  Making SPView
	   derive from GObject.  Changing Messages dialog to run via
	   DialogManager.  Removing getName() and getDesc() routines from
	   Dialogs.  
	
2005-05-08  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert: change link order since the GC code now
	  depends on the debugging stuff

	* src/debug/Makefile_insert, src/debug/heap.cpp, src/debug/heap.h:

	  added heap statistics stuff

	* src/gc.cpp: register the GC heap with the heap statistics facility

2005-05-07  MenTaLguY  <mental@rydia.net>

	* src/gc-anchored.h, src/gc-core.h, src/gc-finalized.h,
	  src/gc-managed.h, src/gc.cpp:

	  hide the global Ops structure from the outside world, and expose
	  some additional libgc API.

2005-05-07  Ted Gould  <ted@gould.cx>

	* src/extension/parameter.cpp: bug fix for empty string parameter

	* share/extensions/dropshadow.inx,
	src/extension/implementation/script.cpp:

	Adding in an "interpreter" attribute for "command" that will prepend
	the command with the interpreter.  Right now only "perl" and "python"
	work, and they only prepend "perl" and "python", but more will be
	added later.

2005-05-07  MenTaLguY  <mental@rydia.net>

	* src/xml/composite-node-observer.cpp: bug fixes

	* src/xml/simple-node.cpp, src/xml/simple-node.h: switch to using
	  CompositeNodeObserver, which has saner add/remove semantics

	* src/util/list-container-test.cpp: add another test, just to be sure

	* src/dialogs/xml-tree.cpp: remove need for is_interactive flag on
	  attribute changes (the flag is effectively disabled by the other
	  changes)

2005-05-05  MenTaLguY  <mental@rydia.net>

	* src/debug/event.h, src/debug/logger.cpp:

	  PropertyPair is now its own class
	
	* src/xml/simple-node.cpp: add logging of XML node mutation

	* src/xml/Makefile_insert, src/xml/composite-node-observer.cpp,
	  src/xml/composite-node-observer.h:

	  added CompositeNodeObserver class, which will eventually replace
	  the existing notifier lists

2005-05-05  MenTaLguY  <mental@rydia.net>

	* src/inkscape.cpp: try to cleanly terminate log in case of crashes

2005-05-05  MenTaLguY  <mental@rydia.net>

	* src/document-undo.cpp, src/debug/Makefile_insert, src/debug/logger.cpp,
	  src/debug/simple-event.h, src/xml/event.cpp:

	  add debug logging for undo+redo+transactions

2005-05-05  MenTaLguY  <mental@rydia.net>

	* src/inkscape.cpp, src/main.cpp: initialize and shutdown debug log
	  from more reliable place

	* src/debug/logger.cpp: clean up log via std::atexit()

2005-05-04  MenTaLguY  <mental@rydia.net>

	* configure.ac, src/Makefile.am, src/Makefile_insert,
	  src/debug/Makefile_insert, src/debug/makefile.in:

	  added src/debug/ subdir

	* src/gc-alloc.h: no default management type for now

	* src/debug/event-tracker.h, src/debug/event.h, src/debug/logger.cpp,
	  src/debug/logger.h: simple XML logging facility

	* src/util/Makefile_insert: fixed cut-and-paste error

2005-04-29  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/swatches.cpp, src/dialogs/eek-preview.h,
	  src/dialogs/eek-preview.cpp:

	Added property to swatch to block taking focus.

2005-04-28  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/Makefile_insert, src/dialogs/eek-preview.cpp,
	  src/dialogs/eek-preview.h, src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h, src/ui/previewholder.cpp,
	  src/ui/previewable.h, src/ui/widget/panel.cpp:

	  Adding new widget for color swatch usage.

2005-04-24  Bryce Harrington <bryce@bryceharrington.org>

	* src/Makefile.am src/Makefile_insert,
	  src/application/Makefile_insert, src/application/editor.cpp,
	  src/application/editor.h, src/extension/internal/svg.cpp,
	  src/ui/Makefile_insert, src/ui/view/Makefile_insert,
	  src/ui/view/edit.cpp, src/ui/view/edit.h, src/ui/view/makefile.in,
	  src/application/editor-impl.cpp, src/application/editor-impl.h:

	  Renaming EditorImpl to UI::View::Edit

	  Fixing bug 1185873 "batch mode crasher" caused by VFS being
	  called with relative paths.  Adding a check to see whether the
	  input is a valid uri, and if not, just calling sp_document_new
	  directly.


2005-04-23  Ted Gould  <ted@gould.cx>

	* src/extension/input.cpp, src/extension/input.h,
	src/extension/output.cpp, src/extension/output.h,
	src/extension/system.cpp, src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/implementation/plugin-link.h,
	src/extension/implementation/plugin.cpp,
	src/extension/implementation/plugin.h,
	src/extension/implementation/script.cpp,
	src/extension/implementation/script.h, src/extension/internal/eps-out.cpp,
	src/extension/internal/eps-out.h:

	Changing the prototype for the input/output preferences to be closer to
	that of Effects.  This is a good thing because now autogui can be used for
	all, and it is much cleaner.  Unfortunately, this caused alot of files to
	be changed.  Also, this sets up the extensions dialog (we're only using
	one now) to be integrated into the GTKmm codebase easier.

2005-04-21  Jon A. Cruz  <jon@joncruz.org>
	* src/widgets/sp-color-wheel-selector.cpp,
	  src/widgets/sp-color-scales.h, src/widgets/sp-color-slider.cpp,
	  src/widgets/sp-color-scales.cpp:
	Changed CMYK selector to display values as 0-100. Fixes REF #1124499.

2005-04-21  Jon A. Cruz  <jon@joncruz.org>
	* src/xml/repr-io.cpp:
	Expand entities; matches 0.41 behavior. Fixes bug #1157478.

2005-04-20  Jon A. Cruz  <jon@joncruz.org>
	* src/sp-object-repr.cpp:
	Turned off the half-done <animate> element. Fixes bug #1119935.

2005-04-19  Carl Hetherington  <inkscape@carlh.net>

	* src/pen-context.cpp: snap first point to grid correctly, fixing
	#1152057.  Remove a pointless call to spdc_endpoint_snap().

	* src/main.cpp: support for command-line export of PS and EPS,
	with options.

2005-04-19  Piers Titus van der Torren  <piersvdt@users.sourceforge.net>
	* src/seltrans.cpp:
	Fixed skew so it displays and snaps to angle instead of percentage.

2005-04-18  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/extension/internal/pov-out.cpp (PovOutput::save):
	Was dividing component bytes by 256 instead of the usual 255 to get
	floating point component.  Changed to use sp_color_get_rgb_floatv
	instead.  (N.B. This change is wrong if pov files disallow 1.0.)

	Multiply opacity by product of all ancestors' opacity property computed
	value.

2005-04-18  Carl Hetherington  <inkscape@carlh.net>

	* src/sp-line.cpp, src/dialogs/unclump.cpp,
	src/extension/internal/ps.cpp,
	src/libnrtype/Layout-TNG-Output.cpp,
	src/Layout-TNG-Scanline-Makers.cpp, src/livarot/PathCutting.cpp:
	add missing include of nr-point-matrix-ops.h.

2005-04-17  Jon A. Cruz  <jon@joncruz.org>
	* src/toolbox.cpp:

	Corrected improper use of static. Fixes bug #1171919.

2005-04-16  Ted Gould  <ted@gould.cx>

	* src/extension/extension.cpp, src/extension/parameter.cpp:

	Adding in autogui for strings and booleans.  Also making everything
	a little more robust.

2005-04-17  cyreve  <cyreve@users.sourceforge.net>

	* src/: sp-text.cpp, sp-text.h, text-context.cpp, text-editing.cpp,
	  text-editing.h, libnrtype/Layout-TNG-Compute.cpp: hook up keys
	  for adding rotate= attribute to text elements

	* src/libnrtype/Layout-TNG-OutIter.cpp: visual cursor left/right in
	  counterdirectional text runs

2005-04-16  cyreve  <cyreve@users.sourceforge.net>

	* src/: display/nr-arena-glyphs.cpp, libnrtype/FontInstance.cpp,
	  libnrtype/RasterFont.cpp, libnrtype/font-instance.h,
	  libnrtype/font-style.h: make miter-limit work for text outlines
	  (bug 1094430)

2005-04-16  Ted Gould  <ted@gould.cx>

	* src/main.cpp:

	Added a command-line arguement --extension-directory to find what
	extension directory Inkscape is configured for.  This should be 
	helpful for external extensions that want to use the same path
	as Inkscape itself on their install.

	* src/extension/extension.cpp, src/extension/init.cpp:

	Putting in half of Aaron's fix, mostly the one to keep things from
	crashing, next we need to examine how to add multiple search paths
	for extension dependencies.

	Also, added a check so that autogui won't create a GUI if there are
	no preferences.

2005-04-13  Jon Phillips <jon@rejon.org>
	* src/toolbox.cpp: removed code that was beeping and prepped for new
	  drag-n-drop color swatches.

2005-04-13  cyreve  <cyreve@users.sourceforge.net>

	* src/path-chemistry.cpp: wire up converting object to path for
	  flowtext

2005-04-13  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/swatches.cpp:

	Simple drag-n-drop out from color swatches.

2005-04-12  cyreve  <cyreve@users.sourceforge.net>

	* src/: selection-chemistry.cpp, text-context.cpp, text-context.h,
	  text-editing.cpp, text-editing.h: cut and copy selected text (bug
	  1175441)

2005-04-12  Ted Gould  <ted@gould.cx>

	* src/extension/extension.cpp, src/extension/extension.h,
	src/extension/parameter.cpp, src/extension/parameter.h,
	src/extension/implementation/script.cpp:

	This is support for having command line arguments from the parameters,
	mostly this is a quick hack to get Aaron working, I'll clean it up
	shortly, I promise.  But, it does seem to be working right now.  More
	polish shortly.

2005-04-10  Jon A. Cruz  <jon@joncruz.org>
	* src/interface.cpp:

	Adding drag-n-drop support for arbitrary images. Fixes bug 1177714.


2005-04-10  Ted Gould  <ted@gould.cx>

	* Lots of files:

	Moving around the plugins, and disabling the feature.  I've put all
	the functionality into the internal directory.  This should allow for
	the features to be used until plugins could work.  Also, adding in
	features to do autogui with the parameters of a given extension.

2005-04-09  Bryce <bryce@bryceharrington.org>

	* src/view.h, src/application/editor-impl.cpp,
	  src/application/editor-impl.h, src/svg-view.h:

	  C++-ification.  Created some C++ wrapper member functions for
	  SPView and SPSVGView, to enable Gtkmmification of SPDesktop

2005-04-09  MenTaLguY  <mental@rydia.net>

	* src/selection.cpp, src/selection.h, src/dialogs/align.cpp,
	  src/extension/implementation/script.cpp,
	  src/extension/plugin/bluredge.cpp, src/util/glib-list-iterators.h:

	  excise STL abuse, and fix up the glib list iterators

2005-04-09  MenTaLguY  <mental@rydia.net>

	* src/file.cpp, src/interface.cpp, src/shortcuts.cpp,
	  src/sp-object-repr.cpp, src/sp-skeleton.cpp, src/verbs.cpp,
	  src/dialogs/export.cpp, src/display/nr-arena-item.cpp,
	  src/libnrtype/FontFactory.cpp, src/libnrtype/TextWrapper.h,
	  src/livarot/ShapeMisc.cpp, src/livarot/float-line.cpp:

	  combined several different 64-bit cleanness patches

2005-04-08 Jon Phillips <jon@rejon.org>
	* src/ui/dialog/dialog-manager.cpp src/ui/dialog/dialog-manager.h: 
	  added copyright statements about dialog manager code I wrote.

2005-04-08  MenTaLguY  <mental@rydia.net>

	* src/draw-context.cpp, src/dyna-draw-context.cpp, src/path-chemistry.cpp,
	  src/selection-chemistry.cpp, src/selection.cpp, src/selection.h,
	  src/splivarot.cpp, src/extension/plugin/bluredge.cpp,
	  src/trace/trace.cpp:

	  renaming Inkscape::Selection methods that deal with XML::Nodes

2005-04-08  MenTaLguY  <mental@rydia.net>

	* src/document-undo.cpp: try again with handling incomplete transactions
	  more gracefully

2005-04-06  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/io/sys.h, src/io/sys.cpp (dir_open, dir_read_utf8name):
	  New functions: utf8 wrappers around g_dir_open, g_dir_read_name.

2005-04-02  Bryce Harrington <bryce@bryceharrington.org>

	* configure.ac share/ui/menus-bars.xml, src/Makefile.am,
	  src/Makefile_insert, src/file.cpp,
	  src/application/editor-impl.cpp,
	  src/application/editor-impl.h,
	  src/extension/init.cpp, src/extension/input.cpp,
	  src/extension/system.cpp,
	  src/extension/implementation/implementation.cpp,
	  src/extension/implementation/plugin.cpp,
	  src/extension/implementation/script.cpp,
	  src/extension/internal/svg.cpp
	: Implementing preliminary load-from-URI functionality.
	

2005-04-02  MenTaLguY  <mental@rydia.net>

	* src/document-undo.cpp, src/xml/event-fns.h, src/xml/event.cpp,
	  src/xml/event.h:

	  more debugging info for incomplete transactions

2005-04-02  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-gradient.cpp: Fix crash with cycles in gradient hrefs.

2005-04-01  Jon A. Cruz  <jon@joncruz.org>
	* src/ui/widget/panel.h, src/ui/widget/panel.cpp, src/ui/previewholder.h,
	  src/ui/previewholder.cpp,src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h:
	  Added UI for switching palettes

2005-04-01  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>
	* src/style.cpp (sp_style_merge_from_dying_parent): New function to
	  combine the styles of the <use> element and its ghost child when
	  unlinking.
	* src/sp-use.cpp: Use it.

2005-03-31  Jon A. Cruz  <jon@joncruz.org>
	* src/ui/widget/panel.cpp, src/ui/widget/panel.h, src/path-prefix.h,
	  src/dialogs/swatches.cpp, src/dialogs/swatches.h
	  share/palettes/Makefile.am, share/palettes/svg.gpl:
	  Adding palette loading.

2005-03-31 Jean-Franois Lemaire <jflemaire@skynet.be>
	* share/icons/David_icons.svg: new icon theme by David Christian Berg

	* share/icons/README.icons: explanations on how to use the theme

2005-03-30  Jean-Franois Lemaire <jflemaire@skynet.be>
	* share/icons/icons.svg: included the layer menu icons

	* src/verbs.cpp: assigned names for the layer menu icons

2005-03-24  Jon A. Cruz  <jon@joncruz.org>
	* src/ui/widget/panel.h, src/ui/widget/panel.cpp,
	  src/ui/previewholder.h, src/ui/previewfillable.h,
	  src/dialogs/iconpreview.cpp, src/dialogs/swatches.cpp:
	  Adding panel menu

2005-03-27  Jon Phillips <jon@rejon.org>
	* src/toolbox.cpp src/toolbox.h src/ui/dialog/dialog-manager.cpp
	  src/ui/dialog/dialog-manager.h: Added generic dialog adding,
	  deleting, and getting and fixed toolboxes to be static with no
	  warnings.

2005-03-26  Bryce <bryce@bryceharrington.org>

	* share/ui/keybindings.rc, share/ui/menus-bars.xml
	  src/application/editor-impl.cpp, src/application/editor-impl.h,
	  src/extension/internal/svg.cpp, src/ui/dialog/Makefile_insert,
	  src/ui/dialog/dialog-manager.cpp,
	  src/ui/dialog/dialog-manager.h, src/ui/dialog/messages.cpp,
	  src/ui/dialog/messages.h: Initial implementation of canvas in
	  gtkmm.  Incorporating Messages dialog.


2005-03-24  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp: fix relative transforms to accommodate viewbox

2005-03-24  Jon A. Cruz  <jon@joncruz.org>

	* src/ui/Makefile_insert, src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h, src/ui/previewable.h,
	  src/ui/previewfillable.h, src/ui/previewholder.cpp,
	  src/ui/previewholder.h:
	  Refactoring previewable functionality to be more generic

2005-03-24  cyreve  <cyreve@users.sourceforge.net>

	* src/: text-context.cpp, text-editing.cpp, text-editing.h:
	  functions for applying style to selected text, and wire them
	  up to ctrl-b/ctrl-i for bold/italic

2005-03-23  Jon Phillips <jon@rejon.org>
	* src/toolbox.h src/toolbox.cpp: Fixed warning messages.

2005-03-23  Jon A. Cruz  <jon@joncruz.org>

	* src/ui/previewable.h, src/ui/Makefile_insert,
	  src/dialogs/swatches.h, src/dialogs/swatches.cpp:
	  Preliminary work for 'Previewable' interface.

2005-03-23  cyreve  <cyreve@users.sourceforge.net>

	* src/: sp-text.cpp, libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-Output.cpp: make text on path work correctly
	  with accent glyphs and suchlike

	* src/: text-chemistry.cpp, libnrtype/Layout-TNG.h: apply text's
	  alignment to startOffset on new textpath elements, fixes bug
	  1168145

	* src/libnrtype/Layout-TNG-OutIter.cpp: selecting text to the end
	  sometimes displays wrong

2005-03-22  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/desktop-handles.cpp,
	  src/desktop-handles.h, src/desktop.cpp, src/desktop.h,
	  src/document.h, src/draw-context.cpp, src/draw-context.h,
	  src/file.cpp, src/forward.h, src/gradient-context.cpp,
	  src/gradient-drag.cpp, src/gradient-drag.h, src/gradient-toolbar.cpp,
	  src/inkscape-private.h, src/inkscape.cpp, src/node-context.cpp,
	  src/node-context.h, src/nodepath.cpp, src/object-ui.cpp,
	  src/path-chemistry.cpp, src/rect-context.cpp, src/selcue.cpp,
	  src/selcue.h, src/select-context.cpp, src/select-toolbar.cpp,
	  src/selection-chemistry.cpp, src/selection-chemistry.h,
	  src/selection-describer.cpp, src/selection-describer.h,
	  src/selection.cpp, src/selection.h, src/seltrans.cpp,
	  src/seltrans.h, src/sp-flowtext.cpp, src/spiral-context.cpp,
	  src/splivarot.cpp, src/star-context.cpp, src/text-chemistry.cpp,
	  src/text-context.cpp, src/toolbox.cpp, src/verbs.cpp,
	  src/dialogs/align.cpp, src/dialogs/clonetiler.cpp,
	  src/dialogs/display-settings.cpp, src/dialogs/fill-style.cpp,
	  src/dialogs/find.cpp, src/dialogs/iconpreview.cpp,
	  src/dialogs/item-properties.cpp, src/dialogs/object-properties.cpp,
	  src/dialogs/stroke-style.cpp, src/dialogs/text-edit.cpp,
	  src/dialogs/tiledialog.cpp, src/dialogs/transformation.cpp,
	  src/dialogs/xml-tree.cpp, src/extension/plugin/bluredge.cpp,
	  src/extension/plugin/grid.cpp, src/trace/trace.cpp,
	  src/ui/dialog/dialog.cpp, src/ui/dialog/dialog.h,
	  src/ui/dialog/transformation.cpp, src/ui/dialog/transformation.h,
	  src/widgets/sp-widget.cpp, src/widgets/sp-widget.h:

	  SPSelection -> Inkscape::Selection

2005-03-22  cyreve  <cyreve@users.sourceforge.net>

	* src/text-context.cpp: pressing esc doesn't hide text selection

	* src/: text-context.cpp, text-context.h, text-editing.cpp,
	  text-editing.h, libnrtype/Layout-TNG-OutIter.cpp,
	  libnrtype/Layout-TNG.h: make text selection inverse

2005-03-21  Jon Phillips <jon@rejon.org>

	* share/icons/icons.svg src/dropper-context.cpp
	  src/dropper-context.h src/toolbox.cpp src/toolbox.h
	  src/dialogs/display-settings.cpp: Added controls for eye dropper
	  so that I could get color values. Removed option from application
	  preferences.

2005-03-21  MenTaLguY  <mental@rydia.net>

	* src/util/Makefile_insert, src/util/glib-list.h,
	  src/util/glib-list-iterators.h:

	  retired old Glib list to Util::List adaptor and replaced it with
	  new iterator classes that directly wrap the Glib list types

2005-03-21  cyreve  <cyreve@users.sourceforge.net>

	* src/: text-editing.cpp, libnrtype/Layout-TNG-OutIter.cpp: text
	  selection doesn't show when it starts at the end of a line

	* src/: text-context.cpp, text-editing.cpp: crash on overtyping
	  selection, and displayed selection not removed on overtype

	* src/text-editing.cpp: kerning information placed wrongly in text
	  after child span element

	* src/libnrtype/Layout-TNG-OutIter.cpp: crash when pressing home key

	* src/: text-context.cpp, text-context.h: text selection using the
	  mouse

	* src/: make.dep, make.files, make.ofiles,
	  libnrtype/Layout-TNG-OutIter.cpp: further optimisation of text
	  selection, and an implementation for text on a path

	* src/: text-editing.cpp, libnrtype/Layout-TNG-OutIter.cpp,
	  libnrtype/Layout-TNG.h: optimisation of text selection and fixing
	  some bugs in it

2005-03-18  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/file.cpp, src/gradient-context.cpp,
	  src/node-context.cpp, src/object-ui.cpp, src/path-chemistry.cpp,
	  src/rect-context.cpp, src/select-context.cpp,
	  src/selection-chemistry.cpp, src/selection.cpp, src/selection.h,
	  src/sp-flowtext.cpp, src/spiral-context.cpp, src/splivarot.cpp,
	  src/star-context.cpp, src/text-chemistry.cpp, src/text-context.cpp,
	  src/dialogs/find.cpp, src/dialogs/in-dt-coordsys.cpp,
	  src/dialogs/xml-tree.cpp:

	  cleaned up the selection API slightly

2005-03-20  cyreve  <cyreve@users.sourceforge.net>

	* src/: text-context.cpp, text-context.h, text-editing.cpp,
	  text-editing.h, libnrtype/Layout-TNG-OutIter.cpp,
	  libnrtype/Layout-TNG.h: initial implementation of text selection
	  (keyboard only)

	* src/libnrtype/Layout-TNG-OutIter.cpp: making
	  createSelectionShape() work

	* src/: sp-text.cpp, sp-text.h: text-anchor sometimes won't work in
	  text on a path when x/y coordinates are set

	* src/libnrtype/Layout-TNG-Output.cpp: text on path: cut characters
	  before start of path and calculate bounding box correctly when
	  this happens

2005-03-14  Jon A. Cruz  <jon@joncruz.org>
	* src/dialogs/Makefile_insert, src/dialogs/swatches.cpp,
	  src/dialogs/swatches.h, src/verbs.h, src/verbs.cpp,
	  src/interface.cpp:
	  Initial cut of swatches panel.

2005-03-19  cyreve  <cyreve@users.sourceforge.net>

	* src/libnrtype/Layout-TNG-Compute.cpp: rendering of
	  multiple-character clusters in rtl text is wrong (bug 1166603)

	* src/: make.dep, make.files, make.ofiles, sp-text.cpp, sp-text.h,
	  text-editing.cpp: glue kerning info back together on deleting
	  line breaks

	* src/sp-tspan.cpp: textpath startOffset attribute doesn't save
	  correctly when it's a percentage (remnants of bug 1124722)

	* src/: text-context.cpp, text-context.h, text-editing.cpp,
	  text-editing.h, libnrtype/Layout-TNG.h: use Layout::iterator for
	  storing cursor position. Fixes bug 1093660 related to rtl cursor
	  movement

	* src/libnrtype/: Layout-TNG-OutIter.cpp, Layout-TNG.h: implement
	  backend cursor movement functions properly for multidirectional
	  text

	* src/libnrtype/Layout-TNG-Output.cpp: create more efficient
	  postscript output

	* src/libnrtype/: Layout-TNG-OutIter.cpp, Layout-TNG-Output.cpp,
	  Layout-TNG.h: obey text-align attribute when fitting text to a
	  path (fixes bug 1124722)

	* src/: attributes-test.cpp, attributes.cpp, attributes.h,
	  sp-flowtext.cpp, sp-text.cpp, sp-tspan.cpp, sp-tspan.h,
	  style-test.cpp, libnrtype/Layout-TNG-Output.cpp: wire up
	  startOffset attribute to textpath and fix bugs in it

	* src/sp-flowtext.cpp: unflow text command loses formatting

	* src/xml/repr-io.cpp: xml pretty-printer adding whitespace in
	  xml:space=preserve elements

	* src/: sp-flowtext.cpp, text-editing.cpp: line breaks not being
	  put before strings immediately following para elements, and
	  deleting line breaks copies style wrongly

2005-03-18  MenTaLguY  <mental@rydia.net>

	* src/file.cpp, src/sp-item-group.cpp, src/xml/Makefile_insert,
	  src/xml/node-fns-tree.cpp, src/xml/node-fns-tree.h,
	  src/xml/node-fns.cpp, src/xml/node-fns.h, src/xml/node-iterators.h,
	  src/xml/repr.cpp, src/xml/simple-node.cpp:

	  renamed node-fns-tree to node-fns, and moved sp_repr_prev etc
	  into Inkscape::XML namespace (as e.g. previous_node)

2005-03-18  cyreve  <cyreve@users.sourceforge.net>

	* src/libnrtype/Layout-TNG-Compute.cpp: cursor position on blank
	  first line sometimes goes wrong

	* src/: make.dep, make.files, make.ofiles, text-editing.cpp:
	  spurious line break added before text in text and font dialog
	  (bug 1166016)

	* src/: make.dep, make.files, make.ofiles, libnrtype/FlowBoxes.cpp,
	  libnrtype/FlowBoxes.h, libnrtype/FlowDefs.h,
	  libnrtype/FlowDest.cpp, libnrtype/FlowDest.h,
	  libnrtype/FlowEater.cpp, libnrtype/FlowEater.h,
	  libnrtype/FlowRes.cpp, libnrtype/FlowRes.h,
	  libnrtype/FlowResOut.cpp, libnrtype/FlowSols.cpp,
	  libnrtype/FlowSols.h, libnrtype/FlowSrc.cpp, libnrtype/FlowSrc.h,
	  libnrtype/FlowSrcText.cpp, libnrtype/FlowSrcText.h,
	  libnrtype/FlowStyle.cpp, libnrtype/FlowStyle.h,
	  libnrtype/FlowUtils.cpp, libnrtype/FlowUtils.h,
	  libnrtype/Makefile_insert: remove all old text layout code (7,577
	  lines)

	* src/: sp-flowregion.cpp, sp-flowregion.h, sp-flowtext.cpp,
	  sp-string.cpp, sp-tspan.cpp: purge flow_dest class from code

	* src/: text-editing.cpp, libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG.cpp, libnrtype/Layout-TNG.h: define a value
	  for line-height:normal and use it consistently

	* src/: sp-text.cpp, sp-text.h, text-editing.cpp: adjust kerning
	  attributes on adding/removing line breaks

2005-03-17  MenTaLguY  <mental@rydia.net>

	* src/display/nr-arena-group.cpp, src/display/nr-arena-item.cpp:

	  whoops, we were calling the 'children' vfunc rather than
	  'last_child' when appending, hence the bug... fixed now.

2005-03-17  cyreve  <cyreve@users.sourceforge.net>

	* src/: sp-text.cpp, libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-OutIter.cpp, libnrtype/Layout-TNG.h: x,y
	  attributes on tspans set wrongly when alignment != left (bug
	  1165427)

	* src/: sp-text.cpp, sp-text.h: break before tspan role=line
	  elements, ie allow first tspan not to have role=line

	* src/: make.dep, make.files, make.ofiles, sp-flowtext.cpp,
	  sp-object.cpp: fix inheritance problems with xml:space attribute

	* src/libnrtype/Layout-TNG-OutIter.cpp: crash on pressing enter
	  immediately after creating text

	* src/: object-ui.cpp, sp-flowtext.cpp: set xml:space=preserve on
	  new flowdiv elements

	* src/libnrtype/Layout-TNG-Compute.cpp: second try at solving
	  numerical problems when line-height is set

	* src/: sp-flowtext.cpp, sp-flowtext.h, verbs.cpp: slightly
	  objectify SPFlowtext and rearrange its updating a tiny bit

	* src/: path-chemistry.cpp, sp-flowregion.cpp, sp-offset.cpp,
	  sp-text.cpp, sp-text.h, sp-use-reference.cpp, splivarot.cpp:
	  slightly objectify SPText & rearrange updating code, also fixes
	  bug causing all letters to appear on top of each other

	* src/libnrtype/Layout-TNG-Compute.cpp: characters will draw
	  multiple times when x or y attributes set

2005-03-16  cyreve  <cyreve@users.sourceforge.net>

	* src/text-editing.cpp: kerning: add/remove kerns with
	  insertion/deletion of characters, and only apply kerns to the
	  topmost xml object

	* src/: help.cpp, selection-chemistry.cpp, sp-text.cpp, sp-text.h,
	  text-context.cpp, text-editing.cpp, text-editing.h,
	  dialogs/text-edit.cpp: move functions applying to both text and
	  flowtext to text-editing & rename them. Also fixes crash on
	  letter/linespacing adjustment for flowtext

	* src/text-editing.cpp: fix crash on pressing delete at the end of
	  text

	* src/: text-editing.cpp, libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-OutIter.cpp, libnrtype/Layout-TNG.h:
	  position cursor correctly in empty text objects

	* src/: sp-item-group.cpp, sp-object.cpp: optimise adding children
	  to the end of a group - big improvement for tile clones

	* src/: sp-flowtext.cpp, sp-text.cpp, text-context.cpp,
	  text-editing.cpp, text-editing.h: text editing fixes: track line
	  breaks with preceding para tag, finish abstracting line
	  break/remove functions to work on flowtext

	* src/libnrtype/Layout-TNG-Compute.cpp: cursor positioning
	  off-by-one in some cases of wrapped text

2005-03-15  cyreve  <cyreve@users.sourceforge.net>

	* src/libnrtype/Layout-TNG-Compute.cpp: small tweak to make cursor
	  positioning work right in counterdirectional spans in fully
	  justified text

	* src/sp-text.cpp: tweak function for adjusting linespacing by
	  keyboard to be more precise

	* src/: attributes-test.cpp, attributes.cpp, make.dep, make.files,
	  make.ofiles, style-test.cpp, style.cpp,
	  libnrtype/Layout-TNG-Output.cpp: make the unit tests pass for the
	  new styles, and workaround build breakage when pango < 1.8
	  installed

	* src/: sp-flowtext.cpp, sp-flowtext.h,
	  libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-Scanline-Makers.cpp, libnrtype/Layout-TNG.h:
	  wiring up full justification to old attribute & fixing bugs in
	  it, which turned in to a major refactoring of layout code

2005-03-14  Jon Phillips <jon@rejon.org>
	* src/attributes-test.cpp, src/attributes.cpp, src/attributes.h,
	  src/desktop.cpp, src/sp-namedview.cpp, src/sp-namedview.h,
	  src/dialogs/desktop-properties.cpp:
	  Added showpageshadow preference to document preferences. Set to
	  on automatically and saves with document if off.

2005-03-14  MenTaLguY  <mental@rydia.net>

	* src/display/nr-arena-item.h, src/display/nr-arena-item.cpp,
	  src/display/nr-arena-group.cpp:

	  added virtual accessor for last child

2005-03-14  Jon A. Cruz  <jon@joncruz.org>
	* src/interface.cpp, src/verb.cpp, src/verbs.h,
	  src/ui/widget/panel.cpp, src/dialogs/Makefile_insert,
	  src/dialogs/extensions.cpp, src/dialogs/extensions.h,
	  src/extension/error-file.cpp:
	  Added rough cut of initial extensions panel and dialog.

2005-03-13  Bryce Harrington <bryce@bryceharrington.org>

	* src/path-prefix.h: Rearranging linking of libui and libutil

	* src/application/application.cpp, src/application/application.h
	  src/application/editor-impl.cpp,
	  src/ui/dialog/dialog-manager.cpp,  src/ui/dialog/dialog.cpp,
	  src/ui/dialog/dialog.h, src/ui/widget/labelled.cpp,
	  src/ui/dialog/transformation.h, src/ui/dialog/transformation.cpp,
	  src/ui/widget/unit-menu.h, src/util/units.cpp:
	  Integrating Transformation dialog.  Removing hardcoded paths.

	* share/icons/Makefile.in, share/icons/arrows-horiz.svg,
	  share/icons/arrows-vert.svg, share/icons/arrows_hor.xpm,
	  share/icons/arrows_ver.xpm, share/icons/rotate.svg,
	  share/icons/rotate.xpm, share/icons/scale_hor.xpm,
	  share/icons/scale_ver.xpm, share/icons/Makefile.am:
	  Adding icons needed by transformation dialog

	* share/ui/units.txt,  share/ui/units.xml:
	  Moving units into ui/ subdir.  Dunno if this is the best
	  location for them, but pjrm thought it'd be ok for now.

2005-03-13  cyreve  <cyreve@users.sourceforge.net>

	* src/sp-text.cpp: allow adjusting letter spacing when cursor is at
	  eol

	* src/: make.dep, make.files, make.ofiles,
	  libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-OutIter.cpp,
	  libnrtype/Layout-TNG-Output.cpp, libnrtype/Layout-TNG.h: fix
	  kerning when align != left, and fix linespacing < 100

	* src/: sp-flowtext.cpp, sp-text.cpp, sp-text.h, style.cpp,
	  style.h, libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-Input.cpp, libnrtype/Layout-TNG-OutIter.cpp,
	  libnrtype/Layout-TNG-Output.cpp,
	  libnrtype/Layout-TNG-Scanline-Maker.h, libnrtype/Layout-TNG.h:
	  implement line-height css property, & fix percentage handling in
	  style

2005-03-12  MenTaLguY  <mental@rydia.net>

	* src/node-context.cpp, src/node-context.h, src/nodepath.cpp,
	  src/nodepath.h, src/toolbox.cpp, src/dialogs/align.cpp:

	  Renamed Path namespace to Inkscape::NodePath, to avoid conflict
	  with livarot

2005-03-12  Kees Cook  <kees@outflux.net>

	* inkscape.nsi: added German translation from Adib Taraben.

2005-03-12  MenTaLguY  <mental@rydia.net>

	* src/sp-namedview.cpp, src/sp-metadata.cpp: it's valid for an SPObject
	  'write' method to be passed the object's own XML node; account for this.

2005-03-12  MenTaLguY  <mental@rydia.net>

	* src/xml/simple-node.cpp: assert that src != this in
	  SimpleNode::mergeFrom

2005-03-12  MenTaLguY  <mental@rydia.net>

	* src/gc-alloc.h: minor cosmetic adjustments

	* src/util/list-container.h: pedantically correct implementation of
	  ListContainer::max_size()

	* src/xml/simple-node.cpp: use Util::ListContainer iterators in a more
	  STL-ish fashion

2005-03-12  Jon A. Cruz  <jon@joncruz.org>
	* src/ui/widget/panel.h, src/ui/widget/panel.cpp,
	  src/ui/widget/Makefile_insert, src/dialogs/iconpreview.h,
	  src/dialogs/iconpreview.cpp:
	  Initial addition of Panel.

2005-03-12  cyreve  <cyreve@users.sourceforge.net>

	* src/sp-flowtext.cpp: text unflow command losing space characters:
	  add xml:space to generated elements

	* src/: attributes.cpp, attributes.h, make.dep, make.files,
	  make.ofiles, sp-flowtext.cpp, sp-text.cpp, style.cpp, style.h,
	  text-context.cpp, text-editing.cpp, dialogs/text-edit.cpp,
	  libnrtype/FlowRes.cpp, libnrtype/Layout-TNG-Compute.cpp,
	  libnrtype/Layout-TNG-Input.cpp: add several new text properties
	  to SPStyle and rearrange some of the existing ones, also remove
	  spurious warning on applying kerning

	* src/sp-flowtext.cpp: svg spec requires us to break after flowline
	  content, not before

2005-03-11  cyreve  <cyreve@users.sourceforge.net>

	* src/desktop-style.cpp, src/sp-text.cpp, src/sp-text.h,
	  src/sp-tspan.cpp, src/sp-tspan.h, src/text-chemistry.cpp,
src/text-editing.cpp,
	  src/text-editing.h: combine the common attribute handling for text,
	  tspan and textpath into one class

	* src/sp-flowtext.cpp, src/sp-string.cpp: reimplement xml:space attribute

	* src/sp-text.cpp, src/libnrtype/Layout-TNG-OutIter.cpp,
	  src/libnrtype/Layout-TNG.h: apply calculated x/y attributes to tspan
	  role=line elements

	* src/libnrtype/Layout-TNG-Output.cpp: postscript text output
	  incorrectly scaled (and other problems)

2005-03-10  cyreve  <cyreve@users.sourceforge.net>

	* src/sp-flowdiv.h, src/sp-flowtext.h,
	  src/sp-text.cpp, src/sp-text.h, src/sp-tspan.h, src/text-context.cpp,
	  src/text-editing.cpp, src/text-editing.h,
	  src/libnrtype/Layout-TNG-Compute.cpp,
	  src/libnrtype/Layout-TNG-OutIter.cpp: clean up xml tree properly on
	  deleting line break, & fix various compile issues

	* src/nodepath.cpp, src/sp-flowdiv.cpp,
	  src/sp-flowdiv.h, src/sp-flowtext.cpp, src/sp-flowtext.h,
src/sp-string.cpp,
	  src/sp-string.h, src/sp-text.cpp, src/sp-text.h, src/sp-tspan.cpp,
src/sp-tspan.h,
	  src/text-editing.cpp, src/verbs.cpp, src/libnrtype/FontInstance.cpp,
	  src/libnrtype/font-instance.h, src/livarot/Shape.h,
	  src/libnrtype/Layout-TNG-Compute.cpp, src/libnrtype/Layout-TNG-Input.cpp,
	  src/libnrtype/Layout-TNG-OutIter.cpp,
	  src/libnrtype/Layout-TNG-Output.cpp,
	  src/libnrtype/Layout-TNG-Scanline-Maker.h,
	  src/libnrtype/Layout-TNG-Scanline-Makers.cpp,
	  src/libnrtype/Layout-TNG.cpp, libnrtype/Layout-TNG.h: huge rewrite of
	  text layout (and some text editing) code

2005-03-07  Kees Cook  <kees@outflux.net>

	* src/libnr/have_mmx.S, src/libnr/nr_mmx_R8G8B8A8_P_EMPTY_A8_RGBAP.S,
	  src/libnr/nr_mmx_R8G8B8A8_P_R8G8B8A8_P_A8_RGBAP.S,
	  src/libnr/nr_mmx_R8G8B8A8_P_R8G8B8A8_P_R8G8B8A8_N_TRANSFORM.S,
	  src/libnr/nr_mmx_R8G8B8_R8G8B8_R8G8B8A8_P.S: execstack patch
	  from Mike Hearn.

2005-03-07  Jon A. Cruz  <jon@joncruz.org>
	* src/interface.cpp, src/verbs.h, src.verbs.cpp, src/widgets/icon.cpp,
	  src/dialogs/iconpreview.h, src/dialogs/iconpreview.cpp,
	  src/dialogs/Makefile_insert:
	  Initial cut of icon preview.

2005-03-05  Bryce Harrington <bryce@bryceharrington.org>

	* share/icons/*.svg, share/icons/Makefile.am:  Adding icons for
	  new gui interface

	* src/ui/icons.cpp:  Fixing some paths

	* src/main.cpp src/application/Makefile_insert,
	  src/application/app-prototype.h,
	  src/application/application.cpp src/application/editor.cpp,
	  src/ui/widget/toolbox.cpp,
	  src/application/editor-impl.cpp:
	  Broke out editor-impl class to its own file.  Continued getting
	  the new interface to the point where it'll load and run.

	* share/ui/keybindings.rc, share/ui/toolbox.xml, share/ui/menus-bars.xml:
	  Migrating some of the UI definition stuff into main codebase

2005-03-05  Jon A. Cruz  <jon@joncruz.org>
	* src/widgets/layer-selector.cpp, src/widgets/icon.h,
	  src/widgets/icon.cpp, src/dialogs/align.cpp, src/dialogs/find.cpp,
	  src/dialogs/object-properties.cpp, src/dialogs/stroke-style.cpp,
	  src/dialogs/text-edit.cpp, src/dialogs/transformation.cpp,
	  src/dialogs/xml-tree.cpp, src/interface.cpp:
	  Purging PixBufFactory and sp_icon_new_scaled.

2005-03-05  Jon A. Cruz  <jon@joncruz.org>
	* src/widgets/icon.cpp, src/widgets/icon.cpp: Switched icon loading
	  to be deferred and react to theme changes on-the-fly.

2005-03-05  Bryce Harrington <bryce@bryceharrington.org>

	* src/application/Makefile_insert,
	  src/application/app-prototype.cpp,
	  src/application/editor.h,
	  src/application/app-prototype.h,
	  src/application/application.cpp:
	  Adding Application::AppPrototype class
	* src/application/editor.cpp,
	  src/application/editor.h:
	  Changing member function getImpl() to getWindow()

2005-03-04  Jon A. Cruz  <jon@joncruz.org>
	* src/widgets/icon.cpp: Changed stock item loading to use stock
	  GtkImage widgets directly.

2005-03-03  MenTaLguY  <mental@rydia.net>

	* src/widgets/icon.cpp: more idiomatic iteration

2005-03-02  Jon A. Cruz  <jon@joncruz.org>
	* src/toolbox.cpp: Added preference to make the top toolbox 'small'.

2005-03-02  Jon A. Cruz  <jon@joncruz.org>
	* src/desktop-events.cpp, src/desktop.cpp, src/gradient-toolbar.cpp,
	  src/interface.cpp, src/select-toolbar.cpp, src/toolbox.cpp,
	  src/toolbox.h, src/dialogs/find.cpp,
	  src/dialogs/object-properties.cpp, src/dialogs/stroke-style.cpp,
	  src/dialogs/text-edit.cpp, src/dialogs/transformation.cpp,
	  src/dialogs/xml-tree.cpp, src/widgets/button.cpp,
	  src/widgets/button.h, src/widgets/icon.cpp, src/widgets/icon.h,
	  src/widgets/layer-selector.cpp, src/widgets/paint-selector.cpp,
	  src/widgets/widget-sizes.h:
	  Initial pass removing hardcoded icon sizes.

2005-03-01  MenTaLguY  <mental@rydia.net>

	* src/extensions/internal/ps.cpp: apply patch from Michael Forbes
	  (miforbes@mbhs.edu) to support gradient fills in Postscript

2005-03-01  MenTaLguY  <mental@rydia.net>

	* src/xml/node.h, src/xml/simple-node.cpp, src/xml/simple-node.h:

	  begin migration of notification interface to use NodeObserver
	  rather than NodeEventVector

2005-03-01  MenTaLguY  <mental@rydia.net>

	* src/xml/Makefile_insert, src/xml/node-listener.h, src/xml/repr.cpp,
	  src/xml/simple-node.cpp, src/xml/simple-node.h:

	  reworked listener list to use Util::ListContainer

	* src/xml/node-observer.h: minor name cleanups

2005-03-01  MenTaLguY  <mental@rydia.net>

	* src/Makefile.am, src/algorithms/find-if-before.h:

	  added new generic algorithm

2005-03-01  MenTaLguY  <mental@rydia.net>

	* src/Makefile.am, src/util/Makefile_insert,
	  src/util/list-container-test.cpp, src/util/list-container.h:

	  tests and fixes for Util::ListContainer

2005-03-01  MenTaLguY  <mental@rydia.net>

	* src/Makefile.am, src/libnr/Makefile_insert, src/xml/Makefile_insert:
	  use in-tree copy of cxxtest

	* src/util/Makefile_insert, src/util/list-container.h:
	  add Util::List-based STL container

2005-02-28 SwinginCelt  <swinginceltgmail.com>

	* Fixed an improper conversion of sp_repr_document_merge that was causing
	  extra data being written to the prefrences file every time inkscape
	  exited.

2005-02-26 SwinginCelt  <swinginceltgmail.com>

	* Replaced all sp_repr_set_content calls with direct call to
	  repr->setContent.
	* Replaced all sp_repr_merge calls with direct call to
	  repr->mergeFrom.
	* Removed inline sp_repr_document_merge because it wasn't used anywhere.
	* Removed inline sp_repr_set_content because it wasn't used anywhere.

2005-02-26  MenTaLguY  <mental@rydia.net>

	* cxxtest: imported cxxtest tree

2005-02-24  Jon A. Cruz  <jon@joncruz.org>
	* src/main.cpp, io/sys.h, io/sys.cpp:
	  Refactoring input filename conversion and fallback.
	  Fixes bug #1151536.

2005-02-22  Jon A. Cruz  <jon@joncruz.org>
	* src/main.cpp:
	  Refactoring sp_main_*. Adding cleanup phase on extracted filename list.

2005-02-22  Bryce Harrington <bryce@bryceharringotn.org>

	* src/main.cpp, src/application/application.cpp:  Adding --new-gui
	option.

2005-02-22  Ted Gould  <ted@gould.cx>

	* src/interface.cpp:

	Changing the effects menu to be driven by the preferences file so that the
	file can be the same whether or not the effects are shown.

2005-02-22  MenTaLguY  <mental@rydia.net>

	* src/desktop-style.cpp, src/selection-chemistry.cpp,
	  src/xml/attribute-record.h, src/xml/node.h, src/xml/repr-css.cpp,
	  src/xml/repr-io.cpp, src/xml/simple-node.cpp, src/xml/simple-node.h:

	  use Inkscape::Util::List for attribute lists, and sprinkle some
	  appropriate 'using's in to make things less verbose

2005-02-22  Jon A. Cruz  <jon@joncruz.org>
	* src/inkscape.cpp, src/main.cpp, src/extension/input.cpp, src/io/sys.cpp,
	  src/xml/repr-io.cpp:
	  Better catching of problematic filenames.
	  Made segv handler only use dialog box when app is using a gui.
	  Fixes bug #1145847.

2005-02-22  Ted Gould  <ted@gould.cx>

	* src/extension/effect.cpp, src/extension/prefdialog.cpp,
	src/extension/prefdialog.h,
	src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/implementation/plugin-link.h,
	src/extension/implementation/plugin.cpp,
	src/extension/implementation/plugin.h,
	src/extension/implementation/script.cpp,
	src/extension/implementation/script.h, src/extension/plugin/grid.cpp:

	Changing the API of the effects preferences so that it doesn't use
	sockets and plugs anymore.  Now there is a generic widget passed down so
	that should work on every platform.

	* src/extension/plugin/grid.cpp:

	Fixing the grid so that it uses the right axis.

	* share/extensions/Makefile.am, share/extensions/bluredge.inx,
	share/extensions/randompnt.inx, share/extensions/randompos.inx,
	src/extension/plugin/Makefile_insert, src/extension/plugin/bluredge.cpp,
	src/extension/plugin/randompnt.cpp, src/extension/plugin/randompos.cpp:

	Adding some cool new effects, well, they're not really done yet,
	but getting the basis code into CVS so I don't loose it :)

2005-02-21  MenTaLguY  <mental@rydia.net>

	* src/file.cpp, src/sp-item-group.cpp, src/xml/Makefile_insert,
	  src/xml/node-fns-tree.cpp, src/xml/node-fns-tree.h,
	  src/xml/repr-get-children.cpp, src/xml/repr-get-children.h,
	  src/xml/repr.cpp, src/xml/simple-node.cpp:

	  renamed header files

	* src/xml/Makefile_insert, src/xml/invalid-operation-exception.h:

	  added Inkscape::XML::InvalidOperationException

	* src/xml/simple-node.h:

	  avoid a second indirect function call from SimpleNode::appendChild

2005-02-20 SwinginCelt  <swinginceltgmail.com>

	* Replaced all sp_repr_attr calls with direct call to
	  repr->attribute.
	* Replaced all sp_repr_document_unref calls with direct call to
	  Inkscape::GC::release(...).
	* Removed iinline sp_repr_document_ref because it wasn't used anywhere.

2005-02-20  MenTaLguY  <mental@rydia.net>

	* src/inkscape.cpp: removed unused signals

2005-02-19  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/desktop.cpp, src/document-private.h,
	  src/document-undo.cpp, src/document.cpp, src/event-context.cpp,
	  src/gradient-chemistry.cpp, src/gradient-chemistry.h,
	  src/gradient-drag.cpp, src/gradient-drag.h, src/node-context.cpp,
	  src/rect-context.cpp, src/sp-object.cpp, src/spiral-context.cpp,
	  src/star-context.cpp, src/toolbox.cpp,
	  src/dialogs/desktop-properties.cpp, src/widgets/gradient-vector.cpp,
	  src/widgets/layer-selector.cpp, src/widgets/sp-widget.cpp,
	  src/widgets/sp-xmlview-attr-list.cpp, src/widgets/sp-xmlview-content.cpp,
	  src/widgets/sp-xmlview-tree.cpp, src/xml/Makefile_insert,
	  src/xml/attribute-record.h, src/xml/document.h, src/xml/event-fns.h,
	  src/xml/event.cpp, src/xml/event.h, src/xml/node-event-vector.h,
	  src/xml/node-iterators.h, src/xml/node-listener.h, src/xml/node.h,
	  src/xml/repr-action-test.cpp, src/xml/repr-css.cpp, src/xml/repr-io.cpp,
	  src/xml/repr-sorting.cpp, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/repr.h, src/xml/simple-document.h, src/xml/simple-node.cpp,
	  src/xml/simple-node.h, src/xml/simple-session.cpp,
	  src/xml/sp-css-attr.h, src/xml/sp-repr-action-fns.h,
	  src/xml/sp-repr-action.cpp, src/xml/sp-repr-action.h,
	  src/xml/sp-repr-attr.h, src/xml/sp-repr-doc.h,
	  src/xml/sp-repr-event-vector.h, src/xml/sp-repr-iterators.h,
	  src/xml/sp-repr-listener.h, src/xml/sp-repr.h:

	  renamed header files to match new class names

2005-02-19  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/arc-context.h, src/desktop-events.cpp,
	  src/desktop-style.cpp, src/desktop-style.h, src/desktop.cpp,
	  src/document-private.h, src/document-undo.cpp, src/document.cpp,
	  src/document.h, src/draw-context.cpp, src/dyna-draw-context.cpp,
	  src/dyna-draw-context.h, src/event-context.cpp, src/event-context.h,
	  src/file.cpp, src/gradient-chemistry.cpp, src/inkscape.cpp,
	  src/inkscape.h, src/inkview.cpp, src/interface.cpp, src/knotholder.cpp,
	  src/knotholder.h, src/layer-fns.cpp, src/main.cpp, src/node-context.cpp,
	  src/nodepath.cpp, src/nodepath.h, src/object-ui.cpp,
	  src/path-chemistry.cpp, src/prefs-utils.cpp, src/rect-context.cpp,
	  src/rect-context.h, src/selection-chemistry.cpp, src/selection.cpp,
	  src/selection.h, src/seltrans.cpp, src/sp-anchor.cpp,
	  src/sp-animation.cpp, src/sp-clippath.cpp, src/sp-conn-end-pair.cpp,
	  src/sp-conn-end-pair.h, src/sp-defs.cpp, src/sp-ellipse.cpp,
	  src/sp-flowdiv.cpp, src/sp-flowregion.cpp, src/sp-flowtext.cpp,
	  src/sp-gradient-fns.h, src/sp-gradient-test.cpp, src/sp-gradient.cpp,
	  src/sp-guide.cpp, src/sp-image.cpp, src/sp-item-group.cpp,
	  src/sp-item.cpp, src/sp-item.h, src/sp-line.cpp,
	  src/sp-linear-gradient-fns.h, src/sp-marker.cpp, src/sp-mask.cpp,
	  src/sp-metadata.cpp, src/sp-namedview.cpp, src/sp-namedview.h,
	  src/sp-object-group.cpp, src/sp-object-repr.cpp, src/sp-object-repr.h,
	  src/sp-object.cpp, src/sp-object.h, src/sp-offset.cpp, src/sp-offset.h,
	  src/sp-path.cpp, src/sp-pattern.cpp, src/sp-polygon.cpp,
	  src/sp-polyline.cpp, src/sp-radial-gradient-fns.h, src/sp-rect.cpp,
	  src/sp-root.cpp, src/sp-shape.cpp, src/sp-skeleton.cpp,
	  src/sp-spiral.cpp, src/sp-star.cpp, src/sp-string.cpp,
	  src/sp-symbol.cpp, src/sp-text.cpp, src/sp-tspan.cpp,
	  src/sp-use-reference.h, src/sp-use.cpp, src/spiral-context.cpp,
	  src/spiral-context.h, src/splivarot.cpp, src/star-context.cpp,
	  src/star-context.h, src/style.cpp, src/style.h, src/text-chemistry.cpp,
	  src/text-context.cpp, src/text-editing.cpp, src/toolbox.cpp,
	  src/verbs.cpp, src/application/application.cpp,
	  src/application/application.h, src/application/editor.h,
	  src/dialogs/clonetiler.cpp, src/dialogs/desktop-properties.cpp,
	  src/dialogs/export.cpp, src/dialogs/fill-style.cpp, src/dialogs/rdf.cpp,
	  src/dialogs/sp-attribute-widget.cpp, src/dialogs/sp-attribute-widget.h,
	  src/dialogs/stroke-style.cpp, src/dialogs/text-edit.cpp,
	  src/dialogs/tiledialog.cpp, src/dialogs/xml-tree.cpp,
	  src/ecma/EcmaBinding.cpp, src/ecma/EcmaBinding.h,
	  src/extension/dependency.cpp, src/extension/dependency.h,
	  src/extension/effect.cpp, src/extension/effect.h,
	  src/extension/extension.cpp, src/extension/extension.h,
	  src/extension/input.cpp, src/extension/input.h,
	  src/extension/output.cpp, src/extension/output.h,
	  src/extension/print.cpp, src/extension/print.h, src/extension/system.cpp,
	  src/extension/implementation/plugin.cpp,
	  src/extension/implementation/script.cpp,
	  src/extension/implementation/script.h,
	  src/extension/internal/gdkpixbuf-input.cpp,
	  src/extension/internal/pov-out.cpp, src/extension/internal/ps.cpp,
	  src/extension/internal/svg.cpp, src/extension/plugin/grid.cpp,
	  src/helper/stock-items.cpp, src/trace/trace.cpp,
	  src/widgets/dash-selector.cpp, src/widgets/dash-selector.h,
	  src/widgets/gradient-selector.cpp, src/widgets/gradient-vector.cpp,
	  src/widgets/layer-selector.cpp, src/widgets/layer-selector.h,
	  src/widgets/paint-selector.cpp, src/widgets/sp-widget.cpp,
	  src/widgets/sp-widget.h, src/widgets/sp-xmlview-attr-list.cpp,
	  src/widgets/sp-xmlview-attr-list.h, src/widgets/sp-xmlview-content.cpp,
	  src/widgets/sp-xmlview-content.h, src/widgets/sp-xmlview-tree.cpp,
	  src/widgets/sp-xmlview-tree.h, src/widgets/spw-utilities.h,
	  src/xml/comment-node.h, src/xml/element-node.h, src/xml/node-observer.h,
	  src/xml/repr-action-test.cpp, src/xml/repr-css.cpp,
	  src/xml/repr-get-children.cpp, src/xml/repr-get-children.h,
	  src/xml/repr-io.cpp, src/xml/repr-sorting.cpp, src/xml/repr-sorting.h,
	  src/xml/repr-util.cpp, src/xml/repr.cpp, src/xml/repr.h,
	  src/xml/session.h, src/xml/simple-document.h, src/xml/simple-node.cpp,
	  src/xml/simple-node.h, src/xml/simple-session.cpp,
	  src/xml/simple-session.h, src/xml/sp-css-attr.h,
	  src/xml/sp-repr-action-fns.h, src/xml/sp-repr-action.cpp,
	  src/xml/sp-repr-action.h, src/xml/sp-repr-attr.h,
	  src/xml/sp-repr-doc.h, src/xml/sp-repr-event-vector.h,
	  src/xml/sp-repr-iterators.h, src/xml/sp-repr-listener.h,
	  src/xml/sp-repr.h, src/xml/text-node.h, src/xml/transaction-logger.h:

	    SPRepr -> Inkscape::XML::Node
	    SPReprDoc -> Inkscape::XML::Document
	    SPReprAttr -> Inkscape::XML::AttributeRecord
	    SPReprAction -> Inkscape::XML::Event
	    SPReprEventVector -> Inkscape::XML::EventVector
	    SPReprListener -> Inkscape::XML::NodeListener

	    etc..

2005-02-19  Jon A. Cruz  <jon@joncruz.org>
	* src/extension/extension.h, src/extension/internal/svg.cpp,
	  src/extension/internal/svgz.cpp:
	  Fixing .svgz Inkscape save and adding .svgz Plain save.
	  Fixes bug #1144223

2005-02-18  Jon A. Cruz  <jon@joncruz.org>
	* src/Makefile.am, src/libnr/Makefile_insert,
	  src/libnr/nr-point-fns-test.h  src/libnr/nr-types-test.h:
	  Adding initial version of CxxTest test cases.

2005-02-17  Jon A. Cruz  <jon@joncruz.org>

	* src/io/gzipinputstream.h, src/io/gzipinputstream.cpp: Changed
	  decompression to be streammed and removed hardcoded limit.

2005-02-17  MenTaLguY  <mental@rydia.net>

	* src/inkscape.h, src/inkscape.cpp, src/desktop.cpp:

	  rewrote "last desktop standing" test to not suck

2005-02-15 SwinginCelt  <swinginceltgmail.com>

	* Replaced some sp_repr_attr calls with direct call to
	  repr->attribute.

2005-02-16 John Cliff <simarilius@yahoo.com>

	* src/dialogs/tiledialog.h, src/dialogs/tiledialog.cpp,
	  src/dialogs/makefile_insert, src/verbs.cpp, src/verbs.h:
	  Added a dialog that allows you to arrange the selection
	  in a grid pattern with user defined spacing.
	  its in objects->grid arrange...

2005-02-15 SwinginCelt  <swinginceltgmail.com>

	* Replaced inline function sp_repr_name with direct call to
	  repr->name.
	* Replaced inline function sp_repr_content with direct call to
	  repr->content.
	* Replaced inline function sp_repr_has_attr with direct call to
	  repr->matchAttributeName.

2005-02-15  MenTaLguY  <mental@rydia.net>

	* src/document.cpp, src/document.h, src/file.cpp, src/help.cpp,
	  src/inkscape.cpp, src/inkview.cpp, src/slideshow.cpp,
	  src/dialogs/filedialog.cpp, src/dialogs/stroke-style.cpp,
	  src/extension/internal/gdkpixbuf-input.cpp,
	  src/extension/internal/svg.cpp, src/extension/plugin/gimpgrad.cpp,
	  src/helper/stock-items.cpp, src/widgets/icon.cpp:

	  removed unused SPDocument::advertize

2005-02-14  MenTaLguY  <mental@rydia.net>

	* src/document.cpp: remove redundant assignment that appears to confuse
	  gcc anyhow

2005-02-14  SwinginCelt  <swingincelt@gmail.com>

	* Replaced inline function sp_repr_set_position_absolute with
	  direct call to repr>->setPosition.

2005-02-13  Bryce  <bryce@bryceharrington.org>

	* src/main.cpp, src/application/application.cpp, src/inkscape.h,
	  src/application/editor-impl.h, src/application/editor.cpp
	  src/application/editor.h, src/ui/dialog/dialog-manager.cpp,
	  src/ui/dialog/dialog-manager.h, src/application/app-prototype.h
	  src/application/application.h:  Integrating I::A::Application
	  into the execution path.  Now its run() routine is called from
	  main().

	* src/application/Makefile_insert, src/application/makefile.in,
	  src/application/editor-impl.h, src/application/editor.cpp,
	  src/application/editor.h:  Initial import of inkscape_gtkmm
	  code.  Also see doc/NewAppArchitecture/ presentation for the
	  rationale behind this.

	* src/ui/dialog/align-and-distribute.cpp,
src/ui/dialog/align-and-distribute.h,
	  src/ui/dialog/dialog-manager.cpp, src/ui/dialog/dialog-manager.h,
	  src/ui/dialog/dialog.cpp, src/ui/dialog/dialog.h,
	  src/ui/dialog/document-preferences.cpp,
src/ui/dialog/document-preferences.h,
	  src/ui/dialog/export.cpp, src/ui/dialog/export.h,
	  src/ui/dialog/extension-editor.cpp, src/ui/dialog/extension-editor.h,
	  src/ui/dialog/fill-and-stroke.cpp, src/ui/dialog/fill-and-stroke.h,
	  src/ui/dialog/find.cpp, src/ui/dialog/find.h,
	  src/ui/dialog/inkscape-preferences.cpp,
src/ui/dialog/inkscape-preferences.h,
	  src/ui/dialog/layer-editor.cpp, src/ui/dialog/layer-editor.h,
	  src/ui/dialog/messages.cpp, src/ui/dialog/messages.h,
	  src/ui/dialog/text-properties.cpp, src/ui/dialog/text-properties.h,
	  src/ui/dialog/tree-editor.cpp, src/ui/dialog/tree-editor.h,
	  src/ui/dialog/xml-editor.cpp, src/ui/dialog/xml-editor.h,
	  src/ui/widget/combo-text.cpp, src/ui/widget/combo-text.h,
	  src/ui/widget/handlebox.cpp, src/ui/widget/handlebox.h,
	  src/ui/widget/icon-widget.cpp, src/ui/widget/icon-widget.h,
	  src/ui/widget/labelled.cpp, src/ui/widget/labelled.h,
	  src/ui/widget/notebook-page.cpp, src/ui/widget/notebook-page.h,
	  src/ui/widget/scalar-unit.cpp, src/ui/widget/scalar-unit.h,
	  src/ui/widget/scalar.cpp, src/ui/widget/scalar.h,
	  src/ui/widget/toolbox.cpp, src/ui/widget/toolbox.h,
	  src/ui/widget/unit-menu.cpp, src/ui/widget/unit-menu.h:
	  Initial import of the gtkmm code.  These are mainly
	  unimplemented stubs, but have few dependencies so are easy to
	  integrate at this stage.

	* src/ui/widget/Makefile_insert, src/ui/widget/makefile.in,
	  src/ui/dialog/Makefile_insert, src/ui/dialog/makefile.in,
	  src/ui/Makefile_insert, src/ui/makefile.in:  Adding makefile
	  support for new code.

	* io/simple-sax.h, io/simple-sax.cpp:  Adding Jon's simple SAX
	  code

	* util/units.h, util/units.cpp:  New inkscape_gtkmm units code

2005-02-12  MenTaLguY  <mental@rydia.net>

	* src/document.cpp, src/document.h, src/sp-gradient-test.cpp:

	  SPDocument is now a "real C++ class", managed by the garbage collector

2005-02-12  MenTaLguY  <mental@rydia.net>

	* src/document-private.h, src/document.cpp, src/document.h, src/view.cpp,
	  src/view.h, src/dialogs/xml-tree.cpp:

	  switched SPDocument to sigc++ signals

2005-02-12  Kees Cook  <kees@outflux.net>

	* Makefile.am, configure.ac, Makefile.mingw.common, inkscape.nsi: undoing
	  my "configure" changes.  Was dumb and forgot about native compiles on
	  win32.
	* inkview.1.in, share/extensions/inkscape-shadow-white.sh,
	  share/extensions/inkscape-shadow.sh: corrections found by Wolfram
	  Quester during Debian packaging.
	* src/desktop-events.cpp, src/file.cpp, src/gradient-chemistry.cpp,
	  src/interface.cpp, src/layer-fns.cpp, src/nodepath.cpp,
	  src/object-ui.cpp, src/path-chemistry.cpp, src/prefs-utils.cpp,
	  src/selection-chemistry.cpp, src/seltrans.cpp, src/sp-flowtext.cpp,
	  src/sp-object.cpp, src/sp-pattern.cpp, src/sp-text.cpp, src/splivarot.cpp,
	  src/text-editing.cpp, src/dialogs/clonetiler.cpp, src/dialogs/rdf.cpp,
	  src/dialogs/stroke-style.cpp, src/dialogs/xml-tree.cpp,
	  src/extension/internal/gdkpixbuf-input.cpp, src/extension/plugin/grid.cpp,
	  src/widgets/gradient-selector.cpp, src/xml/repr-action-test.cpp,
	  src/xml/repr-css.cpp, src/xml/repr-io.cpp, src/xml/repr-util.cpp,
	  src/xml/repr.cpp, src/xml/repr.h: inline function removal patches from
	  Robert Crosbie.

2005-02-11  Kees Cook  <kees@outflux.net>

	* src/Makefile.mingw, src/make.*: win32 compile updates.
	* src/extensions/internal/gnome.cpp: added my missing "comment" code.
	* src/shortcuts.cpp, doc/keys.xml, doc/keys.html, share/screens/keys.svg:
	  added explicit ctrl-w. since gtk already binds it, we may as well show it.

2005-02-10  Jon A. Cruz  <jon@joncruz.org>

	* src/inkscape.cpp: Changed from SHGetSpecialFolderPath to
	  SHGetSpecialFolderLocation. Fixes bug #1085641

2005-02-10  MenTaLguY  <mental@rydia.net>

	* src/document.h, src/document.cpp: get rid of casting macro uses

2005-02-10  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp, src/document-undo.cpp, src/document.cpp, src/file.cpp,
	  src/gradient-chemistry.cpp, src/inkscape.cpp, src/interface.cpp,
	  src/sp-metadata.cpp, src/sp-namedview.cpp, src/sp-object-repr.cpp,
	  src/sp-object.cpp, src/svg-view.cpp, src/uri-references.cpp,
	  src/view.cpp, src/dialogs/stroke-style.cpp,
	  src/widgets/gradient-selector.cpp, src/widgets/gradient-vector.cpp:

	  get rid needless uses of SP_IS_DOCUMENT (if we can't trust the
	  compiler's type checking, what can we trust?)

2005-02-10  MenTaLguY  <mental@rydia.net>

	* src/desktop-style.h, src/desktop.h, src/document.h, src/event-context.h,
	  src/inkscape.h, src/knotholder.h, src/nodepath.h,
	  src/selection-chemistry.h, src/selection.h, src/sp-conn-end-pair.h,
	  src/sp-object-repr.h, src/sp-object.h, src/style.h,
	  src/dialogs/sp-attribute-widget.h, src/extension/implementation/script.h,
	  src/xml/repr-get-children.h, src/xml/repr.h, src/xml/sp-repr-action.h,
	  src/xml/sp-repr-attr.h, src/xml/xml-forward.h:

	  got rid of xml-forward.h

2005-02-10  Kees Cook  <kees@outflux.net>

	* configure.ac, Makefile.am, src/Makefile.am, Makefile.mingw.common.in,
	  inkscape.nsi.in: setting up "configure" to build the other files that
	  expect version numbers to get updated.  Including mingw files in dist
	  package.

2005-02-10  Jon A. Cruz  <jon@joncruz.org>
	* src/io/uristream.h, src/io/uristream.cpp,
	  src/extension/internal/svg.h, src/extension/internal/svg.cpp,
	  src/extension/internal/Makefile_insert,
	  src/extension/internal/extension.h,
	  src/extension/internal/init.cpp:
	  Adding internal .svgz load and save extension.
	  Probable fix for bugs #1074996, #1050361, #925033, #1052307

2005-02-08  Kees Cook  <kees@outflux.net>

	* src/extension/implementation/script.cpp: proper /tmp handling.
	  Closes bug #1074996.
	* src/inkscape.cpp, src/inkscape.h, src/dialogs/export.cpp: correction
	  for export dialog paths.  Closes bug #1114714.
	* inkscape.nsi, Makefile.mingw.common: version bumps
	* src/text-context.cpp: removed preedit code; it was broken and unneeded.

2005-02-08  Ted Gould  <ted@gould.cx>

	* Released 0.41

2005-02-01  Kees Cook  <kees@outflux.net>

	* src/xml/sp-css-attr.h, src/desktop-style.cpp, src/xml/repr-css.cpp,
	  src/xml/repr.h: Fixed SPCSSAttr to be a "real" class, at mental's
	  direction.  Fixes my "default prefs don't show attrs" bug.
	* src/helper/stock-items.cpp: removing redundant code.
	* src/libnr/nr-point.h, src/libnrtype/FlowUtils.h, src/livarot/Shape.h:
	  added explicit initializations to keep valgrind happy.
	* src/dir-util.cpp, src/sp-path.cpp, src/splivarot.cpp,
	  src/svg/svg-length.cpp, src/widgets/icon.cpp:
	  cleaning up memory leaks detected by valgrind.
	* src/extension/dependancy.cpp: made repr-attr tags untranslatable.
	* src/extension/system.cpp: correcting extension autodetection when
	  there are conflicting matching modules.
	* src/dialogs/filedialog.cpp, src/extension/extension.h,
	  src/extension/internal/svg.cpp: .svgz loading works again as
	  expected.  Non-functioning modules are not listed in file dialogs.
	* src/text-context.cpp, src/text-editing.cpp: preedit modes don't
	  work correctly for multi-byte characters.  See bug 1086769.

2005-01-31  Jon A. Cruz  <jon@joncruz.org>
	* src/file.cpp, src/inkscape.cpp, src/interface.cpp,
	  src/dialogs/export.cpp, src/extension/init.cpp:
	  sanitize messages before passing to display dialogs.

2005-01-31  Kees Cook  <kees@outflux.net>

	* src/libnrtype/FontFactory.cpp: added a crude font name detection
	  routine to work around a Pango crash bug.  This can be removed once
	  Pango is fixed.  See bug #1025565.  Actually, I figured out a fix.
	* print.cpp, print.h, sp-shape.cpp, extension/print.cpp,
	  extension/print.h, extension/implementation/implementation.cpp,
	  extension/implementation/implementation.h,
	  extension/implementation/plugin.cpp, extension/implementation/plugin.h,
	  extension/internal/gnome.h, extension/internal/ps.cpp,
	  extension/internal/ps.h, extension/internal/win32.h:
	  In an attempt to start debugging print rendering, I've added the
	  Print::comment function so that SPItem boundries can be easily
	  seen in rendered output.
	* src/preferences-skeleton.h, src/sp-shape.cpp,
	  src/dialogs/display-settings.cpp, src/extension/internal/ps.cpp:
	  Added printout comments for print debugging.  Fixed dash output
	  bug #1104050.
	* src/dialogs/rdf.cpp: fixed rdf:bag displays.  Closes bug #1113316.

2005-01-30  Jon A. Cruz  <jon@joncruz.org>
	* src/io/sys.h, src/io/sys.cpp: added utility routine to cleanup
	  strings with invalid UTF-8 for display.

2004-01-30  Kees Cook  <kees@outflux.net>

	* src/make.dep, src/make.exclude, src/make.files, src/make.ofiles,
	  src/io/uristream.cpp, src/io/sys.cpp: additional win32 changes
	  using Jon Cruz's new mkdir function.  Getting Win32 to compile the
	  "io" directory.  Closes bug #1107305.
	* src/file.cpp, src/inkscape-stock.cpp, src/inkscape.cpp,
	  src/interface.cpp, src/main.cpp, src/dialogs/export.cpp,
	  src/dialogs/stroke-style.cpp, src/extension/input.cpp,
	  src/extension/implementation/script.cpp, src/helper/stock-items.cpp,
	  src/io/sys.cpp, src/io/sys.h, src/widgets/icon.cpp: wrapped
	  g_file_test with new Inkscape::IO::file_test since g_file_test isn't
	  utf8-safe.
	* src/inkscape.cpp: removed call to g_free on non-alloced string.
	  fixed up crash-save location to be utf8-okay.
	* src/extension/extension.cpp: convert from utf8 before open.
	* src/sp-spiral.cpp, src/object-edit.cpp: found place where CLAMP on
	  spiral's t0 wasn't working.  Closes bug #1075640.

2004-01-28  MenTaLguY  <mental@rydia.net>

	* src/sp-object.h, src/sp-object.cpp:
	  efficiency fixes which should be helpful when loading large documents

2005-01-29  Jon A. Cruz  <jon@joncruz.org>

	* src/file.h, src/file.cpp, src/inkscape.cpp, src/sp-image.cpp,
	  src/extension/implementation/script.cpp,
	  src/extension/internal/pov-out.cpp, src/extension/internal/ps.cpp,
	  src/extension/plugin/gimpgrad.cpp, src/helper/png-write.cpp,
	  src/io/Makefile_insert, src/io/sys.h, src/io/sys.cpp,
	  src/trace/imagemap.cpp, src/xml/repr-io.cpp:

	  Refactored open routine to better location.

2004-01-28  Kees Cook  <kees@outflux.net>

	* configure.ac: added test for libgc 6.4 or better.
	* src/main.cpp: calling new SPRepr methods instead of inline wrappers.

2004-01-27  MenTaLguY  <mental@rydia.net>

	* src/xml/simple-node.h, src/xml/simple-node.cpp:

	  SimpleNode::lastChild() and SimpleNode::appendChild() are now
	  O(1) rather than O(n)

2004-01-26  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-util.cpp, src/xml/repr.cpp, src/xml/repr.h,
	  src/xml/sp-repr-action.h, src/xml/sp-repr-event-vector.h:

	  inlined legacy wrappers

	* src/xml/simple-node.cpp: really fixed #1108231 now

2005-01-25  Jon A. Cruz  <jon@joncruz.org>

	* src/interface.cpp: Passed file import call to shared code.
	  Fixed bug #1108620.

2005-01-25  MenTaLguY  <mental@rydia.net>

	* src/xml/simple-node.cpp: fixed bug #1108231

2005-01-25  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/desktop-properties.cpp: Changed set of paper sizes offered:

	  Removed `Folio' pagesize (which means a different paper size to
	  different people; will Folio be missed?  If so, can we improve
	  the name?).

	  Changed ISO page sizes (A0..A10, B0..B10) to match official ISO
	  specification in mm.

	  Note that these differ from ghostscript's idea of page sizes;
	  see comment in desktop-properties.cpp for speculation of
	  possible problems (fuzziness from antialiasing).

	  (Note also that our previous sizes differed even more from
	  gs_statd.ps...)

	  Coalesced Ledger and Tabloid to a single entry (11x17in);
	  previously they differed in size.

	  Changed Icon 16x16 from 16pt to 16px; similarly Icon 32x32 and
	  Banner 468x60.

2004-01-24  MenTaLguY  <mental@rydia.net>

	* src/xml/simple-node.cpp: potential fix for bug #1108231

2004-01-23  Ted Gould  <ted@gould.cx>

	* po/POTFILES.in, share/extensions/dia.inx,
	src/preferences-skeleton.h, src/extension/Makefile_insert,
	src/extension/dependency.cpp, src/extension/dependency.h,
	src/extension/error-file.cpp, src/extension/error-file.h,
	src/extension/extension.cpp, src/extension/extension.h,
	src/extension/init.cpp, src/extension/prefdialog.cpp:

	Adding in functionality to write out an error log based on the failing to
	load of extensions.  There is also a new error dialog that appears if one
	or more fail to alert the user and tell them where the error log is
	stored.  In the log there is more complex descriptions of what failed.

2004-01-23  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp: fix for id binding bug

2004-01-23  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-io.cpp: don't complain about not having a namespace
	  URI for the standard xml: prefix

	* src/desktop-style.cpp, src/desktop.cpp, src/document-undo.cpp,
	  src/file.cpp, src/gradient-chemistry.cpp, src/inkscape.cpp,
	  src/interface.cpp, src/nodepath.cpp, src/object-edit.cpp,
	  src/path-chemistry.cpp, src/prefs-utils.cpp, src/select-toolbar.cpp,
	  src/selection-chemistry.cpp, src/sp-defs.cpp, src/sp-flowdiv.cpp,
	  src/sp-flowtext.cpp, src/sp-gradient.cpp, src/sp-item.cpp,
	  src/sp-object-group.cpp, src/sp-object-repr.cpp, src/sp-object.cpp,
	  src/sp-offset.cpp, src/sp-pattern.cpp, src/sp-string.cpp,
	  src/sp-text.cpp, src/sp-tspan.cpp, src/sp-use.cpp, src/splivarot.cpp,
	  src/text-chemistry.cpp, src/text-context.cpp, src/text-editing.cpp,
	  src/dialogs/clonetiler.cpp, src/dialogs/display-settings.cpp,
	  src/dialogs/stroke-style.cpp, src/dialogs/xml-tree.cpp,
	  src/extension/extension.h, src/extension/implementation/script.cpp,
	  src/widgets/dash-selector.cpp, src/widgets/gradient-vector.cpp,
	  src/widgets/sp-xmlview-tree.cpp, src/xml/Makefile_insert,
	  src/xml/comment-node.h, src/xml/element-node.h,
	  src/xml/repr-action-test.cpp, src/xml/repr-css.cpp,
	  src/xml/repr-get-children.cpp, src/xml/repr-io.cpp,
	  src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/repr.h, src/xml/simple-document.cpp, src/xml/simple-document.h,
	  src/xml/simple-node.cpp, src/xml/simple-node.h,
	  src/xml/sp-repr-action.cpp, src/xml/sp-repr-doc.h, src/xml/sp-repr.h,
	  src/xml/text-node.h:

	  got rid of xml/repr-private.h, removed
	  sp_repr_document_createTextNode(), made SPRepr and SPReprDoc abstract
	  interfaces, and moved the SPRepr implementations into separate files
	  in the Inkscape::XML namespace

	* src/util/shared-c-string-ptr.h: added equality operators to avoid
	  certain ambiguities

2004-01-22  MenTaLguY  <mental@rydia.net>

	* src/xml/Makefile_insert, src/xml/repr-private.h, src/xml/repr.cpp,
	  src/xml/session.h, src/xml/simple-session.cpp, src/xml/simple-session.h,
	  src/xml/sp-repr-action.cpp, src/xml/transaction-logger.h:

	  added Inkscape::XML::Session and Inkscape::XML::TransactionLogger
	  to provide a new interface for transactions, rather than doing it from
	  SPReprDoc

2004-01-22  MenTaLguY  <mental@rydia.net>

	* src/xml/Makefile_insert, src/xml/node-observer.h,
	  src/xml/repr-private.h, src/xml/repr.cpp:

	  moved repr loging behind generic observer interface

2005-01-22  Ted Gould  <ted@gould.cx>

	* src/display/canvas-grid.cpp, src/display/canvas-grid.h;

	Fixing 1103001.  Now major grid lines work alot more like you
	think that they should.

2005-01-21  MenTaLguY  <mental@rydia.net>

	* src/util/Makefile_insert, src/util/shared-c-string-ptr.cpp,
	  src/util/shared-c-string-ptr.h, src/util/shared-c-string.cpp,
	  src/util/shared-c-string.h, src/xml/repr-io.cpp,
	  src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/sp-repr-action.h, src/xml/sp-repr-attr.h:

	  renamed Util::SharedCString to Util::SharedCStringPtr, which is
	  more descriptive of what it actually is

2005-01-21  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp:

	  simplify the cacheing of repr position indices, and make it something
	  that can work with an abstract interface

2005-01-20  Kees Cook  <kees@outflux.net>

	* src/file.cpp: added some debug output to help bulia debug bug #1102318.
	* configure.ac: more attempts at detecting the -lgc libs.

2005-01-19  Kees Cook  <kees@outflux.net>

	* configure.ac: trying to correct the -lgc detection.
	* inkscape.pod: added theme details.
	* src/widgets/widget-sizes.h: went from 20 to 24 for toolbar icon size
	  to match other GTK applications.
	* src/extension/db.cpp: corrected STL "not found" handling.  Didn't
	  fix bug #1102318.

2005-01-18  Kees Cook  <kees@outflux.net>

	* src/inkscape.h, src/inkscape.cpp, src/widgets/icons.cpp:
	  Added basic theme support!  Whee!
	* share/inkscape/icons.svg: restoring original up/down/flip icons since
	  icons are themable now.  We should stick to our original look.
	* share/screens/about.svg: added Brisgeek's 0.41 about screen.  Had
	  to tweak background: looks like doc background isn't imported.
	* share/icons/*.xpm, share/icons/*.png: removed them.  Not being used.

2005-01-17  MenTaLguY  <mental@rydia.net>

	* src/desktop-style.cpp, src/inkscape.cpp, src/interface.cpp,
	  src/path-chemistry.cpp, src/prefs-utils.cpp, src/selection-chemistry.cpp,
	  src/sp-flowtext.cpp, src/sp-gradient.cpp, src/sp-object.cpp,
	  src/sp-text.cpp, src/sp-tspan.cpp, src/splivarot.cpp,
	  src/dialogs/xml-tree.cpp, src/extension/internal/pov-out.cpp,
	  src/widgets/dash-selector.cpp, src/xml/repr-css.cpp,
	  src/xml/repr-get-children.cpp, src/xml/repr-io.cpp,
	  src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/sp-repr-action.cpp:

	  Made all SPRepr fields private, and moved most functionality into
	  member functions.  Also shuffled SPReprDoc members, to avoid
	  need for SPReprDoc to be finalized.

2005-01-17  Kees Cook  <kees@outflux.net>

	* share/markers/markers.svg: applied patch #990884, which provides a
	  few mirrored arrows until marker transforms are finished.
	* share/icons/icons.svg: updates per Bulia's request.

2005-01-16  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp: non-elements no longer get ids assigned

2005-01-15  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/document-private.h, src/document.cpp,
	  src/document.h, src/event-context.cpp, src/node-context.cpp,
	  src/rect-context.cpp, src/sp-object.cpp, src/spiral-context.cpp,
	  src/star-context.cpp, src/toolbox.cpp, src/uri-references.cpp,
	  src/dialogs/desktop-properties.cpp, src/widgets/gradient-vector.cpp,
	  src/widgets/layer-selector.cpp, src/widgets/sp-widget.cpp,
	  src/widgets/sp-xmlview-attr-list.cpp, src/widgets/sp-xmlview-content.cpp,
	  src/widgets/sp-xmlview-tree.cpp, src/xml/repr.cpp,
	  src/xml/sp-repr-event-vector.h:

	  Removed attribute setting callback, and decoupled ids and object/repr
	  bindings (object <-> repr associations are now remembered directly,
	  though ids are still tracked too).

	  This means it is now possible to set a null id on an object without
	  anything breaking (hopefully).  For now we will still assign ids
	  to everything by default...

2005-01-15  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/event-context.cpp, src/node-context.cpp,
	  src/rect-context.cpp, src/sp-object.cpp, src/spiral-context.cpp,
	  src/star-context.cpp, src/toolbox.cpp,
	  src/dialogs/desktop-properties.cpp, src/widgets/gradient-vector.cpp,
	  src/widgets/layer-selector.cpp, src/widgets/sp-widget.cpp,
	  src/widgets/sp-xmlview-attr-list.cpp, src/widgets/sp-xmlview-content.cpp,
	  src/widgets/sp-xmlview-tree.cpp, src/xml/repr.cpp,
	  src/xml/sp-repr-event-vector.h:

	  remove all veto callbacks but setting attributes

2005-01-15  Kees Cook  <kees@outflux.net>

	* src/inkscape.cpp: correcting windows path for preferences.  Closes
	bug #933461.

	* src/file.cpp, src/nodepath.cpp, src/selection-describer.cpp,
	src/seltrans.cpp, src/sp-item-group.cpp, src/sp-path.cpp,
	src/sp-spiral.cpp, src/sp-star.cpp, src/dialogs/find.cpp:
	Using ngettext for plural localized strings.  Please try to keep this
	up.  Closes bug #1076872.

	* share/icons/Makefile.am, share/icons/icons.svg, src/inkscape-stock.cpp,
	src/inkscape-stock.h, src/dialogs/stroke-style.cpp,
	src/dialogs/text-edit.cpp, src/dialogs/transformation.cpp,
	src/dialogs/xml-tree.cpp: Finished the last of the missing pixmap
	replacements from Andreas Nilsson.  Fixed some mistakes in the earlier
	changes (need to call sp_icon_new_scaled not sp_icon_new).

2005-01-14  MenTaLguY  <mental@rydia.net>

	* src/gc.cpp: leave the free space multiplier at the default, which
	  will hopefully (according to Hans) avoid some of the odd gc issues
	  we've had, if nothing else does

2005-01-14  Kees Cook  <kees@outflux.net>

	* share/icons/Makefile.am, share/icons/icons.svg, src/inkscape-stock.cpp,
	src/inkscape-stock.h, src/verbs.cpp, src/dialogs/stroke-style.cpp,
	src/dialogs/transformation.cpp, src/widgets/icon.cpp, src/widgets/icon.h,
	src/widgets/paint-selector.cpp:
	Fixed up code and replaced pixmaps with icons from myself and
	Andreas Nilsson.

2005-01-11  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-io.cpp: promote non-namespaced SVG documents into SVG
	  namespace

2005-01-08  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/gc-anchored.cpp, src/gc-anchored.h:
	  abstracted allocation of anchors

2005-01-06  Ted Gould  <ted@gould.cx>

	* src/interface.cpp, src/extension/effect.cpp,
	src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/implementation/plugin-link.h,
	src/extension/implementation/plugin.cpp,
	src/extension/implementation/plugin.h,
	src/extension/implementation/script.cpp,
	src/extension/implementation/script.h, src/extension/plugin/gimpgrad.cpp,
	src/extension/plugin/grid.cpp:

	Changing the effects preferences so that it uses sockets and plugs which
	will allow out of process GUIs to work too.  This is a first pass with
	nothing beautiful, but it does seem to work.

2005-01-03  MenTaLguY  <mental@rydia.net>

	* src/document.cpp, src/main.cpp, src/sp-root.cpp:
	  get rid of ugly xmlns hacks

	* src/inkscape.cpp, src/extension/internal/svg.cpp, src/xml/repr-io.cpp:
	  automatically include xmlns declarations for the required namespaces,
	  and make a best effort at using a default namespace when requested
	  and possible

2005-01-02  Kees Cook  <kees@outflux.net>

	* share/icons/icons.svg: updated view and location
	* src/document.cpp, src/dialogs/rdf.cpp: fixed another bug in metadata
	  due to svg: prefix change.
	* src/inkscape-stock.h, src/inkscape-stock.cpp, share/icons/Makefile.am:
	  removed unused xpm icons

2005-01-02  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/fontsize-expansion.h, src/fontsize-expansion.cpp:
	  New files.
	* src/Makefile_insert: Add the new files to libinkpre_a_SOURCES.
	* src/desktop-style.cpp (sp_desktop_apply_css_recursive):
	  When calling sp_css_attr_scale, change the expansion calculation
	  to use fontsize_expansion().
	* src/sp-text.cpp (sp_text_set_transform): Similarly use
	  fontsize_expansion() instead of generic m.expansion().

2005-01-01  Kees Cook  <kees@outflux.net>

	* src/extension/db.h, src/extension/db.cpp, src/extension/init.cpp:
	created "modulelist" to maintain initialization order for extension
	lists.

2004-12-31  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-io.cpp, src/xml/repr.h: initial scaffoliding for more
	  cosmetic use of prefixes in output files (and eventually more proper
	  namespace handling for output as well)

2004-12-31  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-text.cpp (sp_text_set_transform): Change scaling of font size.
	  The result should be closer to what CorelDraw, XaraX, Canvas 7 and
	  Expression3 do according to vellum, though I don't know the exact
	  rule that they use.

2004-12-25  Ted Gould  <ted@gould.cx>

	* share/extensions/grid.inx, src/extension/extension.cpp,
	src/extension/extension.h, src/extension/plugin/grid.cpp:

	Futher improvements to the grid plugin.  This involves mostly adding in
	parameters at this time, but, ofcourse, I never implemented floating
	point parameters -- so that had to be done first.  More modular code so
	that things can be adjusted externally better.

2004-12-25  Ted Gould  <ted@gould.cx>

	* share/extensions/Makefile.am, share/extensions/grid.inx,
	src/extension/implementation/plugin-link.h,
	src/extension/implementation/plugin.cpp,
	src/extension/plugin/Makefile_insert, src/extension/plugin/gimpgrad.cpp,
	src/extension/plugin/grid.cpp:

	Adding in a new effect plugin, grid.  It draws a grid on the canvas which
	is just an easy way to do some neat things.  It is mostly done, but still
	needs cleanup.  Some other files required modification to make this
	possible.

2004-12-25  MenTaLguY  <mental@rydia.net>

	* src/event-context.cpp: removed unused handler

2004-12-25  Ted Gould  <ted@gould.cx>

	* share/extensions/svg_dropshadow:

	Changing to use "svg:g" instead of "g" for the group.

	* src/verbs.cpp, src/extension/effect.cpp, src/extension/effect.h,
	src/extension/system.cpp, src/extension/system.h,
	src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/implementation/plugin.cpp,
	src/extension/implementation/plugin.h,
	src/extension/implementation/script.cpp,
	src/extension/implementation/script.h:

	Final stuff to get Effects working as well as the did before, which
	is okay, but not great.  This involved changing the API to get an SPView
	instead of an SPDocument because then I can get the selection information
	from the view that is being used.

2004-12-24  MenTaLguY  <mental@rydia.net>

	* src/sp-object-repr.cpp, src/sp-tspan.cpp, src/splivarot.cpp,
	  src/dialogs/rdf.cpp, src/dialogs/xml-tree.cpp,
	  src/widgets/sp-xmlview-tree.cpp, src/xml/repr-io.cpp,
	  src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/repr.h:

	  cleaned out unused code and unhygenic macros, as well as fixing
	  constructors for text and comment nodes

2004-12-24  Ted Gould  <ted@gould.cx>

	* src/verbs.cpp, src/extension/effect.cpp, src/extension/effect.h:

	Okay, now the effects menu really works!  Well, the implementation seems
	to be broken, but the wrapper seems to be all working.

2004-12-24  Ted Gould  <ted@gould.cx>

	* src/interface.cpp, src/verbs.cpp, src/verbs.h, src/extension/effect.cpp,
	src/extension/effect.h:

	Getting the Effects menu basically working.  This included some fixes to
	the verbs where they were incrementing the database incorrectly.  The
	effects are the first component to take advantage of the dynamically
	created verbs, and exercised new code.  Now the basic menu is available,
	but there is no functionality there.

2004-12-24  Ted Gould  <ted@gould.cx>

	* src/interface.cpp, src/verbs.cpp, src/verbs.h:

	Basic code for the effects menu.

	* src/dialogs/filedialog.cpp, src/dialogs/filedialog.h,
	src/extension/db.cpp, src/extension/db.h:

	Changing the DB access functions to use std::list instead of GSList so
	that it is more standard, and we get rid of a specialized class that
	really isn't that useful.  Less memory usage, and fixes a leak.

	* src/extension/effect.cpp, src/extension/effect.h:

	Adding in a "Last Effect" to be used in the menus.

	* src/extension/extension-forward.h, src/extension/extension.cpp,
	src/extension/extension.h, src/extension/input.cpp,
	src/extension/output.cpp, src/extension/timer.cpp, src/extension/timer.h,
	src/extension/Makefile_insert:

	Adding in the timer functions so that modules will unload in a given
	amount of time.  For more information on this read the documentation
	in the files.  Kinda a lazy deallocation.

	* src/extension/implementation/implementation.cpp:

	Fix unload so that it is not recursive.

2004-12-23  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/document.cpp, src/draw-context.cpp,
	  src/dyna-draw-context.cpp, src/file.cpp, src/gradient-chemistry.cpp,
	  src/interface.cpp, src/layer-fns.cpp, src/main.cpp, src/object-ui.cpp,
	  src/path-chemistry.cpp, src/rect-context.cpp,
	  src/selection-chemistry.cpp, src/sp-anchor.cpp, src/sp-clippath.cpp,
	  src/sp-defs.cpp, src/sp-ellipse.cpp, src/sp-flowdiv.cpp,
	  src/sp-flowregion.cpp, src/sp-flowtext.cpp, src/sp-gradient-test.cpp,
	  src/sp-gradient.cpp, src/sp-image.cpp, src/sp-item-group.cpp,
	  src/sp-line.cpp, src/sp-marker.cpp, src/sp-mask.cpp,
	  src/sp-object-group.cpp, src/sp-object-repr.cpp, src/sp-offset.cpp,
	  src/sp-path.cpp, src/sp-pattern.cpp, src/sp-polygon.cpp,
	  src/sp-polyline.cpp, src/sp-rect.cpp, src/sp-root.cpp,
	  src/sp-spiral.cpp, src/sp-star.cpp, src/sp-symbol.cpp, src/sp-text.cpp,
	  src/sp-tspan.cpp, src/sp-use.cpp, src/spiral-context.cpp,
	  src/splivarot.cpp, src/star-context.cpp, src/text-chemistry.cpp,
	  src/text-context.cpp, src/dialogs/find.cpp, src/dialogs/rdf.cpp,
	  src/dialogs/xml-tree.cpp, src/ecma/EcmaBinding.cpp,
	  src/extension/internal/gdkpixbuf-input.cpp,
	  src/extension/internal/svg.cpp, src/livarot/ShapeDraw.cpp,
	  src/xml/repr-io.cpp, src/xml/repr-util.cpp, src/xml/repr.cpp:

	  use normalized qnames for SVG elements too

2004-12-23  Kees Cook  <kees@outflux.net>

	* configure.ac, src/Makefile_insert, src/extension/script/Makefile_insert:
	  adding Perl and Python compile tests.  Corrected library locations.
	* src/extension/script/InkscapeScript.h,
	  src/extension/script/InkscapePython.cpp,
	  src/extension/script/InkscapeScript.cpp: white space fix, and
	  added config.h, and some small debugging for myself.  Hope Bob doesn't
	  mind!  :)
	* src/dialogs/scriptdialog.cpp: added comments to default code.

2004-12-22  Kees Cook  <kees@outflux.net>

	* configure.ac, src/extension/script/Makefile_insert: automake cleanups
	  to deal with perl/python detection.

2004-12-20  David Turner <novalis@gnu.org>
	* src/widgets/gradient-vector.cpp:
	  Fixed bug with gradient stops at 0 and 100%.  Closes 1085920.

2004-12-18  Bob Jamison  <rjamison@titan.com>

	* src/extensions/script/*:
	  New files that enable embedding of scripting languages
	  in Inkscape.  Currently using Swig to embed Perl and Python.

	* autoconf.ac:
	  Allow opting for perl or python with --with-perl=yes|no
	  and --with-python=yes|no

2004-12-15  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* streq.h (streq), strneq.h (strneq), memeq.h (memeq):
	  New convenience functions for strcmp(a,b)==0 etc.

	* src/dir-util.cpp (sp_relative_path_from_path):
	  Fix when base is a string prefix of path but a directory prefix
	  (e.g. path=/foo/barney, base=/foo/bar).

2004-12-10  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-conn-end.cpp (sp_conn_end_move_compensate):
	  Fix for undo/save: wasn't calling updateRepr().

2004-12-09  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/style.cpp (sp_style_merge_from_style_string):
	  More standards-conforming parsing of style strings into prop:value
	  pairs.

2004-12-08  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/style.h, src/style.cpp, src/libnrtype/font-style-to-pos.cpp:
	  Fix font-weight value: s/darker/bolder/.

	* src/style.cpp (sp_style_merge_from_parent):
	  Fix bug with specifying stroke-width with unit of em or ex.
	  (We were ignoring the number, treating it as 1em or 1ex.)

	* src/style.h, src/style.cpp (sp_style_read_dash,
	  sp_style_write_string, sp_style_write_difference):
	  Allow `inherit' as a value for dasharray.
	  (Also plug small memory leak in sp_style_read_dash.)

2004-12-07  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/style.cpp (sp_style_write_string):
	  Fix for when stroke-dasharray either explicitly set to `none', or
	  inherits non-none.

	* src/style.cpp (sp_style_write_ienum):
	  Fix: preserve explicit `inherit' request.
	* (sp_style_read, sp_style_merge_property):
	  Allow explicit `inherit' for `display' property.

	* src/style.cpp (sp_style_read):
	  Fix copy&paste bug affecting `visibility' and `display' properties.

2004-12-07  David Turner  <novalis@gnu.org>

	* src/libnrtype/RasterFont.cpp, src/display/nr-arena-shape.cpp:
	Fixed dash rendering bug (#1077213)

2004-12-06  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/style.h, src/style.cpp: Support all `display' values
	  required by SVG 1.1.  (No functional change, insofar as the new
	  values all have the same behaviour as our existing `block' value
	  in SVG.)
	* src/sp-item.cpp, src/style.cpp: Use `inline' (SP_CSS_DISPLAY_INLINE)
	  rather than `block' as our generic display value meaning `don't hide
	  this', as per spec.

	* src/style.cpp: Prefer to write lr-tb etc. rather than the
	  abbreviations lr etc.  (Also add comment saying why.)

2004-12-03  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/xml-tree.cpp (on_attr_select_row_set_value_content):
	  Fix segfault: treat NULL as empty string for display purposes.

2004-11-30  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/svg/svg.h, src/svg/sp-svg.def, src/svg/svg-length.cpp:
	  (sp_svg_boolean_read, sp_svg_write_percentage):
	  Remove these unused functions.
	  (sp_svg_length_read_lff, sp_svg_number_write_d,
	  sp_svg_number_write_i): Mark static.

	* configure.ac:
	  When adding -lgc to LIBS, also add its dependencies -lpthread -ldl.

2004-11-28  Ted Gould  <ted@gould.cx>

	* 0.40

2004-11-25  MenTaLguY  <mental@rydia.net>

	* share/tutorials/tutorial-calligraphy.svg: spelling fix

	* src/widgets/layer-selector.cpp: fixing the layer selector update bug;
	  sigc++ apparently doesn't deal with reference arguments very well

2004-11-25  MenTaLguY  <mental@rydia.net>

	* src/layer-fns.cpp: fix layer creation within sublayers

	* src/dialogs/layer-properties.cpp: fix dialog leak

2004-11-25  MenTaLguY  <mental@rydia.net>

	* src/inkscape.cpp: eliminate duplicated code across #ifdefs

	* src/verbs.cpp, src/dialogs/layer-properties.cpp,
	  src/dialogs/layer-properties.h:

	  LayerPropertiesDialog is no longer a singleton, since it's kind of a
	  per-desktop (well, ideally per-document) thing.  Remaining to do:
	  fix update of layer selector widget, and eliminate leak of dialog
	  objects.

2004-11-24  Kees Cook  <kees@outflux.net>

	* inkscape.spec: added SMP flags, added static library link capability.

2004-11-24  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/draw-context.cpp (spdc_concat_colors_and_flush):
	  Do nothing if empty curve; in particular, don't try to close an
	  empty curve.

	* src/pen-context.cpp (spdc_endpoint_snap):
	  Fix use of uninitialized value when snapping.

2004-11-23  Bryce Harrington <bryce@bryceharrington.org>

	* src/dialogs/layer-properties.cpp:  Fixing bug causing two new
	  layers to get created when hitting enter

2004-11-23  Kees Cook  <kees@outflux.net>

	* share/tutorials: added Josh's changes, resized, repositioned for
	  800x600.
	* src/verbs.h, src/verbs.cpp, src/interface.cpp: added tracing
	  tutorial.

2004-11-23  MenTaLguY  <mental@rydia.net>

	* src/rect-context.cpp: disallow drawing on locked or invisible layers

	* src/widgets/layer-properties.h, src/widgets/layer-properties.cpp:
	  slight HIG-ification

	* src/desktop.cpp, src/desktop.h, src/widgets/layer-selector.cpp,
	  src/widgets/layer-selector.h, src/verbs.cpp, src/sp-desktop-widget.h

	  removed vestigal layer renaming thing

	* src/verbs.cpp, src/dialogs/layer-properties.cpp,
	  src/dialogs/layer-properties.h:

	  reuse dialog for creating layers as well as for renaming them

2004-11-22  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/bezier-utils.cpp (generate_bezier): For the sake of
	  our current pencil tool, don't use free optimization of the end
	  tangent vector.

2004-11-21  MenTaLguY <mental@rydia.net>

	* src/verbs.cpp: add accels for layer menu items

2004-11-21  Bryce Harrington <bryce@bryceharrington.org>

	* src/dialogs/layer-properties.cpp, src/verbs.cpp,
	  src/dialogs/layer-properties.h: Hooking up layer rename
	  functionality, and making it show correctly.

	* src/dialogs/debugdialog.cpp, src/dialogs/find.cpp,
	  src/dialogs/tracedialog.cpp:  Fixing dialog show behavior

2004-11-21  Kees Cook  <kees@outflux.net>

	* src/sp-object.cpp, src/sp-metadata.cpp: added some debugging, and
	  fixed a dumb error in my metadata _release handler.  Should mostly
	  close bug 1069772.
	* src/Makefile_insert, src/sp-skeleton.cpp, src/sp-skeleton.h:
	  created some example SPObject implementations for a basis for any
	  new SPObjects in the future.
	* src/dialogs/xml-tree.cpp: fixing logic bug in identability checker.
	  Added immutability test to actually close 1069772.
	* share/icons/icons.svg, src/verbs.cpp, src/interface.cpp: adding
	  icons for the "new" menu, vacuum, reverse, make bitmap, and trace.

2004-11-20  Jon A. Cruz  <jon@joncruz.org>

	* src/extension/db.h, src/extension/db.cpp, src/dialogs/filedialog.cpp:
	  Added extension matching pattern. Fixed bug 1064888.

	* src/dialogs/filedialog.cpp (isValidImageFile):
	  Fixed previewing bug 1067551.

2004-11-20  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/bezier-utils.cpp (sp_bezier_fit_cubic_full):
	  Add splitpoints parameter.  Callers updated.

	* src/display/bezier-utils.cpp
	  (sp_bezier_fit_cubic_r, sp_bezier_fit_cubic_full):
	  Change last parameter from lg_max_beziers to max_beziers.
	  Callers updated.

2004-11-19  Bryce <bryce@bryceharrington.org>

	* src/dialogs/layer-properties.cpp,
	  src/dialogs/layer-properties.h:  Adding some widgets.

2004-11-18  Bryce <bryce@bryceharrington.org>

	* src/dialogs/Makefile_insert, src/dialogs/makefile.msc,
	  src/dialogs/layer-properties.h, src/dialogs/layer-properties.h:
	  Adding a layer properties dialog for renaming layers

	* src/desktop.cpp src/interface.cpp, src/verbs.cpp,
	  src/verbs.h src/dialogs/layer-properties.cpp,
	  src/dialogs/layer-properties.h,
	  src/widgets/layer-selector.cpp:  Hooking in layer props dialog.

2004-11-16  MenTaLguY  <mental@rydia.net>

	* src/widgets/document-tree-model.cpp, src/widgets/document-tree-model.h,
	  src/widgets/layer-selector.cpp, src/widgets/Makefile_insert:

	  removed Widgets::DocumentTreeModel because unused

	* src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/repr.h:

	  cache successive sibling counts (self+subsequent siblings) in SPRepr
	  to make sp_repr_n_children() and sp_repr_position() more efficient,
	  which will be needed later for e.g. GTK tree models.

	  sp_repr_nth_child() isn't any faster as a result of the changes,
	  but it probably won't need to be

	* src/xml/repr.cpp: fixed refcount leak in SPRepr::SPRepr(SPRepr const &)

2004-11-15  MenTaLguY  <mental@rydia.net>

	* src/gc.cpp: add initial stubs that print an informative error
	  if the GC functions are used before Inkscape::GC::init() is called

2004-11-14  MenTaLguY  <mental@rydia.net>

	* configure.ac, src/gc-core.h, src/gc-managed.h, src/gc-anchored.h,
	  src/gc-finalized.h, src/gc.cpp:

	  make disabling the collector a run-time rather than a compile-time
	  option; there are now three garbage collector options, selectable
	  by setting the _INKSCAPE_GC environment variable:

	   * enable - the normal collector (default)
	   * debug - the debugging collector
	   * disable - use standard malloc in place of the libgc allocator

2004-11-14  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/bezier-utils.cpp: Make end tangent/s be unconstrained for
	  sp_bezier_fit_cubic, sp_bezier_fit_cubic_r, and around corner nodes.

	* src/pencil-context.cpp (fit_and_split): Allow the bezier fitter to
	  choose the middle control points freely except to the extent required
	  for smooth nodes.

	* src/display/bezier-utils.cpp (generate_bezier):
	  If either end tangent is specified as zero then estimate the
	  corresponding control point without constraining its direction
	  from the endpoint.

	* src/pencil-context.h, src/pencil-context.cpp
	  (fit_and_split, sp_pencil_context_init): Explicitly remember required
	  tangent instead of using "first two points" hack.

	* src/display/bezier-utils.cpp (sp_bezier_fit_cubic_full):
	  Detect & prevent "ghost spikes", by allowing a corner node if
	  the specified tangent would result in a spike.

	* src/display/bezier-utils.cpp (generate_bezier): Better handling
	  of the case of infinite solutions for the lengths of the two
	  tangent vectors: try requiring that the lengths equal each other,
	  and solving for that length (just one variable).

2004-11-13  Kees Cook  <kees@outflux.net>

	* src/document.cpp: wrapped updateDisplay call in undo insensitivity.
	  Closes bug #1030436.

2004-11-12  MenTaLguY  <mental@rydia.net>

	* src/main.cpp: fpresetsticky -> fpsetsticky

	* src/verbs.cpp: cast width changes

	* src/libnrtype/FlowBoxes.h, src/libnrtype/FlowDefs.h,
	  src/libnrtype/FlowDest.h, src/libnrtype/FlowEater.h,
	  src/libnrtype/FlowRes.h, src/libnrtype/FlowSols.h,
	  src/libnrtype/FlowSrc.h, src/libnrtype/FlowSrcText.h,
	  src/libnrtype/FlowStyle.h, src/libnrtype/FlowUtils.h:
	  remove stdint.h which isn't being used here

	* src/widgets/icon.h, src/widgets/icon.cpp:
	  icon greys out when insensitive

	* src/gc-anchored.h, src/gc-finalized.h, src/gc-managed.h:
	  documentation

	* src/verbs.cpp: changed cast to reinterpret_cast to hopefully
	  avoid compiler warning

2004-11-11  Kees Cook  <kees@outflux.net>

	* src/seltrans.cpp, src/select-context.cpp: ref counting SPObjects
	  correctly so undo's don't blow up an active resize/move.  Closes
	  bug #1018756.

2004-11-11  MenTaLguY  <mental@rydia.net>

	* src/inkscape.cpp, src/main.cpp, src/widgets/icon.cpp:
	  removed sp_bitmap_icons

	* configure.ac, src/sp-image.cpp, src/object-ui.cpp:
	  removed stale autotrace support code

2004-11-10  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp, src/sp-clippath.cpp, src/cp-mask.cpp:
	  minor refcounting tweaks

	* src/sp-image.cpp: fixed failure to release GdkPixbufLoader when
	  done with it (fixes bug #1063054)

2004-11-10  Kees Cook  <kees@outflux.net>

	* configure.ac, src/gc-core.h: corrected gc.h path detection.

2004-11-09  MenTaLguY  <mental@rydia.net>

	* src/dialogs/fileselector.cpp: fixed cut-and-paste refcount bug
	  between SVGPreview::setFileName and SVGPreview::setFromMem that
	  was leaking bitmap image preview SPDocuments

2004-11-09  Bryce Harrington <bryce@bryceharrington.org>

	* src/dialogs/item-properties.cpp

2004-11-09  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp, src/style.cpp, src/style.h:
	  use 'display' rather than 'visibility' for hiding, and give display
	  a more "modern" representation in SPStyle like visibility's

2004-11-09  Kees Cook  <kees@outflux.net>

	* src/dialogs/xml-tree.cpp: added better context to the status bar.
	  added warning flash for id conflicts.
	* src/toolbox.cpp: killed some copy/paste code while bug hunting.

2004-11-08  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-item.h, src/sp-item.cpp
	  (isExplicitlyHidden, setExplicitlyHidden): New methods.

	* src/dialogs/item-properties.cpp: Change from having a `Visible'
	  checkbox that explicitly sets the SVG visibility property to
	  having a `Hide' checkbox that controls whether or not the
	  element has visibility:hidden.  (Mitigates #1061934.)

	* src/sp-object.h, src/sp-object.cpp (visible, setVisible):
	  Remove these methods.

2004-11-07  MenTaLguY  <mental@rydia.net>

	* src/gc-finalized.h: fix for Debian bug #279991 (cast to ptrdiff_t
	                      rather than int), and basic documentation

2004-11-06  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp: fix desktop-specific version of SPItem::isHidden()
	                   to deal correctly with parent visibility

2004-11-05  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp: more work on making the lock/hide
	  buttons actually do something

	* src/sp-item.cpp, src/sp-item.h: implement lock/hide related methods

	* src/verbs.cpp: "Remove All Kerns" -> "Remove Manual Kerning"

2004-11-04  Kees Cook  <kees@outflux.net>

	* src/dialogs/rdf.h, src/dialogs/rdf.cpp: added rdf:Bag for the
	  dc:subject keyword list.  Closed bug #1021025.
	* src/dialogs/xml-tree.cpp, src/widgets/sp-xmlview-attr-list.cpp,
	  src/widgets/sp-xmlview-attr-list.h: added status bar to XML
	  editor.  added row-change callback for XML tree view.  This
	  all supports a possible future solution to bug #869683.
	* src/dialogs/desktop-properties.cpp: memory leak in RDF code.

2004-11-04  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp: togglable images and formatting
	  changes (make current layer bold)

	* src/uri.h, src/uri.cpp: added assignment operator

2004-11-03  MenTaLguY  <mental@rydia.net>

	* src/widgets/Makefile_insert, src/widgets/shrink-wrap-button.cpp,
	  src/widgets/shrink-wrap-button.h:

	  added Inkscape::Widgets::shrink_wrap_button, to make any gtk button
	  an SPButton-like shrink-wrapped button

	* src/widgets/layer-selector.h, src/widgets/layer-selector.cpp:

	  abandon SPButton for layer selector buttons

2004-11-03  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* po/check-markup: New script: detects <b>markup<b> <b>problems<7b>
	  in the <b>translated strings.  (~10 such problems found.)
	* Makefile.am (all, check, distcheck): Run po/check-markup (with
	  varying permissiveness of errors).

2004-11-02  MenTaLguY  <mental@rydia.net>

	* doc/keys.xml: added documentation of layer keys

2004-11-01  Kees Cook  <kees@outflux.net>

	* src/dialogs/align.cpp, src/dialogs/debugdialog.cpp: localized
	some missed strings.

2004-11-01  MenTaLguY  <mental@rydia.net>

	* share/icons/icons.svg: gave bulia's eye icons ids

	* src/widgets/layer-selector.h, src/widgets/layers-selector.cpp:
	  fixed up visibility/lock toggles... now to make them actually do
	  something

2004-10-31  MenTaLguY  <mental@rydia.net>

	* src/util/glib-list.h: adaptor for glib lists

	* src/widgets/layer-selector.h, src/widgets/layer-selector.cpp:
	  save the repr next to the SPObject

2004-10-30  MenTaLguY  <mental@rydia.net>

	* src/util/list.h: more list cleanups and documentation

	* src/verbs.cpp: call sp_document_done() for layer verbs too

2004-10-30  Bryce Harrington <bryce@bryceharrington.org>

	* src/dialogs/item-properties.cpp, src/sp-object.h:  Cleaning up
	stubs, disabling some more of the desc code to prevent crash.
	The change to SPObject::label() broke the label editing code;
	fixing it.

2004-10-30  Kees Cook  <kees@outflux.net>

	* src/sp-metadata.cpp, src/sp-metadata.h, src/Makefile_insert,
	src/document.cpp, src/sp-object-repr.cpp, src/sp-object.cpp:
	I've created my very first SPObject!  SPMetadata is alive!  No
	more nasty hack to have it disappear from SVG Plain.  Mental
	won't have to take away my CVS access any more!  :)
	* inkscape2.nsi: update from Adib Taraben

2004-10-30  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-matrix.cpp (nr_matrix_invert):
	  Fix for last commit to this file, which broke src==dest case.
	* src/libnr/nr-matrix-test.cpp: Add test cases for nr_matrix_invert.

2004-10-30  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp, src/widgets/layer-selector.h:
	  update when layers added/removed/reordered.

	* src/verbs.h, src/verbs.cpp: added "rename layer" verb.

2004-10-29  Kees Cook  <kees@outflux.net>

	* src/Makefile_insert, src/trace/Makefile_insert,
	src/util/Makefile_insert: distcheck cleanups.

2004-10-29  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp: default labels in italic

	* src/sp-object.h, src/sp-object.cpp: inkscape:label fixes

	* src/layer-fns.cpp: make ordering of layers complete; not just among
	                     siblings

	* src/util/list.h: documentation update

2004-10-29  Bryce Harrington <bryce@bryceharrington.org>

	* layer-fns.cpp:  documenting
	* layer-selector.cpp:  documenting & fixing funky widget resizing
	* object-ui.cpp, dialogs/item-properties.cpp, sp-object.h,
	  sp-object.cpp, widgets/layer-selector.cpp: add ability to set
	  inkscape:label from "Item Properties", remove id setting from
	  "Item Properties", switch to using
	  SPObject::label()/SPObject?::defaultLabel() in UI where object
	  ID is currently used.  Documenting.  Switching from "label" to
	  "inkscape:label" where appropriate.  Adding
	  visible()/setVisible() functions and activating checkbox.
	* dialogs/item-properties.cpp:  Adding title and desc boxes.
	  Adjusting layout of dialog a bit.  Changing to use of tables
	  instead of horiz/vert boxes for layout.  Setting to inactive
	  until some underlying bits get finished.

2004-10-29  Kees Cook  <kees@outflux.net>

	* src/dialogs/export.cpp: moved function-based static state variable
	  into the dialog state variables.  Closes bug #993447.
	* src/display/curve.cpp: fixed compile warning.
	* src/sp-namedview.cpp: wasn't ref counting correctly.  Closes #955020.

2004-10-29  Jon A. Cruz  <jon@joncruz.org>

	* src/sp-image.cpp, src/extension/internal/gdkpixbuf-input.cpp:
	  Refactoring filenames and file opening
	  Scales imported images if DPI is known and not 72 DPI. Fixes
	  #1029755

2004-10-29  MenTaLguY  <mental@rydia.net>

	* src/widgets/layer-selector.cpp, src/verbs.cpp:
	  unselect objects when layer is manually switched

2004-10-28  Kees Cook  <kees@outflux.net>

	* src/document-undo.cpp, src/document.cpp, src/sp-namedview.cpp,
	  src/sp-text.cpp, src/dialogs/desktop-properties.cpp,
	  src/dialogs/export.cpp, src/extension/input.cpp,
	  src/extension/output.cpp, src/extension/system.cpp:
	  Fixing calls to sp_document_set_undo_sensitive to correct allow for
	  nesting, as suggested by mental.  Found while tracking down bug
	  #1030436.

2004-10-28  MenTaLguY  <mental@rydia.net>

	* src/util/list.h: cleanups of list class.  I think, aside from
	  documentation and maybe fixes for g++ 3.4 (if required), this
	  is the last set of changes I will need to make.

	* src/sp-item.cpp, src/splivarot.cpp, src/util/reverse-list.h,
	  src/util/filter-list.h, src/util/map-list.h:
	  adjust for changes in the list class' interface

	* src/desktop.cpp, src/sp-desktop-widget.h:
	  removed old layer selector and added SPDesktop::itemIsHidden()

	* src/widgets/layer-selector.cpp, src/widgets/layer-selector.h:
	  more work; it's now at least as functional as the old selector it
	  replaces

2004-10-27  Kees Cook  <kees@outflux.net>

	* src/libnr/nr-point.h: use NR::X and NR::Y instead of "0" and "1".
	* src/dialogs/export.cpp: stack/register weirdness requires a function
	  call to get true == comparison of NR::Rect's.  Closes bug #1048614.
	* src/dialogs/align.cpp: saving erased iterator.  Closes bug #1054270.
	* share/extensions/ill2svg.pl: added strict, warnings, and detection
	  of Image::Magick module.  Closes bug #990659.
	* src/dialogs/find.h, src/dialogs/find.cpp: removed unfinished new
	  find dialog instantiation.  Closes bug #1048802.

2004-10-27  Carl Hetherington  <inkscape@carlh.net>

	* src/extension/output.cpp: better fix for 1004134 after advice
	from Ted.

2004-10-26  Carl Hetherington  <inkscape@carlh.net>

	* src/extension/output.cpp: don't reset modified flag until after
	save has happened, in case it fails.  Fixes 1004134.

	* src/livarot/ShapeSweep.cpp: fix a typo in my cleanups.  Fixes
	1048151.

2004-10-25  Bryce Harringotn <bryce@bryceharrington.org>

	* file.cpp, file.h, dialogs/export.cpp: Adding error return logic
	  for png export code so that failure to write can be tracked.
	  Adding an error dialog for when this occurs.  Fixes bug 1038932.

	* extension/system.cpp:  Changing sp_ui_error_dialog to g_warning
	  so won't crash when running from commandline.  Fixes bug
	  1000350.

	* inkscape.cpp, inkscape.h, main.cpp, dialogs/filedialog.cpp:
	  Adding Inkscape::Application::use_gui flag as temporary hack to
	  prevent gui dialogs from being used when running from
	  commandline.  Fixes bug 1045067.

2004-10-26  Carl Hetherington  <inkscape@carlh.net>

	* src/livarot/PathCutting.cpp: fix a couple of bugs that I
	introduced that cause crashes on cut path.

2004-10-25  Kees Cook  <kees@outflux.net>

	* src/sp-object.cpp: nasty hack to not export metadata on "Plain SVG".
	  I promise I'll fix this with a proper SPObject soon.

2004-10-25  Jon A. Cruz  <jon@joncruz.org>
	* src/file.cpp, src/file.h, src/inkscape.cpp, src/sp-image.cpp,
	src/uri.cpp, src/uri.h, src/dialogs/filedialog.cpp,
	src/extension/input.cpp, src/extension/implementation/script.cpp,
	src/extension/internal/pov-out.cpp, src/extension/internal/ps.cpp,
	src/extension/internal/win32.h, src/extension/plugin/gimpgrad.cpp,
	src/helper/png-write.cpp, src/trace/imagemap.cpp, src/xml/repr-io.cpp:

	Refactoring filenames and file opening

2004-10-24  MenTaLguY  <mental@rydia.net>

	* src/Makefile.am: added/removed files

	* src/util/copy-list.h: nobody's using it right now, get rid of it

	* src/traits/copy.h, src/traits/list-copy.h:
	  traits for determining the type to make a copy of a value

	* src/sp-item.cpp, src/util/filter-list.h src/util/map-list.h,
	  src/util/reverse-list.h, src/widgets/layer-selector.cpp
	  src/xml/sp-repr-action.cpp:

	  let the list functions infer their own result type (where possible)

	* src/util/forward-pointer-iterator.h: its value type is a reference

2004-10-23  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp: removed vertical usize limits on statusbar

	* src/widgets/layer-selector.cpp, src/widgets/layer-selector.h:
	  more layer selector work; simplfied model and customized CellRenderer
	  settings a bit

	* src/attributes.cpp, src/attributes.h, src/sp-object.cpp, src/sp-object.h:
	  add inkscape:label attribute

	* src/file.cpp, src/sp-anchor.h, src/sp-animation.h, src/sp-chars.h,
	  src/sp-clippath.h, src/sp-conn-end.cpp, src/sp-defs.h, src/sp-ellipse.h,
	  src/sp-gradient.h, src/sp-guide.h, src/sp-image.h, src/sp-line.h,
	  src/sp-linear-gradient.h, src/sp-marker.h, src/sp-mask.h,
	  src/sp-namedview.h, src/sp-object-group.h, src/sp-offset.h, src/sp-path.h,
	  src/sp-pattern.h, src/sp-polygon.h, src/sp-polyline.h,
	  src/sp-radial-gradient.h, src/sp-rect.cpp, src/sp-rect.h, src/sp-root.h,
	  src/sp-spiral.h, src/sp-star.h, src/sp-stop.h, src/sp-string.h,
	  src/sp-symbol.h, src/sp-text.h, src/sp-tspan.h, src/sp-use.h,
	  src/sp-offset.cpp, src/sp-shape.h:

	  make inheritance actual

2004-10-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/*: Move some things from nr-matrix-ops.h to new files.

	* src/libnr/nr-point-fns.h, src/libnr/nr-point-fns.cpp:
	  New function is_zero.  Move is_unit_vector here
	  (was private to sp-spiral.cpp).

	* src/display/bezier-utils-test.cpp: Disable a test, replacing with a
	  todo printf and adding a comment explaining.

2004-10-22  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/pencil-context.cpp: Ensure that data points array p is uniqued
	  and contains no NaNs.

	* src/libnr/nr-point-fns.cpp (LInfty): Fix bug with NaN coordinates:
	  return NaN (rather than unspecified behaviour).
	* src/libnr/nr-point-fns-test.cpp: Add test cases for L1,L2,LInfty
	  handling of NaN.

	* src/pencil-context.cpp: Fix bug: undesirable interactions between
	  snapping and snap-to-anchor.

2004-10-21  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp: SPDesktop::currentRoot() should pull from
	  the current layer hierarchy just like SPDesktop::currentLayer();
	  doubly so, since currently when switching documents the layer hierarchy
	  is updated before the document is switched

	* src/util/Makefile_insert, src/util/copy-list.h: add list copy thingy

	* src/util/list.h: add rest()

	* src/util/reverse-list.h: bug fixes to reverse_list_in_place()

	* src/widgets/layer-selector.cpp, src/widgets/layer-selector.h:
	  more work on layer selector

2004-10-21  Carl Hetherington  <inkscape@carlh.net>

	* src/livarot/Path.cpp, src/livarot/Path.h,
	src/livarot/PathConversion.cpp, src/livarot/PathCutting.cpp,
	src/livarot/PathOutline.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/ShapeMisc.cpp: excise separate path description data
	structure.

	* src/livarot/Path.h, src/livarot/Path.cpp,
	src/livarot/PathConversion.cpp, src/livarot/PathCutting.cpp,
	src/livarot/PathOutline.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/ShapeMisc.cpp, src/livarot/livarot-forward.h: move
	path description structs into their own files, and rename a few
	member variables.

	* src/livarot/Path.h, src/livarot/PathConversion.cpp,
	src/livarot/PathOutline.cpp: remove some unused functions.

2004-10-20  Carl Hetherington  <inkscape@carlh.net>

	* src/livarot/Path.cpp: fix for 1050379, and probably lots of
	others.

	* src/livarot/Path.h, src/livarot/PathOutline.cpp: bug fix for a
	previous commit.

	* src/livarot/Path.cpp: fix a memory leak.

2004-10-19  Carl Hetherington  <inkscape@carlh.net>

	* src/livarot/Path.h, src/livarot/PathSimplify.cpp: more
	simplification cleanups.

	* src/livarot/PathStroke.cpp: coding style cleanups.

	* src/livarot/Path.h, src/livarot/PathSimplify.cpp,
	src/livarot/PathStroke.cpp: more cleanups; don't modify Path::pts
	and Path::nbPt.

	* src/livarot/Path.cpp, src/livarot/Path.h,
	src/livarot/PathConversion.cpp, src/livarot/PathCutting.cpp,
	src/livarot/PathSimplify.cpp, src/livarot/PathStroke.cpp: use a
	std::vector for Path::pts.

2004-10-18  Carl Hetherington  <inkscape@carlh.net>

	* src/livarot/Path.h, src/livarot/PathSimplify.cpp: coding style
	and const cleanups.

	* src/livarot/PathSimplify.cpp: some very minor cleanups, and
	temporary comments for myself.

	* src/livarot/PathConversion.cpp: coding style cleanups.

	* src/livarot/PathConversion.cpp: fix for bug 1048827.

	* src/livarot/Path.h, src/livarot/PathSimplify.cpp: clean up
	simplification code.

2004-10-17  MenTaLguY  <mental@rydia.net>

	* share/templates/Makefile.am, share/templates/layers.svg:
	  added a layer template

	* src/widgets/layer-selector.h, src/widgets/layer-selector.cpp:
	  more layer selector work

	* src/util/filter-list.h, src/util/Makefile_insert:
	  added filter_list()

2004-10-15  Carl Hetherington  <inkscape@carlh.net>

	* src/livarot/PathSimplify.cpp: remove #ifdef
	pseudo_douglas_pecker code that wasn't being used.

2004-10-15  MenTaLguY  <mental@rydia.net>

	* src/view.h: removed obsolete status message functions

	* src/attributes.h: remove unused #define

	* src/sp-object.cpp: fix for bug #1048268 (inkscape:collect being written
	  in "plain SVG" files)

	* src/sp-item.h, src/sp-item.cpp: added isLocked() and isHidden()
	  predicates

	* src/sp-item.cpp, src/sp-style.cpp: basic support for visibility CSS
	  property

2004-10-14  Ted Gould  <ted@gould.cx>

	* share/extension/*.inkmod -> *.inx
	src/extension/init.cpp

	Changing the filename extension that is used to identify Inkscape
	extensions to the one specified in the design document.

2004-10-14  MenTaLguY  <mental@rydia.net>

	* src/util/list.h: more 3.4 fixes

2004-10-13  MenTaLguY  <mental@rydia.net>

	* src/util/list.h, src/util/forward-pointer-iterator.h:

	  fixes to (hopefully) build with g++ 3.4 (and generally be less evil
	  anyway)

2004-10-14  Carl Hetherington <inkscape@carlh.net>

	* src/livarot/int-line.cpp: coding style cleanups.

	* src/livarot/float-line.cpp, src/livarot/float-line.h:
	refactoring, removal of dead code.

	* src/display/guideline.cpp, src/display/guideline.h: coding style
	cleanups.

	* src/livarot/Path.cpp, src/livarot/Path.h,
	src/livarot/PathConversion.cpp, src/livarot/PathCutting.cpp,
	src/livarot/PathSimplify.cpp, src/livarot/PathStroke.cpp: merge
	Path::path_lineto and Path::path_lineto_b.

2004-10-14  Carl Hetherington <inkscape@carlh.net>

	* src/Path.cpp, src/Path.h, src/PathConversion.cpp,
	src/PathCutting.cpp, src/PathOutline.cpp, src/PathSimplify.cpp,
	src/ShapeMisc.cpp: use a vector of pointers for Path::descr_cmd.

	* src/livarot/Ligne.cpp, src/livarot/Ligne.h,
	src/livarot/int-line.cpp, src/livarot/int-line.h,
	src/livarot/float-line.cpp, src/livarot/float-line.h,
	src/livarot/livarot-forward.h, src/livarot/ShapeRaster.cpp,
	src/sp-flowregion.cpp, src/display/canvas-bpath.cpp,
	src/display/nr-arena-glyphs.cpp, src/display/nr-arena-shape.cpp,
	src/display/sp-ctrlline.cpp, src/libnrtype/FlowDest.cpp,
	src/libnrtype/RasterFont.cpp: split Ligne into float-line and
	int-line.

	* src/libnrtype/FlowDest.cpp, src/libnrtype/RasterFont.cpp,
	src/libnrtype/raster-position.h, src/livarot/float-line.cpp,
	src/livarot/float-line.h, src/livarot/int-line.cpp: use
	std::vector for arrays in FloatLigne.

	* src/livarot/float-line.cpp, src/livarot/float-line.h: remove
	lots of dead code.  Make some methods private.

2004-10-12  MenTaLguY  <mental@rydia.net>

	* src/Makefile.am: added files

	* src/layer-fns.cpp, src/sp-item.cpp: use iterators, simplifying code

	* src/sp-object.cpp, src/splivarot.cpp: adapt to new version of
	  Inkscape::Algorithms::longest_common_suffix

	* src/sp-object.h, src/sp-repr-iterators.h: add new iterator classes

	* src/algorithms/find-last-if.h: add counterpart of std::find_if

	* src/algorithms/longest-common-suffix.h: rewrite to use iterators

	* src/algorithms/longest-prefix.h, src/algorithms/longest-suffix.h,
	  src/algorithms/shortest-prefix.h, src/algorithms/shortest-suffix.h:

	  removed; these algorithms are no longer necessary when using
	  iterators

	* src/traits/list.h: no longer needed

	* src/traits/reference.h: add "Pointer" member type

	* src/util/Makefile_insert: shuffled files

	* src/util/list.h: reworked Inkscape::Util::List to be a "handle" type
	  that can also be used as an STL iterator

	* src/util/forward-pointer-iterator.h: treat a pointer as an iterator,
	  given a base pointer type and a type which defines the iteration
	  strategy

	* src/util/map.h: obsolete

	* src/util/map-list.h: iterator-based implementation

	* src/traits/tree-iterator.h: no longer necessary (superceded by
	  specific applications of Inkscape::Util::ForwardPointerIterator)

	* src/sp-object-tree-iterator.h, src/util/parent-axis.h,
	  src/util/sibling-axis.h: obsolete

	* src/util/map.h, src/util/reverse.h: obsolete

	* src/util/map-list.h, src/util/reverse-list.h:
	  iterator-based implementations

	* src/xml/Makefile_insert: added file

	* src/xml/repr.h: removed old tree iterator stuff

	* src/xml/sp-repr-action.cpp, src/xml/sp-repr-action.h: use new
	  pointer iterator facility

	* src/xml/sp-repr-iterators.h: pointer iterators for SPRepr

2004-10-12  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/bezier-utils.h, src/display/bezier-utils.cpp
	  (sp_bezier_fit_cubic_r, sp_bezier_fit_cubic_full): Change the meaning
	  of the last parameter: was max_depth, now lg_max_beziers, with the
	  relationship lg_max_beziers = max_depth + 1.  Callers updated.

	* src/xml/repr.cpp (sp_repr_change_order):
	  Add g_return_if_fail for some conditions that would break structural
	  integrity, and add a TODO comment indicating incompleteness.
	  Use sp_repr_prev function.

	* src/xml/repr-get-children.h, src/xml/repr-get-children.cpp
	  (sp_repr_prev_sibling): Rename to sp_repr_prev for consistency
	  with sp_repr_next.  Don't consider it an error for child to be
	  NULL or parentless.  Callers updated.

	* src/draw-context.cpp (spdc_concat_colors_and_flush,
	  spdc_flush_white): Misc readability cleanups.

	* src/display/curve.cpp (sp_curve_reverse): Fix a bug where the
	  reversed curve wrongly included a trailing moveto command.  (Bug
	  introduced in my 2004-09-05 change: one of the callers I didn't
	  know how to cause to run.)

2004-10-12  Ted Gould  <ted@gould.cx>

	* share/extensions/ai_input.inkmod, share/extensions/ai_output.inkmod,
	share/extensions/dia.inkmod, share/extensions/dropshadow.inkmod,
	share/extensions/eps_input.inkmod, share/extensions/epsi_output.inkmod,
	share/extensions/gimpgrad.inkmod, share/extensions/ps_input.inkmod,
	share/extensions/roundhole.inkmod, share/extensions/sk_input.inkmod,
	share/extensions/svgz_input.inkmod, share/extensions/svgz_output.inkmod,
	share/extensions/txt2svg.inkmod, share/extensions/wmf_input.inkmod,
	src/extension/dependency.cpp, src/extension/dependency.h,
	src/extension/extension.cpp, src/extension/init.cpp:

	Moving all of the dependency stuff from the scripts, up to the root
	extension level.  This means that everyone can have dependencies, and
	dependency checking (a good thing).  This makes use of the new
	'Dependency' class that is also in the extension directory.

2004-10-11  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/pencil-context.cpp (sp_pencil_context_root_handler): Split into
	  many functions, fixing some illegal union aliasing along the way (as
	  was done for sp_pen_context_root_handler).

	* src/modifier-fns.h: New file of inline functions based on macros.h
	  MOD__CTRL etc. macros.
	* src/Makefile_insert: Add the new file.

	* src/pen-context.h: Change size of p array from SP_DRAW_MAX_POINTS to
	  5 now that we aren't sharing with SPPencilContext.

	* src/draw-context.cpp, src/draw-context.h, src/pen-context.cpp,
	  src/pen-context.h, src/pencil-context.cpp, src/pencil-context.h:
	  Move npoints,p from SPDrawContext to both SPPenContext and
	  SPPencilContext.

	* src/draw-context.cpp, src/draw-context.h: Split off new files
	  pen-context.h, pen-context.cpp, pencil-context.h, pencil-context.cpp,
	  draw-anchor.h, draw-anchor.cpp.
	* src/Makefile_insert: Add the new files.

2004-10-10  Ted Gould  <ted@gould.cx>

	* src/event-context.cpp, src/file.cpp, src/file.h, src/print.cpp,
	src/print.h, src/selection-chemistry.h, src/sp-image.cpp, src/sp-item.cpp,
	src/sp-marker.cpp, src/sp-root.cpp, src/sp-shape.cpp, src/sp-symbol.cpp,
	src/tools-switch.cpp, src/dialogs/export.cpp, src/dialogs/filedialog.cpp,
	src/extension/Makefile_insert, src/extension/db.cpp,
	src/extension/dependency.cpp, src/extension/dependency.h,
	src/extension/effect.cpp, src/extension/effect.h,
	src/extension/extension-forward.h, src/extension/extension.cpp,
	src/extension/extension.h, src/extension/input.cpp, src/extension/input.h,
	src/extension/output.cpp, src/extension/output.h, src/extension/print.cpp,
	src/extension/print.h, src/extension/system.cpp,
	src/extension/internal/eps-out.cpp, src/extension/internal/ps.cpp,
	src/extension/internal/svg.cpp, src/libnrtype/FlowResOut.cpp:

	Splitting out the different types of extensions into their own files so
	that the overall dependencies can be reduced.  Caused a ripple through
	lots of other files.  Hopefully the dependency situation is better now.

2004-10-10  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/draw-context.cpp:
	  Change xp,yp file globals to NR::Point pen_draw_origin_w.

	* src/draw-context.cpp (sp_pen_context_root_handler):
	  Split into many routines.  Fix some illegal union member aliasing.
	  (pen_handle_key_press): Minor code cleanups in backspace handling.
	  (pen_handle_motion_notify): Make tolerance var local instead of
	  file-global.  (This transformation is applicable to many
	  dragtolerance users.)

	* src/draw-context.cpp (spdc_endpoint_snap_handle):
	  Change argument type from SPDrawContext to SPPenContext, and
	  specialize definition accordingly.  Caller updated.

	* src/draw-context.h: Change red_curve_is_valid from char to bool.
	* src/draw-context.cpp: Change red_curve_is_valid assignments from
	  0x00/0x01 to false/true (using find & replace).

2004-10-07  Carl Hetherington  <inkscape@carlh.net>

	* src/nr-object.cpp, src/nr-object.h: coding style and const
	fixes.

	* src/nr-rect.cpp: added a doxygen comment.  Some coding style
	fixes.

	* src/sp-paint-server.cpp: coding style fixes.

	* src/nr-arena-item.cpp, src/nr-arena-item.h: move a comment to
	the .cpp file and make it doxygen-style.

	* src/livarot/Path.cpp: coding style cleanups.  Add an assert to
	Path::Transform().

	* src/livarot/Path.cpp, src/livarot/Path.h: fix some archaic
	notation.

	* src/livarot/Ligne.cpp: coding style cleanups.

	* src/livarot/PathOutline.cpp, src/livarot/Path.h: fix a rather
	nasty hack in the outlining code.

	* src/livarot/Path.cpp, src/livarot/Path.h,
	src/livarot/PathConversion.cpp, src/livarot/PathCutting.cpp,
	src/livarot/PathOutline.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/ShapeMisc.cpp, src/splivarot.cpp, src/sp-offset.cpp:
	use std::vector for Path::descr_cmd.

	* src/livarot/Path.cpp, src/livarot/Path.h,
	src/livarot/PathConversion.cpp, src/livarot/PathCutting.cpp,
	src/livarot/PathOutline.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/ShapeMisc.cpp: getType() and setType() in Path::path_descr.

2004-10-07  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-object-repr.cpp (sp_repr_type_lookup): Distinguish between XML
	  element name and sodipodi:type attribute value: use a separate table
	  for each.
	* src/sp-object-repr.h, src/sp-object-repr.cpp (sp_object_type_lookup):
	  Don't export this function.  (Also rename it to name_to_gtype and
	  change its definition for separate tables.)

2004-10-03  Kees Cook  <kees@outflux.net>

	* src/dialogs/rdf.cpp, src/dialogs/repr-util.cpp, src/dialogs/repr.h:
	  Since "dc:title" can appear at multiple XML levels, a way to
	  control max depth in searching was added.  (Closes bug #1009290)

2004-09-30  MenTaLguY  <mental@rydia.net>

	* src/widgets/document-tree-model.cpp:
	  more bug fixes

	* src/widgets/layer-selector.cpp, src/widgets/layer-selector.h:
	  get the layer selector sort of in more order

2004-09-28  Ted Gould  <ted@gould.cx>

	* src/verbs.cpp, src/verbs.h, src/view.cpp:

	Making it so that actions get deleted as views get destroyed.

2004-09-27  Ted Gould  <ted@gould.cx>

	* src/desktop.h, src/forward.h, src/interface.cpp, src/interface.h,
	src/select-toolbar.cpp, src/shortcuts.cpp, src/shortcuts.h,
	src/toolbox.cpp, src/toolbox.h, src/verbs.cpp, src/verbs.h,
	src/dialogs/align.cpp, src/dialogs/align.h,
	src/dialogs/desktop-properties.cpp, src/dialogs/display-settings.cpp,
	src/dialogs/export.cpp, src/dialogs/find.cpp,
	src/dialogs/item-properties.cpp, src/dialogs/object-properties.cpp,
	src/dialogs/text-edit.cpp, src/dialogs/transformation.cpp,
	src/dialogs/xml-tree.cpp, src/helper/action.cpp, src/helper/action.h:

	Wow, alot of files changed.  The ones that changed the most are
	verb.cpp and verb.h, which are almost entirely different.  What happened
	here is the verbs were made object oriented.  So, as the verbs
	are built into everything, lots of files changed.  Now the code
	for the verbs is much cleaner, and I think a little bit faster.
	Also, it will be easier to extend the verbs for use in effects.

2004-09-26  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-matrix.h, src/libnr/nr-matrix.cpp:
	  Get rid of operator NR::translate(), which was allowing
	  *implicit* (and typically lossy) conversion to NR::translate,
	  and which made a bug hard to find.

	* src/sp-gradient-test.cpp: New unit test file.  I believe this is the
	  first test that tests an SPObject.
	* src/Makefile_insert, src/Makefile.am: Invoke the new test.

2004-09-24  MenTaLguY <mental@rydia.net>

	* src/selection-chemistry.cpp:

	  "select all" and "clear" now operate on the current layer rather than on
	  the document root

	* src/verbs.cpp, src/shortcuts.cpp, layer-fns.cpp, src/sp-item.cpp:

	  keyboard shortcuts and fixes for layer verbs

2004-09-23  MenTaLguY <mental@rydia.net>

	* src/message-stack.h, src/message-stack.cpp:

	  return id of flashed messages so they are cancellable

	* src/message-context.h, src/message-context.cpp:

	  message context flashes now supercede one another, as regular
	  messages do (they do not supercede regular messages though)

	* src/interface.cpp, src/layer-fns.cpp, src/layer-fns.h, src/verbs.cpp:

	  initial stab at layers menu; not everything works the way it should
	  quite yet

	* src/message-context.h, src/message-context.cpp:

	  added flash methods to Inkscape::MessageContext

	* src/gc-core.h, src/display/nr-arena-glyphs.cpp,
src/display/nr-arena-group.cpp,
	  src/display/nr-arena-item.cpp, src/display/nr-arena-item.h,
	  src/display/nr-arena-shape.cpp, src/libnr/nr-object.cpp,
src/libnr/nr-object.h,

	  eliminate more sources of leaks; managed objects shouldn't use refcounts
	  among themselves

	* src/xml/repr.cpp: don't nuke log pointer

2004-09-21  MenTaLguY <mental@rydia.net>

	* src/gc-finalized.h: fix for stupid bug preventing finalizable objects
	  from being collected

	* src/Makefile_insert, src/gc.cpp, src/gc-core.h:
	  move Inkscape::GC::init out-of-line, and funnel GC warnings through
	  glib

2004-09-21  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-marker.h, src/sp-marker.cpp (sp_marker_show_instance):
	  Change to using NR::Matrix instead of NRMatrix.  Update caller.

	* src/sp-gradient.cpp (sp_gradient_get_g2d_matrix,
	  sp_gradient_get_gs2d_matrix, sp_gradient_set_gs2d_matrix):
	  New NR::Matrix/NR::Rect versions of existing functions.

	* src/libnr/nr-matrix-translate-ops.h (operator/): New function.

	* src/libnr/nr-matrix-scale-ops.cpp: New file.
	* src/libnr/nr-matrix-scale-ops.h (operator/(Matrix,scale)):
	  New function.

2004-09-20  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-gradient.h: Change gradientTransform from NRMatrix to
	  NR::Matrix.  Users updated.

	* src/Makefile.am (EXTRA_DIST), Makefile_insert
	  dialogs/Makefile_insert extension/implementation/Makefile_insert
	  extension/internal/Makefile_insert helper/Makefile_insert
	  livarot/Makefile_insert (blah_SOURCES):
	  Add some .h files for `make dist'.

2004-09-19  MenTaLguY <mental@rydia.net>

	* src/gc-core.h: don't defer finalizers

	* src/gc-core.h: bump up free space divisor -- collections should
	  happen ~32x more frequently

2004-09-19  Carl Hetherington <inkscape@carlh.net>

	* src/display/canvas-bpath.cpp, src/display/nr-arena-shape.cpp,
	src/display/sp-ctrlline.cpp, src/libnrtype/RasterFont.cpp,
	src/livarot/Shape.h, src/livarot/ShapeRaster.cpp: remove some
	unused parameters from calls to raster code.

	* src/livarot/ShapeRaster.cpp: coding style cleanups.

	* src/livarot/Shape.h, src/livarot/ShapeRaster.cpp: factored out
	_updateIntersection().

	* src/livarot/AVL.cpp, src/livarot/AVL.h: remove DblLinked.  Cleanups.

2004-09-18  MenTaLguY <mental@rydia.net>

	* src/dialogs/filedialog.cpp: unref the preview document we created

2004-09-18  Carl Hetherington <inkscape@carlh.net>

	* src/livarot/AVL.cpp, src/livarot/AVL.h,
	src/livarot/DblLinked.cpp, src/livarot/DblLinked.h,
	src/livarot/LivarotDefs.h, src/livarot/ShapeRaster.cpp,
	src/livarot/ShapeSweep.cpp, src/livarot/sweep-tree.cpp,
	src/livarot/sweep-tree.h, src/sweep-event.h: replace leftFoo and
	rightFoo with foo[2] in a few places.  Associated cleanups.

	* src/livarot/Shape.h: use Side rather than a bool for
	TesteIntersection.  Add some methods.  Remove some unused variables.

	* src/livarot/ShapeSweep.cpp: simplify TesteIntersection with use
	of Side.

	* src/livarot/sweep-event.h: const fix.

	* src/livarot/sweep-event.cpp: simplifications with use of Side.

	* src/sp-offset.cpp, src/splivarot.cpp, src/livarot/Shape.cpp,
	src/livarot/ShapeMisc.cpp, src/ShapeSweep.cpp: lastA/firstA in
	Shape::dg_point ->

	  further work on stroking; break out bezier approximation into
	  public functions

2004-09-10  MenTaLguY <mental@rydia.net>

	* src/render/polygon.h, src/render/shape-builder.h,
	  src/render/shape-builder.cpp, src/render/stroke.h,
	  src/render/dash.h:

	  beginnings of a simple alternate renderer

2004-09-09  Carl Hetherington <inkscape@carlh.net>

	* src/sp-flowtext.cpp, src/sp-offset.cpp, src/splivarot.cpp,
	src/display/nr-arena-shape.cpp, src/libnrtype/FlowDest.cpp,
	src/livarot/PathConversion.cpp, src/livarot/Shape.h: make
	Shape::nbPt and Shape::nbAr private and provide accessor methods.

	* src/display/nr-arena-shape.cpp, src/livarot/Shape.h: make
	Shape::flags private.

	* src/splivarot.cpp, src/livarot/PathStroke.cpp,
	src/livarot/Shape.cpp, src/livarot/Shape.h, src/livarot/ShapeMisc.cpp,
	src/livarot/ShapeRaster.cpp, src/livarot/ShapeSweep.cpp:
	Clean up handling of flags in Shape class

	* src/livarot/AlphaLigne.cpp, src/livarot/Path.cpp,
	src/livarot/PathSimplify.cpp, src/livarot/Shape.cpp,
	src/livarot/ShapeSweepUtils.cpp: it's ok to free NULL.

	* src/livarot/Shape.h, src/sp-offset.cpp, src/splivarot.cpp,
	src/display/nr-arena-shape.cpp: Make Shape::pts private and offer
	a read-only accessor.

	* src/livarot/Shape.cpp, src/livarot/Shape.h,
	src/livarot/ShapeDraw.cpp, src/livarot/ShapeMisc.cpp,
	src/livarot/ShapeRaster.cpp, src/livarot/ShapeSweep.cpp, src/
	livarot/ShapeSweepUtils.cpp, src/livarot/ShapeUtils.h: Rename
	Shape::pts to Shape::_pts, and use getPoint() wherever possible.

	* src/sp-offset.cpp, src/splivarot.cpp, src/livarot/Shape.cpp,
	src/livarot/Shape.h, src/livarot/ShapeMisc.cpp,
	src/livarot/ShapeRaster.cpp, src/livarot/ShapeSweep.cpp: Add
	dg_point::totalDegree() and make use of it.


2004-09-08  MenTaLguY  <mental@rydia.net>

	* src/libnr/nr-object.h, src/libnr/nr-object.cpp: fix NRObject
	  initialization

	* configure.in, src/gc-core.h, src/gc-managed.h, src/gc-anchored,
	  src/gc-finalized.h:

	  add a --disable-gc ./configure option to omit garbage collection
	  from the build (the normal allocator will be used, although
	  memory will obviously leak since it does not get explicitly freed)

	* src/xml/repr.cpp: SPRepr's copy constructor needs to properly
	  initialize its fields

	* src/xml/repr-util.cpp, src/xml/repr-private.h,
	  src/xml/repr.h, src/xml/repr.cpp:

	  new child-count-related routines, and added mutation signals
	  to SPReprDoc

	* src/desktop.cpp: call the "Active Group" widget by its TRUE NAME!

	* src/widgets/Makefile_insert, src/widgets/document-tree-model.cpp,
	  src/widgets/document-tree-model.h, src/widgets/layer-selector.cpp,
	  src/widgets/layer-selector.h:

	  very cursory start on new layers UI

2004-09-08  Carl Hetherington <inkscape@carlh.net>

	* src/helper/stock-items.cpp: fix a bad free().  Improve coding
	style compliance.

	* src/libnrtype/FlowRes.cpp: slightly unpleasant fix for a buffer
	overrun.

2004-09-07  MenTaLguY <mental@rydia.net>

	* src/livarot/Shape.cpp, src/livarot/Shape.h, src/livarot/ShapeMisc.cpp,
	  src/livarot/ShapeSweep.cpp:

	  use std::vector for points array (seems to crash less?)

	* src/livarot/AlphaLigne.cpp, src/livarot/BitLigne.cpp,
	  src/livarot/Ligne.cpp, src/livarot/Path.cpp,
	  src/livarot/PathCutting.cpp, src/livarot/PathSimplify.cpp,
	  src/livarot/Shape.cpp, src/livarot/ShapeMisc.cpp,
	  src/livarot/ShapeSweep.cpp, src/livarot/ShapeSweepUtils.cpp:

	  switch to glib's allocator routines, which have the expected
	  semantics

	* src/livarot/evil-malloc.h: removed

2004-09-07  Ted Gould  <ted@gould.cx>

	* src/color-rgba.h:

	Some comments and some little code clean up things.  Added a couple
	of constructors to make life a little simpler.

2004-09-06  Ted Gould  <ted@gould.cx>
	* src/extension/plugin/gimgrad.cpp, src/extension/implementation/plugin*
	  share/extension/gimpgrad.inkmod, src/extension/system.cpp,
	  src/extension/extension.h:

	Mega commit.  This commit does two things, it adds in the ability to
	do plugins in Inkscape.  This means that there are loadable modules
	that can be used for just about anything.  It also provides a sample
	implementation of a plugin to load GIMP gradients.  This means that
	GIMP gradients can be imported into Inkscape, giving a larger set of
	gradients that can be used in Inkscape.

	Currently, nothing here is really complete, but it is functional.  The
	plugins really only work for input plugins, and the GIMP gradient example
	isn't very robust.  They will come shortly.

2004-09-05  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/curve.h, src/display/curve.cpp:
	  Change x,y members to NR::Point.
	  Rename posset (spiced&spiked hot milk) to posSet as per CodingStyle.

	* src/display/curve.cpp (sp_curve_reverse): Previously this
	  routine returned only the last subpath, and made it an open
	  path.  Now it preserves all aspects of the curve other than
	  reversing it.  I believe this change makes no difference to the
	  draw-context and dyna-draw-context callers (though I haven't
	  managed to test all of these callers), whereas for the `reverse
	  path' command, users presumably expect the new behaviour.

	* src/display/curve.cpp (sp_curve_closepath_current):
	  Fix bad assertion.

	* src/libnr/nr-matrix-fns.h, src/libnr/nr-matrix-fns.cpp
	  (get_translation): New function.

	* src/sp-polygon.cpp (polygon_get_value): Use static linkage.
	  (sp_polygon_set): Remove debugging output.  Add `todo' comment.

2004-09-03  MenTaLguY <mental@rydia.net>

	* src/attributes.cpp, src/attributes.h, src/sp-namedview.cpp,
	  src/sp-namedview.h:

	  remember previously selected layer on load

2004-09-02  MenTaLguY <mental@rydia.net>

	* src/attributes.cpp, src/attributes.h, src/sp-item-group.cpp:

	  reintroduced the inkscape:groupmode attribute

	* src/gc-core.h, src/gc-finalized.h, src/gc-anchored.h,
	  src/libnr/nr-object.cpp:

	  remove USE_LIBGC macro again

2004-08-30  MenTaLguY <mental@rydia.net>

	* src/sp-object.cpp:

	  ref the object while SPObject::deleteObject runs, so it doesn't
	  get destroyed halfway through [ fix for bug #1012874 ]

2004-08-29  MenTaLguY <mental@rydia.net>

	* src/gc-core.h:

	  turn off scanning of dynamic library data segments; we don't need
	  it, and it seems to cause problems on FC2

2004-08-27  MenTaLguY <mental@rydia.net>

	* src/traits/function.h: add typedefs for all argument positions,
	  specifying 'void' for all arguments after the last

	* src/livarot/evil-malloc.h, src/livarot/BitLigne.cpp,
	  src/livarot/PathCutting.cpp, src/livarot/PathSimplify.cpp,
	  src/livarot/Shape.cpp, src/livarot/ShapeSweepUtils.cpp:

	  work around livarot bugs so I can use ElectricFence

	* src/gc-core.h, src/gc-finalized.h, src/gc-anchored.h,
	  src/libnr/nr-object.cpp:

	  make the garbage collector easy to disable by undefining
	  USE_LIBGC in src/gc-core.h

2004-08-26  MenTaLguY <mental@rydia.net>

	* src/document-private.h, src/document.h, src/document.cpp:

	  add notification signal when resources are added or removed

2004-08-25  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/xml/repr-css.cpp (sp_repr_css_print):
	  Fix for shared string change.

	* src/sp-text.cpp (sp_text_description):
	  Fix for when font Name() call fails.

	* src/sp-text.cpp: CodingStyle changes, including moving some
	  declarations to first use.
	  Remove unused __SP_TEXT_C__ define.

2004-08-25  Carl Hetherington  <inkscape@carlh.net>

	* src/sp-cursor.cpp, src/sp-cursor.h, src/sp-guide.cpp:
	coding style cleanups.

2004-08-24  MenTaLguY <mental@rydia.net>

	* src/gc-anchor.h: fix to always use the GC base address, since
	  that will not always be the same as 'this', when I::GC::Anchored
	  is used via multiple inheritance.

2004-08-24  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnrtype/TextWrapper.h, src/libnrtype/TextWrapper.cpp (AppendUTF8):
	  Use strlen instead of for-loop.
	  Change printf to g_return_if_fail (and document that the argument
	  must be valid UTF-8).
	  Mark the text pointer as not being written through (const).

2004-08-23  MenTaLguY <mental@rydia.net>

	* src/xml/repr.cpp, src/xml/sp-repr-action.h:

	  removed stupid default 'next' constructor arguments and force them
	  to be specified explicitly (and fix the omission of one, which
	  fixes bug #1014541)

2004-08-22  MenTaLguY <mental@rydia.net>

	* src/Makefile_insert, src/gc-alloc.h:

	  introduced a GC-aware STL allocator

	* src/document-private.h, src/document.h, src/document.cpp:

	  switch to using STL map for "id changed" signals

2004-08-21  MenTaLguY <mental@rydia.net>

	* src/Makefile_insert, src/util/Makefile_insert: get libinkutil
	  deps straightened out

	* src/document-private.h, src/document-undo.cpp, src/document.cpp:

	  adapt for new APIs, header cleanups/refactorings

	* src/gc-core.h, src/gc-anchored.h, src/gc-finalized.h, src/gc-managed.h:

	  rewrote interface to Boehm GC for increased flexibility; there are now
	  three main classes:

	   - Inkscape::GC::Managed: objects managed by the GC; replaces
	                            Inkscape::GC::Object

	   - Inkscape::GC::Finalized: objects for which the GC will call
	                              destructors automatically; replaces
	                              Inkscape::GC::FinalizedObject

	   - Inkscape::GC::Anchored: managed objects which can be 'anchored'
	                             to prevent collection while non-gc-aware
	                             objects are holding references; replaces
	                             Inkscape::Refcounted

	  Note that they no longer inherit from each other(!), so you will
	  need to mix-and-match via multiple inheritance.  The latter two
	  don't do anything useful without the first, however.

	* src/gc-object.h, src/refcounted.h: removed

	* src/message-context.cpp, src/message-stack.h, src/selection.h,
	  src/view.cpp, src/libnr/nr-object.h, src/util/list.h,
	  src/xml/sp-repr-attr.h, src/xml/sp-repr-listener.h, src/desktop.cpp:

	  adopt new GC API and header refatorings

	* src/Makefile.am, src/util/Makefile_insert:

	  list util/* files in util's Makefile_insert now.

	* src/util/reverse.h: revive anx fix Inkscape::Util::reverse

	* src/util/share-c-string.cpp, src/util/share-c-string.h: removed

	* src/util/shared-c-string.cpp, src/util/shared-c-string.h:

	  employ the type system to make shared strings a little safer to use;
	  you can still shoot yourself in the foot, but at least now you need
	  to aim and pull the trigger first

	* src/xml/Makefile_insert, src/xml/repr-action-test.cpp,
	  src/xml/sp-repr-action-fns.h, src/xml/sp-repr-action.h:

	  reorganize transaction logging files

	* src/xml/repr-action-test.cpp: updated headers

	* src/xml/repr-action.cpp, src/xml/repr-action.h: removed

	* src/xml/repr-private.h, src/xml/repr.cpp, src/xml/repr.h:

	  update for new GC API and shared strings

	* src/xml/sp-repr-action-fns.h, src/xml/sp-repr-action.cpp,
	  src/xml/sp-repr-action.h:

	  header refactoring and new GC API

	* src/xml/sp-repr-attr.h, src/xml/sp-repr-listener.h:

	  new GC API

2004-08-20  Carl Hetherington <inkscape@carlh.net>

	* src/zoom-context.cpp, src/view.cpp, src/version.cpp,
	src/sp-defs.cpp: coding style cleanups.

	* src/sp-polygon.cpp: coding style and a few other small cleanups.

	* src/sp-anchor.cpp: coding style cleanups.  Remove unnecessary
	static variable.

2004-08-18  Bryce Harrington <bryce@bryceharrington.org>

	* autogen.sh:  Fixing the 'missing ltmain.sh' bug

2004-08-17  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-star.cpp: Use cast to guint32 instead of using modulo 2**32.
	  Fix a uint compilation bug on Windows reported by mrchapp.
	  Mark a few functions as static.

2004-08-16  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-conn-end.cpp (change_endpts):
	  Use new sp_curve_stretch_endpoints function: i.e. preserve the
	  shape of the connector path.

	* src/display/curve.h, src/display/curve.cpp
	  (sp_curve_stretch_endpoints): New function.

	* src/sp-use-reference.cpp: CodingStyle changes.

	* src/sp-item.h, src/sp-item.cpp (sp_item_write_transform):
	  Indicate that adv won't get written to.

	* src/sp-rect.cpp (sp_rect_set_transform): Call sp_rect_set_shape,
	  so that bbox is up-to-    src/livarot/PathConversion.cpp,
src/livarot/Shape.cpp,
	src/livarot/Shape.h, src/livarot/ShapeDraw.cpp, src/livarot/ShapeMisc.cpp,
	src/livarot/ShapeRaster.cpp, src/livarot/ShapeSweep.cpp,
	src/livarot/ShapeSweepUtils.cpp:
	  Revert these files to their state prior to mental's "2004-08-08"
	  entry (the change made in 2004-08-09 02:23 UTC).

2004-08-11  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/algorithms/longest-common-suffix.h: Fix bug I introduced three
	  days ago.

	* src/attributes.h, src/attributes.cpp: New attributes
	  SP_ATTR_CONNECTION_START, SP_ATTR_CONNECTION_END.
	* src/sp-conn-end.h, src/sp-conn-end.cpp,
	  src/sp-conn-end-pair.h, src/sp-conn-end-pair.cpp:
	  New files.
	* src/Makefile_insert (libinkpre_a_SOURCES): Add the new files.

	* src/sp-path.cpp, src/sp-path.h: Call the new connector stuff.

	* src/display/curve.h, src/display/curve.cpp
	  (sp_curve_first_point, sp_curve_last_point): New functions.

	  (sp_curve_transform): Re-implement with NR::Matrix/NR::Point.
	  The old code appears to be buggy for sheer/rotate matrices
	  due to calculating each y coord using the new corresponding x coord
	  instead of the previous value.

	  Also add NR::translate version.

	  Get rid of the return value.  Callers updated.

	* src/sp-item.h, src/sp-item.cpp: (i2anc_affine): New function
	  (essentially a rename of existing private partial_xform function, but
	  differing behaviour on encountering non-SPItem in the hierarchy).

	  (i2i_affine): New function (essentially a rename of existing
	  SPItem::getRelativeAffine).  Implement SPItem::getRelativeAffine in
	  terms of the new function.

	  (sp_item_dt2i_affine): NR::Matrix version.

	* src/libnr/nr-path.h (c, setC): new methods.

2004-08-09  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-affine.cpp (sp_desktop_w2doc_affine,
	sp_desktop_doc2w_affine, sp_desktop_doc2d_xy_point),
	src/knotholder.cpp (knot_moved_handler), src/sp-item.cpp
	(SPItem::getRelativeTransform), src/sp-rect.cpp
	(sp_rect_set_transform), src/display/sp-canvas-util.cpp
	(sp_canvas_item_i2i_affine, sp_canvas_item_set_i2w_affine):
	  Cleanup: Use the new division operators instead of multiplication by
	  inverse.  (Currently the division operators are implemented as
	  multiplication by inverse.)

	* src/splivarot.cpp, src/livarot/Shape.cpp, src/livarot/ShapeMisc.cpp,
	src/livarot/ShapeRaster.cpp, src/livarot/ShapeSweep.cpp:
	  Hurriedly fix some problems caused by overly-hurried changes.
	  Address some signed/unsigned warnings.
	  Add some assertions.
	  (Haven't checked the performance cost of the assertions.)

	* src/livarot/Shape.h: Make constructors explicit.

2004-08-08  MenTaLguY  <mental@rydia.net>

	* src/sp-flowregion.cpp, src/sp-flowtext.cpp, src/sp-offset.cpp,
	  src/splivarot.cpp, src/display/nr-arena-shape.cpp,
	  src/livarot/PathConversion.cpp, src/livarot/Shape.cpp,
	  src/livarot/Shape.h, src/livarot/ShapeDraw.cpp,
	  src/livarot/ShapeMisc.cpp, src/livarot/ShapeRaster.cpp,
	  src/livarot/ShapeSweep.cpp, src/livarot/ShapeSweepUtils.cpp:

	  replace ad-hoc realloced arrays with std::vector and deal with
	  uninitialized data problems that valgrind complained about

	* libgc.supp: valgrind suppression profile for libgc, which necessarily
	  reads and runs comparisons on a lot of uninitalized data; the present
	  form of this file is probably too broad however

2004-08-08  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-matrix-div.h, src/libnr/nr-matrix-div.cpp:
	  operator/(NR::Point, NR::Matrix), operator/(NR::Matrix, NR::Matrix):
	  new functions, new files.

	* src/algorithms/longest-common-suffix.h:
	  Handle in O(1) time the common case of equal tails.
	  Documentation.

2004-08-08  Ted Gould  <ted@gould.cx>

	* src/svg-profile.h, src/Makefile_insert:

	Adding the first support in for trying to determine which profiles are
	used with certain functionality, and if that is used by the current
	document.  Really, right now, there is no code changes to anything that
	compiles.  But this is the header file that contains the class that
	I'm plannig to use in the future.

2004-08-07  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnrtype/RasterFont.h, src/libnrtype/RasterFont.cpp:
	  Get rid of argumentless constructor (which was leaving
	  style.transform as random bits), replace with constructor taking
	  style argument.  Caller updated.
	  Disable default copy constructor and operator=.

2004-08-06  MenTaLguY <mental@rydia.net>

	* configure.in, src/gc-core.h, src/gc-object.h,
	  src/display/nr-arena-glyphs.cpp, src/display/nr-arena-group.cpp,
	  src/display/nr-arena-image.cpp, src/display/nr-arena-item.cpp,
	  src/display/nr-arena-shape.cpp, src/display/nr-arena.cpp,
	  src/helper/action.cpp, src/libnr/nr-object.cpp, src/libnr/nr-object.h:

	  make NRObject GC-aware

2004-08-06  David Turner <novalis@gnu.org>
	* src/sp-shape.cpp (sp_shape_marker_get_transform): Make marker handling
match
	SVG spec better.

2004-08-06  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-matrix.h, src/libnr/nr-matrix.cpp:
	  NR::Matrix *= NR::scale: new.

	* src/sp-object.cpp, src/sp-object.h, src/sp-object-tree-iterator.h:
	  Move TreeIterator<SPObject *> specialization to snew file
	  sp-object-tree-iterator.h.
	  Mark several pointers as not being written through.
	  Correspondingly change TreeIterator specialization to
	  <SPObject const *> instead of <SPObject *>.

	* display/nr-arena-item.cpp, display/nr-arena-item.h:
	  Add NR::Matrix version of nr_arena_item_set_transform.

	* src/sp-item.h, src/sp-item.cpp (getRelativeTransform, partial_xform):
	  Mark pointers as not written through.

	* src/arc-context.cpp, src/draw-context.cpp, src/dyna-draw-context.cpp,
	  src/path-chemistry.cpp, src/rect-context.cpp,
	  src/selection-chemistry.cpp, src/seltrans.cpp, src/sp-flowdiv.cpp,
	  src/sp-flowregion.cpp, src/sp-flowtext.cpp, src/sp-item-group.cpp,
	  src/sp-item-notify-moveto.cpp, src/sp-item-transform.cpp,
	  src/sp-item.cpp, src/sp-item.h, src/sp-offset.cpp, src/sp-rect.cpp,
	  src/sp-shape.cpp, src/sp-use.cpp, src/spiral-context.cpp,
	  src/splivarot.cpp, src/star-context.cpp, src/text-context.cpp,
	  src/dialogs/item-properties.cpp:
	  Change SPItem->transform from NRMatrix to NR::Matrix.

	* src/libnr/nr-matrix-ops.h (operator*(NR::Matrix, NRMatrix)): new.

	* src/libnr/nr-matrix.h: NR::Matrix *= NR::translate: new operator.

	* src/nodepath.cpp: Mark NodeSort operator< as static.
	  Indentation as per CodingStyle.

	* src/libnr/nr-scale.h (NR::scale(double)): new constructor.

	* src/svg/svg-affine.cpp (sp_svg_transform_write), src/svg/svg.h:
	  Add NR::Matrix version.

2004-08-05  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/bezier-utils.cpp: Misc. minor changes.

2004-08-04  MenTaLguY  <mental@rydia.net>

	* configure.in, src/gc-object.h, src/refcounted.h:

	  start using libgc in earnest; Inkscape::Refcounted is now GC-aware

2004-08-04  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/nodepath.cpp: Cleanups: Mark some things as static.  Switch from
	  pointer to reference in some places. Make const placement conform to
	  CodingStyle.

	* src/inkview.cpp (sp_svgview_main_key_press): Accept some common keys
	  like PgUp, q.

	* src/draw-context.cpp (fit_and_split):
	  Slight simplification: don't handle impossible condition npoints < 2.
	* src/proofs: Update accordingly.  (Also add some bezier-utils proofs.)

2004-08-04  David Turner <novalis@gnu.org>

	* sp-path.cpp: 'd' is a required attribute for paths.  Ensure that
	all paths have it.

2004-08-03  MenTaLguY  <mental@rydia.net>

	* src/dialogs/rdf.cpp, src/xml/repr-util.cpp, src/xml/repr.h:
	  removed sp_repr_recursive_drop() which is unneeded and
	  creates unnecessary thrash in the undo logs

	* src/livarot/Shape.h, src/livarot/Shape.cpp,
	  src/livarot/ShapeSweep.cpp, src/livarot/ShapeMisc.cpp:

	  experiment to replace ad-hoc realloc() arrays with std::vector

2004-08-02  David Turner <novalis@gnu.org>

	* file.cpp, file.h, interface.cpp, toolbox.cpp, verbs.cpp, verbs.h:

	Added vacuum command to remove unused defs.

2004-08-02  MenTaLguY  <mental@rydia.net>

	* configure.in: sigc++ 2.0.2 (and before?) has a bug that
	  causes us to crash.  require >= 2.0.3

	* src/Makefile.am, src/Makefile_insert, src/gc-core.h,
	  src/gc-object.h, src/algorithms/longest-common-suffix.h,
	  src/traits/list.h, src/traits/reference.h, src/util/flip.h,
	  src/util/fold.h, src/util/list-iterator.h, src/util/list.h,
	  src/util/map.h, src/util/parent-axis.h, src/util/reverse.h,
	  src/util/sibling-axis.h, src/util/tuple.h, src/util/zip.h:

	  more "functional" work

2004-08-02  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/display/curve.cpp, src/display/curve.h:
	  Greater conformance with CodingStyle.

2004-07-31  David Turner <novalis@gnu.org>

	* dialogs/xml-tree.cpp: Improved focus, added keystroke for attr commit.

2004-07-31  Ted Gould  <ted@gould.cx>

	* src/extension/extension.cpp,
	src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/implementation/script.cpp,
	src/extension/implementation/script.h, src/extension/internal/eps-out.cpp,
	src/extension/internal/eps-out.h:

	Okay, changed the prefs_ prototypes to include which extension they are
	working with. This should clean up some warnings before they become
	problems later.

2004-07-31  Ted Gould  <ted@gould.cx>

	* src/print.cpp, src/extension/extension.cpp, src/extension/extension.h,
	  src/extension/internal/eps-out.cpp, src/extension/internal/ps.cpp:

	  Changed the get and set param prototypes so that they aren't overloaded
	  anymore - this was flaky.  Also added a document to the prototype so
	  that document specific parameters can be supported in the future.

2004-07-28  David Turner <novalis@gnu.org>

	* sp-gradient.cpp, widgets/gradient-vector.cpp: fixed gradient handling to
	properly render gradients with sharp color boundaries

2004-07-29  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/inkview.cpp: Make the window title be the name of the
	  instead of the current file instead of the first file.

	* src/round-test.cpp: New unit-test file.

	* src/desktop.h, src/sp-desktop-widget.h:
	  Move SPDesktopWidget stuff from desktop.h to new file
	  sp-desktop-widget.h.

	* debian/*: Copy lots of changes from wolfi's official Debian package
	  of inkscape.
	  Also use separate builddir, which simplifies the `clean' target.

2004-07-24  MenTaLguY  <mental@rydia.net>

	* configure.in, src/Makefile.am, src/main.cpp, src/gc-core.h:
	  added libgc dependency

	* src/Makefile.am, traits/function.h:
	  added trait class for functions and C++ "functors"

	* src/Makefile.am, util/flip.h:
	  added flip() which, given a function with two arguments,
	  returns an identical function with its arguments reversed

2004-07-23  MenTaLguY  <mental@rydia.net>

	* src/Makefile.am, src/traits/reference.h, src/util/tuple.h:
	  added generic Tuple type

2004-07-23  Ted Gould  <ted@gould.cx>

	* src/attributes.cpp, src/attributes.h, src/sp-namedview.cpp,
	src/sp-namedview.h, src/dialogs/desktop-properties.cpp,
	src/display/canvas-grid.cpp, src/display/canvas-grid.h:

	Adding in the ability to have 'emphasis grid lines' where some lines are a
	different color than others.  In the default case every fifth grid line
	gets to be 0x11 darker alpha.  Nothing that will get in your way, but
	enough that you can find the spacing.  All parameters are changeable in
	document preferences.

2004-07-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* autogen.sh: Move unversioned automake to last resort.

2004-07-20  Kees Cook  <kees@outflux.net>

	* src/dialogs/desktop-preferences.cpp: corrected my usage of static
	  l18n strings.
	* src/dialogs/stroke-style.cpp: fixed missing l18n. (bug #994837)
	* src/dialogs/sp-attribute-widget.cpp: went hunting for other static
	  l18n strings.  Fixed some here too.
	* autogen.sh: cleanups and more debugging.
	* share/extensions/sk2svg.sh: tempfile cleanups from pjrm (patch #990009)

2004-07-20 Nathan Hurst <njh@mail.csse.monash.edu.au>

	* debian/changelog, configure.in: Moved to 0.40cvs and updated
	  debian stuff.

2004-07-18  MenTaLguY  <mental@rydia.net>

	* configure.in, src/Makefile.am, src/algorithms/Makefile_insert,
	  src/algorithms/makefile.in, src/traits/Makefile_insert,
	  src/traits/makefile.in, src/util/Makefile_insert, src/util/makefile.in:

	  added src/algorithms, src/traits, and src/util subdirs

	* src/algorithms/longest-common-suffix.h:

	  added generic "longest common suffix" algorithm

	* src/traits/list.h: added traits class for lists

	* src/traits/tree-iterator.h: added traits class for n-ary tree iterators

	* src/util/list-iterator.h: STL iterator for lists

	* src/util/parent-axis.h: parent "axis" of tree iterator as list

	* src/util/sibling-axis.h: sibling "axis" of tree iterator as list

	* src/xml/repr.h: specialize Traits::TreeIterator for SPRepr *

	* src/sp-object.h: specialize Traits::TreeIterator for SPObject *

	* src/sp-object.cpp: use generic "longest common suffix" to find
	                     nearest common ancestor

	* src/splivarot.cpp: use genric "longest common suffix" to find
	                     nearest common ancestor here too

2004-07-18  Kees Cook  <kees@outflux.net>

	* Makefile.am, configure.in, autogen.sh, toolversions.sh:
	  cleaning up some automake misbehavior from the gtkmm patch.
	  automake 1.4isms snuck back in.
	* src/desktop-events.cpp: unlocalized strings updated.

2004-07-18  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-path.cpp (sp_path_write): Handle shape->curve==NULL.

2004-07-18  MenTaLguY  <mental@rydia.net>

	* Makefile.am, configure.in, m4/Makefile.am, m4/codeset.m4, m4/gettext.m4,
	  m4/glibc21.m4, m4/iconv.m4, m4/isc-posix.m4, m4/lcmessage.m4,
	  m4/progtest.m4, src/arc-context.cpp, src/arc-context.h, src/desktop.cpp,
	  src/desktop.h, src/document.cpp, src/document.h, src/draw-context.cpp,
	  src/draw-context.h, src/event-context.h, src/main.cpp,
	  src/message-stack.h, src/node-context.cpp, src/node-context.h,
	  src/nodepath.cpp, src/nodepath.h, src/object-hierarchy.h,
	  src/rect-context.cpp, src/rect-context.h, src/selcue.cpp, src/selcue.h,
	  src/selection-describer.cpp, src/selection-describer.h,
	  src/selection.h, src/seltrans.cpp, src/sp-gradient.cpp,
	  src/sp-item.cpp, src/sp-item.h, src/sp-object.cpp, src/sp-object.h,
	  src/sp-offset.cpp, src/sp-offset.h, src/sp-pattern.cpp, src/sp-use.cpp,
	  src/sp-use.h, src/spiral-context.cpp, src/spiral-context.h,
	  src/star-context.cpp, src/star-context.h, src/text-context.cpp,
	  src/text-context.h, src/toolbox.cpp, src/uri-references.cpp,
	  src/uri-references.h, src/view.cpp, src/view.h,
	  src/dialogs/xml-tree.cpp:

	  merged Aubanel MONNIER's gtkmm upgrade patch

2004-07-17  Carl Hetherington  <inkscape@carlh.net>

	* src/sp-use.cpp: fix a compiler warning (closes #992960)

	* src/sp-offset.cpp: fix a compiler warning (closes #992960)

	* src/sp-text.cpp: fix a compiler warning (closes #992959)

2004-07-16  Kees Cook  <kees@outflux.net>

	* src/verbs.h, src/verbs.cpp: added "sp_verbs_find" function for bryce.

2004-07-15  Ted Gould  <ted@gould.cx>

	* 0.39 Release

2004-07-14  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp: disable recursive update warning for release

	* src/select-context.cpp: work around probable cut-and-paste bug
	  between sp_select_context_item_handler and
	  sp_select_context_root_handler by checking for drag_escaped

2004-07-13  MenTaLguY  <mental@rydia.net>

	* src/make.exclude: omit extension/script/js/js.c from build

2004-07-13  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/rdf.cpp: Don't add dc:description entry to SVG files.

	* src/utest/utest.h: Add include guard.

2004-07-12  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/decimal-round.h (decimal_round): New file, new function.
	* src/round.h (decimal_round): New file, new function.
	* src/Makefile_insert: Add to libinkpost_a_SOURCES.

2004-07-11  MenTaLguY  <mental@rydia.net>

	* src/document.h, src/document-undo.cpp:
	  added sp_document_get_undo_sensitive() for capturing and restoring
	  undo sensitivity

	* src/sp-object.cpp: don't log id changes made to resolve
	  duplicate ids (to avoid undo badness) (fix for bug #989023)

2004-07-11  Kees Cook  <kees@outflux.net>

	* src/preferences-skeleton.h, src/extension/init.cpp: with simarilius,
	  tracked down the cause of bug #988445.  Extension code now has a
	  small section that validates preferences for valid extension names.
	* src/dialogs/filedialog-win32.cpp: corrected an assert test, and
	  changed dialog to take the passed window title.
	* autogen.sh, config.h.mingw, configure.in, src/Makefile_insert,
	  src/help.cpp, src/inkscape-stock.cpp, src/inkscape.cpp, src/main.cpp,
	  src/make.dep, src/make.files, src/path-prefix.h, src/prefix.cpp,
	  src/prefix.h, src/dialogs/stroke-style.cpp,
	  src/extension/Makefile_insert, src/extension/init.cpp,
	  src/extension/implementation/Makefile_insert,
	  src/extension/implementation/script.cpp,
	  src/extension/internal/Makefile_insert, src/helper/stock-items.cpp,
	  src/widgets/icon.cpp:
	Cleaned up all the path #define's and usage.  In the process found at
	least 3 separate bugs associated with file locations.  This should
	hopefully work for Win32 as well.  Bottom line in this change: don't use
	INKSCAPE_DATADIR anywhere except in "path-prefix.h".  This includes
	an update to the autopackage code as well with fixes so that
	a change to "--enable-binreloc" will get recompiled correctly.  These
	changes should address bug #978391.

2004-07-11  Carl Hetherington  <inkscape@carlh.net>

	* src/attributes.cpp, src/attributes.h: remove confusing
	snaptogrid and snaptoguides options.

	* src/desktop-events.cpp: use inkscape:guide-bbox instead of
	snaptoguides to turn guides on.

	* src/desktop.cpp: no need to worry about Snapper::getEnabled().

	* src/snap.cpp, src/snap.h: Remove explicit enabled flag from
	Snapper, as itconfuses people.  Added
	namedview_dim_snap_all_types().  Return useful stuff from
	vector_snap_list.

	* src/rect-context.cpp: Use hack to make snapping kind of work
	even with snap-to-bbox enabled.

	* src/sp-namedview.cpp, src/dialogs/desktop-properties.cpp: remove
	snaptogrid and snaptoguides options as they confuse people.  Use
	better names for the scale origin radio buttons, as suggested by
	Bulia.

	* src/seltrans.cpp: Fix some cases where snap wasn't correctly applied.

2004-07-10  MenTaLguY  <mental@rydia.net>

	* src/sp-image.cpp: prospective fix for bug #979858

	* src/select-context.cpp, src/select-context.h,
	  src/seltrans.cpp, src/seltrans.h:

	  gave SPSelTrans its own Inkscape::MessageContext, fixing
	  bug #977971

2004-07-10  Kees Cook  <kees@outflux.net>

	* src/knot.cpp: solved bug #988513: knot could stay grabbed in
	  situations where the tool went away but never got "button_release"
	  event.  This patch uses the "enter" and "leave" notifiers to disable
	  the grab before a "motion" can come and snag the knot.

2004-07-09  Kees Cook  <kees@outflux.net>

	* src/widgets/paint-selector.cpp: solved bug #984902: the pattern
	  menu was being destroyed since it was remaining part of the frame
	  that was being destroyed whenever the selector changed.  It gets
	  ref-counted, disconnected, and destroyed correctly now.
	* mkinstalldirs: automake 1.8 stopped including "mkinstalldirs", but
	  intltool still uses it.  We'll need to keep this until intltool
	  fixes the bug.  intltool 0.31 and earlier are all buggy.

2004-07-09  Carl Hetherington  <inkscape@carlh.net>

	* src/draw-context.cpp: remove some debugging g_prints.

2004-07-08  MenTaLguY  <mental@rydia.net>

	* src/interface.cpp: fixed crash on desktop context menu

	* src/desktop.h, src/desktop.cpp:

	  added SPDesktop::isWithinViewport() to conveniently determine
	  if an item is within view

	  also made isLayer() const

	* src/sp-object.h: added SPObject::hasChildren() predicate

	* src/sp-object.cpp: revert to old behavior of breaking parent
	  link before emitting "release" signal

	* src/selection-chemistry.cpp: rewrote sp_selection_item_next()
	  and sp_selection_item_prev() to work with layers

2004-07-08  Carl Hetherington  <inkscape@carlh.net>

	* src/libnrtype/FontFactory.cpp: disable printing of debug
	messages.

	* src/sp-item-group.cpp: give it a snappoints method to fix
	937318.

	* src/draw-context.cpp: fix a couple of places where Shift isn't
	checked before snapping.


2004-07-07  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp, src/interface.cpp: remove the word "layer"
	  for now, and disable the layer selector when the user is not
	  inside a group

2004-07-07  Kees Cook  <kees@outflux.net>

	* src/dialogs/desktop-properties.cpp: added a few g_asserts, and
	  added a missing sp_signal_disconnect_by_data for the color picker,
	  which closes bug #975864.  Stopped accidentally calling
	  sp_document_done from the update handler (fixes bug #986411).
	* src/dialogs/dialog-events.cpp, src/helper/action.cpp:
	  whitespace changes, typo fixes, added a few g_asserts.
	* src/selection-chemistry.cpp, src/desktop.cpp: when deleting items
	  from the desktop, the selection context may need to be cleared since
	  it may have pointers to the deleted items.  To do this, I just
	  reselect the current tool (fixes bug #983243).
	* src/dialogs/xml-tree.cpp, src/dialogs/desktop-properties.cpp:
	  corrected tooltips memory handling.

2004-07-06  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp: minor tweaks to make the existing layers
	  code easier to work with in its current state (particularly,
	  to sidestep some existing bugs that otherwise require more
	  UI work to fix)

2004-07-06  Carl Hetherington  <inkscape@carlh.net>

	* src/seltrans.cpp, src/sp-namedview.cpp,
	src/display/bezier-utils.cpp, src/libnr/nr-types.cpp:
	isnan appears to need a std:: namespace qualifier.

2004-07-06  Ted Gould  <ted@gould.cx>

	* src/libnr/nr-point.h, src/libnr/nr-rect.h:

	Adding in a function to round the points and rectangles.  Using this
	for less precise comparisons.  Also, added in a function to print
	each of these.

	* src/dialogs/export.cpp:

	Major revisions to do all kinds of fun stuff.  The major one being
	that filenames and dpi's can now be stored on selections.  This
	makes it so that people working on a section of a document can export
	it consistently.

2004-07-06  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-typeset-utils.h: Greatly reduce #includes.

	* src/color-rgba.h, src/Makefile_insert, src/desktop.h:
	  Move ColorRGBA from desktop.h to new file color-rgba.h.
	* src/desktop.cpp, src/dropper-context.cpp: #include it.

2004-07-05  Kees Cook  <kees@outflux.net>

	* src/dialogs/desktop-properties.cpp, src/dialogs/rdf.cpp,
	  src/dialogs/rdf.h: added multiline data entry items, reduced
	  overall width of the dialog, and created the license entry areas.
	  Auto-detection of license on load works now.

2004-07-05  MenTaLguY <mental@rydia.net>

	* src/desktop.cpp: comitted further work which gives us a
	  partially-functional layers menu (not actually hooked up to
	  change layers yet), and it is not always updated when it needs
	  to be (yet).  It does also fix the crash though.

	* src/desktop.cpp, src/desktop.h, src/document.cpp,
	  src/sp-item-group.cpp, src/sp-item-group.h:

	  additional layers work; backed off on promoting siblings to
	  layers automatically and reintroduced "global" layer mode

2004-07-05  Carl Hetherington <inkscape@carlh.net>

	* src/desktop.cpp: prevent crash by adding a check for
	layer == NULL to SPDesktopWidget::_buildLayerStatusMenuItem.

	* src/selection-chemistry.cpp: prevent crash on copying empty
	groups.

2004-07-04  MenTaLguY  <mental@rydia.net>

	* src/sp-object.cpp: fixed bug #979281 -- I had accidentally
	  reversed the sense of a test in SPObject::requestModified(),
	  such that CHILD_MODIFIED notifications were never being sent

	* src/widgets/sp-color-notebook.cpp: always assume colors are
	  8-digit hex rrggbbaa, and zero-fill accordingly

	  HAPPY NATHAN#@$?#$#@$!?!?!?

	* src/desktop.cpp, src/desktop.h, src/document.cpp, src/document.h,
	  src/interface.cpp, src/select-context.cpp, src/selection-chemistry.cpp,
	  src/sp-item-group.cpp, src/sp-item-group.h, src/widgets/widget-sizes.h:

	  Added selection-changes-current-layer and other layer refinements.
	  Except for fixing the currently broken layer combo box on the status
	  bar, I think this is pretty much the last of the layerish work I'm
	  willing to do for 0.39 since we're in freeze now.

2004-07-03  Kees Cook  <kees@outflux.net>

	* src/document.cpp, src/dialogs/desktop-properties.cpp,
	  src/dialogs/rdf.cpp, src/dialogs/rdf.h:
	  Added several more RDF entities.  Created entry tooltips.  Set
	  a few RDF defaults for the document.

2004-07-03  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp, src/document.cpp:

	  siblings of a layer now become layers too

	* src/interface.cpp: switched to command names suggested by bulia

	* src/object-hierarchy.cpp, src/object-hierarchy.h:

	  bugfixes and cleanups

	* src/sp-item-group.cpp, src/sp-item-group.h, src/sp-root.cpp:

	  new layerMode() and setLayerMode() methods; SPGroupMode becomes
	  SPGroup::LayerMode

	* src/sp-object.h: added isSiblingOf() method

	* src/sp-object.cpp: leave parent pointer in place until after
	  "release" handlers finish

2004-07-02  Kees Cook  <kees@outflux.net>

	* src/document.cpp, src/dialogs/desktop-properties.cpp,
	  src/dialogs/rdf.cpp, src/dialogs/rdf.h, src/xml/repr.h:
	  Made RDF's writable now.  Handling modifications and defaults.
	  Mental and others will most likely kill me when they finally
	  read this code.

2004-07-02  MenTaLguY  <mental@rydia.net>

	* src/attributes.cpp, src/attributes.h, src/sp-item-group.cpp,
	  src/sp-item-group.h:

	  Removed the "inkscape:groupmode" attribute and added note about how
	  the group/layer mode setting needs to be per-view, not global.

	* src/desktop.cpp, src/desktop.h,
	  src/object-hierarchy.cpp, src/object-hierarchy.h:

	  Added notification signals for switching layers, as well as putting
	  groups in layer mode when they are being used as layers.

	  Notably, you can now call SPDesktop::connectCurrentLayerChanged() to
	  connect to a SigC++ signal to be notified when the current layer
	  changes.

	* src/interface.cpp, src/object-ui.cpp:

	  Fixed up the "Enter Group" and "Leave Group" context menu
	  commands a bit, and implement them both in the same places.

2004-07-02  Carl Hetherington  <inkscape@carlh.net>

	* src/desktop-snap.cpp, src/desktop-snap.h, src/snap.cpp, src/snap.h,
	src/Makefile_insert src/arc-context.cpp src/draw-context.cpp
	src/dyna-draw-context.cpp src/make.dep src/make.files src/make.ofiles
	src/makefile.msc src/nodepath.cpp src/rect-context.cpp
	src/select-context.cpp src/selection-chemistry.cpp src/seltrans.cpp
	src/sp-namedview.h src/spiral-context.cpp src/star-context.cpp:
	renamed desktop-snap.* to snap.* since it has nothing to do with the
	desktop any more.

	* src/draw-context.cpp: Temporary hack to prevent snapping
	completely failing to work when snapping to bbox points.  Support
	shift-disables-snap for freehand drawing.

	* src/snap.cpp, src/snap.h: Added some temporary methods to assist
	with hacks elsewhere.

2004-07-01  Kees Cook  <kees@outflux.net>

	* src/xml/repr.h, src/xml/repr-util.h, src/dialogs/rdf.cpp:
	  moved "repr_lookup_name" into the repr-util collection so
	  that the RDF stuff doesn't need to know about SPRepr internals.
	  Now that I've started to grok the SPRepr stuff, this seems best.
	  Added "sp_repr_recursive_drop" for use in the future when I may
	  want to throw away an entire tree of SPRepr items (like ditching
	  a blank "dc:rights" section).

2004-07-01  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp: fix clip path loading bug

	* src/sp-object.cpp: relax analness about object ids a little

2004-06-30  Kees Cook  <kees@outflux.net>

	* src/dialogs/desktop-properties.cpp, src/dialogs/rdf.h,
	  src/dialogs/rdf.cpp: built the various functions needed to extract
	  the RDF text elements from the DOM.  XML in the document will now
	  be displayed in the entry fields.

2004-06-28  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-action.cpp, src/xml/repr-action.h, src/xml/repr-css.cpp,
	  src/xml/repr-io.cpp, src/xml/repr-private.h, src/xml/repr-util.cpp,
	  src/xml/repr.cpp, src/xml/sp-repr-attr.h: applied peter's patch to
	  break out NRReprAttr

	* src/sp-object.cpp, src/sp-object.h:

	  added SPObject::nearestCommonAncestor, which given another SPObject
	  returns the nearest common ancestor of the two SPObjects.

	* src/sp-item.cpp, src/sp-item.h:

	  added SPItem::getRelativeTransform, which computes the SPItem's
	  transform relative to another SPObject

	* src/arc-context.cpp, src/draw-context.cpp, src/dyna-draw-context.cpp,
	  src/rect-context.cpp, src/spiral-context.cpp, src/star-context.cpp,
	  src/text-context.cpp:

	  drawing tools now cope with drawing within transformed groups
	  (i.e. layers)

2004-06-27  MenTaLguY  <mental@rydia.net>

	* src/sp-object.h: remove sp_object_request_update,
	  sp_object_invoke_update, sp_object_invoke_modified,
	  sp_object_request_modified, and sp_object_invoke_write, which have been
	  deprecated and are now completely unused

	* src/Makefile_insert, src/desktop.cpp, src/desktop.h,
	  src/object-hierarchy.cpp, src/object-hierarchy.h, src/sp-object.cpp,
	  src/sp-object.h:

	  Implemented SPDesktop::setCurrentLayer(), introducing
	  Inkscape::ObjectHierarchy to permit falling back to parents if
	  the current layer is removed.

	* src/object-ui.cpp, src/interface.cpp: really crude hack of
	  Sodipodi-like "enter group" and "leave group"

2004-06-26  MenTaLguY  <mental@rydia.net>

	* src/refcounted.h: allow reffing/unreffing const objects

	* src/arc-context.cpp, src/draw-context.cpp, src/dropper-context.cpp,
	  src/event-context.cpp, src/event-context.h, src/node-context.cpp,
	  src/rect-context.cpp, src/selcue.cpp, src/selcue.h,
	  src/select-context.cpp, src/select-context.h, src/seltrans.cpp,
	  src/seltrans.h, src/spiral-context.cpp, src/star-context.cpp,
	  src/text-context.cpp, src/zoom-context.cpp:

	  Make SPSelTrans and SPSelCue proper C++ classes with constructors.

	* src/document.h, src/dialogs/xml-tree.cpp: removed sp_document_lookup_id

	* src/sp-object.cpp: clarify what is happening with bug #980407 --
	  the clone is getting attached to the repr before the original SPObject
	  is.

2004-06-26  Carl Hetherington  <inkscape@carlh.net>

	* src/node-context.cpp: make sure nodepath->nodeContext is set up
	when the selection changes.  Fixes 936739.

2004-06-25  MenTaLguY  <mental@rydia.net>

	* src/display/sp-canvas.cpp: enabled win32 current item workaround on
	  all platforms

2004-06-25  Kees Cook  <kees@outflux.net>

	* src/dialogs/rdf.h, src/dialogs/rdf.cpp, src/dialogs/Makefile_insert,
	  src/dialogs/desktop-properties.cpp:

	  Added data entry widgets for document metadata, including a rough
	  license selector, and debug rdf generator.  Corrected whitespace,
	  added table for RDF entity lookup, tag, and title mapping.  Added
	  initial loading framework.  Cleaned up rdf_work_entity_t usage.

2004-06-25  Carl Hetherington  <inkscape@carlh.net>

	* src/sp-namedview.cpp: cleanups in grid snap settings.  Fix a
	typo.

	* src/seltrans.cpp: optional default origin for scaling.  Fixes
	to snap during scale.

	* src/seltrans.h: s/opposit/opposite/.  Add some comments.

	* src/dialogs/display-settings.cpp: add default scale origin
	option.

	* src/desktop-snap.h: changes to snap_list_scale prototype.

	* src/desktop-snap.cpp: snap_list_scale now returns whether
	it snapped or not.  The best scale snap is now the one that
	changes the scale factor least, rather than the one that
	results in the snap point being closest to where it used to be.

	* src/display/sp-canvas.cpp: fix for win32 freeze-at-border bug,
	copied from SP.

	* src/knot.cpp, src/select-context.cpp: change spellings from
	British to American English for translators.

2004-06-24  rejon <kidproto@users.sf.net>

	* src/verbs.cpp: I changed the reverse command to be more verbose and
	  explanative.

2004-06-24  MenTaLguY  <mental@rydia.net>

	* src/seltrans.cpp: slight change to make showing/hiding center
	  mark easier later on

	* configure.in, src/main.cpp, src/star-context.cpp,
	  src/display/bezier-utils.cpp, src/display/canvas-bpath.cpp,
	  src/display/nr-arena-glyphs.cpp, src/display/nr-arena-shape.cpp,
	  src/display/sp-ctrlline.cpp, src/libnr/nr-svp.cpp,
	  src/libnrtype/FontFactory.cpp, src/libnrtype/RasterFont.cpp,
	  src/livarot/AlphaLigne.cpp, src/livarot/BitLigne.cpp,
	  src/livarot/Ligne.cpp, src/livarot/PathOutline.cpp,
	  src/livarot/ShapeMisc.cpp, src/widgets/font-selector.cpp:

	  fixes for floating-point portability issues, courtesy of
	  Colin Marquardt.

	* src/extensions/init.cpp: dirent.h requires inttypes.h on OS X

2004-06-23  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/desktop.cpp, src/managed.h,
	  src/message-context.cpp, src/message-stack.h, src/refcounted.h,
	  src/selection.h, src/view.cpp:

	  Changed my mind.

	  Inkscape::Managed is more properly called Inkscape::Refcounted

	* src/libnrtype/Makefile_insert, src/libnrtype/codepages.h,
	  src/libnrtype/cp1250.cpp, src/libnrtype/cp1251.cpp,
	  src/libnrtype/cp1252.cpp, src/libnrtype/cp1253.cpp,
	  src/libnrtype/cp1254.cpp, src/libnrtype/cp1255.cpp,
	  src/libnrtype/cp1256.cpp, src/libnrtype/cp1257.cpp,
	  src/libnrtype/cp1258.cpp, src/libnrtype/cp874.cpp,
	  src/libnrtype/cp932.cpp, src/libnrtype/cp936.cpp,
	  src/libnrtype/cp949.cpp, src/libnrtype/cp950.cpp:

	  removed unused Win32 codepage crap

2004-06-23  Carl Hetherington  <inkscape@carlh.net>

	* src/inkscape.cpp: Don't connect to SIGBUS on Win32, as
	it doesn't seem to exist.  Add Emacs mode line.
	Declaration-to-first-use and coding style cleanups.

	* src/desktop-snap.h: a few double -> NR::Coord fixes.

	* src/nodepath.cpp: turn off snapping when Shift is held down.
	Some minor cleanups.

	* src/dialogs/display-settings.cpp: remove my rather dubious
	move_with_grid option.

	* src/select-context.cpp: rationalise grid modifiers; now Shift
	disables snap and Alt snaps movement to the grid.

2004-06-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* share/extensions/dia2svg.sh: Fix bashism and insecure tempfile usage.

2004-06-23  Ted Gould  <ted@gould.cx>

	* share/extensions/dropshadow.inkmod, share/extensions/roundhole.inkmod,
	src/extension/system.cpp:

	Setting it up so that poorly formed inkmod files generate actual GTK
	warnings so that they can be easily hidden.  Also, fixing these two inkmod
	files so that they don't generate the above mentioned warnings.

2004-06-22  Kees Cook  <kees@outflux.net>

	* src/inkscape.cpp: added SIGBUS and SIGABRT handling.

2004-06-22  John Cliff <simarilius@yahoo.com>

	* src/object-edit.cpp:  Added knots for manipulation of pattern fills.
	* src/sp-shape.cpp, src/sp-shape.h:     Added sp_shape_set_pattern to
	explictly set the transform rather than multiplying like adjust.


2004-06-22  Carl Hetherington  <inkscape@carlh.net>

	* src/sp-shape.cpp: add sp_shape_snappoints.

	* src/desktop-snap.cpp: minor cleanups.  Added a comment.

	* src/sp-text.cpp: removed an old comment.

	* src/sp-ellipse.cpp: fix snappoints method now that the parent
	class method has changed.

	* src/sp-rect.cpp: snappoints method is not required as it's now
	handled by SPShape.

	* src/sp-image.cpp: use SPItem's snappoints method.

	* src/file.cpp: fix another call to g_file_test with a
	possibly-NULL parameter.  Fixes #977413.

2004-06-21  Carl Hetherington  <inkscape@carlh.net>

	* src/file.cpp: don't call g_file_test with a NULL path.  Fixes
	#976703.

	* src/desktop-snap.cpp: default to snapping to bounding boxes when
	snapping is first enabled.  Rework in terms of SPNamedView rather
	than SPDesktop.

	* src/desktop-snap.h: rework in terms of SPNamedView rather than
	SPDesktop.

	* src/arc-context.cpp, src/draw-context.cpp,
	src/dyna-draw-context.cpp, src/nodepath.cpp src/rect-context.cpp,
	src/select-context.cpp, src/selection-chemistry.cpp,
	src/seltrans.cpp, src/sp-namedview.cpp, src/spiral-context.cpp,
	src/star-context.cpp: Adapt for changes to snap code naming.

	* src/seltrans.cpp: cleanups to sp_sel_trans_skew_request and
	sp_sel_trans_scale_request.

2004-06-20  Ted Gould  <ted@gould.cx>

	* share/extensions/ai_input.inkmod, share/extensions/ai_output.inkmod,
	share/extensions/dia.inkmod, share/extensions/dropshadow.inkmod,
	share/extensions/epsi_output.inkmod, share/extensions/roundhole.inkmod,
	share/extensions/svgz_input.inkmod, share/extensions/svgz_output.inkmod,
	share/extensions/txt2svg.inkmod, src/extension/extension.h,
	src/extension/system.cpp, src/extension/implementation/script.cpp,
	src/extension/internal/eps-out.cpp,
	src/extension/internal/gdkpixbuf-input.cpp,
	src/extension/internal/gnome.cpp, src/extension/internal/ps-out.cpp,
	src/extension/internal/ps.cpp, src/extension/internal/svg.cpp,
	src/extension/internal/win32.cpp:

	Changing the naming of the extensions to be more Java style naming to
	allow for more extension in the future.

2004-06-21  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/extension/internal/ps.cpp (PrintPS): Initialize _stream to
	  NULL (fixes segfaults when exporting to an unopenable file), and
	  initialize _bitmap to false instead of random.

2004-06-20  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp, src/managed.h, src/message-context.h,
	  src/message-stack.h, src/message.h, src/view.cpp:

	  Document classes, and change Managed to have an initial refcount
	  of one at creation.

2004-06-20  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnrtype/FontFactory.cpp, src/libnrtype/FontInstance.cpp,
	  src/libnrtype/font-instance.h: If both WIN32 and WITH_XFT are
	  defined, then use just the WITH_XFT code.  (I don't know if it's
	  possible for both to be defined, but we might as well document
	  that the existing code doesn't handle both being defined, AFAICT.)

	* src/libnrtype/FontFactory.cpp (ink_strstr): Document brokenness.
	  (is_regular, is_nonbold, is_italic, etc.): Mark as static.

	* src/Makefile.am (EXTRA_DIST): Remove reference to deleted files
	  libnrtype/nr-type-w32.cpp, libnrtype/nr-type-w32.h,
	  libnrtype/nr-type-xft.cpp, libnrtype/nr-type-xft.h.

	* src/config.h.win32: Define PACKAGE_TARNAME, for require-config.h.
	  More accurate mathematical constants (20 decimal places instead of 3).

2004-06-19  MenTaLguY  <mental@rydia.net>

	* src/desktop.cpp, src/managed.h, src/rect-context.cpp,
	  src/rect-context.h, src/selection.h, src/view.cpp:

	  SPSelection now derives from Inkscape::Managed

	* src/Makefile_insert, src/select-context.cpp, src/select-context.h,
	  src/selection-describer.h, src/selection-describer.cpp:

	  Introduced Inkscape::SelectionDescriber to which SPSelectContext
	  delegates the task of displaying descriptions of the current
	  selection.  This fixes bug #945735.

2004-06-19  Carl Hetherington  <inkscape@carlh.net>

	* src/desktop-snap.{cpp,h}: sp_desktop_dim_snap_list returns
	whether or not it snapped anything.

	* src/select-context.cpp: fix snap on move behaviour (again)

	* src/widgets/dash-selector.cpp: fix off-by-one spotted by
	valgrind.

2004-06-19  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/extension/internal/ps.cpp (begin): Add some basic error handling.

	* src/extension/internal/ps.cpp (setup): Simplify an expression now that
	  _bitmap is a bool.

	* src/extension/internal/ps.h: Twiddle the order of the fields.
	  Replace bitfields with bool/short.

	* src/libnrtype/Makefile_insert, src/libnrtype/FontInstance.h,
	  src/make.files, src/make.ofiles, src/make.dep:
	  Remove src/libnrtype/FontInstance.h (see change below).

	* src/libnrtype/RasterFont.h, src/libnrtype/raster-glyph.h,
	  src/libnrtype/raster-position.h:
	  Move raster_glyph, raster_position from RasterFont.h to new files
	  raster-glyph.h, raster-position.h.
	* src/libnrtype/Makefile_insert: Add the new files to SOURCES.

	* src/libnrtype/FontInstance.h, src/libnrtype/font-glyph.h,
	  src/libnrtype/font-instance.h, src/libnrtype/font-style.h:
	  Move font_glyph, font_instance, and font_style definitions from
	  FontInstance.h into new files font-glyph.h, font-instance.h,
	  font-style.h.
	* src/libnrtype/Makefile_insert: Add the new files to SOURCES.

	* src/libnrtype/nrtype-forward.h: New file.
	* src/libnrtype/Makefile_insert: Add it to SOURCES.
	* src/libnrtype/FontFactory.h, src/libnrtype/TextWrapper.h:
	  #include it (replacing local declarations in some cases).

	* src/livarot/livarot-forward.h: New file.
	* src/livarot/Ligne.h, src/livarot/Path.h, src/livarot/Shape.h:
	  #include it (replacing local declarations in some cases).
	* src/livarot/Makefile_insert: Add it to SOURCES.

2004-08-18  Ted Gould  <ted@gould.cx>

	* src/file.cpp, src/preferences-skeleton.h:

	Adding the feature that the save and open directories are saved in the
	preferences.  The last one will be used.

2004-08-18  Carl Hetherington  <inkscape@carlh.net>

	* src/widgets/font-selector.cpp: uint -> guint to fix
	compile errors.

	* src/desktop-snap.{cpp,h}: make snap functions aware of the
	type of point they are snapping, so they can decide whether
	to ignore it.

	* src/arc-context.cpp, src/rect-context.cpp,
	src/spiral-context.cpp, src/star-context.cpp,
	src/draw-context.cpp, src/dyna-draw-context.cpp, src/nodepath.cpp,
	src/selection-chemistry.cpp, src/seltrans.cpp:
	temporarily update for changes to snapping API.

	* src/sp-namedview.cpp, src/dialogs/desktop-properties.cpp:
	adapt for small changes to Snapper API.

	* src/select-context.cpp: use new snapping API.

2004-08-17  Bryce Harrington  <bryce@bryceharrington.org>

	*  nodepath.cpp path-chemistry.cpp selection-chemistry.cpp,
	   seltrans.cpp sp-typeset.cpp splivarot.cpp text-context.cpp,
	   tools-switch.cpp dialogs/find.cpp:  Converting statusbar
	   messages from old style to new, as per
	   http://inkscape.org/cgi-bin/wiki.pl?StatusbarAPI

2004-06-18  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/mkdep.pl: Add `by mkdep.pl' to `automatically generated' line.

	* src/dialogs/desktop-properties.cpp:
	  Greater conformance to CodingStyle.  Add FIXME comment.

	* src/sp-namedview.cpp: Tighter scoping for iteration var.
	  Simplify some code by greater use of cheap sp_unit_get_by_id.

2004-06-17  MenTaLguY  <mental@rydia.net>

	* src/Makefile_insert, src/arc-context.cpp, src/arc-context.h,
	  src/desktop-events.cpp, src/desktop.cpp, src/desktop.h,
	  src/draw-context.cpp, src/dropper-context.cpp, src/event-context.cpp,
	  src/event-context.h, src/file.cpp, src/interface.cpp, src/knot.cpp,
	  src/managed.h, src/message-context.cpp, src/message-context.h,
	  src/message-stack.cpp, src/message-stack.h, src/message.h,
	  src/select-context.cpp, src/view.cpp, src/view.h,
	  src/libnrtype/FontFactory.cpp, src/libnrtype/nr-type-primitives.h,
	  src/widgets/font-selector.cpp:

	  New status messages primitives (statusbar bug not fixed yet though).

2004-06-17  Carl Hetherington  <inkscape@carlh.net>

	* src/helper/stock-items.cpp: fix a compiler warning.  Minor
	coding style cleanups.

	* src/arc-context.cpp, src/desktop-snap.cpp, src-desktop-snap.h,
	src/rect-context.cpp, src/spiral-context.cpp,
	src/star-context.cpp: Replace desktop.h include with forward
	references in desktop-snap.h, and add desktop.h includes in
	files which require them.

	* src/widgets/spw-utilities.cpp, src/widgets/spw-utilities.h:
	add spw_vbox_checkbutton.

	* src/attributes.cpp, src/attributes.h, src/sp-namedview.cpp,
	src/sp-namedview.h, src/desktop-snap.cpp, src/desktop-snap.h,
	src/desktop.cpp, src/desktop.h,
	src/dialogs/desktop-properties.cpp, src/seltrans.cpp,
	src/seltrans.h, src/selection.cpp, src/selection.h,
	src/select-context.cpp, src/selection-chemistry.cpp:

	Start of new and hopefully improved snapping code.

2004-06-17  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/units.h, src/helper/units.cpp:
	  (sp_unit_get_by_id): new function.
	  (sp_convert_distance_full): Change arguments & return value.
	  Call g_log if no conversion possible.
	  Callers updated.
	  (sp_unit_get_default, sp_unit_get_by_name): Remove unused functions.
	  sp_units: Less rounding error in unittobase.

2004-06-16  Carl Hetherington  <inkscape@carlh.net>

	* src/sp-item.h: added a comment.

2004-06-15  Ted Gould  <ted@gould.cx>

	* share/extensions/ai_input.inkmod:
	Removing the command-line argument to specify line endings.

	* src/print.cpp, src/print.h, src/sp-text.cpp,
	src/extension/extension.cpp, src/extension/extension.h,
	src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/internal/ps.cpp, src/extension/internal/ps.h:

	Changing it so that the text to vector is its own function.  This way it
	can be used as a parameter in Postscript, but then can be easily used for
	drivers which only support vector drawing.

2004-06-16  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/select-toolbar.cpp: Cleanups and preparation for px units.

	* src/helper/units.h, src/helper/units.cpp:
	  Add reference version of sp_points_get_units, sp_units_get_points.
	  Implement as simple multiplication instead of sp_convert_distance.
	  (sp_units_table_sane): New function.
	* src/helper/units-test.cpp: Test sp_units_table_sane.

	* src/sp-object-repr.cpp: Move some declarations to first use.
	* src/sp-object-repr.h, src/sp-object-repr.cpp (sp_object_type_register):
	  Change return type to void.

	* src/sp-item.cpp (sp_item_repr_compare_position):
	  Reimplement as shallow wrapper around sp_repr_compare_position.

	* src/helper/units.h, src/helper/units.cpp:
	  SPUnitId: new enum, to allow replacing string lookups.
	  Get rid of handling for unused SP_UNIT_USERSPACE.
	  Remove unused SPUnit.version field.

	* src/helper/units-test.cpp (test_bases): Test sp_unit_get_identity.

	* src/helper/Makefile_insert (helper_units_test_LDADD): Fix the previous
	  commit: -lglib-2.0 instead of -lglib.

2004-06-15  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/Makefile.am, src/helper/Makefile_insert,
	  src/helper/units-test.cpp:
	  New unit test file units-test.cpp.

	* src/select-toolbar.cpp: Greater conformance to CodingStyle.

2004-06-14  Carl Hetherington  <inkscape@carlh.net>

	* src/libnrtype/TextWrapper.cpp: Fix what looks like an off-by-one.

	* ChangeLog, src/prefs-utils.cpp:
	Fix bracketing typo that causes an array to be overrun.

2004-06-14  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-path.cpp: Move some declarations to first use.

2004-06-13  Kees Cook  <kees@outflux.net>

	* src/xml/repr.h, src/xml/repr-utils.cpp: adding additional RDF URIs
	to the default namespace prefix list.

2004-06-13  MenTaLguY  <mental@rydia.net>

	* src/arc-context.cpp, src/desktop.cpp, src/desktop.h, src/document.cpp,
	  src/document.h, src/draw-context.cpp, src/dyna-draw-context.cpp,
	  src/file.cpp, src/gradient-chemistry.cpp, src/interface.cpp,
	  src/rect-context.cpp, src/selection-chemistry.cpp, src/sp-object.cpp,
	  src/sp-object.h, src/spiral-context.cpp, src/splivarot.cpp,
	  src/star-context.cpp, src/svg-view.h, src/text-context.cpp,
	  src/extension/internal/gdkpixbuf-input.cpp:

	  added SPDesktop::currentRoot() and SPDesktop::currentLayer(), which
	  report the current "view" root and current "editing" layer,
	  respectively; I've also added SPObject::appendReprChild().

	  Between the two of them, they replace sp_document_add_repr, which
	  has been removed.  Generally to add a repr to a document, you would
	  now use either:

	   SP_DOCUMENT_DEFS(document)->appendReprChild(repr);

	  or:

	   desktop->currentLayer()->appendReprChild(repr);

2004-06-13  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-clippath.h, src/sp-gradient.h, src/sp-marker.h, src/sp-mask.h,
src/sp-pattern.h:
	  Explicitly mark _acceptObject as virtual.
	  (Already declared as virtual in base class.)

	* src/file.cpp, src/main.cpp: Greater conformance to CodingStyle.

	* src/node-context.h, src/selcue.h, src/sp-pattern.h,
	  src/widgets/sp-color-wheel-selector.h:
	  Add missing includes as found by src/check-header-compile.

	* src/Makefile_insert:
	* src/sp-use-reference.cpp:
	* src/sp-use-reference.h:
	* src/sp-use.cpp:
	* src/sp-use.h:
	  Move SPUseReference from sp-use.h to new files sp-use-reference.h,
	  sp-use-reference.cpp.

	* src/sp-use.h (_acceptObject): Fix can't-use-ancestor check.

	* src/uri-references.h (getOwner): Fix copy&paste bug.

2004-06-11  MenTaLguY  <mental@rydia.net>

	* src/sp-object.h, src/sp-object.cpp:

	  migrated several SPObject methods to C++ methods:

	  sp_object_invoke_write -> SPObject::updateRepr
	  sp_object_request_update -> SPObject::requestDisplayUpdate
	  sp_object_invoke_update -> SPObject::updateDisplay
	  sp_object_request_modified -> SPObject::requestModified
	  sp_object_invoke_modified -> SPObject::emitModified

	  (leaving deprecated wrappers in place for now)

	* src/document.cpp, src/object-edit.cpp, src/sp-clippath.cpp,
	  src/sp-defs.cpp, src/sp-ellipse.cpp, src/sp-image.cpp,
	  src/sp-item-group.cpp, src/sp-item.cpp, src/sp-line.cpp,
	  src/sp-marker.cpp, src/sp-mask.cpp, src/sp-offset.cpp,
	  src/sp-pattern.cpp, src/sp-rect.cpp, src/sp-root.cpp,
	  src/sp-shape.cpp, src/sp-spiral.cpp, src/sp-star.cpp,
	  src/sp-symbol.cpp, src/sp-text.cpp, src/sp-typeset.cpp,
	  src/sp-use.cpp, src/dialogs/stroke-style.cpp, src/sp-path.cpp:

	  transitioned to SPObject::requestDisplayUpdate and
	  SPObject::updateDisplay

	* src/arc-context.cpp, src/document.cpp, src/gradient-chemistry.cpp,
	  src/knotholder.cpp, src/main.cpp, src/rect-context.cpp,
	  src/sp-anchor.cpp, src/sp-clippath.cpp, src/sp-defs.cpp,
	  src/sp-gradient.cpp, src/sp-item-group.cpp, src/sp-item.cpp,
	  src/sp-mask.cpp, src/sp-namedview.cpp, src/sp-object-group.cpp,
	  src/sp-object.cpp, src/sp-object.h, src/sp-offset.cpp,
	  src/sp-pattern.cpp, src/sp-rect.cpp, src/sp-shape.cpp,
	  src/sp-spiral.cpp, src/sp-text.cpp, src/sp-use.cpp,
	  src/spiral-context.cpp, src/splivarot.cpp, src/star-context.cpp,
	  src/style.cpp, src/toolbox.cpp, src/dialogs/fill-style.cpp,
	  src/dialogs/stroke-style.cpp, src/extension/internal/svg.cpp:

	  transitioned to SPObject::requestModified, SPObject::emitModified,
	  and SPObject::updateRepr; also reworked "minimal" version of
	  updateRepr.

	* src/sp-object.h: added a little documentation

	* src/document.cpp, src/document.h, src/file.cpp,
	  src/gradient-chemistry.cpp, src/help.cpp, src/object-ui.cpp,
	  src/selection-chemistry.cpp, src/selection.cpp, src/seltrans.cpp,
	  src/sp-clippath.cpp, src/sp-item-group.cpp, src/sp-mask.cpp,
	  src/sp-namedview.cpp, src/sp-object.cpp, src/sp-offset.cpp,
	  src/sp-pattern.cpp, src/sp-root.cpp, src/sp-text.cpp,
	  src/sp-typeset.cpp, src/sp-use.cpp, src/splivarot.cpp,
	  src/uri-references.cpp, src/dialogs/fill-style.cpp,
	  src/dialogs/item-properties.cpp, src/dialogs/stroke-style.cpp,
	  src/helper/stock-items.cpp, src/widgets/gradient-selector.cpp,
	  src/widgets/gradient-vector.cpp, src/widgets/icon.cpp:

	  replaced sp_document_lookup_id with SPDocument::getObjectById,
	  and SPDocument::getObjectByRepr

	  (left deprecated stub in place, but it should be unused at this point)

2004-06-11  Ted Gould  <ted@gould.cx>

	* src/file.cpp, src/inkscape.cpp, src/interface.cpp, src/prefs-utils.cpp,
	src/prefs-utils.h:

	Moving the recent document setting and getting code into the prefs-utils
	files so that they'll be with the preferences (which they really kinda
	are).  Then, moved the place where they are set from the removing of the
	document to where the files are opened and 'save as'd.  (yes, I made up a
	word/contraction).

2004-06-10  Carl Hetherington  <inkscape@carlh.net>

	* src/desktop-snap.cpp, src/desktop-snap.h,
	src/satisfied-guide-cns.cpp, src/satisfied-guide-cns.h,
	select-context.cpp, selection.cpp, selection.h, seltrans.cpp,
	seltrans.h, sp-ellipse.cpp, sp-image.cpp,
	sp-item-notify-moveto.cpp, sp-item-rm-unsatisfied-cns.cpp,
	sp-item-update-cns.cpp, sp-item.cpp, sp-item.h, sp-offset.cpp,
	sp-rect.cpp, sp-spiral.cpp, sp-star.cpp, sp-text.cpp:

	Use a std::vector to store snap points, rather than a fixed-size
	array.

2004-06-09  Carl Hetherington  <inkscape@carlh.net>

	* src/desktop-snap.cpp, src/desktop-snap.h: Coding style fixes.
	Use NR::Coord rather than double where appropriate.  Added some
	comments.  Use NR::Dim2 where appropriate.  Use NR_HUGE rather
	than hardcoded 1e18s.

	* src/rect-context.cpp, src/nodepath.cpp, src/arc-context.cpp:
	Adapt for changes to sp_desktop_dim_snap prototype.

	* src/select-context.cpp:
	Adapt for changes to sp_desktop_dim_snap_list prototype.

2004-06-08  MenTaLguY  <mental@rydia.net>

	* src/display/sp-canvas.h, src/livarot/DblLinked.h,
	  src/livarot/LivarotDefs.h, src/livarot/AVL.h, src/livarot/Shape.h,
	  src/livarot/ShapeUtils.h, src/livarot/Ligne.h,
	  src/object-edit.cpp, src/spiral-context.cpp, src/sp-shape.cpp:

	  Portability fixes from Colin Marquardt <colin@marquardt-home.de>.

2004-06-08  Carl Hetherington  <inkscape@carlh.net>

	* src/main.cpp: remove the call to
	Extension::Internal::PrintWin32::init() entirely after Ted pointed
	out that it would be called by code in src/extension/init.cpp
	anyway.

2004-06-08  Ted Gould  <ted@gould.cx>

	* src/main.cpp:

	Added in a version command to our command line args.  This fixes
	enhancement request 968642.

2004-06-07  MenTaLguY  <mental@rydia.net>

	* src/document.cpp, src/document.h, src/document-undo.cpp,
	  src/sp-object.h, src/sp-object.cpp:
	  renamed object garbage collection routines to fit the "orphan"
	  terminology

2004-06-07  Carl Hetherington <inkscape@carlh.net>

	* src/main.cpp: tentative fix for startup crash on Win32.  Ensure
	that Extension::Internal::PrintWin32::init() is not called until
	after inkscape_application_init().

2004-06-07  Ted Gould  <ted@gould.cx>

	* src/inkscape.cpp, src/main.cpp:

	Moving the initialization of the extensions into the Inkscape application
	init.  I have mixed feelings on this.  On one hand, basically extension
	init gets called directly after applicaiton init and extensions init has
	nothing to do with anything else in main.  On the other hand I'm not sure
	that it is directly related to the structure of the application itself.
	Comments are welcome.

2004-06-06  MenTaLguY  <mental@rydia.net>

	* src/attributes.cpp, src/attributes.h: added inkscape:collect attribute
	  to specify orphan collection policy (collect with parent, or always
	  collect)

	* src/document-undo.cpp, src/document.cpp, src/document.h: added an orphan
	  collection pass as part of comitting an undo step

	* src/sp-object.cpp, src/sp-object.h:
	  add total hrefcount for all descendants, and basic orphan collection
	  facilities

	* src/gradient-chemistry.cpp, src/dialogs/stroke-style.cpp,
	  src/extension/internal/gdkpixbuf-input.cpp:
	  mark automatically added gradients, patterns, and markers for orphan
	  collection

2004-06-06  Bryce Harrington <bryce@bryceharrington.org>

	* libnrtype/nr-type-xft.cpp, libnrtype/nr-font.cpp,
	  libnrtype/nr-rasterfont.cpp, libnrtype/nr-type-directory.cpp,
	  libnrtype/nr-typeface.cpp, libnrtype/nr-type-w32.cpp,
	  libnrtype/nr-type-ft2.cpp, libnrtype/nr-type-pos-def.cpp,
	  libnrtype/nr-type-primitives.cpp:

	Documenting the routines.  This adds basic code docs for
	everything in libnrtype.

2004-06-06  Ted Gould  <ted@gould.cx>

	* src/main.cpp, src/preferences-skeleton.h, src/extension/extension.cpp:

	Making it so that the extension parameters get saved in the Inkscape
	preferences.  Most people will notice that their printer gets saved now.
	But this does alot more than that.  Added an "extensions" group to the
	preferences skeleton for all these settings.  All settings get saved as
	"module ID"."param name".  Also had to change where the extensions get
	init'd in the startup to put it behind the Inkscape application so that
	prerefences could be used.

2004-06-03  Ted Gould  <ted@gould.cx>

	* src/file.cpp, src/dialog/filedialog.cpp:

	Making the whole file dialog alot more fun.  Basically, now the
	first filename will always be unique on files that don't have a
	filename already.  And, if you've selected a different default
	extension, that extension's filename extension will be placed
	on the file.  Also, when you change the extension to save with
	in the dialog, the filename extension will change with you (assuming
	that you were using filename extensions previously ofcourse).
	Finally, the checkbox to autoappend extensions is no insensitive
	when "Autodetect" is selected.

2004-06-03  MenTaLguY  <mental@rydia.net>

	* src/file.cpp, src/extension/internal/ps.cpp,
	  src/extension/internal/win32.cpp, src/sp-pattern.cpp,
	  src/dialogs/stroke-style.cpp, src/display/nr-arena-glyphs.cpp,
	  src/display/nr-arena-group.cpp, src/display/nr-arena-image.cpp,
	  src/display/nr-arena-item.cpp, src/display/nr-arena-shape.cpp,
	  src/widgets/icon.cpp, src/dialogs/nr-arena-item.h:

	  Introduced the notion of "parent" NRGCs

2004-06-02  bulia byak <bulia@users.sourceforge.net>

	* src/selection.h, src/selection.cpp:

	* preferences-skeleton.h dialogs/display-settings.cpp sp-item.cpp: New
settings
	for various compensations

	* sp-shape.cpp sp-shape.h sp-rect.cpp sp-path.cpp: Factored out adjustments
	(stroke and pattern so far) from optimizing items into sp-shape.

	* libnr: Added distance function for a couple of points. Added expansions
for X and Y.

	* object-edit.cpp sp-rect.cpp sp-item.cpp toolbox.cpp: Made rect use
absolute
	radii, added recursive compensation on item_transform. Added new knot for
	rect, moved corner knots to the top right corner. Rect toolbar shows visible
	rx/ry.

	* toolbox.cpp: Finally got the freeze semaphores right (prevent loops for
	changes both from the repr and from toolbar UI).

	* sp-namedview.cpp: Guarding against nan in zoom, cx, cy

	* select-toolbar.cpp helper/unit-menu.cpp helper/unit-menu.h: Fix units menu
size

	* node-context.cpp: Second Esc or empty-click deselects object

	* desktop.cpp desktop.h: Restored sticky zoom

	* preferences-skeleton.h extension/internal/gdkpixbuf-input.cpp file.cpp: Do
not
	group import if only one item; move its defs to our defs; select and move
	under cursor the imported item/group. Optionally import bitmaps as filled
	rects.

	* many -context files: Decoupled seltrans and selcue so that the latter can
be
	used outside of selector; enabled optional selcue in all tools

	* many files: New set_color signals on desktop, switching the dropper to
them;
	needs to be redone for style. Excise the old inkscape::color_set signal.

	* dialogs/stroke-style.cpp: Fix the "all clubs" marker preview bug. In
markers
	menu, skip document markers with stockid only if the same stockid is in
	markers.svg; add separator.

	* many fill and stroke files: Remove old mode selector, remove dropper
checkbox
	(now always on). Remember active colorselector page. Remove redundant checks
	in setting color (fixes at least one bug). Cosmetics, cleanup, b/w icons,
	shortened labels, added mnemonics and tooltips, removed the drop-down modes
	list. Switched color spinbuttons to 0..255 enabling 0..1 floats to be typed
as
	well.

	* dialogs/find.* et al: Find dialog, command

	* selection-chemistry.cpp: Fix copying objects from different parents; fix
and
	reorganize copying gradients, recurse into groups

	* dialogs/xml-tree.cpp: Removed unused desktop shutdown signal, fixes
problem
	with saving window settings on exit

	* select-toolbar.cpp: Percentage unit, lock toggle, NR::Rectification

	* sp-object.cpp path-chemistry.cpp splivarot.cpp et al: Sending
_delete_signal
	recursively for descendants; switched to deleteObject where appropriate to
	notify clones

	* preferences-skeleton.h desktop.cpp desktop.h interface.cpp: Window layout
	fully configurable, commands in the View menu

	* path-chemistry.cpp: Fixed transform when combining inside group

	* preferences-skeleton.h sp-item.cpp dialogs/display-settings.cpp: Fixes in
	scalestroke (coded by Carl): arbitrary depth recusion, setting stroke-width
	via repr, pref in the transforms tab

	* widgets/sp-xmlview-attr-list.cpp: More robust listener

2004-06-01  Ted Gould  <ted@gould.cx>

	* src/extension/internal/gdkpixbuf-input.cpp:
	Making it so that the lists of extensions and mimetypes are
	used in the creation of the plugins.  Also, free'ing everything
	properly so that we don't have a memory leak.

2004-05-30  MenTaLguY  <mental@rydia.net>

	* src/selection.h, src/selection.cpp:
	  rework SPSelection to be SPObject- rather than SPItem- oriented;
	  this will be needed later for the layers/document tree dialog
	  (and could prove useful for the XML editor later too)

	* src/sp-item.h: make SPItem a proper C++ subclass of SPObject

	* src/dialogs/item-properties.cpp:
	  correct overly intimate knowledge of SPObject (use SP_OBJECT_ID rather
	  than directly accessing the SPObject::id member)

2004-05-27  Kees Cook  <kees@outflux.net>

	* src/extension/internal/ps.h, src/extension/internal/ps.cpp:
	  Hopefully fixed the locale problems in the PS output generator.
	* src/sp-offset.cpp, src/display/bezier-utils-test.cpp,
	  src/display/nr-arena-item.cpp, src/libnr/nr-svp-render.cpp,
	  src/libnr/testnr.cpp, src/livarot/AlphaLigne.cpp,
	  src/livarot/Ligne.cpp, src/livarot/Path.cpp,
	  src/livarot/PathCutting.cpp, src/livarot/Shape.cpp,
	  src/livarot/ShapeDraw.cpp, src/livarot/ShapeSweep.cpp,
	  src/svg/svg-affine.cpp: added comments and notes to all remaining
	  "printf"ish calls that have %g or %f in them.  Most are just debug
	  output, etc.  Hopefully we are actually free of locale bugs!  :)
	* src/desktop.h, src/desktop.cpp: desktop's knowledge of
	  fullscreen-ness doesn't depend on having the ability to DO it.  Other
	  functions already test "is_fullscreen" to alter their behavior.

2004-05-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/extension/system.h, src/extension/system.cpp (build_from_file):
	  Remove unused second argument.  Callers updated.
	* src/extension/system.cpp (build_from_reprdoc):
	  Just one call to sp_repr_name per child.
	* src/extension/system.h, src/extension/system.cpp:
	  Cleanup: greater conformance to CodingStyle.

2004-05-23  MenTaLguY  <mental@rydia.net>

	* src/libnrtype/Makefile_insert, src/libnrtype/nr-type-gnome.cpp,
	  src/libnrtype/nr-type-gnome.h, src/libnrtype/nr-type-dictionary:

	  removed gnome-print libnrtype backend

2004-05-20  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/xml/repr.h, src/xml/repr-util.cpp:
	  Remove unused function sp_repr_set_position_relative.

	* src/xml/repr-util.cpp (sp_repr_compare_position, sp_repr_position):
	  Minor cleanups.

2004-05-19  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-use.cpp: Cleanup: greater conformance to CodingStyle.

	* src/sp-item-group.cpp (sp_item_group_ungroup): Fix bug #956334:
	  ungrouping was reversing the order of the group members.

	* src/xml/repr-get-children.h, src/xml/repr-get-children.cpp: New files.
	* src/xml/Makefile_insert (xml_libspxml_a_SOURCES): Add the new files.

	* src/xml/repr-private.h, src/xml/repr.cpp (sp_repr_nth_child):
	  Remove this unused function.

	* src/xml/repr.h, src/xml/repr.cpp (sp_repr_parent):
	  Mark pointer as not written through (const).

2004-05-18  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/xml/repr.cpp: Cleanup: greater conformance to CodingStyle.

	* src/Makefile_insert: Add missing dependencies on inkscape_version.h.
	* src/display/Makefile_insert: Adapt dependency object names for
	  `subdir-objects' automake option.
	* src/helper/Makefile_insert: Adapt dependency object names for
	  lack of libspchelp-specific CPPFLAGS.

2004-05-17  Carl Hetherington <inkscape@carlh.net>

	* src/libnrtype/nr-type-w32.cpp: Tentative fix for
	build problems on Win32.

	* src/extension/internal/svg.cpp: Coding style cleanups.

2004-05-17  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-item.h, src/sp-item.cpp: Remove unused
	  distance-conversion functions sp_item_distance_to_svg_bbox,
	  sp_item_distance_to_svg_viewport.

	* src/sp-item.cpp: Cleanup: greater conformance to CodingStyle.

	* acinclude.m4: Remove.

2004-05-16  Carl Hetherington  <inkscape@carlh.net>

	* src/extension/internal/svg.cpp:
	Throw an exception if sp_repr_save_file fails.  This should close
	bug 948921.

2004-05-16  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/check-header-compile.in: New script.
	* configure.in: Add it to list of files for substitution.

	* src/star-context.cpp: Minor cleanups, and use g_strdup_printf instead
	  of fixed-size buffer for translated string.

	* src/selection-chemistry.cpp: Use NR::Rect bounds() method instead of
	  old bounds(NRRect*).

	* src/document.cpp (sp_document_create):
	* src/preferences-skeleton.h:
	  Use INKSCAPE_VERSION from inkscape_version.h instead of VERSION.

	* src/libnr/nr-rotate-test.cpp: Use new rotate_equalp function.

	* src/libnr/nr-translate-ops.h (operator-): New function.

	* src/select-context.cpp:
	* src/selection-chemistry.cpp:
	* src/xml/repr.h:
	* src/sp-defs.h:
	  Cleanup: greater conformance to CodingStyle.

	* src/libnr/nr-macros.h: Don't #include nr-matrix.h, nr-rect.h.

	* src/arc-context.h, src/desktop-affine.h, src/dir-util.h,
	  src/draw-context.h, src/dyna-draw-context.h, src/help.h,
	  src/knotholder.h, src/prefs-utils.h, src/select-toolbar.h,
	  src/sp-clippath.h, src/sp-mask.h, src/sp-pattern.h, src/sp-use.h,
	  src/text-context.h, src/toolbox.h, src/tools-switch.h,
	  src/dialogs/dialog-events.h, src/dialogs/sp-attribute-widget.h,
	  src/display/sp-canvas.h, src/helper/gnome-utils.h,
	  src/helper/png-write.h, src/helper/stock-items.h, src/inkjar/jar.h,
	  src/libnr/nr-matrix.cpp, src/libnr/nr-point-l.h,
	  src/svg/stringstream.h, src/svg/svg-affine.cpp,
	  src/widgets/gradient-selector.h, src/widgets/paint-selector.h,
	  src/widgets/spinbutton-events.h, src/widgets/spw-utilities.h,
	  src/xml/repr-action.h:
	  Add missing header files as detected by check-header-compile script.

	* src/libnr/nr-rotate-fns.h, src/libnr/nr-rotate-fns.cpp: New files.
	* src/libnr/nr-rotate-fns-test.cpp: New unit test.
	* src/libnr/Makefile_insert, src/Makefile.am: Reference new files,
	  add to unit tests.

	* src/libnr/nr-rotate.h: Add Coord,Coord constructor.

	* src/libnr/nr-rotate.h, src/libnr/nr-rotate-ops.h (operator*=):
	New method.

	* src/libnr/nr-point-fns.h (point_equalp): New function.

	* src/radial.h: Remove this unused header.

	* src/xml/xml-forward.h: New file.
	* src/xml/Makefile_insert: Add it to xml_libspxml_a_SOURCES.
	* src/xml/repr-private.h: Include it.

2004-05-16  MenTaLguY  <mental@rydia.net>

	* src/libnrtype/nr-type-directory.cpp, src/libnrtype/nr-type-ft2.cpp,
	  src/libnrtype/nr-type-ft2.h, src/libnrtype/nr-type-gnome.h,
	  src/libnrtype/nr-type-w32.h, src/libnrtype/nr-type-xft.cpp,
	  src/libnrtype/nr-typeface.h:

	  transition to C++ inheritance

	* src/verbs.cpp, src/helper/action.h, src/helper/action.cpp,
	  src/widgets/button.cpp, src/libnr/nr-object.cpp, src/libnr/nr-object.h:

	  removed barely-used "in-place construction" facility for NRObject

	* src/helper/action.h, src/helper/action.cpp,
	  src/display/nr-arena-glyphs.cpp, src/display/nr-arena-glyphs.h,
	  src/display/nr-arena-image.cpp, src/display/nr-arena-image.h,
	  src/display/nr-arena-item.cpp, src/display/nr-arena-shape.cpp,
	  src/helper/action.cpp, src/helper/action.h, src/libnr/nr-object.cpp,
	  src/libnr/nr-object.h, src/libnrtype/nr-type-ft2.cpp,
	  src/libnrtype/nr-type-gnome.cpp, src/libnrtype/nr-type-w32.cpp,
	  src/libnrtype/nr-typeface.cpp:

	  Made NRObject "C++-compatible".  All C++ features including virtual
	  methods and RTTI should now be available to NRObject subclasses
	  _provided_:

	   a) there is an unbroken chain of _C++_ inheritance from the subclass
	      back to NRObject

	   b) the NRObject-derived inheritance chain is always first in cases
	      of multiple inheritance (the NRObject must be first in the memory
	      layout)

	   c) The subclass in question overrides NRObjectClass::cpp_ctor in its
	      own class_init function, with a pointer to a function that calls
	      the specific subclass' constructor (via placement new -- you will
	      need to #include <new> for this to work)

	      n.b. Objects of classes which do not override cpp_ctor will appear
	      to the C++ runtime system (RTTI and virtual dispatch, at least) as
	      objects of the closest ancestor class which does override it
	      (NRObject or NRActiveObject if nothing else).

2004-05-15  MenTaLguY  <mental@rydia.net>

	* src/display/nr-arena-shape.h, src/display/nr-arena-shape.cpp:
	  further reduced dependency on SPStyle

2004-05-14  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-path.cpp, src/libnr/nr-path.h (nr_path_matrix_bbox_union):
	  Get rid of no-longer-needed tolerance arg.  Update callers.

	* src/selection.cpp, src/sp-chars.cpp, src/sp-image.cpp,
	  src/sp-item-group.cpp, src/sp-item.cpp, src/sp-item.h,
	  src/sp-marker.cpp, src/sp-root.cpp, src/sp-shape.cpp,
	  src/sp-symbol.cpp, src/sp-text.cpp, src/sp-typeset.cpp,
	  src/sp-use.cpp, src/dialogs/fill-style.cpp,
	  src/dialogs/stroke-style.cpp, src/display/nr-arena-shape.cpp,
	  src/libnr/nr-path.cpp, src/libnr/nr-path.h,
	  src/libnrtype/nr-font.cpp, src/libnrtype/nr-rasterfont.cpp,
	  src/libnrtype/nr-type-gnome.cpp, src/widgets/icon.cpp,
	  src/widgets/paint-selector.cpp:
	  Change argument from NRMatrix to NR::Matrix in SPItemClass->bbox,
	  sp_item_invoke_bbox, sp_item_invoke_bbox_full,
	  nr_path_matrix_bbox_union.  Users updated.

	* src/libnr/nr-rect.h, src/libnr/nr-rect.cpp (nr_rect_union_pt):
	  new function.

	* src/libnr/nr-matrix-fns.h, src/libnr/nr-matrix-fns.cpp
	  (NR::transform): new function.

	* src/Makefile_insert: Move fixes.cpp from libinkpre.a to libinkpost.a.
	* src/xml/Makefile_insert (xml_repr_action_test_LDADD):
	  Add libinkpost.a, for fixes.o.  `make check' now works again.

	* src/sp-text.cpp (sp_text_set_transform):
	  Don't include SP_OBJECT_CHILD_MODIFIED_FLAG in flags for
	  sp_object_request_update.  Addresses `critical' warning.

2004-05-13  John Cliff <simarilius@yahoo.com>

	* src/dialogs/stroke-style.cpp: Switched to using get_stock to retrieve
markers.
	* src/helpers/stock-items.h, src/helpers/stock-items.cpp: created to handle
stock items.
	* src/prefix.h: Added marker and gradient directorys.

2004-05-13  Kees Cook <kees@outflux.net>

	* configure.in, src/main.cpp, config.h.mingw, debian/rules:
	  made popt a requirement instead of an option.

2004-05-13  Carl Hetherington  <cth103@houllier.home>

	* sp-color-notebook.cpp: Fix uninitialised value spotted by valgrind.

	* stroke-style.cpp:
	Fix ink_extract_marker_name returning a pointer into a free()d buffer.

2004-05-13  Ted Gould <ted@gould.cx>

	* src/file.cpp:
	Making the default filename _("untitled.svg")

2004-05-12  Kees Cook <kees@outflux.net>

	* config.h.mingw: added g_ascii_strtod macro.

2004-05-12  Carl Hetherington <inkscape@carlh.net>

	* src/dialogs/export.cpp: fix faulty logic with exporting of
	selections, as reported by Artemio on the ML.

	* src/dialogs/desktop-properties.cpp: Fix a gtk_table size.
	Make use of spw_dropdown in one place.

	* src/select-context.cpp: Remove alt-drag "slow move" mode.
	Make alt-drag move without any grid snap, even if the grid
	is enabled.  Add a new mode, shift-drag, which preserves
	objects' grid offsets rather than snapping their snappoints.

	* src/selection-chemistry.cpp: Pasted objects have the same
	offset from the grid as the original, if the grid is enabled.
	Also a NRRect -> NR::Rect fix thrown in for no extra charge.

	* src/dialogs/display-settings.cpp: Added option to reverse
	the actions of drag and shift-drag when moving objects.

2004-05-12  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/main.cpp (main): Test ENABLE_NLS instead of HAVE_NLS (which
	wasn't getting defined).  Restores translations on *nix systems
	when inkscape translations aren't in system-wide /usr/share/locale.

2004-05-10  Carl Hetherington <inkscape@carlh.net>

	* src/sp-item.cpp, src/dialogs/display-settings.cpp: primitive
	support for preserving line widths when scaling.  Thanks to Bulia
	for telling me what to do :)
	* src/dialogs/align.cpp: refactor some cut-and-paste code into
	a separate function.  Remove NRRect.  Declaration-to-first-use
	cleanups.
	* src/dialogs/transformation.cpp, src/dialogs/fill-stype.cpp:
	NRRect removal.  Declaration-to-first-use cleanups.

2004-05-09  MenTaLguY <mental@rydia.net>

	* src/sp-paint-server.h: SPPaintServer now uses C++ inheritance

	  (bigger question -- should SPPaintServer derive from SPObject?  I think
	   not, actually ... it's more something that should be aggregated into
	   the various paint-server-capable types)

	* src/display/nr-arena-shape.h, src/display/nr-arena-shape.cpp:
	  first steps in removing SPStyle dependency from NRArenaShape --
	  add fill and stroke paint server members, and use those instead
	  of reading directly from an SPStyle.

2004-05-09  Kees Cook <kees@outflux.net>

	* src/libnrtype/nr-type-xft.cpp: added patch 898200, hopefully this
	  won't break anyone.
	* src/dialogs/desktop-properties.cpp: added patch 947127, along with
	  some orientation bugfixes, list cleanup, and logic to select the
	  correct menu items based on document settings.
	* configure.in: default to always replace g_ascii_strtod.

2004-05-08  Kees Cook <kees@outflux.net>

	* src/extension/internal/gdkpixbuf-input.cpp: skip SVG files. (open bug)
	* configure.in, src/Makefile_insert, src/fixes.cpp: added replacement
	  for g_ascii_strtod, since it has locale-related bugs in gnome 2.0.
	  The upstream version is fixed, so some day, we won't need this any
	  more.  (fixes "ugly icons" bug, and possibly the spinbutton locale bug)
	* src/dyna-draw-context.cpp, src/rect-context.cpp, src/sp-namedview.cpp,
	  src/sp-object.cpp, src/sp-object.h, src/sp-pattern.cpp,
	  src/sp-polygon.cpp, src/sp-polyline.cpp, src/sp-root.cpp,
	  src/sp-spiral.cpp, src/sp-star.cpp, src/sp-symbol.cpp,
	  src/sp-text.cpp, src/spiral-context.cpp, src/star-context.cpp,
	  src/svg/ftos.cpp, src/svg/svg-affine.cpp, src/svg/svg-color.cpp,
	  src/svg/svg-length.cpp: adding "config.h", making a few extra
	  locale-sensitive functions use g_ascii versions.

2004-05-08  MenTaLguY <mental@rydia.net>

	* src/sp-item.cpp: move "transformed" signal emission after actual
	  application of transform

	* src/xml/repr-action.cpp, src/xml/repr-action.h, src/xml/repr.cpp:
	  fix lifecycle issues with content and attribute strings

	* src/sp-object.h, src/sp-object.cpp: added SPObject::setId()

2004-05-08  Kees Cook <kees@outflux.net>

	* src/verbs.cpp, src/help.cpp: localizing "about" and "keys" stuff.
	* po/*.po: rebuilt for new strings.

2004-05-08  Carl Hetherington <inkscape@carlh.net>

	* src/dialogs/desktop-properties.cpp: the usual cleanups.  Also
	add some sp_document_done()s in various places.

2004-05-08  bulia byak <bulia@users.sourceforge.net>

	* widgets/paint-selector.cpp: Tooltips, slight cosmetics

	* main.cpp: --help edit

	*  sp-use.h sp-use.cpp: Redid move compensation using _transformed_signal

	* sp-item.h sp-item.cpp: Added _transformed_signal, emitted by
write_transform,
	passes the difference transform relative to the old one (not the new
transform
	set)

	* nodepath.cpp: Fix lagging update of the other handle for smooth nodes

	* widgets/dash-selector.cpp: (Almost) fixed display of shorter-than-0.5
dashes
	in selector; proper fixing will require manual drawing the dashes instead of
	using gdk dashes

	* preferences-skeleton.h: lots of new  dasharrays

	* dialogs/stroke-style.cpp: Remove repetitive code; relocation patch from
	mhearn; fixed, reenabled, and automated marker previews (no need for
previews
	in markers.svg)

	* share/markers/markers.svg: Cleanup, sizes, remove manual previews

	* style.cpp: Disabled warning for overflow property (we need it for markers)

	* splivarot.cpp: Fixed transform when doing boolop inside group

	* libnr/nr-path.cpp: Ported fix from sodi, fixes two bugs with endnodes of a
	curve on the same hor/vert line

	* sp-namedview.cpp: Use set_default_size instead of _resize for setting
window
	from namedview

	* preferences-skeleton.h dialogs/item-properties.cpp: Objects props
	transientized (better late than never)

	* dialogs/display-settings.cpp: Added simplify threshold

	* sp-use.cpp: Mega-kill use on unlink

	* preferences-skeleton.h dialogs/display-settings.cpp: Orphaned clones
options

	* sp-item-group.cpp: Prevent jumps when ungrouping clone with its original

	* sp-object.cpp: Fix crash when deleting clone and its original

	* toolbox.cpp, tool contexts: Alt-x and top panel keyboard shortcuts now
work
	for all tools

	* sp-use.cpp enums.h: Unlink option on self-delete

	* sp-use.cpp: Fix: disappeating clone on undoing ungrouping (_show finally
works properly)

	* splivarot.cpp: Boolops: cleanup, preserve id, parent, position, fix to
take
	style from the bottom object

	* interface.cpp verbs.cpp shortcuts.cpp: Mnemonics, tooltips, shortcuts,
	cleanup, autoraise removed from menu

2004-05-07  Kees Cook <kees@outflux.net>

	* src/verbs.cpp: re-localizing tutorials.  My goof!
	* po/POTFILES.in: removed arikkei references

2004-05-07  Carl Hetherington <inkscape@carlh.net>

	* src/desktop.cpp: make sure that a SPNamedView's modified signal
	is connected to the SPDesktop even when a file is loaded into an
	existing SPDesktop.  Fixes problems whereby grid snap does not
	work for the first file loaded in a session.  Fix a && -> & typo.

	* src/sp-object.cpp: declaration-to-first-use and coding style
	cleanups.

2004-05-05 Spundun Bhatt <spundun@isi.edu>

	* configure.in: Stole Nathan's configure hack and used it to
	support gtkmm-2.4

2004-05-06  Ted Gould  <ted@gould.cx>

	* src/file.cpp, src/extension/extension.cpp, src/extension/init.cpp,
	src/extension/internal/Makefile_insert,
	src/extension/internal/gdkpixbuf-input.cpp,
	src/extension/internal/gdkpixbuf-input.h:
	  Changing the import functionality so that it works much more like open.
	  You can use any format, and it will place that file directly in the
	  document that you are working on.  Added input extensions that cover all
	  of the bitmap formats that are covered with gdkpixbuf.  Also, more
	  formats can be used using the scripting system.

2004-05-06  Carl Hetherington <inkscape@carlh.net>

	* src/sp-line.cpp, src/sp-mask.cpp, src/sp-metrics.cpp:
	declaration-to-first-use and coding style cleanups

2004-05-05  MenTaLguY  <mental@rydia.net>

	* src/libnrtype/nr-type-dictionary.cpp: removed 'private-fonts'
	  feature (we should rely on fontconfig for "custom" font stuff)

	* configure.in, src/Makefile_include, src/Makefile.am,
	  src/libarikkei/*: removed the now unused libarikkei

2004-05-05 Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/dialogs/text-edit.cpp, configure.in: Added support for spell
	checking in text dialog.

2004-05-04  MenTaLguY <mental@rydia.net>

	* src/display/nr-arena-glyphs.h: fixed cut-and-paste error in
	  NRArenaGlyphsGroup::create()

	* src/selection.cpp, src/selection.h: fixed global "changed" propagation

2004-05-02  MenTaLguY <mental@rydia.net>

	* src/file.cpp, src/print.cpp, src/sp-chars.cpp, src/sp-clippath.cpp,
	  src/sp-image.cpp, src/sp-item-group.cpp, src/sp-mask.cpp,
	  src/sp-pattern.cpp, src/sp-shape.cpp, src/sp-text.cpp,
	  src/sp-use.cpp, src/dialogs/stroke-style.cpp,
	  src/display/canvas-arena.cpp, src/display/nr-arena-glyphs.cpp,
	  src/display/nr-arena-glyphs.h, src/display/nr-arena-group.h,
	  src/display/nr-arena-image.h, src/display/nr-arena-item.cpp,
	  src/display/nr-arena-item.h, src/display/nr-arena-shape.h,
	  src/display/nr-arena.h, src/libnr/nr-object.h, src/widgets/icon.cpp:

	  removed nr_arena_item_new in favor of static ::create() functions
	  which call NRArenaItem::init() to perform setup (i.e. setting
	  NRArenaItem::arena).  Eventually NRArenaItem::init() and
	  nr_arena_item_init will merge and become NRArenaItem's constructor.

2004-04-30  MenTaLguY <mental@rydia.net>

	* src/sp-use.cpp: call parent class' write methods rather than
	  attempting to do everything (wrongly) ourselves; among other
	  things, <use> transform attributes weren't getting written

	* src/sp-object.h, src/sp-object.cpp:

	  designate a "successor" object so we still perform as
	  expected if objects are replaced in the middle of e.g. a
	  bulk delete operation

	* src/sp-use.cpp: cleanups and succession logic for <use>
	  deletion

	* src/widgets/sp-hwrap-box.cpp, src/widgets/sp-hwrap-box.h,
	  src/widgets/sp-vwrap-box.cpp, src/widgets/sp-vwrap-box.h,
	  src/widgets/sp-wrap-box.cpp, src/widgets/sp-wrap-box.h,
	  src/widgets/test-wrapbox.cpp, src/widgets/Makefile_insert:

	  Removed unused (and imperfect) "wrapbox" widgets.

	* src/sp-object.h, src/sp-object.cpp, src/sp-item-group.cpp:

	  Removed unused sp_object_invoke_forall and sp_object_sequence
	  methods.  (forall might be nice to have, but we can do better
	  implementation-wise now that we're in C++-land)

2004-04-30 njh <njh@mail.csse.monash.edu.au>

	* main.cpp: replaced gtk_init with g_type_init for console mode.
	Closes 944969.

2004-04-29  MenTaLguY <mental@rydia.net>

	* src/sp-image.cpp, src/sp-item.cpp, src/sp-item.h, src/sp-line.cpp,
	  src/sp-path.cpp, src/sp-rect.cpp, src/sp-text.cpp:

	  write_transform becomes set_transform, which applies the given
	  transform to the object without (!) invoking a repr write

	* src/sp-star.cpp, src/svg/svg-length.h, src/svg/svg-length.cpp,
	  src/svg-types.h, src/svg/svg.h:

	  replaced raw integers with real units enum

	* src/libnr/nr-matrix.h:

	  removed dead assertion (it's always valid to retrieve the
	  translation component of a matrix)

	* src/selection-chemistry.cpp:

	  delete items via SPItem (SPObject), not repr

	* src/sp-object.h, src/sp-object.cpp:

	  added SPObject::deleteObject() and a delete notification signal;
	  SPObject now inherits from GObject in the C++ sense

	* src/sp-use.h:

	  don't accept references to the use or its ancestors (preventing
	  infinite loops)

	* src/sp-use.cpp, src/sp-use.h:

	  added automatic deletion when referrent is deleted

	* src/uri-reference.h:

	  added URIReference::getOwner()

2004-04-29  Carl Hetherington <inkscape@carlh.net>

	* src/extension/internal/win32.cpp: add textToPath parameter to
	description in order to fix #944131.

2004-04-28  Carl Hetherington <inkscape@carlh.net>

	* src/desktop.cpp, src/inkscape.cpp, src/sp-namedview.cpp
	Part of the fix for #942149.  Also fixed some compiler warnings.

	* src/display/nr-arena.cpp: Fixed an unused variable warning.

	* src/main.cpp: Fix a warning that is raised on Windows.

2004-04-28  bulia byak <bulia@users.sourceforge.net>

	* inkscape.cpp: Fixed prev/next desktop; numbered from 0

	* Lots of files: Replaced all strtod() and atof() by g_ascii_strtod()

	* interface.cpp verbs.cpp: Tooltip edits

	* view.cpp view.h desktop.cpp: Signal and function to pop statusbar message

	* dialogs/dialog-events.cpp: Only set the UTILITY hint for non-modal
windows,
	fixes "disappearing save as"

	* toolbox.cpp widgets/widget-sizes.h widgets/button.cpp: Got rid of button
	relief, top panel made less tall

	* desktop.cpp preferences-skeleton.h dialogs/display-settings.cpp: Done away
	with the sticky zoom button, now in prefs

	* path-chemistry.cpp: Preserve id= in combine/break, convert to paths;
preserve
	z-order in combine/break; cleanups

	* splivarot.cpp: New selection API, Simplify preserves id=

	* select-context.cpp preferences-skeleton.h sp-item.cpp display-settings.cpp
	splivarot.cpp sp-item-group.cpp sp-item-transform.cpp
	sp-item-notify-moveto.cpp nodepath.cpp node-context.cpp seltrans.cpp
	seltrans.h: Switched to global preservetransform, transform writing
	unification (no more manual transform= setting all over the place), stamp
	preserves parent, mental's new SPSelection API, pruning dead code

	* verbs.cpp interface.cpp: Eliminated Dialogs menu, added ... to dialog
	commands, rearrangements, menu items display tooltips in statusbar when
	selected

	* sp-item-group.cpp sp-item-group.h: Made document_done optional in ungroup
(not
	done when the function is called from another function)

	* dialogs/display-settings.cpp enums.h preferences-skeleton.h sp-use.cpp
	sp-use.h: Clone move compensation (3 modes), settable in prefs

	* seltrans.cpp selection-chemistry.cpp: Do not translate a clone if its
original
	is in the selection

	* verbs.cpp verbs.h interface.cpp shortcuts.cpp sp-use.cpp sp-use.h
	selection-chemistry.cpp selection-chemistry.h: Unlink Clone verb and menu
	command (preserves id=)

	* selection-chemistry.cpp selection-chemistry.h verbs.h verbs.cpp
shortcuts.cpp
	interface.cpp: Select Original verb and command, scrolls to the original

	* selection-chemistry.cpp selection-chemistry.h verbs.cpp verbs.h
interface.cpp:
	Clone command

	* sp-use.h sp-use.cpp: Use URIReference; Propagate update to parent class
	(SPItem) (fixes redraw on dragging a clone)

	* dropper-context.cpp dropper-context.h dialogs/display-settings.cpp:
	Implemented pick modes (pick either actual color with transparency or
visible
	color without transparency); added statusbar indication; color is only set
on
	mouse release

	* seltrans.cpp display/sodipodi-ctrlrect.cpp: Finally the correct selection
cue
	rect (fixed displacement)

2004-04-27  Carl Hetherington <inkscape@carlh.net>

	* src/desktop.cpp: Check for there being no items when zooming to
	the drawing.  This fixes bug #942137.

2004-04-26  Carl Hetherington <inkscape@carlh.net>

	* config.h.mingw, prefix.h:
	INKSCAPE_VERSION moved to inkscape_version.h.
	INKSCAPE_{PIXMAP,SCREENS,TUTORIALS,MARKERS}DIR moved to prefix.h

	* src/Makefile.mingw, src/inkscape_version.h.mingw
	Use CVS inkscape_version.h.mingw for inkscape_version.h on Win32.

	* src/sp-use.cpp: fix a warning.

2004-04-26  Ted Gould  <ted@gould.cx>

	* share/extensions/ai_input.inkmod, share/extensions/dia.inkmod,
	share/extensions/txt2svg.inkmod, src/extension/extension.cpp,
	src/extension/internal/svg.cpp:

	Making the names of the input extensions look like the output ones.
	Also, threw in a slight memory savings in removing the implementation on
	deactivated extensions.

2004-04-26  MenTaLguY  <mental@rydia.net>

	* src/selection.cpp: migrate to new glib idle API

	* src/extension/db.cpp: can't call ->deactivated() on a NULL pointer..

2004-04-26  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* configure.in: Replace use of old AM_PROG_LIBTOOL macro with
	  AC_PROG_LIBTOOL.

2004-04-26  Ted Gould  <ted@gould.cx>

	* share/extensions/epsi_output.inkmod:

	Added in a check for ps2epsi

	* src/dialogs/filedialog.cpp, src/extension/db.cpp, src/extension/db.h,
	src/extension/extension.cpp, src/extension/extension.h,
	src/extension/init.cpp, src/extension/system.cpp:

	Implementing a 'deactivated' extension.  This means that it should
	still exist, but show up as insensitive in any GUI element that could use
	it.  The idea here is that users should know what they don't have, but
	Inkscape supports.

2004-04-26 Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/{libnr,libnrtype,widgets,display,helper,.}*.{h,cpp}: moved
	from typedef _name name; to C++ style struct name; forward
	references.

2004-04-25  Ted Gould  <ted@gould.cx>

	* share/extensions/ai_output.inkmod, share/extensions/dia.inkmod,
	share/extensions/dropshadow.inkmod, share/extensions/epsi_output.inkmod,
	share/extensions/roundhole.inkmod, share/extensions/svgz_input.inkmod,
	share/extensions/svgz_output.inkmod, share/extensions/txt2svg.inkmod,
	src/extension/implementation/script.cpp,
	src/extension/implementation/script.h:

	Adding in support for superior checking of dependencies.  Now scripts
	can include a line, which will look for a binary in the path.  So
	something like dia input will no be loaded if there isn't dia available in
	the path.

2004-04-25  Carl Hetherington <inkscape@carlh.net>

	* src/verbs.cpp, src/rect-context.cpp, src/spiral-context.cpp,
	src/event-context.cpp, src/text-context.cpp,
	src/dialogs/stroke-style.cpp, src/xml-tree.cpp, src/widgets/sp-widget.cpp:
	SPSelection OO-ification.

	* src/display/curve.cpp: Don't raise a critical error if a new
	curve cannot be created in sp_curve_new_from_bpath().  This can
	happen if a file contains a strange path, like one with only a
	move in it and nothing else.  This is part of the fix for bug
	934882.

	* src/sp-path.cpp: cope with sp_curve_new_from_bpath() returning
	NULL in sp_path_set().  This is the other part of the fix for 934882.

	* src/path-chemistry.cpp, src/sp-offset.cpp, src/sp-ellipse.cpp,
	src/display/nr-arena-glyhs.cpp:
	added asserts for calls to sp_curve_new_from_bpath() which look
	like they might not expect it to return NULL.

	* src/desktop.h: add a comment about how SPDesktop::selection
	should never generally be NULL.

	* src/desktop-handles.cpp: ensure that sp_desktop_selection never
	returns NULL, so that we don't have to check for this eventuality
	elsewhere.

	* src/arc-context.cpp, src/seltrans.cpp, src/desktop.cpp: be less defensive
about
	SPDesktop::selection being NULL.

	* src/path-chemistry.cpp, src/select-context.cpp,
	src/selection-chemistry.cpp, src/star-context.cpp,
	src/dialogs/align.cpp, src/dialogs/item-properties.cpp,
src/dialogs/text-edit.cpp:
	SPSelection OO-ification.  Also some coding style and
	declaration-to-first-use cleanups.

	* src/toolbox.cpp: SPSelection OO-ification.  Various cleanups.

	* src/selection.h: remove deprecated access functions.

	* src/dialogs/fill-style.cpp: declaration-to-first-use cleanups.

	* src/selection.cpp: add vim and Emacs mode blocks.

	* src/object-ui.cpp: very minor coding style fix.

2004-04-24  MenTaLguY <mental@rydia.net>

	* src/arc-context.cpp, src/dyna-draw-context.cpp, src/object-ui.cpp,
	  src/path-chemistry.cpp, src/rect-context.cpp, src/select-context.cpp,
	  src/select-toolbar.cpp, src/selection-chemistry.cpp, src/selection.h,
	  src/spiral-context.cpp, src/star-context.cpp, src/text-context.cpp,
	  src/verbs.cpp, src/dialogs/export.cpp, src/dialogs/fill-style.cpp,
	  src/dialogs/in-dt-coordsys.cpp, src/dialogs/stroke-style.cpp,
	  src/dialogs/transformation.cpp, src/dialogs/xml-tree.cpp:

	  removed sp_selection_set_item(), sp_selection_set_repr(),
	  sp_selection_is_empty(), sp_selection_item_selected(),
	  and sp_selection_repr_selected()

2004-04-24  Ted Gould  <ted@gould.cx>

	* share/extensions/ill2svg.pl:

	Applying a patch made to the Sodipodi list by Tuukka Pasanen which adds in
	support for text in Illustrator files.  Also, I backed out the changes
	which removed being able to specify the line endings.  This will, by
	default, force them back to mac compatible.  Mac files didn't work with
	those changes.

2004-04-24  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* configure.in: Tentatively remove config.h definitions of
	  INKSCAPE_MARKERSDIR, INKSCAPE_PIXMAPDIR, INKSCAPE_SCREENSDIR,
	  INKSCAPE_TUTORIALSDIR, with the understanding that these are to be
	  provided by prefix.h.
	* src/prefix.h: Define INKSCAPE_MARKERSDIR.

	* src/extension/extension.cpp (Extension):
	* src/extension/init.cpp (check_extensions):
	  Address warning.

	* src/dialogs/stroke-style.cpp: #include prefix.h.

	* src/Makefile.am (EXTRA_DIST): Add */makefile.in.

	* src/libnr/Makefile_insert (libnr_libnr_a_SOURCES):
	  Add libnr/nr-convex-hull.h, needed by sp-canvas.cpp.

2004-04-24  Ted Gould  <ted@gould.cx>

	* src/Makefile_include, src/prefix.cpp:

	Removing the redefition of NULL and adding to the make system.

2004-04-24  Ted Gould  <ted@gould.cx>

	* src/extension/db.cpp, src/extension/db.h, src/extension/extension.cpp,
	src/extension/extension.h, src/extension/init.cpp,
	src/extension/internal/eps-out.cpp, src/extension/internal/eps-out.h,
	src/extension/internal/ps-out.cpp, src/extension/internal/ps-out.h:

	Adding in more checks for individual extensions.  All of them
	should still pass though.  Also, moved the extension database from
	glib to STL.  This allows extensions to be deleted while using the
	foreach functions (which causes instability with the glib hash
	table).

2004-04-24  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/Makefile_insert:
	* src/display/Makefile_insert:
	* src/xml/Makefile_insert:
	  Get rid of unneeded CPPFLAGS specification.

	* src/Makefile.am:
	* src/Makefile_insert:
	  New generated file inkscape_version.h, to replace
	  -DINKSCAPE_VERSION=\"$(VERSION)\".
	* src/help.cpp: #include it.

2004-04-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-polygon.cpp:
	* src/splivarot.cpp:
	* src/style.cpp:
	Change include stringstream.h to include svg/stringstream.h.

	* src/Makefile.am, src/Makefile_insert: Change libinkscape.a use
	  to eliminate triple compilation of these object files.

	* src/Makefile.am: Use `subdir-objects' option.

	* src/Makefile.am: Add global INCLUDES setting.
	* src/*/Makefile_insert: Get rid of now-redundant $(INKSCAPE_CFLAGS)
	  from *_CPPFLAGS.

	* src/*/makefile.in: `%' as a target doesn't behave as intended,
	so replace with less general `clean %.a %.o' and add .SUFFIXES.

2004-04-22  Ted Gould  <ted@gould.cx>

	* src/draw-context.cpp, src/dropper-context.cpp,
	src/dyna-draw-context.cpp, src/node-context.cpp, src/nodepath.cpp,
	src/sp-ellipse.cpp, src/sp-offset.cpp, src/sp-path.cpp,
	src/sp-polygon.cpp, src/sp-shape.cpp, src/splivarot.cpp, src/toolbox.cpp,
	src/display/curve.cpp, src/display/nr-arena-shape.cpp,
	src/extension/internal/gnome.cpp, src/extension/internal/ps.cpp,
	src/libnr/nr-path.cpp, src/libnr/nr-path.h,
	src/libnrtype/nr-rasterfont.cpp, src/libnrtype/nr-type-ft2.cpp,
	src/libnrtype/nr-type-gnome.cpp, src/libnrtype/nr-type-w32.cpp,
	src/libnrtype/nr-typeface.cpp, src/livarot/PathCutting.cpp,
	src/svg/gnome-canvas-bpath-util.cpp, src/svg/svg-path.cpp:

	Changing the ART_ enums to NR_ so that if libart is include (like if
	you are building gnome-print) it doesn't conflict with the internal
	definitions.

	* share/extensions/svgz_output.inkmod, src/extension/extension.cpp,
	src/extension/init.cpp, src/extension/implementation/script.cpp:

	Adding in a little more checking code.  Now extensions can start
	deleting themseleves if they fail certain tests.  More tests are
	needed, along with more testing of this feature.  Consider this
	an 'early release' of the feature. ;)

2004-04-22  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/Makefile.am: Make non-recursive.  Now sources */Makefile_insert.
	  See HACKING or discussion on mailing list.
	* autogen.sh: Bump requirement from automake-1.6 to automake-1.7.
	* configure.in: Don't generate src/blah/Makefile, but do generate
	  src/blah/makefile.
	* src/*/Makefile.am: Remove.
	* src/*/makefile.in: New wrapper makefiles to allow typing `make' from
	  subdirectories of src.  (Not used by compiles started from top-level
	  or from src/.)

2004-04-21  MenTaLguY <mental@rydia.net>

	* src/libnrtype/nr-type-w32.h: fixed unremoved underscores

	* src/select-context.cpp, src/selection.cpp, src/selection.h,
	  src/seltrans.cpp, src/tools-switch.cpp, src/dialogs/align.cpp:
	  remove improper twiddling of desktop message line from SPSelection;
	  some additional work is now required in SPSelectContext to update
	  the message properly in all cases.

	* src/selection.h, src/selection.cpp: touched up and documented
	  SPSelection

	* src/uri-references.h: documentation touch-ups

2004-04-20  Kees Cook <kees@outflux.net>

	* src/file.cpp, src/desktop.cpp: moved sp_file_open unselection code into
	  sp_desktop_change_document.  Generalized Carl's fix for unref counting
	  since it applies in both cases.  (My bad!)

2004-04-20  MenTaLguY <mental@rydia.net>

	* src/text-context.cpp: merged Carl's fix for signal cleanup

	* src/selection.h: marked wrappers for old API as deprecated

2004-04-20  Carl Hetherington <inkscape@carlh.net>

	* src/extension/internal/ps.cpp, src/extension/internal/ps.h:
	Fixed some bugs in exporting images that seem to have been
	introduced when the code was copied from the gimp.  They caused
	problems when exporting bitmap images to PS.

	* src/file.cpp: fix bug whereby the first file loaded in a session
	would not have its modified status checked when closed.  Hence if
	you modified the first file you loaded and then closed it, you
	would not be asked to confirm the close.

	* src/preferences-skeleton.h: add \n to the end of each line to
	fix bug 938368.

2004-04-19  MenTaLguY <mental@rydia.net>

	* src/arc-context.cpp, src/desktop-handles.h, src/desktop.h,
	  src/draw-context.cpp, src/draw-context.h, src/forward.h,
	  src/inkscape-private.h, src/inkscape.cpp, src/node-context.cpp,
	  src/node-context.h, src/rect-context.cpp, src/selection-chemistry.cpp,
	  src/selection-chemistry.h, src/selection.cpp, src/selection.h,
	  src/seltrans.h, src/spiral-context.cpp, src/star-context.cpp,
	  src/star-context.h, src/text-context.cpp, src/dialogs/xml-tree.cpp,
	  src/widgets/sp-widget.h:

	  finished GObject removal from SPSelection

	* src/arc-context.h, src/arc-context.cpp, src/desktop.cpp, src/desktop.h,
	  src/draw-context.cpp, src/draw-context.h, src/node-context.cpp,
	  src/node-context.h, src/rect-context.cpp, src/rect-context.h,
	  src/selection.cpp, src/selection.h, src/seltrans.cpp, src/seltrans.h,
	  src/spiral-context.cpp, src/spiral-context.h, src/text-context.cpp,
	  src/text-context.h, src/toolbox.cpp:

	  migrated SPSelection to SigC++ signals (though it's a bit messy
	  right now)

2004-04-19  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/stroke-style.cpp: Cleanups: greater conformance to
	CodingStyle.  Moved some declarations to their first use.

2004-04-19  Carl Hetherington <inkscape@carlh.net>

	* src/dialogs/stroke-style.cpp, libnr/nr-rect-l.cpp:
	Fix a couple of compiler warnings.

	* src/dialogs/filedialog-win32.cpp: add OFN_NOCHANGEDIR to Win32
	flags in OPENFILENAME structs.  This prevents the open / save
	boxes from changing the current directory.  Any change to the
	current directory causes problems for subsequent attempts to
	load icons from pixmaps.  Also, fix a bug whereby the save
	dialogue would sometimes not open due to being passed a filename
	it didn't like.

2004-04-19  bulia byak <bulia@users.sourceforge.net>

	* shortcuts.cpp selection-chemistry.cpp selection-chemistry.h verbs.cpp
verbs.h
	interface.cpp: Clone command (Edit menu, Shift+Ctrl+N)

	* sp-use.cpp: Update propagated to parent class (SPItem), misc fixes

	* sp-polygon.cpp: Fix for points= updating by adding set_shape call into
_write
	(bug 910142)

	* text-context.cpp: Do not create text object unless a printable key was
	pressed; fixes 934280

	* widgets/dash-selector.cpp dialogs/stroke-style.cpp: Removed marker
buttons,
	fixed g_free crash in marker menus, added tooltips, added stroke-miterlimit
	spinbutton

	* splivarot.cpp: Outline handles multiple objects; All commands use correct
	stroke_miterlimit

	* splivarot.cpp sp-offset.cpp: Fix for 932642

	* helper/sodipodi-ctrlrect.cpp: Simplify and fix dashes and offsets

	* widgets/gradient-selector.cpp: Tooltip edits

	* verbs.cpp verbs.h interface.cpp...: Remove tool options

	* seltrans.cpp: Pivot marker made inverse

	* toolbox.cpp: More defocusing

	* *-context.cpp: Eliminated config widgets from all tools

	* toolbox.cpp sp-ellipse.cpp: Ellipse fixes, tooltips

	* verbs.cpp: Options -> Preferences

	* dialogs/display-settings.cpp: An options dialog, completely new; selector
	widget grafted here

	* preferences-skeleton.h node-context.cpp select-context.cpp: scaling uses
	defaultscale

	* dialogs/display-settings.cpp display/nr-arena-image.cpp: Make oversample
	saveable

	* toolbox.cpp: Aux toolbar for calligraphic

	* preferences-skeleton.h: fill-opacity:1 for calligraphic

	* select-context.cpp seltrans.cpp seltrans.cpp: Patch to enable box and none
	options for per-object selection cue

	* main.cpp: Removed C-locale setting, not needed anymore; temporary switch
of
	gettext encoding for console output

	* inkscape.cpp: Memory fix from sodi

	* right-click finishes pen (patch by Carl)  draw-context.cpp

2004-04-19  Carl Hetherington <inkscape@carlh.net>

	* src/livarot/ShapeRaster.cpp
	Fix an unitialised value error that was spotted by valgrind.

2004-04-18  MenTaLguY <mental@rydia.net>

	* src/selection.cpp, src/selection.h, src/selection-chemistry.cpp,
	  src/seltrans.cpp, src/nodepath.cpp:
	  made all SPSelection members private, and changed all methods into
	  real C++ methods (with temporary inline wrappers for the old C
	  pseudo-methods)

2004-04-18  Carl Hetherington <inkscape@carlh.net>

	* src/print.cpp, src/print.h, src/sp-text.cpp
	src/extension/extension.cpp src/extension/extension.h,
	src/extension/implementation/implementation.cpp,
	src/extension/implementation/implementation.h,
	src/extension/internal/eps-out.cpp, src/extension/internal/eps-out.h,
	src/extension/internal/ps.cpp, src/extension/internal/ps.h,
	Add very basic feature to allow PS text to be exported as real
	text, rather than being converted to paths first.  Needs some
	work, mostly on font handling.

	* src/seltrans.cpp: Slightly improve placement of the bounding
	box selection cue.

	* src/sp-shape.cpp: various marker-related cleanups, mostly factoring out
	common code into functions.

2004-04-17  MenTaLguY <mental@rydia.net>
	* src/inkscape.cpp, src/node-context.cpp, src/selection-chemistry.cpp,
	  src/selection.cpp, src/selection.h, src/seltrans.cpp, src/sp-gradient.cpp,
	  src/sp-item.cpp, src/sp-offset.cpp, src/dialogs/transformation.cpp,
	  src/libnr/nr-rect.cpp, src/libnr/nr-rect.h:
	  Cleaned up NR::Rect API and made SPSelection's desktop pointer private.

	* src/display/sp-canvas.cpp, src/libnr/nr-convex-hull.h,
	  src/libnr/nr-rect.h:

	  First use of NR::ConvexHull (for propagating canvas bounding boxes)

2004-04-17  Kees Cook <kees@outflux.net>

	* share/icons/icons.svg, src/verbs.cpp: made last three ugly menu icons.

2004-04-17  Nathan Hurst <njh@mail.csse.monash.edu.au>

	* configure.in src/draw-context.cpp src/dropper-context.cpp
	src/dyna-draw-context.cpp src/nodepath.cpp src/nodepath.h
	src/path-chemistry.cpp src/sp-chars.cpp src/sp-ellipse.cpp
	src/sp-offset.cpp src/sp-path.cpp src/sp-polygon.cpp
	src/sp-shape.cpp src/sp-text.cpp src/splivarot.cpp src/style.cpp
	src/style.h src/dialogs/fill-style.cpp
	src/dialogs/object-properties.cpp src/dialogs/stroke-style.cpp
	src/display/canvas-bpath.cpp src/display/canvas-bpath.h
	src/display/canvas-grid.h src/display/curve.cpp
	src/display/curve.h src/display/nr-arena-glyphs.cpp
	src/display/nr-arena-glyphs.h src/display/nr-arena-shape.cpp
	src/display/sodipodi-ctrl.cpp src/display/sodipodi-ctrl.h
	src/display/sodipodi-ctrlrect.h src/display/sp-canvas-util.cpp
	src/display/sp-canvas-util.h src/display/sp-canvas.cpp
	src/display/sp-canvas.h src/display/sp-ctrlline.cpp
	src/extension/internal/ps.cpp src/extension/internal/ps.h
	src/libnr/Makefile.am src/libnr/libnr.def src/libnr/nr-path.cpp
	src/libnr/nr-path.h src/libnr/nr-svp-private.h
	src/libnr/nr-svp-render.cpp src/libnr/nr-svp-render.h
	src/libnr/nr-svp.cpp src/libnr/nr-svp.h
	src/libnrtype/nr-rasterfont.cpp src/libnrtype/nr-type-ft2.cpp
	src/libnrtype/nr-type-gnome.cpp src/libnrtype/nr-type-w32.cpp
	src/libnrtype/nr-typeface.cpp src/livarot/PathCutting.cpp
	src/svg/gnome-canvas-bpath-util.cpp
	src/svg/gnome-canvas-bpath-util.h src/svg/svg-path.cpp
	src/svg/svg.h: removed libart.

	* src/libnr/nr-svp-uncross.cpp src/libnr/nr-svp-uncross.h: deleted
	uncross and SVL routines.


2004-04-15  Carl Hetherington <inkscape@carlh.net>

	* src/make.exclude, src/make.dep, src/make.files, src/make.ofiles:
	Various fixes to the Win32 build following rearrangement of some
	source files and cleanups to libnr.

	* src/sp-text.cpp: remove an unused variable.

	* src/display/sodipodi-ctrlrect.cpp: removed two unused variables.

2004-04-16  MenTaLguY <mental@rydia.net>

	* src/selection.cpp, src/selection.h, src/forward.h: initial
	  C++ification of SPSelection class

2004-04-15  Kees Cook <kees@outflux.net>

	* debian/control, debian/changes: dropping (currently) unused
	  dependancies.  Added "0.39cvs" tag.

2004-04-15  Carl Hetherington <inkscape@carlh.net>

	* src/seltrans.cpp, src/helper/sodipodi-ctrlrect.cpp,
	src/helper/sodipodi-ctrlrect.h:
	  Use black, dashed bounding boxes for indicating itemselection,
	  rather than red, solid boxes (as suggested by Bulia).

	* src/desktop.cpp:
	Small fix for the problem whereby the first file loaded in an
	Inkscape session will not have its grid set up properly.  This was
	my patch #935013.

	* src/dialogs/filedialog-win32.cpp:
	Use the extension system to build the list of allowable file types
	for save.  This means that save as PS and EPS work properly.

	* src/streams-zlib.cpp, src/livarot/PathConversion.cpp,
	src/livarot/PathCutting.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/PathStroke.cpp, src/livarot/Shape.cpp,
	src/livarot/ShapeMisc.cpp, src/display/nr-arena-glyphs.cpp,
	src/helper/sodipodi-ctrlrect.cpp, src/helper/sp-canvas.cpp,
	src/extension/internal/win32.cpp:
	Fix compiler warnings, mostly about unused variables.

	* src/helper/sp-canvas-util.cpp:
	Fix what I and someone else considered to be an obvious typo.  The
	function in question isn't used, however, so it's a bit difficult
	to test.

	* src/libnrtype/nr-rasterfont.cpp:
	Fix a warning wrt a cast from NR::Matrix to NRMatrix.

	* src/sp-shape.cpp:
	Fix bug #935758.


2004-04-14  Ted Gould <ted@gould.cx>

	* src/file.cpp, dialogs/filedialog.cpp:
	Making it so that the filename will get placed in the save as dialog
	if there is a name for the file.  Otherwise the last save directory
	is used (properly now)

2004-04-15  MenTaLguY <mental@rydia.net>

	* most files in src/: removed many old "compatable" struct typedefs

	* src/libarikkei/arikkei-dict.cpp, src/libarikkei/arikkei-dict.h:
	  removed unused arikkei files

	* configure.in: added gtkmm dependency

2004-04-14  Kees Cook <kees@outflux.net>

	* src/helper/unit-menu.cpp: Turns out I found a 2nd bug while
	  investigating patch 934358.  I've applied this patch again, which gives
	  us the entire fix.
	* src/draw-context.cpp: Investigated patch 934351 from cth103.  Applied a
	  slight variation to conform to the function calling styles of that code.
	* configure.in: Implemented gcc version test for >= 3.0.0
	* src/file.cpp, src/interface.cpp, share/icons/icons.svg, src/verbs.cbb:
	  finished "File / Revert" implementation.  Found a memory leak in
	  "file_save".  Added more sanity checking to "sp_file_revert" and more
	  status messages.
	* src/main.cpp, src/file.h, src/file.cpp: removed redundant code,
implemented
	  in "sp_file_open".

2004-04-13  Kees Cook <kees@outflux.net>

	* tools-version.sh: added a possible fix for BSDish tools.
	* configure.in, share/patterns/Makefile.am: inkscape janitor strikes
	  again!  This is a quick cleanup to Ted's new directories.  Looks
	  like "patterns" got left out.
	* share/clipart/.cvsignore, share/templates/.cvsignore,
	  share/examples/.cvsignore, share/fonts/.cvsignore,
	  share/gradients/.cvsignore, share/keyboards/.cvsignore,
	  share/palettes/.cvsignore, share/patterns/.cvsignore:
	  Added Makefile build-cruft to .cvsignores.
	* src/helper/unit-menu.cpp: applied a variation to patch 934358 from cth103
	  to fix grid unit changing bug.
	* configure.in: fixed capitalization of "libpng" to avoid confusion.
	* src/sp-namedview.cpp, src/document.cpp, src/document.h, src/file.cpp,
	  src/file.h, src/document-undo.cpp, src/interface.cpp, src/verbs.cpp,
	  src/verbs.h:
	  Newly opened files will only create new windows if the current document
	  is untouched.  (RFE#928517)
	  Added support for future "File/Revert" handling.  Needs
	  a little more support in the SPDocument structure.  See notes in
	  "src/file.cpp", function "sp_file_revert_dialog".

2004-04-13  Ted Gould <ted@gould.cx>

	* configure.in, share/Makefile.am, share/clipart/Makefile.am,
	  share/examples/Makefile.am, share/fonts/Makefile.am
	  share/gradients/Makefile.am, share/keyboards/Makefile.am
	  share/markers/Makefile.am, share/palettes/Makefile.am
	  share/screens/Makefile.am, share/templates/Makefile.am:
	Making it so that the clipart and everything else gets put in
	the tarball, and also get installed in the share directory.  Many
	of these have just 'README' files, but they now have good place-
	holders for further development.

2004-04-12  Kees Cook <kees@outflux.net>

	* src/dialogs/stroke-style.cpp, src/Makefile.am, src/dialogs/Makefile.am,
	  src/widgets/Makefile.am, configure.in: fixed up INKSCAPE_*DIR paths so CVS
	  will compile happily for me.  This way if paths change, files will be
	  recompiled.  The old way would let configure run again (changing the
	  datadir path) without forcing a recompile, which could break the
	  compiled paths.

2004-04-13  John Cliff <simarilius@yahoo.com>
	* src/sp-shape.cpp, src/dialogs/stroke-style.cpp:
	Couple of changes to marker related code, mid and end markers now point in
correct
	direction, turning off start markers behaves correctly.
	This follows on from changes made by me and Carl Hetherington that were
commited
	yesterday to
	src/inkscape-stock.cpp, src/sp-item.cpp, src/sp-marker.cpp,
src/sp-shape.cpp,
	src/style.cpp, src/style.h, src/dialogs/stroke-style.cpp
	to implement marker UI and fixes to the marker rendering code.

2004-04-11  Ted Gould <ted@gould.cx>

	* src/extension/system.cpp, src/extension/internal/eps-out.cpp
	  src/extension/internal/eps-out.h:
	First pass at a file save dialog with EPS output.  The dialog
	sets the bounding box in the file.  Comments encouraged.

2004-04-11  Ted Gould <ted@gould.cx>

	* src/file.cpp, src/main.cpp, src/print.cpp, src/extension/init.cpp,
	  src/extension/init.h, src/extension/system.cpp, src/extension/system.h,
	  src/extension/implementation/script.cpp,
src/extension/internal/eps-out.cpp,
	  src/extension/internal/gnome.cpp, src/extension/internal/ps-out.cpp,
	  src/extension/internal/ps.cpp, src/extension/internal/svg.cpp,
	  src/extension/internal/win32.cpp:
	Change alot of files, but small changes.  Basically just took
	system.cpp and init.cpp and finally ported them to the Inkscape::
	Extension namespace.  Cleaned up the code in them a bunch, it is
	much easier to read now!  All the other files are just referencing
	these changes.

2004-04-11  Kees Cook <kees@outflux.net>

	* src/verbs.h, src/verbs.cpp, src/interface.cpp, src/interface.h: replaced
	  the rest of the missing menu verbs: "View New", "Cleanup".  Created
	  generic function to add icons to a given menu item (for submenu icons
	  mostly).
	* share/icons/icons.svg: added "selection_cleanup", "selection_deselect",
	  "selection_select_all".  Corrected "view_new" and "selection_smooth",
	  "dialog_toggle", "dialog_tool_options", "file_open_recent".
	* src/selection-chemistry.cpp, src/selection-chemistry.h: renamed
	  "selection_cleanup" function.

2004-04-11  Jon Phillip <jon@rejon.org>

	* Makefile.mingw share/Makefile.am src/Makefile.am
	  share/markers/Makefile.am share/markers/.cvsignore config.h.mingw
	  configure.in:
	  Added the proper infrastructure to get files to the right location for
	  markers.

	* share/tutorials/tipsandtricks.svg: Deleted the URL trick because it no
	  longer works or something.

2004-04-11  Kees Cook <kees@outflux.net>

	* src/verbs.h, src/verbs.cpp: added verbs for the Help and Tutorials menus.
	* src/interface.cpp: replaced contents of sp_ui_menu_help to use new verbs.
	* src/help.h, src/help.cpp: replaced sp_help_keys with more generic
	  sp_help_open_screen, similar to sp_help_open_tutorial.
	* share/icons/icons.svg: created really ugly "help_tutorials" and
	  "help_keys" icons.  The "help_keys" one needs the most help.  :)

2004-04-09  Ted Gould <ted@gould.cx>

	* share/extensions/Makefile.am, share/extensions/epsi_output.inkmod,
	  share/extensions/ps2epsi.sh, src/extension/extension.cpp,
	  src/extension/extension.h, src/extension/init.cpp,
	  src/extension/implementation/implementation.cpp,
	  src/extension/implementation/implementation.h,
	  src/extension/implementation/script.cpp,
	  src/extension/implementation/script.h,
	  src/extension/internal/Makefile.am, src/extension/internal/eps-out.cpp,
	  src/extension/internal/eps-out.h, src/extension/internal/ps.cpp:

	  Okay, these are some changes that I've had in my directory for
	  a little while.

	  1) adding the basics of checking extensions.  This will allow
	     them to remove themselves based on their dependencies failing.

	  2) Adding the concepts of a 'helper extension' to scripts.  This
	     allows them to use other extensions for handling the data, so
	     they don't have to deal with SVG directly - Inkscape will
	     build the pipeline.  An example of this is the epsi output.

	  3) Adding the bounding box change provided by Carl Hetherington
	     to the Postscript output.  The EPS output plugin sets this, so
	     now EPSes have smaller bounding boxes.  A GUI needs to be
	     written for this setting.

2004-04-08  MenTaLguY <mental@rydia.net>

	* configure.in, src/svg/ftos.cpp: fix for OS X build

	* src/extensions/internal.ps.cpp: crash fix

2004-04-07  MenTaLguY <mental@rydia.net>

	* src/xml/repr.cpp: adjusted the advertising comment in the default
	  document template (we need a real default document template, btw)

	* src/svg/ftos.cpp, src/svg/itos.cpp, src/svg/round.cpp,
	  src/svg/ftos.h, src/svg/stringstream.h: incorporated Bryce's number
	  serializing code (disabled for now, due to the impending release)

	* src/dialogs/stroke-style.cpp, src/dialogs/sp-shape.cpp:
	  nuked unused variables

2004-04-07  bulia byak <bulia@users.sourceforge.net>

	* icons.svg: Alignment fix

	* src/select-toolbar.cpp: Swapped rotate buttons

	* share/tutorials/: Cleanup, added Russian translation of basic

	* extension/extension.cpp extension/system.cpp extension/internal/ps.cpp
	extension/implementation/script/cpp: Fixes to make non-ascii filenames work
again

	* src/verbs.cpp: Remove xpm icon that causes trouble on win32

	* share/examples/: new gradient.svg, tiger.svgz, cleanup

	* src/widgets/gradient-vector.cpp: Crash fix: loading new gradient into the
	editor does not completely reset it

	* share/icons/icons.svg: New dialog icons, draw tool icons, changed colors

	* src/dialogs/align.cpp src/helper/bezier-utils.cpp: remove pjrm's debug
output

	* share/tutorials/: SVG cleanup: remove unused font properties, wrong radius
	paths in ellipses (leftovers from old versions). Expanded & updated tips &
tricks.

	* file.cpp: Set uri on save in one place; save 'offcially' from here only

	* system.cpp system.h: Remove redundant uri-setting on open and save, add
	official arg to sp_module_system_save to prevent docname/docbase changing on
	temporary saves

	* many files: _() fixes, edits in labels, messages, tooltips, mnemonics

	* src/inkscape.cpp: remove redundancy in error messages for failing to load
prefs

	* share/extensions src/extension/internal: Renaming file formats to include
(*.ext)

	* src/interface.cpp src/dialogs/filedialog.cpp: Transientize, make modal
	open/save dialogs, ditto for warning overwrite and make it unresizeable

	* src/dialogs/xml-tree.cpp: Do not deselect item on canvas when a
non-selectable
	thing is highlighted in xml editor

	* src/sp-guide.cpp: Guide position updated after undo

	* src/widgets/sp-xmlview-attr-list.cpp: Max length of viewable attributes
	increased

	* many files: Adib's svgostringstream patches to remove printfs

	* src/selection-chemistry.cpp: Crash fix when pasting style to an object
that
	has none (e.g. group)

	* src/knot.cpp: Knot dragging autoscrolls

	* src/sp-text.cpp src/text-context.cpp: Cursor movements autoscroll

	* src/desktop.h src/desktop.cpp: autoscrollspeed can be overridden in call
to
	sp_desktop_scroll_to_point

	* src/text-context.cpp src/sp-text.cpp: Text cursor made inverse. Initial
cursor
	after click is no longer horizontal.

	* src/helper/sp-ctrlline.cpp: Always-visible inversion for ctrlline

	* src/libnrtype/nr-type-w32.cpp: Fix stretch and variant on win32

	* src/widgets/gradient-vector.cpp: Undo fix; new stop takes average of its
	neighbors' colors; is between stops even when the last stop is selected

2004-04-06  Ted Gould <ted@gould.cx>

	* src/file.cpp, src/dialogs/filedialog.cpp, src/extension/extension.cpp,
	src/extension/system.cpp:
	Moving code around so that the filename extension gets put on by
	the extension that is saving the file.  This adds a couple complications
	in that the extension now needs to check for overwriting the file
	and also set the document URI.  Better overall, but a PITA.

2004-04-05  njh <njh@mail.csse.monash.edu.au>

	* debian/rules,debian/control: applied patch from Kees Cook to remove
	obsolete libraries, and to tidy things up a tad.

2004-04-04  Ted Gould <ted@gould.cx>

	* src/main.cpp, src/extension/extension.cpp, src/extension/system.cpp:
	Now the input autodetect will try the SVG filter if the autodetect
	fails.  This was done by the command line, but now it is done
	everywhere.

2004-04-04  MenTaLguY <mental@rydia.net>

	* src/xml/repr-io.cpp, src/xml/repr.cpp, src/xml/repr.h:
	Take the full list of document node children from libxml, and
	append them in the correct order.  This fixes bug #929348.

	* src/xml/repr-io.cpp, src/xml/repr.cpp, src/xml/repr-private.h:
	Added API for coping with comments at the root level (i.e. siblings
	of the root XML node), and made corresponding changes to the repr-io
	code.  In theory this should be enough to preserve them upon loading,
	though in practice it still doesn't appear to be working (bug #929348).
	Is there some libxml thing we need to do?

2004-04-04  Ted Gould <ted@gould.cx>

	* a bunch of files
	Sorry, I seem to be in some delay getting e-mail.  Anyway, a few
	files were changed to add in a new parameter 'dataloss'  Basically
	this signifies that a format was used to save that may not save
	the whole document and thus, a pop-up is elevated on close to signal
	that you might want to 'really save' this document.

2004-04-03  Ted Gould <ted@gould.cx>

	* share/extensions/svgz_input.inkmod, src/file.cpp,
	  src/extension/extension.cpp, src/extension/internal/svg.cpp:
	Making it so that input extensions can specify the output extension
	that gets used to save them.  If this field isn't filled in, the value
	gets set to NULL, and then the Save As dialog is used instead of
	just trying to save.

2004-04-03  Ted Gould <ted@gould.cx>

	* src/file.cpp, src/main.cpp, src/extension/extension.cpp,
	  src/extension/extension.h, src/extension/system.cpp,
	  src/extension/internal/svg.cpp:
	Fixing the output_extension flag to not be saved in a file, but also
	to be able to be specified by the input module.  Also, this fixes
	the commandline processing of files to make them use the extension
	system.

2004-04-02  Ted Gould <ted@gould.cx>

	* src/file.cpp, src/extension/db.cpp, src/extension/internal/svg.cpp:
	Changing it so that SVG documents open and default to with
	extension namespace.  Also, autodetect is reenabled.

2004-04-03  Peter Moulder <pmoulder@mail.csse.monash.edu.au>

	* src/helper/bezier-utils.cpp (NewtonRaphsonRootFind): Fix my
	previous commit.

2004-04-02  Ted Gould <ted@gould.cx>

	* share/extensions/svgz_output.inkmod, src/main.cpp, src/print.cpp,
	  src/extension/init.cpp, src/extension/implementation/script.cpp,
	  src/extension/implementation/script.h,
	  src/extension/internal/Makefile.am, src/extension/internal/ps-out.cpp,
	  src/extension/internal/ps-out.h, src/extension/internal/ps.cpp:
	Fixing the commandline printing.  This required fixing both the
	print driver to handle the newer extensions stuff.  It seems
	happy now.  I went ahead and implemented save as postscript
	while I was at it.

2004-04-02  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/bezier-utils.cpp (NewtonRaphsonRootFind): Ensure that the
	"improved" value is never worse than the previous guess.

	* src/helper/bezier-utils.cpp:
	Greater CodingStyle conformance, mainly whitespace changes.

	* src/helper/bezier-utils.cpp (sp_bezier_fit_cubic_full):
	Always reparameterize between generate_bezier and calc_max_error.
	Switch from discouraged alloca (see man page) to g_new, at cost of
	some extra g_free calls in the code.
	(reparameterize): Do in-place modification.

	* src/helper/bezier-utils-test.cpp:
	Add tests for generate_bezier, sp_bezier_fit_cubic_full.
	Change to a simpler test bezier.

	* src/helper/bezier-utils.cpp (sp_darray_left_tangent,
	sp_darray_right_tangent):
	Switch to using just the two end points for calculating the gradient.
	(The old code could sometimes cause g_warning's.)
	Correct the documentation of requirements.
	(sp_darray_center_tangent): Similarly remove the #if'ed out code for
	looking at more than two points.

2004-03-31  Ted Gould <ted@gould.cx>

	* src/interface.cpp:  Changing the default size so that it matches
	  the default template size.  This way, for blank documents, the
	  window doesn't open and then resize.

2004-03-31  Ted Gould <ted@gould.cx>
	* src/file.cpp, src/dialogs/filedialog.cpp, src/extension/db.cpp,
	  src/extension/db.h, src/extension/system.cpp:
	  A bunch of changes for Bulia's bug 925875.  Basically now the
	  save dialog remembers which extension you've used.  This also
	  means that save works with non-standard extensions.  Also, it
	  will add extensions for you if you didn't put them on.  Finally,
	  the error dialog doesn't come up if you hit cancel in the
	  'Save As...' dialog.  Whew!

	* src/preferences-skeleton.h:  Added in settings to make the save
	  extension global, along with whether or not the files should have
	  extensions tacked on the end of them.

2004-03-31  Ted Gould <ted@gould.cx>

	* src/interface.cpp, src/interface.h, src/file.cpp:
	  Adding a cute little dialog to tell you if you are about to
	  overwrite a file you want to keep.  This fixes bug #911237

2004-03-30  Jon Phillips <kidproto@users.sf.net>

	* share/icons/icons.svg src/interface.cpp src/verbs.cpp src/verbs.h:
	  Added rest of icons for the menu. I think they are a good start.
	  There still needs to be continuity between styles, but at least
	  all needed icons are present. I didn't create icons for elements
	  that are going to be removed eventually.

	* share/tutorials/tipsandtricks.svg src/help.cpp src/interface.cpp:
	  Added this tutorial so that people can consolidate their information
	  onto this page.

2004-03-30  Ted Gould  <ted@gould.cx>

	* src/file.cpp, src/file.h, src/dialogs/filedialog-win32.cpp,
	  src/dialogs/filedialog.cpp, src/dialogs/filedialog.h
	  src/extension/system.cpp, src/extension/system.h,
	  src/extension/implementation/script.cpp:
	  Making all of the file operations have lists of the extensions
	  that can be used to save and open.  This also fixes the bug
	  which talks about mis-saving file without an error - there is
	  an error message now.  Probably not the most clear, but you
	  won't miss it.

2004-03-29  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/bezier-utils-test.cpp: Finish the sp_bezier_fit_cubic test.

	* src/dyna-draw-context.cpp, src/mod360.cpp, src/mod360.h,
	src/Makefile.am: Move mod360 to new files mod360.cpp, mod360.h.
	Add unit test for it.

2004-03-28  Bryce Harrington <bryce@bryceharrington.com>

	* inkscape.cpp, inkscape.h, xml/repr-io.cpp, xml/repr.h:  Adding
	  better error handling for the situation where the
	  preferences.xml file is not successfully loaded.  In this case,
	  we want to suppress saving it, lest we overwrite the file with
	  the default skeleton preferences.

2004-03-28  Jon Phillips <jon@users.sourceforge.net>

	* src/interface.cpp src/select-toolbar.cpp src/verbs.cpp src/verbs.h:
	  Changed rotate verb to be SP_VERB_OBJECT_ROTATE_90_CW so that I can
	  now install SP_VERB_OBJECT_ROTATE_90_CCW.

	* share/icons/icons.svg src/interface.cpp src/select-toolbar.cpp
	  src/selection-chemistry.cpp src/selection-chemistry.h
	  src/verbs.cpp src/verbs.h: Added rotation 90 degrees CCW to the menu,
	  icons, and the interface. It was a pretty simple thing to do but was
	  not available on the interface.

2004-03-28  MenTaLguY <mental@rydia.net>

	* src/sp-gradient.cpp: request SP_OBJECT_MODIFIED_FLAG if gradient stops
	  are added or removed

2004-03-27  bulia byak <bulia@users.sourceforge.net>

	* src/main.cpp: Removed redundancy in error messages, reworded some

	* src/verbs.cpp src/toolbox.cpp src/nodepath.cpp src/inkscape.cpp
	src/extension/internal/ps.cpp src/main.cpp: Typos, reported by Arpad Biro

	* AUTHORS: Added John Cliff, Fred (long overdue), Adib

	* src/widgets/gradient-vector.cpp: John Cliff: multistage gradient editor

	* src/splivarot.cpp src/style.cpp src/xml/repr-util.cpp src/sp-polygon.cpp:
	Adib's svgostringstream patches
 
	* src/toolbox.cpp: All default buttons work correctly with undo, use freezing to
	prevent double changes; tooltip edits, formatting; defocusing on all widgets

	* src/display/nr-arena-image.cpp: Tentative fix for 906376: image always uses
	_P_P_P_ compositing

	* src/dialogs/item-properties.cpp: Refixing the slider 0.99 problem properly,
	reported by simarilius

	* src/help.cpp src/help.h src/interface.cpp: Expanded and split tutorial, all
	tutorials in submenu
 
	* src/sp-text.cpp: Do not write dx/dy if they only contain 0s

	* src/verbs.cpp src/verbs.h src/splivarot.cpp src/splivarot.h src/shortcuts.cpp:
	Inset/outset by pixels: commands, keys

	* src/preferences-skeleton.h: Default nudge 2pt

	* src/event-context.cpp: Increased accelerated-scroll delay

	* src/sp-text.cpp,h src/text-context.cpp: Clicking positions cursor closest to
	the click point

	* src/extension/internal/ps.cpp: Print dialog transient; Enter activates print;
	patches from sodi to flush stream and add boundingBox to PS output

	* src/dialogs/xml-tree.cpp: XML editor watches desktop change

	* src/sp-root.cpp: Fix from sodi: default preserveAspectRatio value

	* src/libnrtype/nr-type-w32.cpp: Fix for 915440 (from sodi)

2004-03-27 Peter Moulder <pmoulder@mail.csse.monash.edu.au>

	* src/dyna-draw-context.cpp (sp_dyna_draw_context_set):
	Tweak angle setting: prefer 0.0 instead of 360.0.

	* src/dyna-draw-context.h, src/dyna-draw-context.cpp: Cleanup:
	Greater conformance to CodingStyle.  Mostly whitespace changes.

2004-03-24  Ted Gould <ted@gould.cx>

	* src/extension/db.[ch]: Adding in functions to get lists of 
	  input and output extensions for the file dialogs

2004-03-25  Alexander Clausen <alex@skip86.com>
	
	* src/inkview.cpp Fix inkview crash on startup

2004-03-24  Ted Gould <ted@gould.cx>

	* Minor changes to get distcheck to work.

2004-03-24  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/draw-context.h, src/draw-context.cpp: Cleanup: greater
	conformance to CodingStyle.  Mostly whitespace changes.

2004-03-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/widgets/sp-widget.h, src/widgets/sp-widget.cpp
	(sp_widget_new_repr): Remove this unused function.

	* src/libnrtype/nr-rasterfont.cpp (nr_rasterfont_ensure_glyph_slot):
	Address compiler warning.

	* src/seltrans.cpp (sp_sel_trans_ungrab): Disable the persistent
	snapping stuff added 2004-02-19.

	* src/desktop-events.cpp (sp_dt_ruler_event): Minor cleanup.

2004-03-19  bulia byak <bulia@users.sourceforge.net>

	* src/selection-chemistry.cpp: Prevent it from scaling above 1e6 pt

	* src/preferences-skeleton.h src/dialogs/dialog-events.cpp: "Skip taskbar" hint
	for dialogs
 
	* src/selection-chemistry.cpp: Patch for copying gradients from johncliff

	* src/event-context.cpp: Increased accelerated-scroll delay

	* nr-pixops.h: INK_COMPOSE: Always-visible inversion compose method

	* sp-gradient.cpp: Default linear gradient goes through center
 
	* nr-plain-stuff.cpp: Tweaked checkerboard size and color
 
	* gradient-position.cpp: Inverse colors for handles, axes, and bbox; dragging
	snaps with Ctrl; radius handle in radial gradient
 
	* src/sp-rect.cpp src/sp-path.cpp: Finished fixing 918478

	* src/gradient-chemistry.cpp src/widgets/gradient-vector.cpp: Fix for 902319,
	remove some debug output
 
	* src/toolbox.cpp: Polygon mode off by default

	* src/toolbox.cpp: Crash fix, reported by David Christian Berg

	* src/radial.h src/nodepath.cpp: Moved Radial:: to nodepath.h for now

	* stringstream.h: New stream class for serialization

	* svg-path.cpp: Use new stream class

	* src/toolbox.cpp: Smarter Sharpness, r1 and r2 undistinguishable for the user

	* src/svg/svg-path.cpp: Restore mising break (fixes smearing for paths with h and v)

	* src/dialogs/align.cpp src/dialogs/transformation.cpp: Reverse pjrm's change in delete
	handlers (fixes crash on closing)

	* src/splivarot.cpp: Simplify threshold depends on selection size, not item size

	* src/select-toolbar.cpp: Reordered select toolbar buttons

	* icons.svg: Reworked selector toolbar icons

2004-03-17  Ted Gould <ted@gould.cx>

	* src/extension/db.h, src/extension/db.cpp, src/extension/extension.cpp,
	  src/extension/system.cpp: Changing the database stuff to be C++
	  object oriented (actually it wasn't OO before).  But this helps
	  as we start to connect to the File dialogs.

2004-03-16  Ted Gould <ted@gould.cx>

	* src/file.cpp,
	  src/file.h,
	  src/extension/Makefile.am,
	  src/extension/extension.cpp,
	  src/extension/extension.h,
	  src/extension/menu.cpp,
	  src/extension/system.cpp,
	  src/extension/implementation/implementation.cpp,
	  src/extension/implementation/implementation.h,
	  src/extension/implementation/script.cpp,
	  src/extension/implementation/script.h:
	 A few of changes.
	 1) removed the extensions menu stuff from the build as it seems
	    no one is using it.
	 2) Changing Filter to Effect internally to the extensions
	 3) Adding an exception to the save and open extensions to
	    signal a failure.  There is no way to test this currently,
	    but it doesn't break anything.

2004-03-16  jon phillips <kidproto@users.sf.net>

	* share/icons/icons.svg: Added a couple of icons but haven't linked them
	  to the code yet.

	* share/tutorials/elementsofdesign.svg: Added the first part of the
	  basic graphics for this tutorial.  I added boxes for the rest, which
	  I need to finish.  I need to use Bulia's tutorial top part to keep
	  the tutorials consistent.

2004-03-16  bulia byak <bulia@users.sourceforge.net>

	* nr-type-directory.cpp: Cache NRTypeFaceDef *, not NRTypeFace *, fixes 916155 

	* src/arc-context.cpp src/arc-context.h src/event-context.h src/rect-context.cpp
	src/spiral-context.cpp src/spiral-context.h src/star-context.cpp
	src/star-context.h src/toolbox.cpp: John Cliff's patch #2 for shape tools,
	with my fixes
 
	* icons.svg: Tweaks: stroke to curve, flip/rotate, text 

	* src/sp-ellipse.cpp: Fixes: SPArc never writes <ellipse>; in d=, no L to the center when start==end
 
	* src/nodepath.cpp: Fix for 916119 

	* src/widgets/icon.cpp: Remove not-enough-room-for-icon warning
 
	* src/dialogs/text-edit.cpp src/dialogs/dialog-events.cpp: Do not eat key events in the text view

2004-03-15  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/widgets/gradient-vector.cpp
	(sp_gradient_vector_widget_load_gradient, sp_gradient_vector_color_dragged):
	Cleanup: Convert to table-driven style.

	* src/style.cpp (sp_style_read_from_object): Additional check.

	* src/rect-context.cpp: Cleanup: Coding Style conformance,
	move declarations to first use.

	* src/sp-gradient.cpp (sp_gradient_rebuild_vector): Add assertion.

2004-03-15  Ted Gould <ted@gould.cx>

	* src/extension/extension.cpp:  Adding in some comments for my
	  previous checkin and also adding in the integer functions that
	  I forgot (but aren't used yet).

2004-03-14  Jon Phillips <jon@jonphillips.info>

	* src/toolbox.cpp src/verbs.cpp src/interface.cpp
	share/icons/icons.svg: Added all the icons in the VIEW
	menu. They might need some tweaking, but its a start. Also
	cleaned up some coding conventions for these files.

2004-03-14  Bryce Harrington <bryce@bryceharrington.com>

	* src/view.cpp:  Adding an accumulator function for checking
	  return values of shutdown signal handlers, so that if any one of
	  them returns a value indicating an abort of the shutdown, the
	  shutdown process will be aborted.

2004-03-14  Ted Gould <ted@gould.cx>

	* src/extension/extension.cpp, src/extension/extension.h,
	  src/extension/internal/ps.cpp: Adding in parameters for extensions.
	  This will make it so that extensions can have easy settings that
	  are used.  They are not currently persistent - but that will be
	  a future feature.

2004-03-14  MenTaLguY <mental@rydia.net>

	* src/ast/*: more AST sketching

	* src/xml/repr.cpp: existing listeners were getting dropped when new
	  listeners were added; this fix makes the behavior documented in
	  bug #896706 a little worse, but fixes bug #915913

	* src/sp-use.cpp: SPUse does not need to manually detach its child
	  anymore, so now it doesn't

	* src/sp-object.cpp: detach our SPRepr listener before we start
	  releasing our children, which makes listener removal faster (since
	  we are then always removing from the beginning of the listener
	  list -- i.e. removing in roughly the order in which they were added)
	  This should help bug #896706 a little more.

	* src/event-context.cpp, src/node-context.cpp, src/rect-context.cpp,
	  src/sp-object.cpp, src/sp-offset.cpp, src/dialogs/desktop-properties.cpp,
	  src/dialogs/xml-tree.cpp, src/widgets/sp-widget.cpp,
	  src/widgets/sp-xmlview-attr-list.cpp, src/widgets/sp-xmlview-tree.cpp,
	  src/xml/repr-private.h, src/xml/repr-util.cpp, src/xml/repr.cpp,
	  src/xml/repr.h:
	  SPObjects now ::write() immediately on attribute changes, if those
	  changes are "interactive" (i.e. from the XML editor); this fixes
	  the problem with SPStar's points= attribute updating (bug #910142)

	* src/sp-clippath.cpp, src/sp-mask.cpp, src/sp-namedview.cpp,
	  src/sp-root.cpp, src/sp-symbol.cpp:
	  simplified SPObject::remove_child handlers, focusing particularly
	  on making them not rely on the repr still being attached

	* src/sp-object.cpp: SPObject::remove_child is now invoked after
	  the repr has been removed (fixes bug #916188)

	* src/text-context.cpp: don't unparent the repr if it's already
	  been unparented (fixes bug #915435)

2004-03-14  rejon <jon@protofunk.org>

	* src/toolbox.cpp share/icons/icons.svg: Cleaned the file up to coding
	  standards. I also have begun to add new icons to our program.

2004-03-13  MenTaLguY <mental@rydia.net>

	* src/document.cpp: bumped the update limit on documents a bit
	  (bug #896076)

	* src/sp-text.cpp: SPString now copes with parents that don't have style
	                   information (comment on bug #896706)

	* src/xml/repr.cpp, src/xml/repr-private.h:
	  adding listeners is now O(1), which should make files which make heavy
	  use of <use> more tolerable; I decided to add an extra "last" pointer
	  rather than just prepending to the list (which would have reversed
	  its order, and make the common case for removal traverse the entire
	  list -- removal is still O(N) overall, but at least this way we usually
	  hit the best-case) (bug #896076)

2004-03-11  bulia byak <bulia@users.sourceforge.net>

	* src/sp-item.h src/sp-item.cpp: Restore i2root_affine: same as i2doc but
	without c2p, fixes 914039

	* src/selection-chemistry.cpp: Grouping z-order fix

	* src/path-chemistry.cpp: Combine/Break Apart fixes: preserve z-order and
	parent, diagnostics, multiple selected, cleanup, fixes

	* src/libnrtype/nr-type-directory.cpp: Fix win32 memory hog (unfreed
	g_ascii_tolower in ink_strstr), implement caching of looked-up faces

2004-03-10  bulia byak <bulia@users.sourceforge.net>

	* src/sp-offset.cpp: Coalesce threshold depends on item size (less transform),
	guarding against invalid item bbox, comments

	* src/sp-text.cpp: TODO comment for effective_dx/dy

	* src/splivarot.cpp src/preferences-skeleton.h: Inset/Outset handle multiple
	selections, preserve z-order and grouping; Simplify handles multiple
	selections, preserves z-order and grouping, threshold taken from prefs,
	accelerated

	* src/node-context.cpp src/text-context.cpp: Disregard groups when clicking

	* src/shortcuts.cpp: Ctrl+/ for division, ctrl-alt-/ for slice (cut path),
	bigger window for keys

	* src/rect-context.cpp src/rect-context.h: Knotholder, signals and listeners,
	selection by click, tolerance, Esc deselects

	* src/toolbox.cpp: Rect toolbar: Spinbuttons cosmetics, keys, defocusing,
	tooltips, fixes

	* src/shortcuts.cpp: Ctrl+e zooms to window, export is ctrl+shift+e now

	* src/selection-chemistry.cpp: Z-order fixes: Raise rewritten, diagnostics,
	relative raise/lower only for overlapping objects

	* src/verbs.cpp: raise/lower commands named more consistently

	* src/sp-item.cpp src/sp-item.h: Sorting function for items

	* src/selection-chemistry.cpp: fix for 910017

	* src/splivarot.cpp: Remove fill for slice

2004-03-09  rejon <jon@protofunk.org>

	* samples: Moved the contents of samples into the proper share dirs.

	* share/tutorials/tutorial.svg: Moved the default tutorial.svg to this
	  location.  It was in the wrong place.

	* share/tutorials/elementsofdesign.svg src/help.cpp src/interface.cpp:
	  Added the textual gloss of this new tutorial. I need to add some
	  more graphics to it. But I just wanted to first of all flesh out
	  the document so that others could chunk in graphics and so
	  forth.

2004-03-09  MenTaLguY  <mental@rydia.net>

	* src/ast/*: more AST work

	* src/sp-text.cpp: fixed uninitialized variable

	* src/sp-text.cpp: rewrote recursive character-counting algorithm

2004-03-08  MenTaLguY  <mental@rydia.net>

	* src/sp-text.cpp: fixes for initialization and updating of SPString

2004-03-07  MenTaLguY  <mental@rydia.net>

	* src/sp-item.cpp: the item's arenaitems shouldn't be destroyed until
	  its children have had a chance to clean up

	* src/sp-object.cpp: fix sp_object_reorder() to correctly handle
	  next == NULL

	* src/sp-item.cpp, src/sp-object-group.cpp, src/sp-object-repr.cpp,
	  src/sp-object.cpp, src/sp-object.h, src/sp-text.cpp, src/sp-use.cpp:
	  finished transition to SPObject::children

	* src/sp-text.cpp: reworked SPTSpan a bit so that it copes with
	  the child changes a little better with respect to SPTSpan::string

2004-03-06  MenTaLguY  <mental@rydia.net>

	* src/ast/*: initial work on AST code

	* src/libnr/nr-convex-hull-ops.h, src/libnr/nr-convex-hull.h,
	  src/libnr/nr-matrix-fns.h, src/libnr/nr-maybe.h,
	  src/libnr/nr-rect-ops.h:
	  basic cleanups and work on NR::ConvexHull

	* src/document.cpp, src/gradient-chemistry.cpp,
	  src/selection-chemistry.cpp, src/selection.cpp, src/sp-clippath.cpp,
	  src/sp-defs.cpp, src/sp-defs.h, src/sp-gradient.cpp, src/sp-gradient.h,
	  src/sp-item-group.cpp, src/sp-item-group.h, src/sp-item.cpp,
	  src/sp-item.h, src/sp-mask.cpp, src/sp-namedview.cpp,
	  src/sp-object-group.cpp, src/sp-object-group.h, src/sp-object-repr.cpp,
	  src/sp-object.cpp, src/sp-object.h, src/sp-pattern.cpp, src/sp-pattern.h,
	  src/sp-root.cpp, src/sp-text.cpp, src/sp-text.h,
	  src/widgets/gradient-vector.cpp:

	  children are now uniformly handled by SPObject

2004-03-05  bulia byak <bulia@users.sourceforge.net>

	* src/desktop.cpp src/preferences-skeleton.h: Autoscroll now accepts
	distance-from-edge parameter, may be negative, default is
	options.autoscrolldistance = -10

	* src/style.cpp src/style.h src/document.cpp: Store uri for paintsever and
	serialize it back instead of paintserver id. find_items functions do not find
	insensitive items by default.

	* src/sp-item.cpp: tentative fix: do not remove style attribute if
	write_difference fails or object has no parent

	* src/desktop-events.cpp: transientize guide dialog

	* splivarot.cpp, livarot/*: fred's new rasterizer, fixes

	* src/widgets/gradient-vector.cpp: fix 906301

	* src/dialogs/text-edit.cpp: do not rebuild text of object if not changed in the
	dialog, fixes 906279

	* src/selection.cpp: suppress a few meaningless warnings

	* src/xml/repr.cpp: fix for 907056, 906222

	* about.svg: redrawn from rejon's draft, with a highlight on lauris :)

	* libnrtype: Full font-variant, font-weight, font-stretch support. Better family
	and style matching algorithm. Support for generic families and multiple family
	specifications. Xft sees all font styles, reads pfa fonts again. Font styles
	are sorted in the list and use the native style names with Xft.

	* src/sp-text.cpp,h src/text-context.cpp: Keys, function for adjusting linespacing

	* keys.xml,svg,html: Linespacing keys

2004-03-05  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/draw-context.cpp (fit_and_split,
	sp_pencil_context_root_handler, spdc_add_freehand_point):
	* src/dyna-draw-context.cpp (sp_dyna_draw_timeout_handler,
	sp_dyna_draw_context_root_handler, fit_and_split_line,
	fit_and_split_calligraphics):
	Cleanups.

	* src/Makefile.am: Fix missing backslash at end of line.

2004-03-05  Ted Gould  <ted@gould.cx>
	* src/extension/impelementation/implementation.cpp,
	  src/extension/impelementation/implementation.h,
	  src/extension/impelementation/script.h,
	  src/extension/impelementation/script.cpp:
	Adding in some more comments and doing some general cleanup
	of the code.  It is getting better everyday.

2004-03-05  Ted Gould  <ted@gould.cx>

	* src/Makefile.am: Adding back in inkview.  This was fixed by
	Bob, but he didn't add it back in.  It's back in the build now.
	Thanks Bob for fixing my mistakes!

2004-03-04  Ted Gould  <ted@gould.cx>

	* src/extension/extension.h: Cleaning up and adding comments.

2004-03-04  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/livarot/Shape.cpp (Distance): Convert to DistanceLE(p, d)
	function returning true iff Distance(p) <= d.  (Saves 7% of total
	inkscape CPU time for "big scribbles" test cases.)  Update callers.

2004-03-04  Ted Gould  <ted@gould.cx>

	* src/extension/system.cpp, src/extension/system.h,
	  src/extension/extension.cpp, src/extension/extension.h,
	  src/extension/init.cpp, src/extension/internal/gnome.cpp,
	  src/extension/internal/ps.cpp, src/extension/internal/svg.cpp,
	  src/extension/internal/win32.cpp:
	Making it so that an implementation is a require element to
	build an extension.  This means that checking for one in every
	other function is not required.  Makes a touch more sense.

2004-03-04  Jon A. Cruz  <jon@joncruz.org>

	* src/file.cpp, src/interface.cpp, src/inkscape-stock.cpp,
	src/sp-image.cpp, src/helper/png-write.cpp,
	src/widgets/icon.cpp:
	Fixed filename/URI translation to keep UTF-8 internally.

2004-03-03  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/seltrans.cpp (sign):
	New function to replace `FOO / fabs(FOO)' expressions in various places.
	* src/seltrans.cpp (sp_sel_trans_stretch_request, sp_sel_trans_stretch):
	Fix #906221.  Also change the behaviour to allow growing.

	* src/libnr/nr-scale.h: operator[]: new versions returning writable reference.

	* src/desktop-snap.h, src/desktop-snap.cpp
	(sp_desktop_vector_snap_list):
	Change final arg from NR::Point to NR::scale.  Update callers.

2004-03-02  Ted Gould  <ted@gould.cx>

	* src/Makefile.am, src/print.cpp,
	  src/extension/db.cpp, src/extension/db.h, 
	  src/extension/extension.cpp, src/extension/extension.h, 
	  src/extension/system.cpp, src/extension/system.h, 
	  src/extension/init.cpp, src/extension/menu.cpp, 
	  src/extension/impelementation/Makefile.am,
	  src/extension/impelementation/implementation.cpp,
	  src/extension/impelementation/implementation.h,
	  src/extension/impelementation/script.h,
	  src/extension/impelementation/script.cpp,
	  src/extension/internal/gnome.cpp, src/extension/internal/gnome.h, 
	  src/extension/internal/ps.cpp, src/extension/internal/ps.h, 
	  src/extension/internal/svg.cpp, src/extension/internal/svg.h, 
	  src/extension/internal/win32.cpp, src/extension/internal/win32.h:

	  Turning the extensions stuff into having C++ objects instead
	  of GTK+ objects.  This affected a lot of files.

2004-03-02  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/curve.h, src/helper/curve.cpp
	(sp_curve_new_from_foreign_bpath and many static functions):
	Mark various ArtBpath[] parameters as not being written to.

	* src/draw-context.cpp (fit_and_split): Fix to fix to edge case in
	freehand tool.  (Hopefully to be replaced by different approach.)

	* src/dialogs/transformation.cpp (sp_transformation_move_apply,
	sp_transformation_scale_apply, sp_transformation_rotate_apply,
	sp_transformation_skew_apply):
	Remove unused `copy' parameter.  Update caller.

	* src/dialogs/align.cpp, src/dialogs/transformation.cpp: Cleanups.

	* src/display/nr-arena-shape.cpp (nr_arena_shape_set_path):
	Remove affine argument (all current callers were passing NULL) and
	unused `lieutenant' argument.  Update callers.

	* src/selection-chemistry.h, src/selection-chemistry.cpp
	(sp_selection_delete, sp_selection_duplicate, sp_edit_clear_all,
	sp_edit_select_all, sp_selection_group, sp_selection_ungroup,
	sp_selection_raise, sp_selection_raise_to_top, sp_selection_lower,
	sp_selection_lower_to_bottom, sp_selection_cut, sp_selection_copy,
	sp_selection_paste, sp_selection_paste_style):
	Remove unused parameters.  Update callers.

2004-03-01  Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/draw-context.cpp: Fixed edge case in freehand tool.  Added
	comment about curve fitting.

2004-03-01  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-guide.cpp (sp_guide_set_property, sp_guide_get_property):
	Minor cleanups.

	* src/interface.h, src/interface.cpp
	(sp_ui_new_view, sp_ui_new_view_preview): Make static.

	* src/dyna-draw-context.cpp (sp_ddc_defaults):
	* src/rect-context.cpp (sp_rc_defaults): 
	Cleanup: Use table and loop instead of copy&paste.

	* configure.in: If -Wno-unused-parameter isn't recognized (g++ 3.2 and
	earlier) then use -Wno-unused.

	* src/libnr/nr-point.h: NR::Point: Add explicit copy constructor and
	operator= in the hope of fixing #907059.

	* src/desktop-events.cpp (sp_dt_ruler_event): NR::Point'ification.

	* src/selection.cpp (sp_selection_item_selected):
	* src/seltrans.cpp (sp_sel_trans_stretch_request):
	* src/display/nr-arena-shape.cpp (shape_run_A8_OR):
	* src/livarot/PathStroke.cpp (DoJoin):
	* src/livarot/ShapeMisc.cpp (ReFormeBezierTo):
	Address compiler warnings.

2004-02-28  Jon Phillips <jon@protofunk.org>

	* share/*: Move extensions, icons, and made a new folder screens
	for screens that are pulled up in using inkscape.  Please test
	this heavily as it implements the most troublesome chunks of the
	directory reorganization.

	* Makefile.am, Makefile.mingw, config.h.mingw, configure.in:
	Changed to coincide with the new changes.

2004-02-28  Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/nodepath.cpp,h: Moved radial to class Radial.  Moved
	NodePath into namespace Path and partially classified.

2004-02-28  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/nodepath.cpp: Mark several functions as static.

	* src/dialogs/stroke-style.cpp: Rename DEBUG_MARKERS ifdef to
	WITH_MARKER_GUI, and make more things conditional on it.
	(Fixes failing assertion for the !defined case.)

2004-02-27  Alexander Clausen <alex@skip86.com>

	* src/desktop-events.cpp: fix my last fix *sigh*

	* src/inkview.cpp: fix inkview crash when none of the files 
	on commandline exist, add very basic error reporting

2004-02-27  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/stroke-style.cpp (sp_stroke_style_set_marker_buttons):
	Cleanup: restructure.

	* src/dialogs/Makefile.am: in-dt-coordsys.cpp, in-dt-coordsys.h:
	New files.
	* src/dialogs/xml-tree.cpp (set_dt_select): Fix bug when clicked on a
	shape that's a descendent of a <defs> node: don't try to select it
	in the canvas.

2004-02-26  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/stroke-style.cpp:
	Fix: free marker_xpm[i] instead of marker_xpm.
	Misc cleanups.

	* src/Makefile.am: New files extract-uri.cpp, extract-uri.h.
	New unit test extract-uri-test.cpp.
	* src/style.cpp (extract_uri): Move to src/extract-uri.cpp, and fix.

	* src/Makefile.am (inkscapelib_src):
	marker-status.h, marker-status.cpp: New files.
	* src/dialogs/stroke-style.cpp, src/sp-shape.cpp, src/style.cpp:
	Change marker debugging status messages from conditional g_message
	to unconditional marker_status call.

	* src/dialogs/stroke-style.cpp (marker_id_to_string):
	Remove unused function.

2004-02-24  Alexander Clausen <alex@skip86.com>

	* src/desktop-events.cpp: Fix crash when opening the guide dialog for
	the second time

2004-02-24  bulia byak <bulia@users.sourceforge.net>

	* src/helper/sodipodi-ctrlrect.cpp: A smart always-visible inversion for ctrlrect border 

	* src/select-toolbar.cpp: Fix for 873723

	* src/style.h src/style.cpp: write_difference only writes what is .set in the target style

	* src/selection-chemistry.cpp: Paste style merges the style of the clipboard
	with the object's current style

	* src/xml/repr-io.cpp: Do not cut leading/trailing whitespace on text nodes,
	only reject all-whitespace nodes

	* src/pixmaps/handles.xpm src/seltrans.cpp src/knot.cpp src/nodepath.cpp
	src/helper/sodipodi-ctrl.cpp: Changed xor compositing for ctrls, made seltrans
	handles inverse, tweaked knot colors

	* doc/keys-html.xsl doc/keys.html: keys.html now validates

	* src/desktop.cpp src/desktop.h: New function to autoscroll desktop so a point
	becomes visible

	* src/rubberband.cpp src/select-context.cpp src/nodepath.cpp: Use the new
	function to scroll desktop to a point

	* src/desktop.cpp src/preferences-skeleton.h: options.autoscrollspeed 

2004-02-24  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-matrix.h: Add `explicit' to Matrix constructors
	from rotate/scale/translate, to reduce the number of mysterious
	implicit conversions used in client code.
	Don't #include nr-rotate-ops.h, nr-scale-ops.h, nr-translate-ops.h.

	* src/selection-chemistry.cpp (sp_selection_apply_affine):
	Change final argument from double[6] to NR::Matrix.
	Update callers.
	(sp_selection_scale_relative): Change from dx,dy to NR::scale argument.
	Update callers.
	(sp_selection_scale, sp_selection_scale_times): Cleanup.

	* src/libnr/Makefile.am:
	New files nr-rotate-test.cpp, nr-scale-test.cpp, nr-translate-test.cpp.
	* src/libnr/nr-matrix-test.cpp: Move lots of things to the new files.
	Add tests for the operator* additions of 2004-02-23.
	Don't #include .cpp files where linking against them suffices.

	* src/livarot/Makefile.am (Path_test_LDADD): Fix order of libs.

	* src/select-toolbar.cpp (sp_object_layout_any_value_changed):
	NR::Matrix'ification.

2004-02-23  MenTaLguY <mental@rydia.net>

	* src/selection-chemistry.cpp, src/selection-chemistry.h,
	  src/seltrans.cpp, src/seltrans.h, src/verbs.cpp,
	  src/dialogs/transformation.cpp, src/libnr/nr-point-fns.h,
	  src/libnr/nr-point.h, src/libnr/nr-rect.h: more NRPoint removal

2004-02-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-item-transform.cpp (sp_item_rotate_rel):
	Use NR::Rect and .midpoint.

	* src/dropper-context.cpp (sp_dropper_context_root_handler):
	* src/sp-text.cpp (sp_string_set_shape):
	Cleanup: use translate rather than setting individual matrix elements.

	* src/libnr/nr-matrix-ops.h (operator*: Matrix*rotate, translate*scale,
	scale*translate, Matrix*scale): New functions.

2004-02-22  Ted Gould <ted@gould.cx>

	* src/extension/Makefile.am, src/extension/implementation/Makefile.am,
	src/Makefile.am, po/POTFILES.in, po/*.po (because of previous change):
	Okay, I screwed up.  Here are some distcheck fixes for various
	things.  Still not entirely clean.  But these are much closer
	than we were.

2004-02-22  Ted Gould <ted@gould.cx>

	* src/modules -> src/extensions:
	Changing the directory name so that it fits the new naming
	conventions that we're working with.

2004-02-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop.cpp (sp_desktop_init, sp_desktop_set_display_area):
	* src/libnrtype/nr-font.cpp (nr_font_generic_glyph_outline_get):
	* src/libnrtype/nr-typeface.cpp (nr_font_new_default):
	Don't use implicit NR::Matrix conversions.

	* src/libnr/nr-translate-ops.h (operator!=): new.

	* src/sp-item.h, src/sp-item.cpp (sp_item_bbox_desktop):
	Add NR::Rect version.

	* src/inkview.cpp: Address compiler warning: declare is_jar iff it is
	defined, i.e. #ifdef WITH_INKJAR.

	* src/desktop-snap.cpp, src/desktop.h, src/object-edit.cpp,
	src/sp-root.cpp, src/livarot/PathConversion.cpp,
	src/widgets/sp-color-wheel.cpp:
	Add some #include's to reduce how much nr-matrix.h must pull in.

	* src/desktop-affine.cpp, src/knotholder.cpp,
	src/desktop-events.cpp, src/nodepath.cpp, src/sp-ellipse.cpp,
	src/sp-image.cpp, src/sp-item-notify-moveto.cpp, src/sp-rect.cpp,
	src/text-context.cpp:
	#include libnr/nr-matrix-ops.h.

2004-02-22  Ted Gould <ted@gould.cx>

	* doc/Makefile.am, po/POTFILES.in: keeping these up to date
	for distchecks.

2004-02-21  Ted Gould <ted@gould.cx>

	* extensions/txt2svg.inkmod, extensions/txt2svg.pl:
	Adding a script that Bryce wrote that will take in text.  Plus
	the inkscape module file to make it so that you can open text
	files in Inkscape.

2004-02-21  MenTaLguY <mental@rydia.net>

	* src/xml/repr-util.cpp, src/xml/repr.h: added RDF namespace by default

	* src/inkscape.cpp, src/inkscape.h, src/widgets/sp-widget.cpp,
	  src/inkview.cpp: nuked global 'inkscape' variable and replaced
	  it with a module-local variable and an accessor function.

	* src/uri.h, src/uri.c: added native filename to/from thingy

2004-02-20  bulia byak <bulia@users.sourceforge.net>

	* src/text-context.cpp: [shift+]alt+arrows to kern

	* src/sp-text.cpp,h: Complete support for dx/dy vectors, including inheritance
	as per SVG spec. Preserve dx/dy lists in editing. Function to adjust dx/dy by
	screen pixels.

	* src/svg/svg-length.cpp: Function to read length in absolute units
	only. Function to read a length into a float instead of SPSVGLength. Function
	to read a length vector into a list of SPSVGLength's.

	* src/sp-root.cpp src/sp-image.cpp src/sp-offset.cpp src/sp-spiral.cpp:
	Eliminated sp_svg_length_read_ldd calls and ugly repetitive unit checks, used
	sp_svg_length_read_[computed_]absolute instead.

	* doc/keys.xml doc/keys.html icons/keys.svg: Updated guide and grid
	shortcuts. Added paste in place, more notes. Added kerning keys and notes.

	* src/libnrtype/nr-type-ft2.cpp: Crash fix, patch 895344.
 
	* src/sp-namedview.cpp src/sp-namedview.h: Proper showguides support, functions
	for toggling guides and grid.

	* src/desktop-events.cpp: Turn showguides on when creating a new guide.
 
	* src/verbs.cpp: Used the new toggle functions for showguides and showgrid.

	* src/interface.cpp: Added Guides to View.
 
	* src/xml/repr-util.cpp: sp_repr_get_boolean fix.

	* src/dialogs/desktop-properties.cpp: Reenabled showguides support, added
	namedview listener to reflect outside changes to the namedview.

2004-02-20  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* Lots of files: Refine #include's according to reorganization of
	libnr/nr-types.h and libnr/nr-matrix.h.

	* src/libnr/Makefile.am (libnr_a_SOURCES):
	nr-coord.h nr-dim2.h nr-i-coord.h nr-matrix-ops.h nr-point-l.h
	nr-point-ops.h nr-point.h nr-rect-l.h nr-rotate.h nr-rotate-ops.h
	nr-scale-ops.h nr-scale.h nr-translate-ops.h nr-translate.h:
	New files; code moved from nr-types.h and nr-matrix.h.
	* src/libnr/nr-matrix.h:
	* src/libnr/nr-types.h:
	#include the new files.

	* src/desktop-affine.h, src/desktop-affine.cpp
	(sp_desktop_w2d_xy_point, sp_desktop_d2w_xy_point,
	sp_desktop_w2doc_xy_point, sp_desktop_doc2w_xy_point,
	sp_desktop_d2doc_xy_point, sp_desktop_doc2d_xy_point,
	sp_desktop_root2dt_xy_point, sp_desktop_dt2root_xy_point):
	Remove old NRPoint versions of these functions.

	* src/select-toolbar.cpp:
	* src/toolbox.cpp:
	* src/widgets/spw-utilities.cpp:
	Remove unused #include sp-item-transform.h.

	* src/sp-item-transform.cpp (sp_item_rotate_rel): NR::Matrix'ification.

	* src/sp-item-transform.h, src/sp-item-transform.cpp
	(sp_item_scale_rel, sp_item_skew_rel): Remove these unused functions.

	* src/sp-item-transform.h, src/sp-item-transform.cpp
	(sp_item_rotate_rel, sp_item_move_rel): Change from pair of points to
	NR::rotate and NR::translate respectively.  Update callers.

	* src/node-context.cpp (sp_node_context_root_handler):
	* src/rect-context.cpp (sp_rect_context_root_handler):
	* src/zoom-context.cpp (sp_zoom_context_root_handler):
	NR::Point'ification and var cleanup.

	* src/event-context.cpp
	(sp_event_context_private_root_handler, set_event_location):
	* src/dialogs/align.cpp (sp_align_arrange_clicked): 
	NR::Point'ification.

	* src/desktop.h (sp_desktop_zoom_relative_keep_point,
	sp_desktop_scroll_world): Add NR::Point version.

2004-02-19  Johan Ceuppens <jceuppen@easynet.be>

	* src/inkjar/jar.cpp, src/inkjar/jar.h src/inkview.cpp:
	inkview accepts .jar archives of SVG files on the command line.

2004-02-19  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/Makefile.am: sp-item-rm-unsatisfied-cns.cpp,
	sp-item-rm-unsatisfied-cns.h, sp-guide-attachment.h,
	sp-item-notify-moveto.cpp, sp-item-notify-moveto.h,
	sp-guide-constraint.h, satisfied-guide-cns.cpp,
	satisfied-guide-cns.h, sp-item-update-cns.cpp,
	sp-item-update-cns.h: New files.
	* src/desktop-events.cpp (sp_dt_guide_event):
	* src/seltrans.cpp (sp_sel_trans_ungrab):
	* src/sp-guide.cpp (sp_guide_moveto, sp_guide_remove):
	* src/sp-guide.h:
	* src/sp-item.cpp (sp_item_set):
	* src/sp-item.h:
	Make snap-to-guide more persistent.  (Still not saved to XML though.)

	* src/sp-spiral.cpp (sp_spiral_fit_and_draw, sp_spiral_set_shape):
	Address NRPoint warning.

	* src/widgets/icon.cpp (sp_icon_paint): Cleanup.

	* src/libnr/nr-types.h: Change deprecated-cast warning from runtime
	to compile-time.

	* src/helper/sp-canvas.h, src/helper/sp-canvas.cpp
	(sp_canvas_world_pt_inside_window): New function.

2004-02-18  MenTaLguY <mental@rydia.net>

	* src/widgets/icon.cpp, src/widgets/icon.h: rewrote to use gdk for
	  compositing; now it looks tolerable with ANY theme!

	* src/dialogs/item-properties.cpp: slight stabs at implementing "visible"

	* src/libnr/nr-types.h: added warning for deprecated casts

2004-02-18  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/dialogs/align.cpp (sp_align_arrange_clicked): Cleanup.

	* src/sp-item-transform.cpp (sp_item_move_rel): NR::Matrix'ification.

	* src/desktop-events.cpp (sp_dt_guide_event): Get guide line dialog
	working again: double-click on a guide to show the guide dialog.

	* src/utest/utest.h (UTEST_NAMED_ASSERT):
	Wrap this macro in static_cast<void>().

2004-02-17  MenTaLguY <mental@rydia.net>

	* src/interface.cpp: fixed signal connection in recent items menu

	* src/file.cpp: fix compile and pass UTF-8 "URIs" down to module code

2004-02-17  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-guide.h, src/sp-guide.cpp (sp_guide_moveto,
	sp_guide_position_set):
	Combine into a single sp_guide_moveto routine accepting a `commit'
	argument.  Update callers.

2004-02-16  MenTaLguY <mental@rydia.net>

	* src/interface.cpp: fixed bug with underscores in 'open recent' filenames

	* src/libnr/nr-rect.h, src/libnr/nr-types.h: moved NR::Rect to nr-rect.h,
	  minor updates

	* src/libnr/nr-maybe.h: continued work on maybe implementation

	* src/libnr/nr-types.h, src/libnr/nr-rect.cpp, src/libnr/nr-maybe.h,
	  src/seltrans.cpp:
	  started on revising the NR::Rect stuff, and introduced NR::ConvexHull

2004-02-16  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/xml/repr.cpp (sp_repr_document_root): Fix typo in most recent commit.

2004-02-14  MenTaLguY <mental@rydia.net>

	* src/svg/svg-path.cpp: switched to locale-safe iostreams-based path
	  serialization.

	* src/xml/repr-io.cpp, src/xml/repr.cpp, src/widgets/sp-xmlview-tree.cpp,
	  src/widgets/sp-xmlview-content.cpp, src/dialogs/xml-tree.cpp:
	  basic support for XML comments

2004-02-14  bulia byak <bulia@users.sourceforge.net>

	* src/dialogs/dialog-events.cpp: Added UTILITY hint to sp_transientize() 

	* po/fr.po: Update from f.rodrigo@tuxfamily.org 

	* src/interface.cpp: Fix for underscore in the recent files menu, by alxrem 

	* src/event-context.cpp src/preferences-skeleton.h: Accelerated scrolling by Ctrl-arrows

	* src/event-context.cpp: Ctrl-middle-click zooms in

	* doc/keys.xml doc/keys-svg.xsl doc/keys-html.xsl doc/keys.html icons/keys.svg:
	Updated middle and right buttons scroll/zoom, cosmetics

	* src/shortcuts.cpp: Menu shortcut fix 

	* src/verbs.cpp,h: New verb: deselect 

	* src/selection.cpp,h: Removed unused function

	* src/interface.cpp: Removed Edit/Clear All, added Edit/Deselect. Comment fix

	* src/toolbox.cpp: Spelling fix: symmetric, not symmetrical

	* src/desktop.cpp,h: sp_desktop_point(): returns mouse point in document coordinates

	* src/selection-chemistry.cpp,h: sp_selection_paste obeys in_place parameter

	* src/verbs.cpp src/verbs.h src/shortcuts.cpp: Paste in place verb, shortcut 

	* src/interface.cpp: Paste In Place command in Edit

	* src/selection-chemistry.cpp: Toolbar message fix 

2004-02-14  MenTaLguY <mental@rydia.net>

	* src/libnr/nr-types.h: added intersects() and contains() tests
	  for points and rects

2004-02-13  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/selection.cpp (sp_selection_snappoints):
	* src/sp-image.cpp (sp_image_snappoints):
	* src/sp-item.cpp (sp_item_private_snappoints):
	Don't use more than two opposite points of bounding box.

	* src/seltrans.cpp (sp_show_handles): Add precondition !seltrans.empty.
	* src/proofs: Update accordingly.
	* src/seltrans.cpp: Change seltrans from pointer to reference in
	several places.

2004-02-13  Johan Ceuppens  <jceuppen@easynet.be>

	* src/inkjar/{jar.cpp,jar.h}: changed some file offsets,
	uncompressing multiple files in a jar works now. There
	is an improved testing program at the end of jar.cpp.

2004-02-12  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/seltrans.cpp (sp_sel_trans_update_volatile_state):
	Minor cleanups.

	* src/desktop-snap.h, src/desktop-snap.cpp
	(sp_desktop_horizontal_snap, sp_desktop_vertical_snap,
	sp_desktop_horizontal_snap_list_scale,
	sp_desktop_vertical_snap_list_scale,
	sp_desktop_horizontal_snap_list_skew,
	sp_desktop_vertical_snap_list_skew):
	Remove these now-unused functions.

	* src/arc-context.cpp (sp_arc_drag):
	* src/rect-context.cpp (sp_rect_drag):
	Simplification: use sp_desktop_dim_snap instead of
	sp_desktop_horizontal_snap / sp_desktop_vertical_snap.

	* src/desktop-snap.cpp (sp_desktop_vector_snap): Minor cleanups.

	* src/libnr/Makefile.am, src/libnr/nr-point-fns-test.cpp:
	New unit test file nr-point-fns-test.cpp.

	* src/libnr/nr-point-fns.h, src/libnr/nr-point-fns.cpp (unit_vector):
	New function.

	* src/livarot/Path.h: Trim unnecessary includes.

	* src/livarot/LivarotDefs.h: #include <stdint.h> (moved from Path.h).

	* src/livarot/PathOutline.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/PathStroke.cpp, src/sp-offset.cpp:
	#include libnr/nr-point-fns.h.

2004-02-12  MenTaLguY <mental@rydia.net>

	* src/xml/repr-util.cpp, src/xml/repr.h: pruned some obsolete
	  functions

2004-02-12  Johan Ceuppens  <jceuppen@easynet.be>

	* configure.in src/Makefile.am: --with-inkjar (default no)
	* src/inkjar/Makefile.am src/inkjar/jar.cpp src/inkjar/jar.h:
	inital import of libinkjar, this can be moved to LGPL after
	rewriting the macros.

2004-02-11  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/seltrans.cpp (sp_sel_trans_handle_new_event,
	sp_sel_trans_handle_request): NR::Point'ification.

	* src/seltrans-handles.cpp, src/seltrans-handles.h, src/seltrans.cpp: 
	Preserve constness of SPSelTransHandle's.

	* src/sp-item.h, src/sp-item.cpp (sp_item_set_item_transform):
	Make static.  Use NR::Matrix, and avoid NULL special case.
	Update callers.

	* src/sp-item.h, src/sp-item.cpp (sp_item_set_i2d_affine):
	Get rid of NRMatrix version.
	Calculate 1.25 directly rather than less accurate reciprocal of 0.8.

	* src/libnr/nr-matrix.h, src/libnr/nr-matrix.cpp (matrix_equalp):
	New function.
	(assert_close): Use matrix_equalp.

	* src/seltrans.h, src/seltrans.cpp (sp_sel_trans_transform):
	Get rid of non-NR::Point version.  Make affine argument const.
	Update callers.

	* src/desktop-events.cpp (sp_dt_guide_event): NR::Point'ification.

	* src/view.h (sp_view_set_position): Add NR::Point version.

	* src/desktop.h (sp_desktop_set_coordinate_status):
	Add NR::Point version.

2004-02-09  bulia byak <bulia@users.sourceforge.net>

	* doc/keys.xml doc/keys-svg.xsl: Keys and Mouse Reference: source, SVG stylesheet
 
	* icons/keys.svg: Keys SVG chart (generated, do not edit)
 
	* icons/Makefile.am: Added keys.svg
 
	* src/help.cpp src/help.h src/interface.cpp: Added Keys and Mouse command
 
	* doc/keyboard-shortcuts.txt Obsoleted, removed

	* doc/keys-html.xsl doc/keys.html: Keys reference in HTML, stylesheet for HTML

	* doc/Makefile.am: updated
 
	* src/libnr/nr-pixblock.cpp: A better fix for 859364
 
	* src/libnrtype/nr-rasterfont.cpp: Reverting my previous fix for 859364, a better
	one is in nr-pixblock.cpp

	* icons/tutorial.svg: Switched to Bitstream Vera, updated tutorial

	* src/file.cpp: Fix for save bug 891852
 
	* src/preferences-skeleton.h: transientpolicy=1 again
 
	* src/nodepath.cpp: Ctrl-Alt-drag fix in point_line_closest()
 
	* src/select-toolbar.cpp: Small space before unit selector
 
	* src/widgets/paint-selector.cpp: Hidden buttons removed 

2004-02-09  MenTaLguY <mental@rydia.net>

	* src/interface.cpp: disabled the autoraise checkbox on Windows

	* src/widgets/paint-selector.cpp, src/widgets/paint-selector.h:
	  removed unused selector-type buttons (with Bulia)

2004-02-09  Jon A. Cruz  <jon@joncruz.org>

	* src/widgets/sp-color-wheel.h, src/widgets/sp-color-wheel.cpp,
	src/widgets/sp-color-wheel-selector.h,
	src/widgets/sp-color-wheel-selector.cpp,
	src/widgets/sp-color-gtkselector.cpp,
	src/widgets/sp-color-notebook.cpp
	Added new, smaller color wheel selector.

2004-02-09  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-affine.cpp, src/desktop-snap.cpp,
	src/desktop-snap.h, src/desktop.cpp, src/knotholder.cpp,
	src/nodepath.cpp, src/selection-chemistry.cpp, src/seltrans.cpp,
	src/seltrans.h, src/sp-ellipse.cpp, src/sp-image.cpp,
	src/sp-item.cpp, src/sp-item.h, src/sp-rect.cpp, src/sp-root.cpp,
	src/text-context.cpp, src/dialogs/xml-tree.cpp,
	src/libnr/Makefile.am, src/libnr/nr-matrix.cpp,
	src/libnr/nr-matrix.h, src/libnr/nr-types.h,
	src/libnrtype/nr-rasterfont.cpp, src/livarot/Path.h,
	src/livarot/PathConversion.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/ShapeSweep.cpp, src/widgets/gradient-position.cpp,
	src/widgets/sp-color-wheel-selector.cpp,
	src/widgets/sp-color-wheel.cpp:
	Change matrices to be suitable for right multiplication.
	(Also miscellaneous cleanups as mentioned below.)

	* src/widgets/sp-color-wheel-selector.cpp
	(sp_color_wheel_selector_get_type):
	Address harmless warning: add value_table initializer.

	* src/display/nr-arena-group.h, src/display/nr-arena-group.cpp
	(nr_arena_group_set_child_transform): Add NR::Matrix version.

	* src/verbs.cpp: Add g++-2.95 portability for hash_map.
	(Still using hash_map, though, not yet GHashTable.)

	* src/uri-references.h (operator=): Remove definition, forcing link
	errors for accidental usage.

	* src/sp-chars.h, src/sp-chars.cpp (sp_chars_add_element):
	Add NR::Matrix version.

	* src/selection.cpp (sp_selection_snappoints): Performance fix: add
	just 4 corner points, not a thousand.

	* src/print.h, src/print.cpp (sp_print_bind): Add NR::Matrix version.

	* src/inkscape.cpp: #include sys/types.h, sys/stat.h.

	* src/desktop.h (SP_DESKTOP_ZOOM): Define in terms of expansion()
	function instead of implicit casting.

	* src/arc-context.cpp, src/document.cpp, src/draw-context.cpp,
	src/selection.cpp, src/selection.h,
	src/sp-ellipse.cpp, src/sp-gradient.cpp, src/sp-image.cpp,
	src/sp-namedview.cpp, src/sp-offset.cpp, src/sp-rect.cpp,
	src/sp-spiral.cpp, src/sp-star.cpp,
	src/sp-text.cpp, src/bonobo/canvas-translator.cpp:
	Cleanups: greater conformance to Coding_Style, combine declaration
	and first assignment of some vars.

2004-02-08  MenTaLguY <mental@rydia.net>

	* src/interface.cpp: added "Autoraise Dialogs" menu item to toggle
	  the transient policy thing

2004-02-08 Bryce Harrington <brycehar@bryceharrington.com>

	* src/sp-namedview.cpp: This assert appears to serve no purpose
	  except to cause Inkscape to crash when the user chooses to
	  exit the app when the XML editor is open.  Commenting out the
	  assert doesn't seem to cause any particular untoward behavior.

	* src/xml/: repr.cpp, repr.h: Hacking in a check to prevent
	  deletion of the namedview entity, in order to close bug
	  Inkscape Bug #850971.

2004-02-07 Johan Ceuppens <jceuppen@easynet.be> 
	* src/libnrtype/nr-type-gnome.cpp src/libnrtype/nr-type-directory
	  src/libnrtype/nr-type-xft.cpp src/widgets/font-selector.cpp 
	  src/print.cpp src/module.h src/module.cpp
	  modules/gnome.cpp: activated --with-gnome-print
	  libnrtype/nr-type-primitives.h: removed possible gchar signedness
	  bug.

2004-02-07  Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/widgets/gradient-position.*: modified the gradient knot
	  editor to manipulate the knots, rather than rebuilding a gradient
	  from scratch each time.

2004-02-07  MenTaLguY <mental@rydia.net>

	* src/xml/repr.h, src/xml/repr-util.cpp:

	  cleaned up old code in #if 0 sections

	* src/display/canvas-arena.cpp, src/display/nr-arena-glyphs.cpp,
	  src/display/nr-arena-item.cpp, src/display/nr-arena-shape.cpp,
	  src/display/nr-arena.cpp, src/display/nr-arena.h:

	  cleaned up old code in #if 0 sections

	* src/desktop-affine.cpp, src/desktop.cpp, src/draw-context.cpp,
	  src/dropper-context.cpp, src/dyna-draw-context.cpp,
	  src/seltrans.cpp, src/sp-root.cpp, src/sp-text.cpp,
	  src/libnr/nr-macros.h, src/libnr/nr-types.h, src/libnr/nr-matrix.h,
	  src/libnr/nr-matrix.cpp, src/libnrtype/nr-font.cpp,
	  src/libnrtype/nr-rasterfont.cpp, src/livarot/PathSimplify.cpp,
	  src/livarot/ShapeSweep.cpp:

	  The array data member of NR::Matrix is now private; use the
	  [] operator to access elements individually.  More matrix routines
	  now pass by reference, and the casting operators to cast to NRMatrix
	  no longer leak memory (by allocating temporary objects that were
	  never freed).

	* src/modules/db.cpp: cleaned up some very grotty code that gcc 3.4
	  (rightly) refused to compile

	* src/xml/repr-action.cpp: undo of content changes was pulling
	  from the wrong union member (note to self: unions = evil)
	  This fixes the problem with text editing undos yielding the wrong
	  apparent undo order (bug #861462).

2004-02-05  bulia byak <bulia@users.sourceforge.net>

	* src/sp-text.cpp src/sp-text.h: Function to adjust letterspacing

	* src/style.cpp: Comments

	* src/text-context.cpp: Alt+<> adjust letterspacing

	* src/helper/png-write.cpp: PNG comment: Software: www.inkscape.org

	* src/text-context.cpp: Support keypad keys, keypad +/- always zoom even when editing

	* src/shortcuts.cpp: Enable keypad Del

	* src/event-context.cpp: Enable keypad arrows with Ctrl to scroll canvas

	* src/zoom-context.cpp src/rect-context.cpp src/arc-context.cpp src/star-context.cpp
	src/spiral-context.cpp src/draw-context.cpp src/dyna-draw-context.cpp
	src/text-context.cpp src/dropper-context.cpp: Swallow keypad up/down keys too,
	preventing them from focusing the zoom field

2004-02-05  Jon Phillips <kidproto@users.sf.net>

	*  src/dialogs/item-properties.cpp, src/dialogs/item-properties.h, 
	   src/dialogs/object-attributes.cpp, src/dialogs/object-attributes.h, 
	   src/dialogs/object-properties.cpp, src/dialogs/object-properties.h, 
	   src/dialogs/sp-attribute-widget.cpp, src/dialogs/sp-attribute-widget.h, 
	   src/dialogs/stroke-style.cpp, src/dialogs/stroke-style.h, 
	   src/dialogs/text-edit.cpp, src/dialogs/text-edit.h, 
	   src/dialogs/tool-options.cpp, src/dialogs/tool-options.h,
	   src/dialogs/transformation.cpp, src/dialogs/transformation.h,
	   src/dialogs/xml-tree.cpp, src/dialogs/xml-tree.h,
	   src/dialogs/xml-tree.cpp, src/dialogs/xml-tree.h: Converted 
	   the aforementioned to coding style.


2004-02-04  Ted Gould <ted@gould.cx>

	* src/desktop-snap.cpp: Removing some unused code that had
	been replaced.

2004-02-04  jon phillips <kidproto@user.sf.net>

	* COPYING, COPYING.LIB, ChangeLog, Makefile.am, Makefile.mingw, 
	  Makefile.mingw.common, NEWS, README, autogen.sh, configure.in, 
	  inkscape-cvs-0.ebuild, inkscape.1.in, inkscape.spec.in: 
	  all files converted from tabs to 4 spaces and cleaned up the 
	  coding style, tested, they build, and have committed.
	  
	* extension/*: I converted all files to coding style.

	* src/dialogs/align.cpp, src/dialogs/align.h, 
	  src/dialogs/desktop-properties.cpp, src/dialogs/desktop-properties.h, 
	  src/dialogs/dialog-events.cpp, src/dialogs/dialog-events.h: Converted 
	  the following files to use our coding convention.

	* src/dialogs/desktop-properties.cpp, src/dialogs/desktop-properties.h, 
	  src/dialogs/display-settings.cpp, src/dialogs/display-settings.h, 
	  src/dialogs/export.cpp, src/dialogs/export.h, 
	  src/dialogs/fill-style.cpp, src/dialogs/fill-style.h: converted the 
	  aforementioned files to new coding conventions.

2004-02-04  bulia byak <bulia@users.sourceforge.net>

	* src/style.h src/style.cpp src/sp-text.cpp: Read-only (so far) support for
	letter-spacing CSS property

	* src/event-context.cpp src/select-context.cpp src/draw-context.cpp
	src/dyna-draw-context.cpp src/knotholder.cpp src/nodepath.cpp src/object-edit.cpp:
	Trimming #if 0

	* src/text-context.cpp: Trimming #if 0, removing unneeded document_done

	* src/spiral-context.cpp src/star-context.cpp: Trimming #if 0, enabling ctrl-drag

	* src/dialogs/dialog-events.cpp src/preferences-skeleton.h: Added
	options.transientpolicy, 1 as default

	* src/preferences-skeleton.h: Increased options.keyscroll

	* src/dialogs/xml-tree.cpp: Fix for 852619, fix for failed asserts when selecting root

	* src/widgets/gradient-selector.cpp: Fix for 854514, 856682 

2004-02-02  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-snap.h, src/desktop-snap.cpp: Indicate that the snap_list
	functions don't modify the passed snap points.  For the wrapper versions,
	don't bother "copying back the new [actually unchanged] versions".

2004-01-31  bulia byak <bulia@users.sourceforge.net>

	* src/zoom-context.cpp src/rect-context.cpp src/arc-context.cpp src/star-context.cpp
	src/spiral-context.cpp src/draw-context.cpp src/dyna-draw-context.cpp
	src/text-context.cpp src/dropper-context.cpp: Fix to swallow up/down keys in
	contexts so as to prevent zoom field from activation, but allow ctrl with up/down
	keys to scroll canvas.

	* src/interface.cpp: Removed New Preview, Remove Transform commands. Added Tutorial
	command to Help.

	* src/preferences-skeleton.h: Reduced default stroke width to 1 pt.

	* src/help.cpp src/help.h: Tutorial command.

	* icons/tutorial.svg: First try at the tutorial. 

	* icons/Makefile.am: Adding tutorial.

	* src/nodepath.cpp: No-nodepath crash fixes.

	* doc/architecture.svg: Added namedview.

	* doc/default.svg: Removed, now reworked into icons/tutorial.svg.

	* src/event-context.cpp: Swapped scrollwheel modifiers.

	* src/xml/repr.cpp src/xml/repr-io.cpp: Small comment fix.

2004-01-31  Johan Ceuppens  <jceuppen@easynet.be>
	* src/verbs.cpp src/verbs.h: removed sp_fullscreen and put it in
	desktop.cpp and desktop.h as fullscreen
	* configure.in src/interface.cpp src/shortcuts.cpp src/inkscape.cpp 
	src/inkscape.h src/desktop.cpp src/desktop.h: 
	Added HAVE_GTK_WINDOW_FULLSCREEN as conditional compilation based
	on a function check for gtk_window_fullscreen in configure script

2004-01-30  Johan Ceuppens  <jceuppen@easynet.be>
	* src/verbs.cpp src/verbs.h: Added fullscreen verb. Fullscreen action
	is in SP_VERB_IS_ZOOM.
	* src/interface.cpp: Added fullscreen menuitem.
	* src/shortcuts.cpp: Linked in fullscreen shortcut (untested)
	* src/inkscape.cpp src/inkscape.h
	* src/desktop.cpp src/desktop.h: Added is_fullscreen gboolean to
	SPDesktop.

2004-01-30  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnr/nr-path.h, src/libnr/nr-path.cpp: Mark some functions
	as not modifying the matrix passed to them.

	* src/display/nr-arena-group.h, src/display/nr-arena-group.cpp
	(nr_arena_group_set_child_transform):
	Indicate that matrix isn't written to.

	* src/sp-item-transform.cpp (sp_item_rotate_rel, sp_item_scale_rel,
	sp_item_skew_rel),
	src/sp-marker.cpp (sp_marker_update, sp_marker_show_instance),
	src/sp-shape.cpp (sp_shape_bbox),
	src/sp-symbol.cpp (sp_symbol_update, sp_symbol_show, sp_symbol_print),
	src/display/nr-arena-shape.cpp (nr_arena_shape_update, nr_arena_shape_pick):
	Remove uses of nr_matrix_f_from_d.
	* src/libnr/nr-matrix.h, src/libnr/nr-matrix.cpp (nr_matrix_f_from_d),
	src/libnr/libnr.def:
	Remove now-unused nr_matrix_f_from_d.

	* src/nodepath.cpp (sp_nodepath_new),
	src/path-chemistry.cpp (sp_selected_path_combine, sp_selected_path_break_apart),
	src/selection-chemistry.cpp (sp_selection_apply_affine),
	src/selection.cpp (sp_selection_bbox_document),
	src/sp-item.cpp (sp_item_bbox_desktop, sp_item_private_snappoints),
	src/sp-pattern.cpp (sp_pattern_painter_new),
	src/modules/gnome.cpp (sp_module_print_gnome_fill),
	src/widgets/icon.cpp (sp_icon_image_load_svg):
	Remove uses of nr_matrix_d_from_f.
	* src/libnr/nr-matrix.h, src/libnr/nr-matrix.cpp (nr_matrix_d_from_f),
	src/libnr/libnr.def:
	Remove now-unused nr_matrix_d_from_f.

	* src/sp-item.h, src/sp-item.cpp (sp_item_set_i2d_affine_d,
	sp_item_i2doc_affine_d, sp_item_i2d_affine_d, sp_item_dt2i_affine_d):
	Merge _d version with non-_d version.  Update callers.

	* src/rubberband.h, src/rubberband.cpp (sp_rubberband_start):
	Add NR::Point version.
	Implement x,y version as call to NR::Point version.

2004-01-29  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-snap.h, src/desktop-snap.cpp (sp_desktop_dim_snap_list):
	Export this function.
	(sp_desktop_horizontal_snap_list, sp_desktop_vertical_snap_list):
	Remove these now-unused functions.
	* src/select-context.cpp (sp_selection_moveto):
	Use sp_desktop_dim_snap_list instead of
	sp_desktop_horizontal_snap_list, sp_desktop_vertical_snap_list.

	* src/select-context.cpp (sp_selection_moveto): Fix what appears to be
	a memory leak.

	* src/rubberband.h, src/rubberband.cpp (sp_rubberband_move):
	Add NR::Point version.

	* src/seltrans.h (sp_sel_trans_point_desktop): Add NR::Point version.

	* src/seltrans.h, src/seltrans.cpp (sp_sel_trans_point_desktop,
	sp_sel_trans_origin_desktop): Indicate that pointer isn't written through.

	* src/node-context.cpp, src/select-context.cpp:
	Make some globals static.

	* src/style.cpp (sp_style_read_pfloat, SPS_READ_IFLOAT_IF_UNSET, 
	SPS_READ_PFLOAT_IF_UNSET): Remove these unused functions/macros.

2004-01-28  MenTaLguY  <mental@rydia.net>

	* src/toolbox.cpp: aux toolbar now expands properly when torn off
	(fix for bug #874923)

	* src/libnr/nr-svp.cpp, src/libnr/nr-stroke.cpp,
	src/libnr/nr-svp-private.h, src/libnr/nr-svp.h,
	src/libnr/nr-svp-render.cpp, src/libnr/nr-svp-uncross.cpp:

	NRCoord -> NR::Coord

	* src/interface.cpp: removed Filters menu

	* src/modules/win32.cpp: the Win32 GDI uses BRGx, rather than
	RGBA, so we reverse the B and R bytes before blitting (fix
	for bug #887428)

2004-01-28  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/seltrans.cpp: Various cleanups, including addressing some
	warnings, and doing some more NR::Point'ification.

	* src/knot.h, src/knot.cpp (sp_knot_set_position): Change from
	pass-by-value to pass-by-const-reference.

	* src/geom.cpp (sp_intersector_line_intersection): Restore
	definition of previous local `cross' function, but "inline" the
	dot(rot90(a), b) definition.  This makes the definition conform to
	the documentation.
	* src/desktop-snap.cpp (sp_intersector_a_vector_snap): Undo a recent
	change that adapted to the previously-introduced bug in
	sp_intersector_line_intersection.

	* icons/Makefile.am: s/icons_dir/iconsdir/g for automake.
	* src/dialogs/Makefile.am, src/widgets/Makefile.am:
	s/icons_dir/iconsdir/g for consistency with icons/Makefile.am.

2004-01-27  jon phillips <jon@users.sourceforge.net>

	* Makefile.am: changed 'glade' globally to 'icons'

	* Makefile.mingw: changed 'glade' globally to 'icons'

	* config.h.mingw: changed 'INKSCAPE_GLADEDIR' to 'INKSCAPE_ICONS_DIR'

	* configure.in: changed 'glade' globally to 'icons'

	* Makefile.am: changed 'gladedir' to 'icons_dir', and fixed spacing, 
	changed 'glad_DATA' to 'icons_DATA'

	* glade/about_svg.tmpl: changed 'glade' globally to 'icons'

	* po/pl.po: changed 'glade' globally to 'icons'

	* src/config.h.win32: changed 'SODIPODI_GLADEDIR' to 'SODIPODI_ICONS_DIR'
	* src/dialogs/Makefile.am: changed 'gladedir' to 'icons_dir', changed 
	'-DINKSCAPE_GLADEDIR=\""$(gladedir)"\" \' to 
	'-DINKSCAPE_ICONS_DIR=\""$(icons_dir)"\" \'

	* src/dialogs/makefile.msc: changed 'gladedir' to 'icons_dir'

	* src/dialogs/object-properties.cpp: changed 'INKSCAPE_GLADEDIR' to 
	'INKSCAPE_ICONS_DIR'

	* src/dialogs/stroke-style.cpp: changed 'INKSCAPE_GLADEDIR' to 
	'INKSCAPE_ICONS_DIR'

	* src/widgets/Makefile.am: changed 'gladedir' to 'icons_dir'

	* src/widgets/icon.cpp: changed 'glade' globally to 'icons'

	* src/widgets/makefile.msc: changed 'gladedir' to 'icons_dir'


2004-01-26  bulia byak <bulia@users.sourceforge.net>

	* src/inkscape.cpp: failed assertion fix 

	* src/shortcuts.cpp: Linked/dynamic offset shortcuts, zoom to page width 

	* src/preferences-skeleton.h: Add inkscape:pageopacity, borderopacity

	* src/attributes.cpp,h src/sp-namedview.cpp,h: Add inkscape:pageopacity

	* src/dialogs/desktop-properties.cpp: Get/set inkscape:pageopacity in the page
	background color picker; reword and rearrange labels, spacing fix

	* src/dialogs/export.cpp: Use inkscape:pageopacity for export background; fix crash on
	exit

	* src/file.cpp: Remove debug output when exporting

	* src/sp-gradient.cpp src/svg/svg-path.cpp src/libnr/nr-compose.cpp src/dir-util.cpp
	src/desktop.cpp: Fixes from sodipodi

	* src/main.cpp: Fix PNG size limits when exporting from commandline 

	* src/style.cpp src/style.h: currentColor support from sodipodi

	* src/sp-gradient.cpp: Fix for 876614 from sodipodi

	* src/dialogs/desktop-properties.cpp: Convert meters to cm on writing (to make
	svg/@height and svg/@width SVG compliant)

	* src/sp-rect.cpp: Fix in description

	* src/dialogs/text-edit.cpp: Fix bug: undo broken when font applied to more than one
	text object. And another bug: do not apply text, only style, when more than one text
	object selected.

	* src/widgets/font-selector.cpp: Make font and style lists scroll automatically to
	show selected row

2004-01-26  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* config.h.win32: Remove this outdated and apparently-unused file.

	* src/livarot/Path-test.cpp: new file.
	* src/livarot/Makefile.am: New test program Path-test.
	Remove $(cflags) from INCLUDES.

	* configure.in: Adjust some things for our C to C++ transition.
	Add warning flags to CXXFLAGS if the compiler is g++.

2004-01-26 MenTaLguY <mental@rydia.net>

	* src/configure.in, src/Makefile.am, src/modules/Makefile.am,
	src/libnrtype/Makefile.am:
	merged patch #847856 for autotools builds on mingw/win32

	* src/sp-marker.h: added a URIReference subclass for markers

	* src/sp-path.cpp: fixed backwards-compatiblilty thing with
	(ancient) Sodipodi

	* src/xml/repr-action.c, src/xml/repr-action.h,
	src/xml/repr-private.h, src/xml/repr.cpp:

	made SPReprDoc::is_logging a C++ bool, and fixed sp_repr_rollback()
	to respect the no-logging-during-rollback invariant

2004-01-25 MenTaLguY <mental@rydia.net>

	* src/sp-object-repr.cpp, src/splivarot.cpp, src/sp-offset.cpp:
	changed "offset" to "inkscape:offset" for sodipodi:type

2004-01-24  bryce <brycehar@bryceharrington.com>

	* src/dialogs/stroke-style.cpp:  Hooking up marker buttons to
	underlying marker style setting code, & etc.  

2004-01-24  bulia byak <bulia@users.sourceforge.net>

	* src/document.cpp src/sp-namedview.cpp: Desensitize undo for changing document uri
	and for saving window geometry/viewarea into namedview

	* src/xml/repr-util.cpp: Increase precision in set_double_attr

	* src/arc-context.cpp: Call invoke_write when finishing arc, instead of setting attrs
	manually

	* src/sp-ellipse.cpp: Add write method to genericellipse; fix handling of start and
	end attrs; fix undo bug (877238)

2004-01-24  MenTaLguY <mental@rydia.net>

	* src/xml/repr-action.h, src/xml/repr-action.c: made the
	SPReprAction::act union anonymous, and reworked the transaction
	log optimization code.  sp_repr_coalesce_log() should be a bit
	faster now, and no more strcmp()s.

2004-01-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/livarot/Path.h, src/livarot/Path.cpp (Path::Affiche): remove
	unused function.
	Doing so allows removal of path_descr_moveto::pathLength field and the
	code for calculating its value.

	* src/livarot/Path.cpp (SizeForData): Change from private method to
	static function.
	Use new function roundup_div instead of `%' calculation.

	(Path::CloseSubpath): Remove loop that calculated pathLength.
	Consequently remove the no-longer-used argument.  Update callers.

	(Path::MoveTo, Path::LineTo, Path::CubicTo, Path::ArcTo,
	Path::TempBezierTo, Path::EndBezierTo, Path::IntermBezierTo,
	Path::BezierTo, Path::AddPoint, Path::PointAt,
	Path::PointAndTangentAt):
	Change some C-style casts to reinterpret_cast's.

	(Path::PointAt, Path::PointAndTangentAt): code transformations
	in preparation for merging some branches.

	* src/libnr/nr-types-test.cpp (main): Update for NR::Point .pt
	privateness change.

	* src/libnr/nr-svp-uncross.cpp (nr_segment_intersection): Mark some
	pointer arguments as not being written through.
	Add doc comment.

	* src/selection-chemistry.cpp (sp_matrix_d_set_rotate):
	Slight reduction in numerical error.
	(Also rename variables from `angle' to `angle_degrees' in several
	places.)

	* src/node-context.cpp (sp_node_context_root_handler):
	* src/object-edit.cpp (sp_arc_start_set, sp_arc_end_set,
	sp_spiral_inner_set, sp_spiral_outer_set):
	* src/select-context.cpp (sp_select_context_root_handler):
	* src/seltrans.cpp (sp_sel_trans_rotate_request):
	Fix for options.rotationsnapsperpi == 0.

	* src/event-context.cpp (sp_event_context_private_root_handler):
	Address warning.

2004-01-22  bulia byak <bulia@users.sourceforge.net>

	* src/attributes.h src/attributes.cpp: Added pagecolor, bordercolor, borderopacity (from sodipodi), pageshadow.

	* src/sp-namedview.h src/sp-namedview.cpp: Added reading page attributes.

	* src/desktop.cpp: Added setting page and border color (from sodipodi), pageshadow taken from namedview.

	* src/preferences-skeleton.h: Moved pageshadow into namedview, added page and border colors to the template.

	* src/dialogs/desktop-properties.cpp: Added page and border color selectors (from
	sodipodi), moved former document settings here.

	* src/verbs.cpp src/verbs.h: Removed document settings, renamed editing window into document options.

	* src/interface.cpp: Removed document settings command.

	* src/dialogs/document-properties.cpp,h src/dialogs/tool-attributes.cpp,h: Removed.

	* src/dialogs/object-properties.cpp: Removed size and position dialog.

	* src/dialogs/Makefile.am: Removed unused dialogs.

	* src/verbs.cpp src/verbs.h: Removed unused dialog verbs.

	* src/dyna-draw-context.cpp: Removed debug output.

	* src/node-context.h: New members for tracking left, right/alt, ctrl.

	* src/nodepath.cpp: Reorganize [] <> code, add update_repr (oops). Fix near-zero handles behavior with <>.

	* src/sp-item-transform.cpp: More correct transformation writing method: use each
	item's transform writer instead of simply adding transform= attribute.

	* src/document.cpp src/document.h src/document-undo.cpp: Added
	sp_document_ensure_up_to_date on each undoable action, fixes bbox problems (bug
	879249). Added callback to reset actionkey on each selection change, so that
	same-key actions on different objects are not lumped together.

	* src/selection-chemistry.cpp: Removed spurious sp_selection_changed calls from all
	transformation functions, coalesced [] <> rotates and scales.

	* src/select-toolbar.cpp: Coalesced spinbutton moves and scales. 

2004-01-21 MenTaLguY <mental@rydia.net>

	* src/desktop-snap.cpp, src/desktop.cpp, src/nodepath.cpp,
	src/object-edit.cpp, src/sp-namedview.cpp, src/sp-offset.cpp,
	src/splivarot.cpp, src/uri.h, src/dialogs/desktop-properties.cpp,
	src/libnr/nr-matrix.cpp, src/libnr/nr-matrix.h,
	src/libnr/nr-point-fns.cpp, src/libnr/nr-point-fns.h,
	src/libnr/nr-rect.cpp, src/libnr/nr-types.cpp, src/libnr/nr-types.h,
	src/livarot/Path.cpp, src/livarot/PathConversion.cpp,
	src/livarot/PathOutline.cpp, src/livarot/PathSimplify.cpp,
	src/livarot/PathStroke.cpp, src/livarot/Shape.cpp,
	src/livarot/ShapeMisc.cpp, src/livarot/ShapeSweep.cpp,
	src/livarot/ShapeSweepUtils.cpp:
	Cleanup; made data member of NR::Point private and replaced
	a few 'magic' [0] and [1] indices with the more meaningful NR::X
	and NR::Y.

2004-01-20 Jon Phillips <jon@protofunk.org>

	* src/help.cpp: I cleaned up the code a little according to our coding 
	standards and have/am adding comments to the help system.

2004-01-20  bulia byak <bulia@users.sourceforge.net>

	* src/selection-chemistry.cpp,h: New scaling utility functions

	* src/select-context.cpp: <> [] with modifiers to scale/rotate objects

	* src/nodepath.cpp,h: New functions for scaling and rotating nodes

	* src/node-context.cpp: <> [] with modifiers to scale/rotate nodes, left/right
	modifiers affect one of the two handles

	* src/node-context.h: New node context members for tracking left/right alt/ctrl

	* src/event-context.cpp: Use cursor coords when zooming by scrollwheel (fixme)

2004-01-19 MenTaLguY <mental@rydia.net>

	* src/dialogs/xml-tree.cpp: automatically scroll tree view to show selected item

2004-01-19 Jon Phillips <jon@protofunk.org>

	* src/desktop.cpp: Changed the document shadow to be an option. It is 
	option.pageshadow. I also made some wrapper code so that if the value
	is set to 0, then the constructor for page shadow is not 
	initialized.

2004-01-18  bulia byak <bulia@users.sourceforge.net>

	* src/sp-spiral.cpp,h: Moved defines to .h

	* src/object-edit.cpp: Reenabled restricted ctrl-rotation of spiral and arc. Added
	alt-drag in spiral to lock radius. Used PI/options.rotationsnapsperpi everywhere
	instead of PI/4.

	* src/selection-chemistry.cpp,h src/select-context.cpp: Enable [ ] keys to rotate
	selected objects by rotationsnapsperpi. Alt [ ] rotate by angular pixels.

	* src/event-context.cpp src/preferences-skeleton.h src/desktop.h src/zoom-context.cpp
	src/select-context.cpp: Behavior fixes, simplifications, & unifications in handling
	dragtolerance, rubberband, and shift/ctrl+selection

	* src/event-context.cpp src/preferences-skeleton.h src/desktop.h: Define & use new
	options for scrolling distances: keyscroll, wheelscroll

2004-01-18 MenTaLguY <mental@rydia.net>

	* src/uri.h, src/uri.cpp, src/uri-reference.h, src/uri-reference.cpp,
	src/sp-item.h, src/sp-item.cpp, src/sp-clippath.h,
	src/sp-gradient.h, src/sp-gradient.cpp, src/sp-mask.h,
	src/sp-item.h, src/sp-item.cpp:

	Reworked URIs to use libxml, and URIReferences to be specialized
	for particular object types.  Also switched gradients to using
	URIReferences.

2004-01-17 Jon <jon@protofunk.org>

	* src/desktop.cpp: Changed the document shadow to 1 pixel. It as
	set to 5, which is really cheesy. I changed it in the 
	constructor for SP_desktop_new in the function 
	sp_ctrlrect_set_shadow().

2004-01-17 Bryce <bryce@bryceharrington.com>

	* src/sp-root.cpp, src/sp-symbol.cpp:  Fixing NRMatrix's a -> &a
	so codebase will build.

	* Adding marker xpm's to Makefile.in so the button images display
	in the stroke style dialog (must do a make install)

2004-01-17 MenTaLguY <mental@rydia.net>

	* src/uri.h, src/uri.cpp, src/uri-references.cpp:
	new Inkscape::URI implementation using libxml URI stuff

2004-01-15  bulia byak <bulia@users.sourceforge.net>

	* src/preferences-skeleton.h: Added: tools.freehand.perncil tolerance,
	options.zoomincrement, rotationsnapsperpi, maxrecentdocuments

	* src/seltrans.cpp src/draw-context.cpp src/nodepath.cpp: Rotation snaps taken from
	preferences

	* src/inkscape.cpp: Max recent documents from prefs

	* src/desktop.cpp,h: New _keep_point zoom functions

	* src/event-context.cpp: Zoom in/out on (shift+)middle click, use
	options.dragtolerance, use options.zoomincrement, use _keep_point zoom functions

	* src/verbs.cpp: Use options.zoomincrement

	* src/zoom-context.cpp: Use options.zoomincrement, use _keep_point zoom functions

	* src/tools-switch.cpp: Fix for 865740

	* src/draw-context.cpp: Fix for 877188

	* src/nodepath.cpp: Swapped ctrl-click and ctrl-alt-click

	* src/knot.cpp src/knotholder.cpp src/nodepath.cpp: Knot colors, using XOR paint mode

	* src/widgets/widget-sizes.h src/desktop.cpp: Coord skip taken from define, limited
	height of the bottom bar

	* src/splivarot.h src/splivarot.cpp src/verbs.cpp src/verbs.h src/interface.cpp: Added
	dynamic and linked offsets to menu

	* src/knot.cpp src/select-context.cpp src/zoom-context.cpp src/draw-context.cpp:
	Unified within_tolerance handling; take curve fitting tolerance from preferences in
	freehand tool (default 10)

2004-01-15  MenTaLguY <mental@rydia.net>

	* glade/about.svg, glade/about_svg.tmpl, samples/inkscape.logo.svg:
	updated to match the current standard logos from
	inskcape_project/artwork

2004-01-15  Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/livarot/* an ungodly number of changes for improved use of
	NR::Point.  Const propagation.  Minor bugfixes.

2004-01-15  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/widgets/paint-selector.cpp (sp_paint_selector_set_color_alpha,
	sp_paint_selector_get_color_alpha, sp_paint_selector_system_color_set),
	src/widgets/sp-color-gtkselector.cpp (ColorGtkselector::_colorChanged),
	src/widgets/sp-color-notebook.cpp (ColorNotebook::_colorChanged,
	ColorNotebook::_updateRgbaEntry), src/widgets/sp-color-selector.cpp
	(ColorSelector::setAlpha, ColorSelector::setColorAlpha,
	ColorSelector::_updateInternals):
	Add assertions that alpha is in [0.0, 1.0].

	* src/libnr/nr-types.h, src/libnr/nr-rect.cpp (NR::Rect::corner):
	Change argument to unsigned, thus changing remainder operator to modulo
	operator, thus fixing bug for "negative" arguments (-1u etc.).

	* src/dialogs/stroke-style.cpp (sp_stroke_style_paint_update_repr): fix
	bug with unsigned->float alpha conversion.

	* src/nodepath.cpp (angle_normalize): Remove no-longer-used function.

	* src/draw-context.cpp (spdc_endpoint_snap_internal): Fix for
	negative options.rotationsnapsperpi.

2004-01-14  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/selection-chemistry.cpp (sp_selection_item_next,
	sp_selection_item_prev): cleanups, including moving some common
	code into new static function scroll_to_show_item.

	* src/widgets/font-selector.h, src/widgets/font-selector.cpp
	(sp_font_selector_set_font_fuzzy): Remove this unused function.

	* src/sp-text.cpp (sp_text_font_style_to_lookup),
	src/dialogs/text-edit.cpp (sp_text_edit_dialog_font_style_to_lookup):
	Move this duplicated function to src/libnrtype/font-style-to-pos.cpp
	as font_style_to_pos, rewriting & fixing its bugs in the process.
	Adjust callers.
	* src/libnrtype/font-style-to-pos.cpp, src/libnrtype/font-style-to-pos.h:
	New files.
	* src/libnrtype/Makefile.am: Mention the new files.
	* src/libnrtype/nr-type-pos-def.h: Make the default constructor fill in
	sensible values.
	Add constants for CSS weight numbers.

2004-01-13 MenTaLguY  <mental@rydia.net>

	* src/object-ui.cpp: 'Fill Settings' -> 'Fill and Stroke'

	* src/FilePath.cpp, src/FilePath.h: removed until we can rethink
	the file stuff

2004-01-13  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/libnrtype/nr-type-directory.h,
	src/libnrtype/nr-type-directory.cpp (nr_type_directory_lookup_fuzzy):
	Change second arg from char const* to NRTypePosDef.
	(nr_type_calculate_position) Move to nr-type-pos-def.cpp as implicit
	NRTypePosDef constructor from string.
	* src/libnrtype/nr-typeface.h: NRTypePosDef changed from struct to class.
	* src/libnrtype/nr-type-pos-def.h, src/libnrtype/nr-type-pos-def.cpp:
	new files.
	* src/libnrtype/Makefile.am: Mention the new files.

	* src/sp-text.cpp (sp_text_font_style_to_lookup): Fix segfault I
	introduced, reported by ishmal.

2004-01-12  bulia byak <bulia@users.sourceforge.net>

	* src/sp-rect.cpp: Removed coordinates from rect description

	* src/selection-chemistry.cpp: Delete fix from sodipodi, more statusbar diagnostics

	* src/prefs-utils.cpp,h: New functions for setting/getting string values

	* src/dialogs/export.cpp: Export dialog tracks selection and document changes (fix for
	853849). Export area, dpi remembered in prefs. Misc fixes and cleanups

	* src/preferences-skeleton.h: New options for export: exportarea, defaultxdpi

	* src/widgets/spw-utilities.cpp,h: New function for recursively searching widgets for
	key/value pair

	* src/svg/svg-affine.cpp: Ignore whitespace at the end of transform attribute - fix
	for 850943 (from sodipodi)

	* src/select-toolbar.cpp: Correctly handle zero dimensions - fix for 871552

2004-01-12  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-gradient.cpp (sp_gradient_repr_set_vector): "Fix" a memory
	leak.  However, I haven't worked out how to get this code to run, in
	order to check that the guessed replacement code is correct.  Instead
	I've inserted a g_warning and a TODO comment.

	* src/libnrtype/nr-type-directory.cpp
	(nr_type_calculate_position): Fix bug where `ultra bold' and `extra
	bold' were getting parsed as `bold'.
	(nr_type_distance_family_better, nr_type_distance_position_better):
	Rename to nr_type_distance_family and nr_type_distance_position
	respectively, and return just the distance.
	(nr_type_distance_family): Use g_ascii_strcasecmp instead of
	strcasecmp/stricmp.
	(nr_type_distance_family): Return unsigned instead of float.
	(nr_type_distance_position): Use double instead of float.

	* src/libnrtype/nr-rasterfont.cpp
	(nr_rasterfont_generic_glyph_area_get,
	nr_rasterfont_generic_glyph_mask_render): Suppress warning:
	s/CLAMP/MIN/ if the type is unsigned and the lower bound is 0.

	* src/helper/sp-canvas.cpp (paint): Cache canvas->{x0,y0} +
	GTK_WIDGET(canvas)->allocation.{width,height}.
	Remove some commented-out variables.

	* src/tools-switch.cpp, src/tools-switch.h: Make some functions static.
	(tools_num2name): Remove unused function.
	(tools_isactive): Add assertion of not accessing past the end of the
	array.

	* src/knot.cpp (sp_knot_handler): Fix bug where event wasn't
	getting consumed.
	Get rid of hypot macro.

	* src/svg/svg-affine.cpp (sp_svg_transform_write): Add assertions
	that buffer overflow hasn't occurred.

	* src/sp-text.cpp (sp_text_font_style_to_lookup),
	src/dialogs/text-edit.cpp (sp_text_edit_dialog_font_style_to_lookup):
	Slight restructuring using g_snprintf instead of less readable (&
	slightly less efficient in this case) strlen/memcpy.

	* src/sp-metrics.h: Increase accuracy of PT_PER_CM etc.
	Add FIXME comment.

	* src/dialogs/item-properties.cpp, src/display/nr-arena-shape.cpp:
	Address `-Wshadow' warnings.

	* src/nodepath.h, src/nodepath.cpp: Make some functions static.
	(sp_nodepath_node_deselect) Remove unused function.

	* src/dialogs/align.cpp (sp_quick_align_dialog): Switch to data-driven approach.
	Mark some things as static.
	(sp_quick_align_dialog_close) Remove unused function.
	(sp_align_arrange_clicked) Change aligns constant array from ints to
	doubles.  Adjust caller.

2004-01-11  Iain <iain@prettypeople.org>

	* src/modules/ps.cpp: Swap the Print and Cancel buttons around, and
	remove the separator.

2004-01-11  bulia byak <bulia@users.sourceforge.net>

	* src/desktop.cpp,h: New functions and SPDesktop members for maintaining lists of past
	and future zooms. New commands for toggling rulers and scrollbars, removed old and
	unused toggle_borders. Zoom spinbutton editable again, coord_status uses gtk_label
	instead of statusbar, misc cosmetics. Reduced sizes of the window bottom
	stuff. Save/restore the status of rulers and scrollbars in preferences.

	* src/preferences-skeleton.h: New options: showrulers, showscrollbars. Added default
	namedview for a 640x480 new document window.

	* src/widgets/spinbutton-events.cpp,h: Common spinbutton callbacks.

	* src/widgets/Makefile.am: Added spinbutton-events.

	* src/select-toolbar.cpp: Remove code into spinbutton-events.

	* src/widgets/widget-sizes.h: Added sizes for bottom stuff: zoom field, coord status,
	statusbar. Misc cosmetic changes.

	* src/verbs.cpp,h: New verbs for next/prev zoom. New verbs for toggling rulers and
	scrollbars.

	* src/sp-namedview.cpp: Cancel past zooms at the end of window_from_document.

	* src/shortcuts.cpp: `, shift-` to navigate the history of zooms. Ctrl-r, Ctrl-b to
	toggle rulers and scrollbars.

	* src/interface.cpp: Added next/prev zoom commands in the view menu. Added three
	toggle commands (grid, rulers, scrollbars) in the view menu.

	* src/widgets/ruler.cpp: Use fixed smaller font size, defined in widget-sizes. 

2004-01-10  bulia byak <bulia@users.sourceforge.net>

	* src/draw-context.cpp: Changed alt to shift for one-handle drag.

2004-01-10  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-events.cpp, src/desktop-snap.cpp, src/draw-context.cpp,
	src/gradient-chemistry.cpp, src/selection-chemistry.cpp,
	src/seltrans.cpp, src/sp-shape.cpp:
	Address some `-Wshadow' warnings.

	* src/attributes.cpp, src/color.cpp, src/inkscape.cpp,
	src/interface.cpp, src/helper/units.h, src/libnrtype/nr-type-xft.cpp,
	src/svg/svg-color.cpp, src/widgets/gradient-vector.cpp:
	Address some `-Wwrite-strings' warnings.

	* src/document.h, src/document.cpp,
	src/prefs-utils.h, src/prefs-utils.cpp,
	src/select-toolbar.cpp,
	src/helper/unit-menu.h, src/helper/unit-menu.cpp,
	src/libnr/nr-object.h, src/libnr/nr-object.cpp:
	Mark some pointer function arguments as not being written through.

	* src/path-chemistry.cpp (sp_selected_path_combine): Fix what appears
	to be a memory leak.  Change string concatenation from Omega(n^2) to
	Omega(n).

2004-01-09  bulia byak <bulia@users.sourceforge.net>

	* src/zoom-context.cpp: Added drag tolerance 

	* src/widgets/widget-sizes.h: Spinbutton steps defined here

	* src/widgets/spw-utilities.cpp,h: New function for recursively searching widgets for data

	* src/select-context.cpp: Alt-x activates aux toolbar 

	* src/select-toolbar.cpp: Implement esc, ctrl-z, up/down, pgup/pgdn, tab in the aux
	toolbar, identified default spinbutton for activating by alt-x

	* src/nodepath.cpp: Fix for uninitialized variable, reported by Bob Jamison 

	* src/draw-context.cpp: Fix for 873092; Never snap if hitting anchor

2004-01-08  bulia byak <bulia@users.sourceforge.net>

	* src/select-context.cpp: Fixed ctrl-drag (without breaking ctrl-click) 

	* src/verbs.cpp: Tooltip edits

	* src/desktop.cpp: Changed initial statusbar message (suggested by Daniel Diaz)

	* src/tools-switch.cpp src/nodepath.cpp src/selection.cpp: Edited statusbar messages,
	made them translatable

2004-01-08  Nathan Hurst  <njh@mail.csse.monash.edu.au>

	* src/helper, src/libnr and various: removed senescent code inside
	#if 0s and changed scoping of variables to be close to use.  minor
	performance tweeks.

2004-01-08  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/widgets/sp-color-notebook.cpp (getCurrentSelector): Address
	unsignedness warning (thus fixing a minor buglet).

	* Too many files to list (58 .cpp files, phew!): Address `missing
	initializer for member _GTypeInfo::value_table' warnings.

	* src/toolbox.cpp, src/helper/sp-canvas.cpp: Address miscellaneous
	other `missing initializer' warnings.

	* src/libnr/nr-values.h, src/libnr/nr-values.cpp: Add `Point
	component_vectors[2]' global constant (moved from desktop-snap.cpp).

	* src/sp-namedview.cpp:
	Combine SPNamedview .hguides & .vguides into .guides.
	Combine .gridspacingx, .gridspacingy scalars into .gridspacing Point.
	Consequently reduce copy&paste code both here & in callers.

	* src/sp-guide.h, src/sp-guide.cpp (sp_guide_moveto,
	sp_guide_position_set): Take a scalar (.position value) as argument,
	not a point.
	(sp_guide_position_from_pt): new function.  Adapt callers.
	(sp_guide_description): New function.
	(sp_guide_compare): Remove, not used.
	Change SPGuide.orientation (horizontal/vertical enum) to .normal (a
	Point to be used with dot product), as a step towards allowing
	arbitrary-direction guide lines.

	* src/desktop-events.cpp: Adapt to SPGuide change.
	Remove some #if 0'ed code that would otherwise require updating.

	* src/desktop-snap.h, src/desktop-snap.cpp: Convert some pass-by-value
	Point arguments to const references.  Unexport
	sp_desktop_dim_snap_list_scale.  Adapt to above changes.

	* src/dialogs/desktop-properties.cpp: Adapt to .gridspacing change.

2004-01-07  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/geom.h, src/geom.cpp (sp_intersector_line_intersection):
	change arguments from `Point' to `Point const &'.

	* src/libnr/nr-types.h: Move cross to its sole user, src/geom.cpp.

2004-01-06  bulia byak <bulia@dr.com>

	* src/widgets/spw-utilities.cpp,h: Recursive font setting functions 

	* src/widgets/widget-sizes.h: New: defines sizes and intervals, for toolbars etc.  

	* src/select-toolbar.cpp src/helper/unit-menu.cpp src/toolbox.cpp,h: Use
	widget-sizes.h and recursive font_set

2004-01-06  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-snap.cpp: Make the `horizontal' and `vertical'
	global constants be static.
	Similarly, make functions sp_intersector_a_vector_snap,
	sp_desktop_dim_snap_list static.

	* configure.in: Fix sigc++ checking code: add it to the existing
	PKG_CHECK_MODULES(INKSCAPE, ...)  list instead of modifying
	$CXXFLAGS,$LIBS.

	* distro: Remove some bashisms: change `function f {...}' to
	`f () {...}', and invoke self with `sh' rather than `bash'.

	Also change a strange-looking "tr '  ' ' '" to "tr -s ' '", as
	a guess as to the intended meaning.  (The actual meaning of the
	original is a noop.)

2004-01-06  bulia byak <bulia@dr.com>

	* src/document-undo.cpp src/document.h: Undo and redo now return gbooleans

	* src/selection-chemistry.{cpp|h}: sp_undo, sp_redo: new, with statusbar
	diagnostics. Duplicate command adds statusbar diagnostics, places duplicate
	into the source's parent instead of document root

	* src/verbs.cpp: Use sp_undo, sp_redo. Tooltip edits

	* src/toolbox.cpp src/toolbox.h: New aux_toolbox_space()

	* src/interface.cpp: New commands in view (cycling desktops) and dialogs (hide dialogs)

	* src/main.cpp: Removed unneeded include

	* src/select-toolbar.cpp src/select-toolbar.h: New selector aux toolbar with XYWH
	spinbuttons (taken mostly from the size&position dialog)

	* src/toolbox.cpp src/toolbox.h: Removed selector aux toolbar code from here

	* src/helper/unit-menu.cpp: Use abbreviations in the unit menu

	* src/widgets/sp-widget.cpp: Added checks that the inkscape object is valid before
	disconnecting SPWidget from it

2004-01-06 MenTaLguY <mental@rydia.net>

	* src/Makefile.am: removed monostd.h

	* src/sp-item.cpp, src/uri-reference.h, src/uri-reference.cpp:
	redid URI reference stuff a bit

2004-01-06 Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/desktop-snap.{h,cpp} is now built using NR::Point.

2004-01-06 Nathan Hurst <njh@mail.csse.monash.edu.au>

	* src/draw-context.cpp closing a segment now remains snapped.
	Lots of snapping fixes.

2004-01-05 MenTaLguY <mental@rydia.net>

	* src/uri-references.cpp, src/uri-references.h,
	src/uri.cpp, src/uri.h, sp-item.cpp:
	new URI code

2004-01-04 MenTaLguY <mental@rydia.net>

	* src/object-ui.cpp: flattened group submenu

	* src/uri-references.cpp: fixed initialization bug; for
	pre-existing references, the "release" signal wasn't being
	connected

2004-01-04  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/bezier-utils.cpp: Greater use of NR::Point instead of
	NRPoint.  (Readability improved as a result.)
	Get rid of now-unused sp_vector_add etc. functions.
	Get rid of MAXPOINTS fixed upper limit, in the process making more efficient.
	NewtonRaphsonFindRoot: handle the case where f'(u) <= 0. (Previously
	it would seek a local maximum instead of minimum in this case.)
	Rename lots of static functions according to our coding standards.
	Fix some documentation.
	Filter out any NaN points in the input.
	Change the iteration cutoff from the square of the requested error to
	3 * the requested error.  Change the "acceptable error" test from `<'
	to `<='.
	* src/helper/bezier_utils.h (sp_bezier_fit_cubic_full): change
	arguments from NRPoint to NR::Point.
	* src/sp-spiral.cpp: Adapt to sp_bezier_fit_cubic_full change.
	Greater use of NR::Point instead of NRPoint.

	* src/helper/curve.h, src/helper/curve.cpp (sp_curve_moveto,
	sp_curve_lineto, sp_curve_curveto): Add convenience wrappers that
	take n NR::Point's instead of 2*n gdoubles.

	* src/helper/curve.h, src/helper/curve.cpp: Indicate that certain
	functions don't modify the curve passed to them.

	* src/libnr/nr-types.h: operator[], operator+=, operator/=, unary operator-,
	operator==, operator!=: new.  Remove methods L1,L2,Linfty, move them to
	functions in nr-point-fns.{h,cpp}.  Rename Normalize to normalize with
	more sophisticated non-inline implementation in nr-types.cpp.
	* src/libnr/{nr-types.cpp,nr-point-fns.h,nr-point-fns.cpp}: new files.
	* src/libnr/nr-types-test.cpp: new unit test file.
	* src/libnr/Makefile.am: mention the new files.

	* src/Makefile.am: Add `check-recursive: all-recursive' dependency
	(and a comment with related discussion).

	* src/xml/Makefile.am: Append $(EXEEXT) to executables in TESTS.

	* src/verbs.cpp (sp_action_get_title): Get rid of fixed-sized buffer.

	* src/nodepath.cpp: Miscellaneous cleanups including fixing
	erroneous indentation, changing `g_list_length(foo) == 0' to `foo
	== NULL', removing unused function closest_of_three, specifying
	some functions as `static', adding doc.

	* src/inkscape.cpp (inkscape_remove_desktop): Change
	`g_slist_length (foo) == 0' to `foo == NULL'.

	* src/dyna-draw-context.cpp (fit_and_split_calligraphics): Fix the
	calculation of BEZIER_MAX_LENGTH.
	Add assertions that the corresponding buffers haven't been overrun.

2004-01-03  Ted Gould <ted@gould.cx>

	* src/helper/bezier-utils.cpp, src/inkscape-stock.h:
	Fixing some Doxygen errors.

2004-01-03  bulia byak <bulia@dr.com>

	* src/dialogs/dialog-events.{cpp|h}: Hide/unhide callbacks

	* all dialog files: Connected hide/unhide signals

	* src/inkscape.cpp src/inkscape.h: New functions for dialog hide, unhide, toggle

	* src/verbs.cpp src/verbs.h: New verb for dialog toggle

	* src/shortcuts.cpp: F12, quoteleft toggle dialogs

	* src/desktop.cpp: Zoom field width increased

	* src/node-context.cpp: Crash fix by Robert Crosbie

2004-01-03  MenTaLguY <mental@rydia.net>

	* src/inkscape.cpp, src/inkscape.h, src/main.cpp:
	fixes to preference loading

	* src/uri-reference.h: documented Inkscape::URIReference

	* src/sp-item.cpp: fixed double hunref problem

	* src/sp-item.cpp, src/uri-references.h, src/uri-references.cpp:
	reworked Inkscape::URIReference a little

	* src/sp-item.cpp: masks now use Inkscape::URIReference as well

2004-01-02  MenTaLguY <mental@rydia.net>

	* src/shortcuts.cpp: zoom in shortcut fix for german and other
	keyboards from schumaml

	* configure.in: added SigC++ 1.2 dependency

	* src/document-private.h, src/document.h, src/document.cpp,
	src/sp-item.h, src/sp-item.cpp, src/uri-reference.h,
	src/uri-reference.cpp: rewrote URI monitoring code using SigC++

	* src/inkscape.cpp: fix some portability issues

	* src/inkscape.cpp, src/widgets/icon.cpp, src/monostd.h: cleaning up
	more platform stuff

	* src/dir-util.cpp, src/dir-util.h, src/dialogs/export.cpp:
	remove sp_filename_from_path(); use g_path_from_filename instead

2004-01-02  Alexander Clausen <alex@skip86.com>

	* src/spsvgview.cpp src/inkview.cpp src/Makefile.am: re-enabled svg viewer,
	renamed to inkview to avoid name clash with spsvgview from sodipodi

2004-01-01  bulia byak <bulia@dr.com>

	* src/desktop.cpp: Pass keyboard events from desktop widget to event contexts (if
	there is no current item on the canvas); now all keys work regardless of mouse
	position, so long as the document window has focus.

	* src/verbs.cpp src/verbs.h: New verbs for switching desktops

	* src/inkscape.cpp src/inkscape.h: New functions for switching desktops

	* src/nodepath.cpp: Fix crash: Tab when no nodepath

	* src/shortcuts.cpp: Ctrl-Tab, Shift-Ctrl-Tab cycle desktops

	* src/node-context.cpp src/event-context.cpp src/select-context.cpp: Do not consume
	Ctrl-Tab/Shift-Ctrl-Tab in contexts. Explicitly run the corresponding verb in
	event-context.cpp because otherwise GTK gobbles it.

	* src/splivarot.cpp: Edits in statusbar error messages

2004-01-01  MenTaLguY <mental@rydia.net>

	* src/document-private.h, src/document.h, src/document.cpp,
	src/sp-item.h, src/sp-item.cpp, src/uri-reference.h,
	src/uri-reference.cpp:
	added code to handle notifications when uri/id mappings
	changed

	* src/desktop.cpp, src/style.cpp: compilation cleanups

	* src/libnr/nr-types.h: documented NR::Coord and NR::ICoord

2003-12-31  MenTaLguY <mental@rydia.net>

	* removed *S variants of NR structs

	* src/libnr/gen_nr_config.c: removed!

	* src/xml/repr.h, src/xml/repr-private.h, src/xml/repr-io.cpp,
	src/xml/repr.cpp: very preliminary comment support

	* configure.in, src/desktop.cpp, src/main.cpp: removed gtkmm
	dependency for now

2003-12-30  bulia byak <bulia@dr.com>

	* src/selection-chemistry.cpp: Grouping: Statusbar messages for nothing to group or
	only one object, prevent crash when trying to group objects with different parents,
	add new group to the members' common parent rather than to the document
	root. Ungrouping: ungroup all groups in selection, statusbar messages for nothing to
	ungroup.

	* src/node-context.cpp src/node-context.h src/knotholder.h src/knotholder.cpp
	src/nodepath.h src/nodepath.cpp src/document-undo.cpp: Add repr listener in node
	context recreating nodepath or knotholder when the repr was changed outside of the
	node editor, remove the change selection signal hack in document_undo, fixes many
	bugs.

2003-12-28  Daniel Borgmann  <spark@mayl.de>

	* src/main.cpp: Include gtkmm/main.h and gtkmmify the main loop

	* src/desktop.cpp: convert save confirmation dialog to Gtkmm

2003-12-28  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/Makefile.am: Try not to require Gnu make.

2003-12-27  Alexander Clausen <alex@skip86.com>

	* src/interface.{h,cpp} (sp_ui_error_dialog): new function.

	* src/file.cpp src/main.cpp src/dialogs/export.cpp src/interface.cpp: use it

2003-12-27  bulia byak <bulia@dr.com>

	* src/draw-context.cpp: Added drag_tolerance to bezier tool, messages to statusbar 

	* src/knot.cpp: Do not consume Esc when not escaping knot dragging 

	* src/select-context.cpp: Enable dragging objects selected within group

2003-12-27  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/bezier-utils.cpp: Simplifications & documentation.

2003-12-26  bulia byak <bulia@dr.com>

	* src/document.cpp: added rel2abs to sp_document_set_uri, simplified

	* src/document.cpp: removed rel2abs into dir-util

	* src/dir-util.cpp src/dir-util.h: moved rel2abs and abs2rel here

	* src/modules/svg.cpp: Cleaned up svg_save: removed extraneous setting of docbase and
	docname, moved uri_set before save, added comments

	* src/document.h src/document.cpp src/desktop.h src/desktop.cpp: item_at_point: add
	into_groups; group_at_point: new

	* src/selection.cpp: When selecting a group, deselect all its descendants to prevent
	double selection

	* src/select-context.cpp src/select-context.h: Added ctrl-click/ctrl-shift-click to
	select/add to selection regardless of grouping

	* src/verbs.cpp: 2 more mnemo changes 

2003-12-26  Nathan Hurst <njh@mail.csse.monash.edu.au>

	* libnr: moving towards a fully class based Point and Matrix.
	This change adds an initial sketch of matrix.

2003-12-26  MenTaLguY <mental@rydia.net>

	* configure.in: added Gtkmm dependency, removed AC_FUNC_MALLOC

2003-12-25  MenTaLguY <mental@rydia.net>

	* src/desktop.cpp: changed g_sprintf to g_strdup_printf

2003-12-25  Daniel Borgmann <spark@mayl.de>

	* src/interface.cpp src/verbs.cpp: Fixed a few more mnemonics (mostly
	duplicates) and changed shortcut labels to use uppercase letters like the 
	rest of the world. :-)

2003-12-25  Alexander Clausen <alex@skip86.com>

	* src/file.cpp src/main.cpp src/dialogs/export.cpp: Made error dialogs 
	and progressbar transient and non-resizable; made export file selector
	transient.

2003-12-24  bulia byak <bulia@dr.com>

	* src/select-context.cpp: Added statusbar update in a few places

	* src/interface.cpp: Changed order of keyboard modifiers. Split view and object menus.

	* src/verbs.cpp: A couple fixes in mnemonics to better match shortcuts

	* samples/tux.svg: Added missing sodipodi namespace, added namedview

2003-12-24  Alexander Clausen <alex@skip86.com>

	* src/file.cpp src/modules/system.cpp: Fix for 860199; returning NULL in
	sp_module_system_open when doc == NULL; added error dialog.

	* src/main.cpp: Add error dialog when file given on command line does not
	exist, and create an empty document in that case.

2003-12-24  MenTaLguY <mental@rydia.net>

	* src/verbs.cpp: renamed 'XOR' to 'Exclude' on the menu

	* src/object-ui.cpp: moved object-specific menuitems out onto the
	main context menu, instead of sequestered in their own submenus.

2003-12-24  Alexander Clausen <alex@skip86.com>

	* src/interface.cpp:
	Added partial DND (drop part only for now) for image/svg and image/svg+xml,
	and a tweak to make uri-dnd with konqueror work.

2003-12-24  Daniel Borgmann <spark@mayl.de>

	* src/interface.cpp src/verbs.cpp src/object-ui.cpp src/modules/menu.cpp:
	Added mnemonics and some HIGification

	* src/verbs.cpp: New: sp_action_get_title(), get action name without
	underscores (for use in dialog titles or other places without mnemonics)

2003-12-23  bulia byak <bulia@dr.com>

	* src/helper/sp-canvas.h: float-to-double fix

	* src/sp-namedview.h src/sp-namedview.cpp: New namedview attributes for zoom and
	window geometry; functions for updating them from a desktop and for setting up a
	desktop from these attributes

	* src/preferences-skeleton.h: new options.savewindowgeometry 

	* src/attributes.h src/attributes.cpp: New namedview attributes

	* src/desktop.cpp: Remove/comment out extraneous code. Float-to-double fixes, prevent
	sliding when zooming in at max zoom.

	* src/file.cpp src/main.cpp src/interface.cpp: Added document_from_window and
	window_from_document hooks to file opening and saving functions

	* src/document.cpp: New: inkscape_rel2abs() (based on g_rel2abs by Shigio Yamaguchi),
	store absolute filenames in document->uri. Fixed reading namedview template from
	preferences, fixed namedview template id, added comments.

	* src/nodepath.cpp: Ctrl + click node: delete node

	* src/desktop.cpp src/file.cpp src/file.h: New save confirm dialog (patch by spark)

2003-12-23  MenTaLguY <mental@rydia.net>

	* src/desktop.cpp: shortened rulers to canvas dimensions for now

	* src/main.cpp, src/Makefile.am: renamed DATADIR to INKSCAPE_DATADIR
	for the remaining platforms

2003-12-23  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/desktop-snap.h, src/desktop-snap.cpp (all functions):
	Indicate that the given point(s) aren't modified by these functions.

2003-12-22  bulia byak <bulia@dr.com>

	* src/nodepath.cpp: Ctrl + Alt + click node: toggle smooth/cusp/symmetric.

	* src/select-context.cpp: No more snapping back to the origin because of drag
	tolerance (once you trespass the drag tolerance limit once, it does not affect you
	anymore).

	* src/knot.cpp: Used global drag tolerance, no snapping to the origin.

	* src/node-context.cpp: Click outside of nodepath deselects. Added drag tolerance for
	selecting non-selected paths by click. Removed drag_escaped - there's no dragging to
	escape in node context (only in knot).

2003-12-22  bulia byak <bulia@dr.com>

	* src/nodepath.cpp src/nodepath.h>: restrict control handle movement with ctrl, alt,
	shift; utility functions for radial coordinates; fixed several crashes when nodepath
	operations are called but there's no nodepath

	* src/desktop.cpp: filled in sp_desktop_set_coordinate_status implementation, added
	comment

2003-12-22  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/helper/bezier-utils.cpp (sp_darray_center_tangent,
	sp_darray_left_tangent, sp_darray_right_tangent),
	src/helper/bezier-utils.h, src/sp-spiral.h, src/sp-spiral.cpp
	(sp_spiral_get_tangent):
	Make these functions static.

	* src/helper/bezier-utils.cpp (GenerateBezier): Back out accidental
	commit of inserted g_assert(!isnan(bezier coordinate)).  (Having a NaN
	bezier coordinate is usually a problem, perhaps worth warning about,
	but it's hard to make it impossible, so it shouldn't be g_assert.)
	Reported by bulia byak.

2003-12-22 Nathan Hurst <njh@mail.csse.monash.edu.au>

	* Added a new class NR::Point which will replace NRPoint
	throughout the code, and replace things like .cx, .cx in the
	circle structure.

2003-12-21  MenTaLguY <mental@rydia.net>

	* Finally cleaned up the linker issues

2003-12-21  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/Makefile.am (inkscapelib_src):
	src/livarot/Makefile.am (libvarot_a_SOURCES): 
	Add some header files to SOURCES, so that `make distcheck' works.

	* src/style.cpp (sp_style_read_ipaint): Skip leading whitespace.
	Fixes #853804.  Improves rendering of Dia-exported SVG.

2003-12-20  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/sp-spiral.cpp (sp_spiral_set): Fix clamping of t0 value: change
	min from -1.0 to 0.0 as per all other t0 clamps and as required in some
	circumstances by sp_spiral_get_xy.
	(sp_spiral_fit_and_draw): Avoid useless adjacent dups in point sampling.

	(sp_spiral_fit_and_draw, sp_spiral_set_shape): Call proper tangent
	routine instead of trying to estimate from samples.
	(sp_spiral_get_tangent): New function.

	* src/helper/bezier-utils.cpp (sp_bezier_fit_cubic): Implement as a call
	to sp_bezier_fit_cubic_r.
	(sp_bezier_fit_cubic_full): Mark *tHat1 and *tHat2 as const.
	(sp_bezier_fit_cubic_full, ChordLengthParameterize): Add minimal
	handling for the case where the input data is a zero-length path.
	(NewtonRaphsonRootFind): If "improved" value is NaN or +/-inf then
	return the original.

	* src/libnr/nr-macros.h (CLAMP): Change the behaviour if the first
	argument is NaN: previously it would return NaN, now it returns the
	requested lower bound.  Document the behaviour.  Add an assertion that
	the requested lower bound <= the requested upper bound.

	* src/libnrtype/nr-type-ft2.cpp (nr_typeface_ft2_lookup): Change apparently-erroneous
	arguments to CLAMP, and add a FIXME comment indicating that the new arguments are
	just a guess as to the original intent.

2003-12-20  MenTaLguY <mental@rydia.net>

	* src/help.cpp, glade/about_svg.tmpl, glade/about.svg:
	fixed version display in about box

	* src/desktop.cpp, src/desktop.h, src/document.cpp, src/document.h:
	added sp_desktop_item_at_point()

2003-12-19  bulia byak <bulia@dr.com>

	* src/sp-item.cpp src/sp-item.h: new sp_item_get_arenaitem (by mental)

	* src/main.cpp src/file.cpp src/file.h src/dialogs/export.cpp: export UI improvements
	(patches from the tracker)

	* src/select-context.cpp: shift-click selection is now in root_handler, uses
	sp_document_item_at_point(); changed shift-rubberband selection to always select
	instead of toggle

	* src/document.h src/document.cpp: wrong order of arguments in overlap() fixed; new:
	sp_document_item_at_point(), uses sp_item_get_arenaitem

	* src/Makefile.am: fix: ps.c -> ps.cpp

	* src/nodepath.cpp: dragging node with ctrl+alt restricts it to the directions of its
	handles and their perpendiculars

2003-12-19  MenTaLguY <mental@rydia.net>

	* Fixed most shortcut key regressions from the SPAction rework

	* Renamed the Inkscape class (struct really) to Inkscape::Application; we can now
	use the Inkscape namespace.

	* src/toolbox.cpp, src/helper/action.cpp, src/helper/action.h:
	SPActions now know their desktop, and toolbar buttons get it assigned correctly

	* src/desktop.cpp, src/interface.h, src/interface.cpp, src/verbs.cpp:
	Verbs now use the desktop associated with an action rather than SP_ACTIVE_DESKTOP

2003-12-18  Jon A. Cruz <jon@joncruz.org>

	* fix for 859133; Reduced number of generated events.

2003-12-18  Jon A. Cruz <jon@joncruz.org>

	* src/widgets/sp-color-gtkselector.cpp: fix for 859131; Changed descriptive name of GTK+
	selector.

2003-12-18  MenTaLguY <mental@rydia.net>

	* First steps towards making actions per-view

2003-12-17  Jon A. Cruz <jon@joncruz.org>

	* src/widgets/sp-color-notebook.cpp: fix for 859128; changed selectors to grow when
	given more space.

2003-12-17  Jon A. Cruz <jon@joncruz.org>

	* Converted color selectors to C++ classes.

2003-12-18  Nathan Hurst <njh@csse.monash.edu.au>

	* Merged NRPointF and D, similarly Matrix and Rect.

2003-12-18  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/toolbox.cpp: re-added spiral button (reverting MenTaLguY's change).

2003-12-17  bulia byak <bulia@dr.com>

	* src/xml/repr-io.cpp src/xml/repr.h: fix to suppress formatting whitespace when
	serializing text and its children

	* src/select-context.cpp: shift now prevents dragging objects, creating rubberband
	instead

2003-12-17 Nathan Hurst <njh@csse.monash.edu.au>

	* provided some initial thoughts on how to do Points uniformly across inkscape.  geom.h
	* partial currying of zoom menu

2003-12-17  MenTaLguY <mental@rydia.net>

	* src/toolbox.cpp: removed spiral button

2003-12-16  bulia byak <bulia@dr.com>

	* src/nodepath.cpp src/nodepath.h: node drag is now restricted to hor/vert by ctrl

2003-12-16  bulia byak <bulia@dr.com>

	* src/seltrans.cpp: fix for 860201; ctrl restricts rotation by 15 degrees (from
	sodipodi); used new status display function

	* src/sp-text.cpp: removed non-printable char error into text-context, removed
	extraneous assignment

	* src/verbs.cpp: typo fix

	* src/knot.cpp: in cancelling drag, use the knot's desktop instead of active; add
	statusbar flash

	* src/draw-context.cpp: changing useful messages to statusf_flash, removing useless
	debug output

	* src/nodepath.cpp: statusbar error message if joining nodes fails; expanded
	update_statusbar

	* src/select-context.cpp: statusbar flash when esc cancels selection or drag

	* src/selection.cpp: expanded update_statusbar

	* src/text-context.cpp: used statusf_flash for no-break space, added non-printable
	char error

	* src/tools-switch.cpp: added default statusbar message for each tool

	* src/desktop.cpp: new handler for status_set, with timeout; initialize message in
	statusbar

	* src/view.cpp src/view.h: status_set signal: added msec, removed isdefault; added
	_flash and _error functions for temporary statusbar display; added docs

2003-12-14  Ted Gould <ted@gould.cx>

	* src/widgets/button.cpp, src/helper/action.h, src/helper/action.cpp,
	src/verbs.h, src/verbs.cpp, src/toolbox.cpp, src/shortcuts.h,
	src/shortcuts.cpp, src/interface.h, src/interface.cpp:
	Adding in a sp_verb_t to identify verbs to make later conversions
	easier.  Also adding an arguement to the perform function of
	SPActionEventVector so that data can be passed to modules (when
	they're converted to action/verb).

2003-12-14  MenTaLguY <mental@rydia.net>

	* src/view.h, src/view.c: added new utility things for setting status

	* src/draw-context.c, src/text-context.c, src/view.c, src/view.h:
	retired sp_status_display() and sp_status_clear()

2003-12-14  bulia byak <bulia@dr.com>

	* src/verbs.h src/verbs.c: changed 'offset' to 'outset' (more logical), added simplify
	path command

	* src/interface.c: added sp_key_name to make shortcuts more readable, added simplify
	path command, regrouped commands more logically

	* src/shortcuts.c: changed shortcuts for boolean ops, readability, minor cleanups

	* src/inkscape.c: increased max length of recent documents list to 15, fixed trimming
	the list

	* src/seltrans.c: fixed crash when scaling very small objects at max zoom

2003-12-12  MenTaLguY <mental@rydia.net>

	* doc/Makefile.am, Makefile.am, configure.in: include doc/
	subdirectory in distribution tarballs

	* src/widgets/icon.c: final tweaks for getting icon highlights
	right on buttons (temporary hack, hopefully)

	* src/splivarot.cpp: compilation fix

	* src/widgets/sp-color-notebook.c: minor tweak so selector menu
	is a little more obvious

2003-12-12  bulia byak <bulia@dr.com>

	* src/svg/svg-path.c src/desktop.h src/libnr/gen_nr_config.c src/libnr/nr-object.c
	src/libnr/nr-types.h: made all floats doubles and all shorts ints in libnr; maximum
	zoom is increased to 256; SVG paths are stored with 8 digits precision (was 6)

2003-12-11  bulia byak <bulia@dr.com>

	* src/node-context.c adding node edit statusbar updates

	* src/selection.c: update statusbar only if selector is active

	* src/tools-switch.c: update statusbar when selector is activated

	* src/nodepath.c src/nodepath.h: function for node edit statusbar display; fixes for
	several tab-cycling and node-deleting bugs

	* src/sp-path.c: added description for SPPath (used in statusbar display)

	* src/draw-context.c: moved some messages from console to statusbar

	* src/view.c src/view.h: utility functions for statusbar display

	* src/text-context.c: statusbar display for unimode

2003-12-10  Ted Gould <ted@gould.cx>

	* configure.in: Changing to 0.37cvs

2003-12-10  bulia byak <bulia@dr.com>

	* src/verbs.c: SELECT_ALL is now tool-sensitive, comments

	* src/shortcuts.c: ctrl-a for the SELECT_ALL global verb; h and v for flips

	* src/interface.c: split edit menu into edit and object

	* src/node-context.c: removed ctrl-a, now taken care of by the global verb

	* src/nodepath.c: select_all silently returns if given null arg

	* doc/keyboard-shortcuts.txt: new shortcuts from wiki

2003-12-09  bulia byak <bulia@dr.com>

	* src/helper/png-write.c: fix for png comments (from sodipodi)

	* src/nodepath.c: fix for 856700, 856686; a better control point positioning for
	join_segment

	* src/shortcuts.c: fix default shortcut for star tool

	* src/prefs-utils.c src/prefs-utils.h: new *_limited functions to get data guarding
	against through-the-roof values

	* src/select-context.c src/node-context.c: using *_limited functions to get preference
	values

	* src/document-undo.c: fix in sp_document_maybe_done to combine same-key steps

	* src/selection-chemistry.c src/nodepath.c: put subsequent same-direction arrow-key
	movements into one undo step

	* src/sp-text.c src/sp-text.h: removed the preservews argument of sp_text_insert

	* src/text-context.c src/text-context.h: if there's no text object selected, keys are
	not consumed; fixed passing unconsumed keys to parent context; any non-hex-digit now
	cancels unimode

	* src/dialogs/transformation.c: re-fixing pjrm's fix properly

2003-12-08  bulia byak <bulia@dr.com>

	* src/sp-text.c: fixed typing non-ascii chars; copied (with fixes) treatment of
	xml:space from sodipodi 0.33

	* src/sp-text.h: small fix from sodipodi 0.33

	* src/text-context.c: copied sp_text_context_preedit_reset and related code from
	sodipodi 0.33; xml:space='preserve' is added to newly created text objects; esc
	deselects; uncatched keys are passed on; misc fixes

2003-12-08 MenTaLguY <mental@rydia.net>

	* src/widgets/button.c: put errors to rest for now

	* src/document-undo.c: removed code to limit undo list length

2003-12-07 MenTaLguY <mental@rydia.net>

	* src/widgets/button.c: fixed unsignedness warning

2003-12-06  bulia byak <bulia@dr.com>

	* src/dialogs/align.c: tooltip fix (from sodipodi)

	* src/libnr/nr-stroke.c: fix for 853827, rendering of short paths (from sodipodi)

	* src/sp-text.c src/sp-text.h src/text-context.c: enabled home/end in text (from sodipodi)

	* src/document-undo.c: increased MAX_UNDO to 512

	* src/file.c src/dialogs/export.c: fix for 851012: the smallest possible exported png
	is now 1x1

	* src/widgets/font-selector.c: fix for 851789: no exponential display in font size field

2003-12-06 MenTaLguY <mental@rydia.net>

	* src/desktop.c: permit the canvas widget to take keyboard focus

	* src/widgets/button.c, src/widgets/button.h: reworked perform
	callback as separate callback, so we can use
	g_signal_handlers_{un,}block...() on it rather than the stupid
	semaphore counter thing I had originally.

	Also switched to sp_icon_new() instead of sp_icon_new_scaled(), as
	otherwise the small icons were too small (but the large icons are
	now smaller than they could be... darn it... ><)

2003-12-05 Bryce W. Harrington <brycehar@bryceharrington.com>

	* style.*, sp-path.*, sp-shape.*, more:  Hooking up preliminary
	support for path markers (arrowheads).  Also adding
	documentation, fixing if statement style, etc.

2003-12-05 MenTaLguY <mental@rydia.net>

	* src/widgets/icon.c, src/widgets/button.c, src/widgets/button.h, src/toolbox.c:
	Reworked SPButton to derive from GtkToggleButton.

	* src/svg/svg-length.c, src/helper/units.c: removed #ifdef WIN32 insanity

	* src/Makefile.am, src/extension.c,
	src/extension.h, src/extensions-skeleton.h,
	src/main.c, src/inkscape.c, src/toolbox.c: Removed dead code left
	over from first extensions implementation

	* configure.in, src/main.c: removed freebsd-specific test and just check for fpsetmask() instead

	* src/verbs.c: fixed quit icon

2003-12-04  bulia byak <bulia@dr.com>

	* src/toolbox.c: added convert to curves button, cosmetic changes in aux toolbar

	* src/text-context.c: made text editing via xml editor undoable

	* src/nodepath.c: new functions to duplicate node, fixes to node_break and selection
	functions, new (presently unused) functions for saving/restoring node selection

	* src/node-context.c: shift-d to duplicate node, all keys now work regardless of capslock

	* src/document-undo.c: temp fix: undo emits selection_changed signal for node editor
	to update display

	* src/selection.c: new function without arguments to emit change_selection signal

	* src/selection.h: new function without arguments to emit change_selection signal

	* src/nodepath.h: new functions to duplicate node, new (presently unused) functions
	for saving/restoring node selection

2003-12-04  MenTaLguY <mental@rydia.net>

	* src/desktop.c: rearranged toolbars so aux toolbar is topmost
	* src/toolbox.c: made toolbars detachable

2003-12-02  bulia byak <bulia@dr.com>

	* src/file.c: made open and save dialogs modal and transient

2003-12-02  bulia byak <bulia@dr.com>

	* src/interface.c: removed tool attributes command
	* src/preferences-skeleton.h: added branch for export dialog
	* src/file.c: made import dialog transient
	* src/verbs.c: changed some dialog names and tooltips
	* src/shortcuts.c: changed shortcuts for transform and text dialogs
	* src/dialogs/display-settings.c: fixed dialog title
	* src/dialogs/export.c: made unsinkable, remembering size and position, added label
	for filename

2003-11-30 MenTaLguY <mental@rydia.net>

	* src/xml/repr-io.c, src/attributes.c, src/attributes.h,
	src/sp-object.h, src/sp-object.c: merged basis for Oka's
	xml:space support

	* src/toolbox.c: made tool buttons larger, aux buttons smaller

	* src/document-undo.c: fixed bug with undo/redo past the
	beginning/end of the undo history

2003-11-29  bulia byak <bulia@dr.com>

	* src/selection-ch emistry.c src/selection-chemistry.h src/verbs.c src/verbs.h
	src/shortcuts.c src/interface.c: new function, verb, shortcut (shift-ctrl-v), menu
	command: paste style (apply the style of copied object to selection). If more than
	one object is copied, the first one in the clipboard list is taken as the source of
	the style.

2003-11-30  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/style.c (sp_style_merge_from_parent): Fix some
	unsigned-related bugs with "font-weight=lighter",
	"font-stretch=narrower", "opacity=...".

	* src/modules/system.c (sp_module_system_save): Partial fix for
	unrecognized filetype: show a CRITICAL warning instead of
	segfaulting due to uninitialized var.

	* src/document.c (sp_document_new), file.c (file_open_ok,
	sp_file_open_dialog, sp_file_save_dialog, sp_file_do_import),
	main.c (sp_main_console), src/module.c (sp_module_finalize,
	sp_module_input_finalize, sp_module_input_build,
	sp_module_output_finalize, sp_module_output_build),
	src/sp-anchor.c (sp_anchor_set), src/sp-image.c (sp_image_set),
	src/sp-text.c (sp_string_release, sp_string_read_content,
	sp_string_set_shape), src/sp-use.c (sp_use_release), src/style.c
	(sp_style_unref, sp_style_merge_property,
	sp_style_merge_from_parent, sp_text_style_unref,
	sp_style_read_istring), src/bonobo/embeddable-document.c
	(sp_bonobo_stream_read, sp_embeddable_document_ps_save),
	src/dialogs/stroke-style.c (sp_stroke_style_scale_line),
	src/dialogs/text-edit.c (sp_text_edit_dialog_text_changed),
	src/helper/sodipodi-ctrl.c (sp_ctrl_build_cache),
	src/modules/ps.c (sp_ps_print_image),
	src/widgets/font-selector.c (sp_font_preview_set_phrase),
	src/widgets/gradient-image.c (sp_gradient_image_size_allocate),
	src/xml/repr-action.c (coalesce_chgattr, coalesce_chgcontent,
	free_action), src/xml/repr.c (repr_finalize, sp_repr_merge):
	Minor cleanup: replace `if (POINTER_EXPR) g_free (POINTER_EXPR)'
	with the simpler (more readable) `g_free (POINTER_EXPR)'.

2003-11-29 Kees Cook <inkscape@outflux.net>

	* src/utest/.cvsignore: adding "Makefile"
	* src/desktop.c: sp_desktop_pop_event_context could use uninit'd *ec
	* src/desktop.h: missing declaration of sp_desktop_zoom_page_width
	* src/libnrtype/nr-rasterfont.c: give *spx and srs default values
	* dialogs/dialog-events.c: remove unused *w and *dtw

2003-11-29 MenTaLguY <mental@rydia.net>

	* src/interface.c: switched to GNOME HIG menu style

	* src/toolbox.c: gave the aux toolbox a fixed (minimum) size so
	the workspace will jiggle less as different tools are selected.

	* src/utest/Makefile.am, src/utest/utest.c, src/utest/utest.h,
	src/xml/Makefile.am: turned the utest stuff into a giant .h
	file again, which hopefully won't confuse things like the .inc
	extension did.

2003-11-29  bulia byak <bulia@dr.com>

	* shortening tooltips, new verb and menu command for zoom to page width 

2003-11-29 Bryce Harrington <brycehar@bryceharrington.com>

	* README:  Updating "Sodipodi" to "Inkscape", removing some
	obviously obsolete bits.

	* inkscape.1.in, inkscape.pod:  Totally rewriting manpage from
	scratch.  The old one appeared to be for some other application,
	because it was just a list of options, 90% of which aren't
	implemented.  I chose to do it in POD for convenience, but hand
	edited the 1.in file to remove bits about "Perl Documentation",
	etc.

	* General:  Some fixes to recently added code that broke the g++
	compile.

2003-11-29  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* src/utest/Makefile.am, src/utest/utest.c, src/utest/utest.inc,
	src/utest/utest.h, src/xml/Makefile.am, src/xml/repr-action-test.c:
	Split utest.inc into utest.h and utest.c.  Update users.

	Make utest.c,utest.h formatting conform more to doc/coding-style.txt.

	Have utest.c built into libutest.a (see src/utest/Makefile.am
	comments).

	* src/xml/repr-action.c (reverse_log): Add doc comment.  Rename some vars.

	* src/xml/repr-action.c (sp_repr_replay_log, sp_repr_undo_log),
	src/xml/repr-action.h, src/document-undo.c (sp_document_cancel,
	sp_document_redo, sp_document_undo): Remove the unused doc
	argument to sp_repr_replay_log, sp_repr_undo_log.  Update callers.

2003-11-28  Peter Moulder  <pmoulder@mail.csse.monash.edu.au>

	* extensions/ai_input.inkmod, extensions/dia.inkmod,
	extensions/svgz_input.inkmod, extensions/svgz_output.inkmod:
	Change the filename extension from `foo' to `.foo'; i.e. the
	filename must end in `.foo' to be considered a match, rather
	than merely ending in `foo'.

	It appears that the sole users of this data are in src/system.c
	(open_internal, save_internal).

	I've found no documentation needing updating, according to
	`rgrep -i extension doc'.

	* src/system.c (open_internal, save_internal): Minor effec tweaks:
	fewer strlen calculations.

	* src/dialogs/transformation.c: Fix uninitialized-var bug.

2003-11-28 MenTaLguY <mental@rydia.net>

	* src/document.c, src/document-undo.c, src/document-private.h:
	renamed SPDocumentPrivate::undo_size to ::history_size.  Fixed
	long-standing undo bug, where maybe_done() would neglect to
	start a new transaction if the previous transaction log were
	empty.

	* src/xml/repr-action-test.c, src/utest/utest.inc: made test
	control structure a little clearer (hopefully) by hiding it.
	Also some initial Doxygenification of the unit testing stuff.

	* src/Makefile.am: added utest/ subdir

	* doc/architecture.svg: reworked architecture diagram a bit

	* doc/class-hierarchy.dia: added first shot at documenting the
	class hierarchy in Dia

	* src/modules/svg.c, src/modules/win32.c: change "...with
	xmlns:sodipodi namespace" to "...with extension namespaces"

	* src/xml/repr-action.c: fixed log optimizer to check
	SPReprAction::type before coalescing adjacent actions

2003-11-27 Bryce <bryce@osdl.org>
	* doc/architecture.svg: Added architecture.svg to try to capture
	the subsystems at a block layer level.  Defining colors, working
	up basic structure, etc.
	* Adding defines, functions, etc. for allowing markers into
	inkscape-stock.h, sp-marker.*, sp-path.c, sp-shape.h, style.*,
	and dialogs/stroke-style.c
	* Added some new UI utility functions to spw-utilities.* and
	changed dialog/stroke-style.c to use them, in order to simplify
	redundancies in the code a bit.

2003-11-27 MenTaLguY <mental@rydia.net>

	* src/desktop.c: the coord status bar area should not have a
	resize handle

2003-11-27 bulia byak <bulia@dr.com>

	* all dialogs remember size and position across sessions
	* all dialogs are unsinkable (re-transientizing to the current document)
	* all dialogs are closeable by ctrl-f4 and ctrl-w, defocusable by esc
	* dialogs titles unified, added shortcut display in the titles

2003-11-27 MenTaLguY <mental@rydia.net>

	* src/utest/Makefile.am, src/utest/utest.inc: new minimalist
	unit testing framework

	* src/xml/Makefile.am, src/xml/repr-action-test.c: some tests
	for the XML transaction stuff

	* src/desktop.c: reshuffled the widgets, switched to an embedded
	toolbox, switched to using real GtkStatusbars for the status bar,
	and (for the present) nuked the body of
	sp_desktop_set_coordinate_status() since it had been #ifdeffed
	out for ages anyway

	* src/desktop.h: removed another constant #ifdef

	* src/widgets/button.c: lobotomized toggle buttons temporarily,
	so multiple windows having independent tool states wouldn't confuse
	toolboxes :/ .. the real fix is to rework SPAction and friends
	to not be so global-minded

	* src/event-context.h: changed sp_ui_generic_menu to
	sp_ui_context_menu

	* src/interface.c: reworked the menu structure and introduced
	sp_ui_main_menubar to create the menubar; changed sp_ui_generic_menu
	to sp_ui_context_menu

	* src/main.c: remove the floating toolbox

	* src/shortcuts.c: remove shortcuts related to the floating toolbox

	* src/verbs.c, src.verbs.h: removing floating toolbox verb

	* src/widgets/sp-toolbox.c,
	src/widgets/sp-toolbox.h,
	src/widgets/Makefile.am: nuked floating toolbox window

2003-11-25 bulia byak <bulia@dr.com>

	* src/select-context.c src/preferences-skeleton.h: new option: drag tolerance

2003-11-25 bulia byak <bulia@dr.com>

	* src/dialogs/dialog-events.c src/dialogs/dialog-events.h: new callback and utility
	functions for defocusing
	* src/widgets/sp-color-selector.c src/widgets/dash-selector.c
	src/dialogs/stroke-style.c: spinbuttons, text fields defocus on enter

2003-11-24 bulia byak <bulia@dr.com>

	* src/dialogs/display-settings.c src/display/canvas-arena.c: cursor tolerance now
	stored in preferences, default changed to 2.0

2003-11-24 bulia byak <bulia@dr.com>

	* src/preferences-skeleton.h: new group for global interface options
	* src/prefs-utils.h src/prefs-utils.c: new functions for double attributes
	* src/select-context.c src/node-context.c: nudge distance (without alt) is taken from preferences (default 1 mm)

2003-11-24 bulia byak <bulia@dr.com>

	New keys in node editor:
	* esc deselects and cancels rubberband and node dragging
	* ctrl-a selects all nodes
	* tab and shift-tab cycle through nodes of the current shape

2003-11-23 Bryce Harrington <bryce@osdl.org>

	* Added include for document.h to knot.c for declaring
	sp_document_undo, as g++ didn't like not having it declared. 

2003-11-22 bulia byak <bulia@dr.com>

	* unified handling of arrow keys in selector and node editor
	* lots of new keys for switching tools and calling dialogs
	* space works as temporary selector toggle
	* new: tools-switch.{c,h} utilities for switching tools
	* cleaned up zoom shortcts (1-5)
	* keys for toggling grid (#) and guides (|)
	* esc deselects, cancels rubberband selection, dragging or transformation 
	(in selector)
	* quit (ctrl-q) now works everywhere
	* new document is opened on startup if none was given on command line
	* closing last open document shuts down the program
	* floating toolbox is at most one copy, as are other dialogs
	* toolbox command is moved to the dialogs menu, ctrl-` as shortcut
	* document windows closeable by ctrl-f4
	* cleaned up status line messages, changed "items" to "objects"
	* quit confirmation dialog appears near the cursor and is transient
	* fix: killing quit confirmation dialog was interpreted as No instead 
	of Cancel
	* preferences are now saved in case of a crash
	* preferences are saved on exit
	* new: prefs-utils.{c,h} utilities for handling preferences
	* misc fixes
	* misc shortcuts

2003-11-18 Ted Gould <ted@gould.cx>

	* src/modules/system.c: Passed the wrong pointer.  Fix is by
	Robert Crosbie.

2003-11-18 Ted Gould <ted@gould.cx>

	* src/widgets/sp-toolbox.c: Adding in an include for gtkimage.h
	to get the stock functions.  This fixes the build under g++.

2003-11-18 Ted Gould <ted@gould.cx>

	* src/modules/extension.c: Changing mkstemp to g_mkstemp for
	compatibility.

2003-11-17 Kees Cook <inkscape@outflux.net>

	* configure.in: SF Patch #843537: more cast corrections from joncruz

2003-11-17 Ted Gould <ted@gould.cx>

	* src/modules/init.c: Changing the process for handeling a directory
	that doesn't exist.  Now passing out a warning, and then returning.
	The warning is on the command line so most users won't have to deal
	with it (it _shouldn't_ happen anyway ;)  Fixes: #843333.

2003-11-17 Kees Cook <inkscape@outflux.net>

	* SF Patch #841940: autoconf update from joncruz
	* SF Patch #842949: lpr fixes from Lynn Kerby
	* SF Patch #842951: variable declaration fixes in interface.c
	* SF Patch #842953: small color picker update from John Bintz
	* SF Patch #842955: additional Darwin updates from Peter
	* Fixed stroke style literal string bug that caused warnings
	* SF Patch #842958: updated inkscape.desktop.in slightly
	* SF Patch #843170: freetype include corrections
	* SF Patch #843326: fixups for g++ compilation from joncruz
	* Adding some more missing "extern C" sections for g++ compiles
	* Small type corrections to quite g++ during -Wall
	* Changed all the #endif // __cplusplus into a standard C comment

2003-11-16  MenTaLguY <mental@rydia.net>

	* src/document.c: reworked sp_desktop_items_*in_box family to be layer-aware

2003-11-16  Kees Cook <inkscape@outflux.net>

	* Cleaned up "desactivate" into "deactivate"
	* Fixed GDK_SCROLL event from mouse wheel scrolling
	* Cleaned up .cvsignore entries for fewer cvs warnings

2003-11-16  MenTaLguY <mental@rydia.net>

	* dialogs/xml-tree.c: events should not be intercepted for the XML dialog

2003-11-16  MenTaLguY <mental@rydia.net>

	* src/version.c: ME R DUM.  Had the arguments to sscanf() reversed.

2003-11-16  Ted Gould <ted@gould.cx>

	* Updating everything so that it builds under g++ again.  Much
	of the updates were to the recently checked in modules code.

2003-11-16  MenTaLguY <mental@rydia.net>

	* New version code (version.c/version.h)
	* Introduced inkscape namespace in parallel with sodipodi namespace
	* Fixed a lot of attribute enum names to reflect sodipodi versus inkscape namespaces
	* src/document.c: new version processing, plus namespace fixes
	* SP_OBJECT_WRITE_INKSCAPE is now SP_OBJECT_WRITE_EXT
	* Inkscape and Sodipodi versions are tracked separately
	* First crack at layers!  set inkscape:groupmode to "layer" or "group" depending on how you want a group to behave
	* A little dead code removal

2003-11-15  MenTaLguY <mental@rydia.net>

	* Mege Jon's improved src/help.c patch from the mailing list (with some temporary cruft of my own that I hope he'll forgive me for)

2003-11-14  Ted Gould <ted@gould.cx>

	* Fixed up the module code alot.  Now extentions are usable with
	a XML file in the /usr/share/inkscape/modules directory.

2003-11-12  Jon Cruz <jon@joncruz.org>
	* Fix warnings due to missing casts - nr-rasterfont.c (840539)
	* Fix warnings due to missing casts - desktop-snap.c (840543)
	* Fix warnings due to missing casts - help.c (840545)

2003-11-11  Robert Crosbie <swingincelt@hotmail.com>

	* Remove kde option from configure (840504)
	* Remove icon hash from sp_icon_new_full (840506)

2003-11-11  magnethead <magnethead@mindspring.com>

	* src/dialogs/transformation.c (sp_transformation_dialog_new):
	Removed images from tabs
	* src/dialogs/object-properties.c (sp_object_properties_dialog):
	Removed images from tabs

2003-11-11  Ted Gould <ted@gould.cx>

	* Starting 0.36 development

2003-11-10  Ted Gould <ted@gould.cx>

	* Release 0.35

2003-11-08  Bryce Harrington <brycehar@bryceharrington.com>
	* Updated About dialog
	* Fixed bug on Editing Windows dialog

2003-11-08  Manny the Gnome
	* Remove KDE dialog option

2003-11-06 Bulia Byak
	* Add cursor-key support

2003-10-19  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-io.c (sp_repr_svg_read_node): handle CDATA
	sections properly

	* Most of the tree.  Unsodipodified pretty much everything I could
	find.  New temporary icons, etc etc...

2003-10-23  Ted Gould  <ted@gould.cx>

	* src/*/Makefile.am: Changing the include paths to make distcheck
	get closer to passing.

2003-10-22  Ted Gould  <ted@gould.cx>

	* configure.in: Changing version to 0.32-hydra1.  This is after
	much discussion and serious contemplation (okay, we never really
	got out the magic eight ball).

2003-10-22  Ted Gould  <ted@gould.cx>

	* src/dialogs/desktop-properties.c, src/widgets/spw-utilities.c,
	src/widgets/spw-utilities.h: Cleaning up desktop properties by
	abstracting things into functions.  This patch was written by
	Bryce Harrington and is tracker entry #822497.

2003-10-21  Ted Gould  <ted@gould.cx>

	* src/interface.c: Changing it so there is an Open Recent menu on
	the Sodipodi menu and the toolbar menu.  This removes some clutter
	in the menu.  This is tracker entry #820223 and the author is
	unknown.

2003-10-21  Ted Gould  <ted@gould.cx>

	* src/dialogs/text-edit.c: Make it so that changes can be applied
	to multiple blocks of text.  This patch was submitted by Petr
	Kovar and is tracker #816676.

2003-10-17  Ted Gould  <ted@gould.cx>

	* src/dialogs/object-properties.c: Applying a patch by Lynn Kerby
	which is tracker number 799363.  This makes it so that if just
	the units are changed the object does not get updated.

2003-10-16  Ted Gould  <ted@gould.cx>

	* src/Makefile.am: Adding the modules to the linking of the
	spsvgview executable.  This fixes the KDE build.  This was tracker
	issue 819963 but unfortunately we don't know who submitted it.

2003-10-15  Ted Gould  <ted@gould.cx>

	* configure.in: Adding a -hydra to the version number.

2003-10-15  Ted Gould  <ted@gould.cx>

	* Changelog: Applying the patch from Mental to do transactions
	in the XML.  It is tracker number: 819745.  More info to follow
	which is (written by Mental)

	* src/document-private.h: removed old SPAction struct and 
	modified SPDocumentPrivate to use new SPReprAction type

	* src/document-undo.c: removed all sp_action stuff,
	sp_document_priv_done(), and all repr callbacks
	(sp_document_set_sensitive): start/suspend transactions on Repr 
	document
	(sp_document_done): now just a wrapper for
	sp_document_maybe_done(), of which it is a special case
	(sp_document_maybe_done): use new transaction facility, and 
	properly trim undo list size to MAX_UNDO
	(sp_document_cancel): new SPDocument method for aborting (and 
	undoing) current operation
	(sp_document_undo, sp_document_redo): rewritten for transactions

	* src/document.c (sp_document_init): updated SPDocumentPrivate
	initialization
	(sp_document_destroy): clean up partial action list
	(sp_document_idle_handler): removed undo stack warning
	(sp_document_warn_undo_stack): removed

	* src/document.h: added sp_document_cancel()

	* src/sp-object.c (sp_object_invoke_build): minor cleanup
	(sp_object_repr_child_added, sp_object_repr_remove_child, 
	sp_object_repr_order_changed, sp_object_repr_attr_changed,
	sp_object_repr_content_changed): removed calls to document 
	callbacks

	* src/dialogs/xml-tree.c: enabled delete button for _all_ 
	attributes [I later plann on enabling/disabling it based on
	a call to the repr's change_attr veto callback]
	(after_tree_move): roll back the transaction if the node
	didn't want to be moved
	(on_attr_select_row_enable): used to be 
	on_attr_select_row_enable_if_not_id()
	(cmd_indent_node, cmd_unindent_node): removed usage of 
	sp_repr_move in favor of simple operations with transactions

	* src/widgets/sp-xmlview-tree (repoint_nodes): no longer needed
	(add_node): switched to an if cascade instead of a switch 
	statement, since SP_REPR_TYPE (repr) is no longer an integer
	(tree_move): use simple operations instead of sp_repr_move

	* src/xml/Makefile.am: added sp-action.c to build

	* src/xml/repr-action.c, src/xml/repr-action.h: transaction
	logging facility for reprs using linked lists of SPReprAction
	structs (conceptually, logs)

	* src/xml/repr-private.h: introduced SPReprClass for different
	node types and added SPRepr::doc field for doc pointer.
	SPReprDoc is now a proper subclass of SPRepr.

	* src/xml/repr-util.c (sp_repr_move, sp_repr_transfer_ids):
	removed

	* src/xml/repr.c: added logging macros and SPRepr subclassing

	* src/xml/repr.h: removed sp_repr_move()

2003-10-09  Ted Gould  <ted@gould.cx>

	* src/libnrtype/nr-type-directory.c: Applying a patch to
	fix the compile from Vitaly Lipatov.

2003-10-08  Ted Gould  <ted@gould.cx>

	* glade/icons.svg src/nodepath.c src/nodepath.h
	src/toolbox.c src/dialogs/node-edit.c src/dialogs/node-edit.h:
	Adding another patch from Bob Jamison which is in the tracker
	under 819054.  This patch adds an alternate join function.  It
	also adds this function to the tool box with an icon.

2003-10-08  Ted Gould  <ted@gould.cx>

	* src/.cvsignore: Adding in spsvgview for cleaner diff's

2003-10-08  Ted Gould  <ted@gould.cx>

	* src/dialogs/item-properties.c: Submitting a patch from
	Bob Jamison which is in the tracker under 819043.  This adds
	the ID to the item properties dialog.

2003-10-06  Ted Gould  <ted@gould.cx>

	* Changelog: Start of the hydra-october branch

2003-10-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libarikkei/Makefile.am: New stuff from ariariki

	* src/libnrtype/nr-type-xft.c (nr_type_read_xft_list): Moved here

	* src/libnrtype/nr-type-directory.c (nr_type_build): From ariariki
	(nr_type_read_private_list): Use libarikkei tokenizer
	(nr_type_register): Made public

	* src/libnrtype/Makefile.am: Added libarikkei stuff

	* configure.in: Added libarikkei/Makefile

2003-09-18  Mitsuru Oka <oka@mediasite.co.jp>

	* Initial IA-64 Linux support.

	* libnr/nr-object.h defined new type NRType.

	* src/desktop.c ... src/modules/win32.h ... many files:
	modified all of the unsigned int GObject type by GType and
	unsigned int NRObject type by NRType.

2003-08-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-type-ft2.c (nr_typeface_ft2_setup): Check whether font
	has assigned code points on BMP private area
	(nr_typeface_ft2_lookup): Map BMP private area directly to glyph index only
	if it is free, use planes F and 10 for direct mapping

2003-08-17  Danilo egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-07-23  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-07-21  Christian Neumair  <chris@gnome-de.org>

	* src/verbs.c: Fix another typo (preciely->precisely).

2003-07-21  Christian Neumair  <chris@gnome-de.org>

	* src/widgets/paint-selector.c: Fix a typo (colospace->Colorspace).

2003-07-15  Masatake YAMATO  <jet@gyve.org>

	* src/helper/sp-ctrlline.h: Fix a typo(x2->x1).

2003-07-12  Yukihiro Nakai  <ynakai@redhat.com>

	* src/text-context.c (sptc_preedit_changed): New signal handler
	(sp_text_context_setup): Connect "preedit_changed" signal
	(sp_text_context_root_handler): Return TRUE (needed for Gtk+ IM)

	* src/verbs.c (sp_verbs_init): Wrap action name and tip into _()

2003-07-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/event-context.c (sp_event_context_private_root_handler): Handle
	GDK_SCROLL (thanks to Tomas Znamenacek)

	* src/xml/repr-util.c (sp_xml_dtoa): Do not print trailing zeroes

	* src/xml/repr.c (sp_repr_document_new): Removed ATTLIST xmlns:xlink

	* src/libnr/nr-svp-private.h: New file

2003-07-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-stroke.c: Implement most functionality

	* src/libnr/nr-svp-uncross.c (nr_svl_uncross_full): Process some corner cases
	properly

2003-07-07  Masatake YAMATO  <jet@gyve.org>

	* src/shortcuts.c (sp_shortcut_table_load): set shortcut
	for SP_VERB_EDIT_SELECT_ALL.

	* src/selection-chemistry.[ch] (sp_edit_select_all): New function.

	* src/verbs.c (sp_verb_action_edit_perform): Added case
	SP_VERB_EDIT_CLEAR_ALL and SP_VERB_EDIT_SELECT_ALL.
	(SP_VERB_IS_EDIT): Extended to SP_VERB_EDIT_SELECT_ALL.

2003-07-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/svg/svg-length.c (sp_svg_length_set): New method

	* src/sp-spiral.c (sp_spiral_write): Write path here

	* src/sp-image.c (sp_image_repr_read_image): Treat NULL docbase as current directory

	* src/sp-gradient.c (sp_gradient_write): Merged code with flatten_attribute
	(sp_lineargradient_write): Ditto
	(sp_radialgradient_write): Ditto

	* src/rect-context.c (sp_rect_context_root_handler): Get motion hints

	* src/helper/sp-canvas.c (SP_CANVAS_UPDATE_PRIORITY): Use higher priority

	* src/document.c (SP_DOCUMENT_UPDATE_PRIORITY): Use higher priority

2003-06-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-type-ft2.c (nr_typeface_ft2_glyph_outline_get): Do not
	load outlines multiple times, fixes serious memleak

2003-06-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c (sp_text_edit_dialog): Added line spacing combo
	(sp_text_edit_dialog_update_object): Update line spacing
	(sp_text_edit_dialog_read_selection): Update control

	* src/sp-text.c (sp_text_set): Parse "sodipodi:linespacing"
	(sp_text_set_shape): Use line spacing

	* src/attributes.c: Added "sodipodi:linespacing"

2003-06-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/desktop-properties.c (sp_dtw_border_layer_toggled): New callback
	(sp_desktop_dialog_new): Added border layer
	(sp_dtw_update): Track border layer

	* src/spsvgview.c: Implement slideshow

	* src/sp-namedview.c (sp_namedview_set): Track borderlayer

	* src/desktop.c (sp_desktop_new): Add page border directly to
	main group
	(sp_dt_namedview_modified): Track border layer

	* src/attributes.c: Added "borderlayer"

2003-06-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-pattern.c (sp_pattern_update): Implemented, patterns show up again
	(sp_pattern_painter_new): Painter is not GObject anymore, fixes crash
	(sp_pattern_painter_free): Ditto

	* src/sp-root.c: Removed namedview tracking

	* src/sp-object-repr.c (sp_object_type_lookup): Do not register GUI types
	(sp_object_type_register): New method

	* src/sp-namedview.c (sp_document_namedview): Moved it here to clean
	up dependency chain

	* src/sp-item-group.c (sp_item_group_get_child_by_name): New method

	* src/main.c (sp_main_gui): Register GUI object types
	(sp_main_console): Ditto

	* src/document.c (sp_document_create): Check for namedview using name only

	* src/Makefile.am (spsvgview_SOURCES): Uncommented spsvgview

	* src/libnr/nr-object.c: Use listener arrays instead of lists

2003-06-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Version 0.33pre

2003-06-19  Masatake YAMATO  <jet@gyve.org>

	* src/dialogs/desktop-properties.c (sp_color_picker_clicked): Enable "Close"
	button.
	(sp_color_picker_window_close): New function.

2003-06-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/object-properties.c (sp_object_properties_dialog_destroy): Disconnect
	signals here, fixes crash

2003-06-18  Masatake YAMATO  <jet@gyve.org>

	* src/toolbox.c (sp_toolbox_*_create): passed tt to 
	sp_toolbox_new.

	* src/dialogs/align.c (sp_align_add_button): passed a 
	GtkTooltips object to sp_button_new_from_data.
	(sp_quick_align_dialog): created a new GtkTooltips object
	and passed it to sp_align_add_button.

	* src/widgets/sp-toolbox.c (sp_toolbox_new): passed a
	GtkTooltips object to sp_button_new_from_data.
	Fix a spelling miss.

	* src/widgets/sp-toolbox.h (sp_toolbox_new): passed a 
	GtkTooltips object.

2003-06-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-image.c (sp_image_set): Fix potential crash
	(sp_image_update): Move code here, so canvas items do not dereference
	destroyed pixbuf data

	* src/seltrans.c (sp_sel_trans_handle_request): Reverse shift behaviour for
	rotation (thanks to Pat)

2003-06-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/verbs.c: Added 'print direct' option

	* src/interface.c (sp_ui_file_menu): Added print direct if needed

	* src/toolbox.c (sp_toolbox_file_create): Compose print + print direct if needed

2003-06-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/modules/ps.c (sp_module_print_plain_setup): Added bitmap/ps choice and
	preferred bitmap resolution selector
	(sp_module_print_plain_finish): If user prefers bitmap printing, composite
	full page from NRArena here

2003-06-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/event-context.c (sp_event_context_private_root_handler): Removed
	desktop dialog double-click binding

	* src/widgets/icon.c (sp_icon_new_scaled): New method
	(sp_icon_new_full): Refactored static method
	(sp_icon_image_load_svg): Use scale factor

	* src/xml/repr-io.c (sp_repr_do_read): Unref node after attaching
	(sp_repr_svg_read_node): Ditto

	* src/xml/repr.c (sp_repr_document_new): Ditto

2003-06-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/modules/ps.c: Ported Ascii85 filter from The GIMP

2003-06-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/modules/kde.cpp (sp_kde_get_save_filename): New method
	(sp_kde_get_write_filename): New method
	(sp_kde_get_open_filename): Use dir/filter/title

	* src/file.c (sp_file_open_dialog): Use KDE file dialog if WITH_KDE
	(sp_file_save_dialog): Ditto
	(sp_file_import): Ditto

2003-06-05  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c: Only high-level stuff

	* src/modules/gnome.c: Moved gnome print frontend here

	* src/modules/ps.*: Moved plain print frontend here

2003-05-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-item.h: Removed ::menu and ::knot_holder virtual methods

	* src/object-edit.c: New file, collect all knotholder methods from
	item implementations here

	* src/object-edit.h (sp_item_knot_holder): New file

	* src/object-ui.c: New file, collect all Gtk related methods from
	object implementations here

	* src/object-ui.h (sp_object_menu): New file

2003-05-24  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c (sp_print_preview_document): Use ::set_preview if present

	* src/module.h: Added virtual methof for setting preview

	* src/helper/kde.cpp (sp_module_print_kde_finish): Got working
	(sp_module_print_kde_set_preview): New method

2003-05-18  Hans Breuer  <hans.breuer.org>

	* src/monostd.h : (new file) some defines and includes
	mostly to make up the WIN32 lack of unistd.h

	* config.h.win32 src/makefile.msc src/*/makefile.msc :
	(new files) to build Sodipodi on win32 with M$ toolchain

	* src/winmain.c : (new file) WinMain in it's own file simply 
	calling main()
	* src/main.c : build the common main() for win32 too

	* src/sodipodi.rc : (new file) to compile in the application
	icon on win32

	* src/file.c : use G_DIR_SEPARATOR[_S] instead of '/' ["/"]
	make the file selection work better on win32

	* src/sp-image.c : read images defined by xlink:href="file://...

	* src/sodipodi.c : #inculed "monostd.h" to get S_ISDIR and 
	S_ISREG on win32

	* src/libnr/nr-values.h : when building as DLL exporting 
	variables is quite ugly. Define some constant matrices as
	static for win32 to avoid exporting.

	* src/libnrtype/nr-type-directory.c : #include <io.h> 
	for win32::open() etc.

	* src/libnrtype/nr-type-w32.c : #ifdef HANGUL_CHARSET,
	older SDK headers don't have it

	* src/libnrtype/nr-type-w32.H : #define WIN32_LEAN_AND_MEAN
	before including <windows.h> to reduce namespace pollution

	* src/svg/svg-length.c : #include <config.h> to get WIN32

	* src/widgets/icon.c : S_ISREG, S_ISDIR

	* src/xml/sp-xml.def src/svg/sp-svg.def
	src/libnr/sp-libnr.def src/libnrtype/sp-libnrtype.def :
	(new files) to export functios from modules built as DLLs

	* src/helpers/gnome-utils.c(gnome_uri_list_extract_filenames) :
	use g_filename_from_uri()
	* src/toolbox.c src/interface.c : don't leak the uri list

	* src/xml/repr-util.c : use g_strcasecmp for portability
	* src/svg/svg-length.c : ... and g_snprintf

2003-05-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-item.c (sp_item_invoke_print): Only if item is printable

	* src/display/nr-arena-item.c (nr_arena_item_set_visible): New method
	(nr_arena_item_invoke_render): Honour visibility

	* src/dialogs/item-properties.c (sp_item_widget_printability_toggled): Implement

	* src/sp-item.c (sp_item_set): Added "sodipodi:printable" attribute

2003-05-14  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/button.c (sp_button_set_composed_tooltip): Add primary shortcut
	dynamically to tooltip

2003-05-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/toolbox.c (sp_maintoolbox_create_toplevel): Use sp_window_new

	* src/helper/window.c: New file, implement shortcut processing

	* src/helper/window.h: New file

2003-05-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/text-context.c (sp_text_context_forget_text): Set object to
	NULL before destroying, so resulting selection::changed does not mess up

	* src/selection-chemistry.c: Removed undo and redo frontends

	* src/shortcuts.c: Moved shortcut code here

2003-05-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/zoom-context.c: Removed bogus zoom ui handlers

	* src/sodipodi.c (sodipodi_init): Initialize some shortcuts

	* src/toolbox.c (sp_toolbox_button_clicked): New callback
	(sp_toolbox_button_new_from_verb): New method
	(sp_toolbox_zoom_create): Use verbs

	* src/interface.c (sp_ui_menu_activate): Universal callback
	(sp_ui_menu_append_item_from_verb): New method
	(sp_ui_view_menu): Use verbs for zoom menu items

	* src/event-context.c (sp_event_context_private_root_handler): Use actions for
	certain keycodes

	* src/verbs.c: New file

	* src/verbs.h: New file

	* src/helper/action.c: New file

	* src/helper/action.h: New file

2003-05-07  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-uncross.c (nr_svl_uncross_full): Break slice endpoints if
	there can be potential crossing

2003-05-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-render.c (nr_svp_render): Fix some running sum problems

2003-05-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-rasterfont.c (nr_rasterfont_generic_glyph_mask_render): Render
	using NRSVP and mask OR
	(nr_rasterfont_ensure_glyph_slot): Build NRSVP

2003-05-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/Makefile.am: Removed art-utils.h

	* src/libnr/nr-svp.c (nr_svl_build_finish_segment): New helper
	(nr_svl_build_moveto): Ditto
	(nr_svl_build_lineto): Ditto
	(nr_svl_build_curveto): New helper
	(nr_svl_from_art_vpath): Use NRSVLBuild
	(nr_svl_from_art_bpath): New method

2003-05-02  Lauris Kaplinski  <lauris@kaplinski.com>

	* sodipodi.desktop.in: Updated by Michael Terry

2003-05-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/svg/svg-length.c (sp_svg_number_write_d): Fixed rounding overflow

2003-05-01  Christian Schaller <Uraeus@gnome.org>
	* Fixed up desktop.in file to conform to latest freedesktop standard
	* Fixed up spec.in file to actually work
	* Added missing extensions-skeleton.h to makefile
	* Added spec file to EXTRA_DIST

2003-05-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-arena-item.c (nr_arena_item_children): Return correct
	value (thanks to MentaLguY)

2003-04-29  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp.h: Use more compact format for segments

	* src/libnr/nr-svp.c (nr_svp_from_svl): Use max segment length

2003-04-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-render.c (nr_svp_render): New method
	(nr_pixblock_render_svp_mask_or): New method
	(nr_pixblock_render_svl_mask_or): Renamed old one
	(nr_svl_render): Ditto

	* src/libnr/nr-svp.c (nr_svp_point_wind): Implement
	(nr_line_point_distance2): Helper
	(nr_svp_point_distance): Ditto
	(nr_svp_from_svl): New method, implemented packed format and
	renamed old one to S(orted)V(ertex)L(ist)
	(nr_svp_free): Ditto

	* src/display/nr-arena-shape.h: Port all basics to NRSVP

2003-04-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/knotholder.c (knot_ungrabbed_handler): Flush object here

	* src/xml/repr-util.c (sp_xml_dtoa): Take '-' into accounti if
	copying integral part

	* src/svg/svg-length.c (sp_svg_length_update): New method

	* src/sp-spiral.c (sp_spiral_update): New method

	* src/sp-star.c (sp_star_update): New method

	* src/sp-ellipse.c (sp_genericellipse_update): Use generic ::set_shape

	* src/sp-rect.c (sp_rect_update): Use generic ::set_shape

2003-04-24  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-uncross.c (nr_svp_uncross_full): Concat segment start only if
	within epsilon, snap intersection point at yslice, if close

2003-04-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/sp-color-slider.c (sp_color_slider_paint): Use proper style painters,
	so Gdk/Gtk crash bug does not show up anymore

	* src/xml/repr-io.c (sp_repr_read_file): Substitute entities (by MentaL)
	(sp_repr_read_mem): Ditto

	* src/style.c (sp_style_merge_from_style_string): Complain only if not the end
	of the style string (thanks to MenTaL)

2003-04-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c (sp_module_print_plain_begin): Magic by MenTaL

	* src/libnr/nr-svp-uncross.c (nr_svp_uncross_full): Works properly now for
	all stress-tests except zap.

2003-04-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-arena-shape.c (nr_arena_shape_update): Switch fill
	completely to new renderer
	(nr_arena_shape_render): Ditto, but use masks as before

	* src/libnr/nr-svp-uncross.c (nr_svp_uncross_full): Pass most stress-tests

2003-04-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-render.c (nr_pixblock_render_svp_mask_or): new method
	(nr_pixblock_render_svp_rgba): Frontend, implement for all pixblock modes
	(nr_svp_run_A8_OR): Run callback implementation
	(nr_svp_run_R8G8B8): Ditto
	(nr_svp_run_R8G8B8A8P_EMPTY): Ditto
	(nr_svp_run_R8G8B8A8P_R8G8B8A8P): Ditto
	(nr_svp_run_R8G8B8A8N_R8G8B8A8N): Ditto
	(nr_svp_render): Implement using generic run callbacks

2003-04-14  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-render.c (nr_pixblock_render_svp_rgba): Do runs properly,
	skip if coverage stays 0

2003-04-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-svp-render.c: Moved here from old arena code

	* src/libnr/nr-svp-render.h: Ditto

	* src/libnr/nr-svp.c: Ditto

	* src/libnr/nr-svp.h: Ditto

	* src/display/nr-arena-shape.h: Optional experimental new renderer

	* src/libnrtype/nr-typeface.h: Port to NRObject

	* src/display/canvas-arena.c (sp_canvas_arena_init): Use active object
	listener instead of g-signals
	(sp_canvas_arena_destroy): Ditto

	* src/display/nr-arena.h: Derive from NRActiveobject

	* src/display/nr-object.c (nr_object_delete): proper lifecycle management
	(nr_object_setup): Ditto, automatic object
	(nr_object_release): Ditto
	(nr_active_object_get_type): Added NRActiveObject

	* src/display/nr-object.h: Added NRActiveObject

2003-04-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-object.c: Reimplement in standalone way

	* src/display/nr-object.h: Reimplement in standalone way

2003-04-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-marker.c (sp_marker_show_dimension): Reimplement
	(sp_marker_show_instance): Ditto

	* src/display/nr-arena-shape.c (nr_arena_shape_finalize): Detach markers

	* src/sp-shape.c (sp_shape_update_marker_view): Test orientation

2003-03-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-arena-item.c: Removed ::event signal

	* src/display/nr-object.h: Frontend for future glib-free object system

2003-03-21  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-shape.c (sp_shape_update): Update marker properly
	(sp_shape_set_marker): Parse all three marker types

	* src/sp-marker.c (sp_marker_update): Set reference point in child2parent matrix
	(sp_marker_show_dimension): Copy and set arena items properly
	(sp_marker_show_instance): Set base transfoarm and scale by line width if needed

2003-03-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/uri-references.c (sp_uri_reference_resolve): Allow '_' and
	'-' in xlink names.

2003-03-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-arena-item.h: Made opacity 8-bit integer

2003-03-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-marker.c (sp_marker_update): Do it properly
	(sp_marker_write): Do it properly (almost)

2003-03-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c (sp_module_print_plain_class_init): Use correct destructor

	* src/sp-marker.c (sp_marker_set): Implement all attributes

2003-03-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-object-repr.c (sp_object_type_lookup): Added marker type

	* src/sp-marker.h: New file

	* src/sp-marker.c: New file

	* src/display/nr-arena-image.c (nr_arena_image_render): Use pixblock
	area instead the active area (that may be bigger)

	* src/helper/kde.cpp: Added SPModulePrintKDE object
	(sp_kde_get_module_print): Contructor

	* src/print.c: Port to modules, add KDE option

	* src/module.c (sp_module_register): Check for id, fix crash
	(sp_module_unregister): Ditto
	(sp_module_print_get_type): Implement SPModulePrint

	* src/document.h: Renamed private to priv to be nice with c++

	* src/Makefile.am (kdeldadd): Added LIB_KDEPRINT

	* configure.in: Enable modules by default

2003-03-04  MenTaLguY  <mental@rydia.net>

	* src/desktop.c: changed zoom_status to a spin button with logarithmic increment and a handy context menu
	(sp_dtw_zoom_*): added various event handlers for the new zoom spin button
	(sp_desktop_zoom_page): factored out code duplicated with zoom-context.c
	(sp_desktop_zoom_selection): ditto
	(sp_desktop_zoom_drawing): ditto
	(sp_desktop_widget_init): removed unused SPDesktopWidget::zoom member and replaced zoom label with a spin button

	* src/desktop.h: removed unused SPDesktopWidget::zoom member, added new sp_desktop_zoom_* methods

	* src/zoom-context.c (sp_zoom_drawing): factored out code to desktop.c
	(sp_zoom_page): NRRectD -> NRRectF, factored out code to desktop.c
	(sp_zoom_selection): factored out code to desktop.c

2003-03-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/Makefile.am: Compile KDE module if needed

	* src/main.c (sp_main_gui): Initialize/shutdown KDE module if WITH_KDE

	* src/file.c (sp_file_open_dialog): Use KDE file dialog, if WITH_KDE

	* src/Makefile.am: Add KDE libraries if needed

	* configure.in: Added --with[out]-kde configuration option

	* autogen.sh: Added (again) libtoolize

	* acinclude.m4: KDE specific autostuff

	* src/helper/kde.cpp: New file

	* src/helper/kde.h: New file

	* src/helper/kde-private.h: SPKDEBridge sefinition for moc preprocessor

2003-03-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/sp-color-slider.h: Use LGPL

	* src/widgets/sp-color-slider.c: Use LGPL

	* src/libnr/nr-rect.h: Use sensible NULL/empty semantics for union and intersection

	* src/libnr/nr-rect.c: Ditto

	* src/libnr/gen_nr_config.c: Generate basic typedefs (borrowed fromlibart)

	* src/display/nr-arena-item.c (nr_arena_item_invoke_update): Cleanup
	(nr_arena_item_invoke_render): Ditto

2003-03-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/modules/*: Various module implementations by Ted Gould

	* extensions/*: Put various unsorted extensions stuff here

	* src/module.c: New file

	* src/module.h: New file

	* src/draw-context.c (sp_draw_context_root_handler): Use 'a' instead of '+'
	as append/new toggle
	(spdc_concat_colors_and_flush): Cut continuation tolerance to avoid extra points at corners
	(spdc_pen_set_point): Draw line segments if appropriate

2003-02-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/main.c (main): Use bind_textdomain_codeset to force utf-8 encoding
	(sp_main_console): Init gdk if WITH_XFT

	* src/file.c (sp_export_get_rows): Do not set EMPTY flag on pixblock, or background
	will be forgotten

2003-02-24  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/align.c (sp_quick_align_dialog): Added "distribute" tab
	(sp_align_distribute_h_clicked): New method
	(sp_align_distribute_v_clicked): Ditto

	* configure.in: Removed PACKAGE_LOCALE_DIR definition

	* src/Makefile.am (INCLUDES): Set PACKAGE_LOCALE_DIR here

	* configure.in: Skip xft checking if fontcofig present

2003-02-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c (sp_print_fill): Use new paint server signature (does it work?)

	* src/document.c (sp_document_idle_handler): Use new flags signature
	(sp_document_ensure_up_to_date): Ditto

	* src/sp-shape.c (sp_shape_modified): Removed style_modified, instead set
	style here, if flags indicate the need

	* src/sp-text.c (sp_tspan_update): Calculate relative distances here
	(sp_text_update): Ditto

	* src/sp-object.h: Split update and modified flags, involves changes in
	most places actually using them

	* src/gradient-chemistry.c (sp_gradient_ensure_private_normalized): Recycle
	available gradients, instead of always creating new
	(sp_gradient_ensure_radial_private_normalized): Ditto

	* configure.in: Version 0.32pre

2003-02-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_text_set_shape): Honour single dx and dy attributes

	* configure.in: Added check for fontconfig to retrieve nonstandard include directories

2003-02-21  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-image.c (sp_image_set): Set canvas item properties in ::update
	(sp_image_update): Implement

	* src/dialogs/fill-style.c (sp_fill_style_widget_paint_changed): Set CMYK before RGB

	* src/dialogs/stroke-style.c (sp_stroke_style_paint_changed): Set CMYK before RGB

2003-02-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-gradient.c (sp_gradient_rebuild_vector): Fix crash if 2 stops coincide

	* src/libnrtype/nr-rasterfont.c (nr_rasterfont_generic_glyph_mask_render): Get real
	bounding box, clip to pixblock area for SVP glyphs

	* src/sp-polygon.c (sp_polygon_write): Write points always

2003-02-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/export.c (sp_export_dialog): Default to document name + png
	(sp_export_spinbutton_new): Pack more functions here

	* src/sp-chars.c (sp_chars_update): Implement

	* src/sp-text.c (sp_tspan_update): Implement

	* Makefile.am: Port back to glib gettext

	* configure.in: Port back to glib gettext

	* autogen.sh: Copied working version from The Gimp

	* src/helper/sp-canvas.c (sp_canvas_paint_rect): Try to fit area into pixelstore
	instead of using default image size always

2003-02-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-path.h: Turned SPPath/SPShape hierachy upside down, so they make sense
	now, when we do not derive text and clippath from SPPath anymore

	* src/sp-shape.h: Ditto

2003-02-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/file.c (file_open_ok): Set directory if OK clicked on it (thanks to Aron Rubin)
	(file_import_ok): Ditto

	* src/sp-ellipse.c (sp_round): Fix sp_round

2003-02-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/paint-selector.c (sp_paint_selector_system_color_set): New method
	(sp_paint_selector_set_mode_color): Added 'get from dropper' checkbox

	* src/dialogs/object-properties.c (sp_object_properties_color_set): Handler
	of system 'color_set' signal, used for getting color value from dropper

	* src/dialogs/stroke-style.c (sp_stroke_style_paint_system_color_set): New method

	* src/dialogs/fill-style.c (sp_fill_style_widget_system_color_set): New method

	* src/toolbox.c (sp_toolbox_draw_create): Added dropper tool

	* src/sodipodi.c (sodipodi_class_init): Added 'color_set' signal
	(sodipodi_set_color): Frontend to signal
	(sodipodi_init_config): Use config_name instead of hardcoded 'preferences'

	* src/dropper-context.c (sp_dropper_context_root_handler): Scale colors
	to [0.0 - 1.0] range and signal hub

	* src/widgets/menu.c: New file, implement sensible menu API

	* src/widgets/menu.h: New file

2003-02-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dropper-context.h: New file

	* src/dropper-context.c: New file

2003-02-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/desktop.c (sp_desktop_widget_init): Create tooltips, enable sticky zoom
	(sp_desktop_widget_size_allocate): Calculate sticky zoom by area instead of MIN (x, y)

	* src/helper/sp-canvas.h: Added floating point scroll coordinates

	* src/helper/sp-canvas.c (scroll_to): Preserver floating point coordinates

	* src/display/nr-arena-group.c (nr_arena_group_set_child_transform): Do
	not force full update if not needed

	* src/display/nr-arena-item.c (nr_arena_item_set_clip): Do not force
	full update if not needed
	(nr_arena_item_set_mask): Ditto
	(nr_arena_item_set_transform): Ditto

2003-02-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-gradient.c (nr_lgradient_render_R8G8B8A8N_EMPTY): New shortcut

	* src/libnr/nr-gradient.h: Made x0 and x0 integers - this introduces possible
	upt to 0.7 pixel error, but other rendering parts are not exact anyways

	* src/sp-paint-server.h: Fill function signature change

2003-02-08  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-gradient.c (nr_rgradient_render_generic_symmetric): Special
	case NR_PIXBLOCK_MODE_R8G8B8A8N and full opacity

	* src/sp-gradient.c (sp_radialgradient_set): Initialize focal point to center if unset

	* src/libnr/nr-gradient.c (nr_lgradient_render_R8G8B8A8N): Special-cased full opacity

	* configure.in: 0.30.1

	* src/libnrtype/nr-rasterfont.c (nr_rasterfont_ensure_glyph_slot): Use
	32 bit integer bbox initially before deciding whether it fits in 16 bit

2003-02-08  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add intl, m4.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add intl/Makefile, po/Makefile.in, m4/Makefile.

2003-02-07  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/help.c (sp_help_about): Make default window size the same as document

	* src/style.c: Use custom winding rule and stroke parameter enumerations

	* src/enums.h: Define winding rules and stroke parameters

2003-02-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-rect.c (sp_rect_rx_set): Set ::set value(s)
	(sp_rect_ry_set): Ditto

	* src/sp-item.c (sp_item_update): Set arena item transform here

	* src/dialogs/fill-style.c (sp_fill_style_widget_update_repr): Made non-recursive
	(sp_fill_style_widget_update): Ditto

	* src/sp-shape.c (sp_shape_write_transform): Working path tranformation optimizer

	* src/widgets/sp-color-slider.c (sp_color_slider_adjustment_value_changed): Add
	some extra pixels around arrow dirtified area
	(sp_color_slider_paint): Use gtk_draw_box instead of gtk_draw_shadow
	(sp_color_slider_realize): Attach style

2003-02-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sodipodi.c (sodipodi_load_config): Generic method by Bryce
	(sodipodi_load_preferences): Frontend, same
	(sodipodi_load_extensions): Ditto
	(sodipodi_get_repr): Test for "extensions"
	(sodipodi_init_config): Generic method by Bryce
	(sodipodi_init_preferences): Frontend by Bryce
	(sodipodi_init_extensions): Ditto

	* src/toolbox.c (sp_toolbox_extension_create): Implemented by Bryce

	* src/extension.c: New file by Bryce Harrington

	* src/extension.h: New file by Bryce Harrington

	* src/extensions-skeleton.h: Ditto

	* src/sp-mask.c: support maskContentUnits

	* src/nodepath.c (create_curve): Do not add 50 to y (why was it here?)

	* src/sp-item-group.c (sp_group_update): Propagate only if update flag set

	* src/sp-item.c (sp_item_set): Set clippath and mask bbox
	(sp_item_update): Ditto

	* src/sp-clippath.c (sp_clippath_build): Implement
	(sp_clippath_set): Ditto, clipPathUnits attribute
	(sp_clippath_update): Ditto
	(sp_clippath_show): Use bbox if needed
	(sp_clippath_set_bbox): New method

2003-02-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-item.c (sp_item_release): Release mask
	(sp_item_mask_release): New handler
	(sp_item_mask_modified): Ditto
	(sp_item_set): Parse mask
	(sp_item_show): Show mask
	(sp_item_private_hide): Hide mask

	* src/display/nr-arena-item.c (nr_arena_item_invoke_render): Do masking
	(nr_arena_item_private_dispose): Release mask
	(nr_arena_item_invoke_update): Update mask
	(nr_arena_item_set_mask): New method

	* src/sp-root.c (sp_root_build): Do not check for xmlns:sodipodi to determine
	version, as this is set automatically in xml loader

	* src/slideshow.h: New file

	* src/slideshow.c: New file

2003-02-02  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-rect.c (sp_rect_set): Accept 0.0 as valid for x, y, width and height
	(sp_rect_write): Use 0.0 as default for rx, ry

	* src/rect-context.c (sp_rect_finish): Use ::write to be sure

	* src/display/nr-arena-shape.c (nr_arena_shape_clip): OR masks

	* src/sp-defs.c (sp_defs_update): Implement
	(sp_defs_modified): Ditto

	* src/sp-clippath.c (sp_clippath_update): Implement
	(sp_clippath_modified): Ditto
	(sp_clippath_show): Fix
	(sp_clippath_hide): Implement

	* src/sp-item.c (sp_item_set): Fix clippath
	(sp_item_show): Ditto
	(sp_item_private_hide): Ditto
	(sp_item_display_key_new): New method

	* src/sp-item.h: Use new signature for ::show and ::hide

2003-02-01  Daniel Yacob  <locales@geez.org>

	* configure.in: Added "am" (Amharic) to ALL_LINGUAS.

2003-02-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-use.c (sp_use_init): Set width and height default to 100%
	(sp_use_set): Ditto
	(sp_use_bbox): use child transform
	(sp_use_update): Calculate relative lengths, set new viewport

	* src/sp-object.c: Removed ::dispose and some commented out code

	* src/sp-symbol.c: New file

	* src/sp-symbol.h: New file

	* src/enums.h: New file

	* src/xml/repr-io.c (sp_repr_svg_read_node): Return if entity declaration

	* src/sp-root.c (sp_root_init): Set correct default viewport values
	(sp_root_build): Read 'x', 'y', 'version', 'preserveAspectRatio'
	(sp_root_set): Parse added attributes, accept percentages for x, y, width, height
	(sp_root_update): Set up proper transformations to support aspect ratios

	* src/sp-item.h: Added viewPort and item2viewPort transformation to item context

	* src/document.c (sp_document_ensure_up_to_date): Set initial viewport
	and identity transforms in item context
	(sp_document_idle_handler): Ditto

	* src/attributes.h: Added 'version' and 'preserveAspectRatio'

2003-01-31  Masatake YAMATO  <jet@gyve.org>

	* src/main.c (POPT_TABLEEND): Define if it is not defined in
	popt.h. copied from forntline.

2003-01-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/guideline.c (sp_guideline_render): Do not round int

	* src/interface.c (sp_ui_close_view): Get widget pointer before killing object

2003-01-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Version 0.30pre

	* src/sp-image.c (sp_image_bbox): Calculate bbox properly

2003-01-28  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add intl, m4.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add intl/Makefile, po/Makefile.in, m4/Makefile.

2003-01-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/codepages.h: Win9x codepage declarations

	* src/main.c (WinMain): Use new toplevel toolbox constructor

	* src/text-context.c (sp_text_context_root_handler): Added Gdk_U to unimode

	* src/libnrtype/nr-type-w32.c: Implement ANSI charset and styles

	* src/libnrtype/nr-type-directory.c (nr_type_directory_build): Honour
	stretch attribute in searches

	* src/toolbox.c (sp_maintoolbox_create_toplevel): Broke constructor
	into two parts to allow multiple toolboxes

	* src/interface.c (sp_ui_view_show_toolbox): New method
	(sp_ui_view_dock_toolbox): Ditto
	(sp_ui_view_remove_toolbox): Ditto
	(sp_ui_view_menu): Added menu items for creating toolboxes
	(sp_create_window): Pack toplevel hbox into window

2003-01-26  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/art-utils.c (sp_vpath_from_bpath_transform_closepath): Moved
	array expansion to the right place (thanks to Lynn Kerby)

2003-01-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/xml-tree.c (sp_xml_tree_dialog): Allow horizontal scrollbar
	so we do not expand window infinitely

	* src/sp-use.c (sp_use_update): Implemented by MenTaLguY
	(sp_use_modified): Ditto

	* src/libnr/nr-path.c (nr_curve_bbox): Implement fast and exact bbox (thanks to Nathan)
	(nr_curve_bbox_wind_distance): Use exact bbox

2003-01-25  Nathan Hurst  <Nathan.Hurst@infotech.monash.edu.au>

	* src/desktop-snap.c: Fixed vector snapping code, replaced horizontal and
	vertical snapping with generic vector versions

2003-01-21  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/nodepath.c (create_curve): Use NR_MATRIX_DF_TRANSFORM_X (Thanks to
	MenTaLguY for finding these NRPointF/ArtPoint mismatches)

2003-01-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-type-gnome.c (nr_typeface_gnome_new): Ditto

	* src/print.c (sp_print_preview_document): Fix gnome-print support
	(sp_print_document): Ditto

	* src/libnrtype/nr-type-xft.c (nr_type_xft_init): Added ebug printout

	* src/widgets/button.c (sp_button_button_press): Do not grab mouse
	(sp_button_button_release): Ditto

2003-01-19  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/desktop.c (sp_dtw_status_frame_size_request): Always request minimum size

	* configure.in: Define GETTEXT_PACKAGE properly (Thanks to Christian Rose)

	* src/libnrtype/nr-type-xft.c (nr_type_xft_init): Removed CORE, so Xft fontlist
	should now be read properly with Debian PPC and or fontconfig systems

2003-01-15  MenTaLguY  <mental@rydia.net>

	* src/sp-object.c (sp_object_get_unique_id): don't include namespace prefix when generating ids

2003-01-15  MenTaLguY  <mental@rydia.net>

	* src/widgets/sp-xmlview-tree.c (add_node): tree nodes associated with elements pretend they initially have a NULL id
	(element_attr_changed): display elements with a NULL id properly

2003-01-15  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-private.h: added SPXMLNs structure

	* src/xml/repr.h: added decls for sp_xml_ns_uri_prefix() and sp_xml_ns_prefix_uri()

	* src/xml/repr-io.c: improved handling of namespace prefixes
	(sp_repr_qualified_name): added hashtable to keep track of NS prefixes used
	(sp_repr_read_node): Ditto
	(sp_repr_do_read): Ditto + replaced if cascade with calls to sp_xml_ns_uri_prefix()
	(sp_repr_set_xmlns_attr): helper to set xmlns attributes

	* src/xml/repr-util.c: added namespaces list
	(sp_xml_ns_register_defaults): procedure to initialize namespace mapping list
	(sp_xml_ns_auto_prefix): helper routine to automatically select a "good" prefix for a given namespace URI
	(sp_xml_ns_uri_prefix): returns a prefix to use for a given namespace URI, registering a mapping automatically if necessary
	(sp_xml_ns_prefix_uri): returns the namespace URI registered for a given prefix

2003-01-13  MenTaLguY  <mental@rydia.net>

	* src/desktop.c (sp_dtw_desktop_shutdown): rearranged close confirmation buttons according to the Gnome HIG

2003-01-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/seltrans.c (sp_sel_trans_grab): Build array of selected item transformations
	(sp_sel_trans_transform): Use original transforms to avoid rounding errors
	(sp_sel_trans_ungrab): Release array

	* src/dialogs/transformation.c: Implemented scaling percentages

2003-01-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/draw-context.c (spdc_set_startpoint): Snap startpoint (thanks to Nathan)
	(sp_pen_context_root_handler): Ditto

	* src/dialogs/transformation.c: Implement simple move dialog

2003-01-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/guideline.c (sp_guideline_new): Changed signature, fixes
	granular new guideline placement bug
	(sp_guideline_render): Use normal rounding, so guideline and object are aligned

	* src/sp-item.h: Changed the signature of ::snappoints, this forced me to
	use NRPoints near everywhere else too

2003-01-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/draw-context.c (spdc_endpoint_snap): Make Ctrl to restrict directions
	to multitudes of 15 degrees (thanks to Nathan Hurst)

2003-01-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/file.c (sp_file_open_dialog): Rearrange
	(sp_file_save_dialog): Ditto
	(sp_file_save_document): Ditto

2003-01-13  MenTaLguY  <mental@rydia.net>

	* src/toolbox.c (sp_maintoolbox_create): turned off user resizing of toolbox so it autoresizes properly

2003-01-13  MenTaLguY  <mental@rydia.net>

	* src/toolbox.c (sp_maintoolbox_create): turned off user resizing of toolbox so it autoresizes properly


	* src/print.c (sp_print_plain_bind): Move generic PS code here
	(sp_print_plain_release): Ditto
	(sp_print_plain_fill): Ditto
	(sp_print_plain_stroke): Ditto
	(sp_print_plain_image_R8G8B8A8_N): Ditto
	(sp_print_document): Implement very-very simple non-gnome print dialog

2003-01-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/main.c: Made --without-popt working

2003-01-11  MenTaLguY  <mental@rydia.net>

	* src/xml/repr-io.c: removed bogus ATTLIST from DOCTYPE
	(sp_repr_read_file): factored out duplicated code into sp_repr_do_read + added parameter for default namespace
	(sp_repr_read_mem): factored out duplicated code into sp_repr_do_read + added parameter for default namespace
	(sp_repr_do_read): merged duplicated code from sp_repr_read_* family
	(sp_repr_do_read): insert xmlns decls for common namespaces
	(sp_repr_qualified_name): basic namespace handling for SVG, XLink, and Sodipodi namespaces
	(sp_repr_read_node): added parameter for default namespace
	(sp_repr_read_node): removed dead code and broken re-addition of xmlns declarations (xlink?)
	(repr_quote_write): UTF8 is ASCII-compatible -- removed inaccurate comment

	* src/xml/repr.h: added SP_*_NS_URI macros

	* src/document.c (sp_document_new): SVG is default NS
	(sp_document_new_from_mem): SVG is default NS

	* src/file.c (file_import_ok): SVG is default NS

	* src/interface.c (sp_ui_import_one_file): SVG is default NS

	* src/sodipodi.c (sodipodi_init): no default NS
	(sodipodi_load_preferences): no default NS

2003-01-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Check for xft

	* src/libnrtype/Makefile.am: Added xft_sources

	* src/libnrtype/nr-type-directory.c (nr_type_read_xft_list): Load xft typefaces

	* src/libnrtype/nr-type-xft.h: New file

	* src/libnrtype/nr-type-xft.c: New file

2003-01-10  MenTaLguY  <mental@rydia.net>

	* src/dialogs/item-properties.c (sp_item_widget_new): made unimplemented controls insensitive

2003-01-04  MenTaLguY  <mental@rydia.net>

	* src/text-context.c (sp_text_context_finalize): folded back
	into sp_text_context_finish
	(sp_text_context_root_handler): Gtk IM now gets first refusal of
	key press _and_ release events; toggling "unicode mode" now triggers an
	IM reset; "unicode mode" bypasses IM entirely


2003-01-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/text-context.c (sp_text_context_root_handler): Moved IM back to
	beginning (thanks to MenTaLguY for pointing this out)

	* src/sp-object.c (sp_object_invoke_update): Merge styles only if parent changed

	* src/sp-text.c (sp_text_update): Implement

	* src/sp-text.c (sp_string_modified): Chain invocation so style gets updated

	* src/widgets/sp-xmlview-content.c: Port to GtkTextView

	* src/dialogs/xml-tree.c: Port to GtkTextView

	* src/text-context.c (sp_text_context_root_handler): Consume xdigits in unicode mode

	* configure.in: Removed GTK_ENABLE_BROKEN

	* src/dialogs/text-edit.c: Use GtkTextView/Buffer

	* src/xml/repr-util.c (sp_repr_transfer_ids): Helper by MenTaLguY
	(sp_repr_move): Ditto

2003-01-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/xml-tree.c: Updated (MenTaLguY)

	* src/dialogs/item-properties.c (sp_item_widget_new): Added slider (MenTaLguY)

	* src/text-context.c (sp_text_context_setup): Set up Gtk IM (thanks to MenTaLguY)
	(sp_text_context_setup_text): Move code here (MenTaLguY)
	(sp_text_context_root_handler): Process Gtk IM (MenTaLguY)
	(sptc_commit): Gtk IM signal handler (MenTaLguY)

	* src/sp-text.c (sp_text_insert): Replace < 32 and not whitespace with space

	* src/selection.c (SP_SELECTION_UPDATE_PRIORITY): Set Gtk - 11

	* src/document.c (SP_DOCUMENT_UPDATE_PRIORITY): Set GTK - 12

2003-01-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/button.c (sp_button_paint_arrow): Draw something

2002-12-29  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/event-context.c (sp_event_context_private_root_handler): Pan with
	Shift+Button3 too (useful with windows and < 3 button mice)

	* src/toolbox.c (sp_toolbox_file_create): Mek print buttons insensitive

	* src/sp-text.c (sp_text_write_transform): Fixed it

	* src/main.c (sp_do_export_png): Initialize y0

	* src/file.c (sp_export_png_file): Use pixelstore, export min 64 rows at once,
	fix miscalculated rowstride

2002-12-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-type-directory.c (nr_type_read_w32_list): Use
	windows native fonts, if applicable

	* src/libnrtype/nr-type-w32.h: New file

	* src/libnrtype/nr-type-w32.c: New file

2002-12-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c (sp_print_image_R8G8B8A8_N): Implement direct PS version

2002-12-26  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.c (sp_print_bpath): Helper
	(sp_print_bind): Implement non-gnome-print version
	(sp_print_release): Ditto
	(sp_print_fill): Ditto
	(sp_print_stroke): Implement non-gnome-print version

	* src/widgets/icon.c (sp_icon_image_load): Generic image loader

	* src/desktop.c (sp_desktop_widget_update_zoom): Make working again

	* src/widgets/button.c: New file

	* src/widgets/button.h: New file

	* src/toolbox.c (sp_toolbox_draw_create): Port to brand new SPButton

2002-12-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/desktop.c (sp_desktop_widget_init): Some cleanup

	* src/widgets/ruler.c: Moved to widgets subdir

	* src/widgets/ruler.h: Moved to widgets subdir

2002-12-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: --with[out]-gnome-print argument, thanks to MentaLguY

2002-12-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-guide.c (sp_guide_set): Fixed horiz/vert

	* src/desktop-events.c (sp_dt_ruler_event): Fixed
	(sp_dt_guide_event): Fixed

	* src/helper/guideline.h: Renamed to avoid conflict with SPGuide object,
	several signature changes

	* src/helper/guideline.c: Ditto, removed properties

	* src/helper/sp-canvas.c (sp_canvas_window_to_world): Oops, was meant to be y0
	(sp_canvas_world_to_window): Ditto

2002-12-14  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/desktop-properties.c: Fully functional color picker

	* src/display/nr-arena-item.h: Ported rendering from NRBuffer to NRPixBlock,
	involves changes in most Arena objects. Added NO_CACHE flag to rendering.

2002-12-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/paint-selector.c (sp_paint_selector_style_button_add): Changed
	SODIPODI_GLADEDIR -> SODIPODI_PIXAMPDIR (Thanks to Ted Gould)

2002-12-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-guide.c (sp_guide_class_init): Removed translatability of properties

	* src/knot.c (sp_knot_class_init): Removed translatability of properties

	* src/helper/sp-guide.c (sp_guideline_class_init): Removed translatability
	from properties (who needs this?)

	* src/widgets/icon.h: New file, use as frontend to image loading

	* src/widgets/icon.c: New file

	* src/document.c (sp_document_create): Generic method, implement
	constructors as frontends

	* src/sodipodi.c (sodipodi_dispose): Only unref documents and let
	them manage list

	* glade/icons.svg: New icon definition file

2002-12-08  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/align.c (sp_align_arrange_clicked): Collected all
	arrangement methods into generic one
	(create_base_menu): Compact
	(sp_align_add_menuitem): New helper
	(sp_quick_align_dialog): Use value matrix instead of different callbacks

2002-12-07  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.c (sp_canvas_expose): Free rects

	* src/attributes.h: Added animation-specific attributes

	* src/sp-animation.c: New file, only skeleton at moment

	* src/sp-animation.h: New file

2002-12-06  Masatake YAMATO  <jet@gyve.org>

	* tools-version.sh: print the path to the tools.

2002-12-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-root.c (sp_root_update): Implement

	* src/sp-rect.c (sp_rect_update): Implement
	(sp_rect_set): Request update instead of setting shape immediately

	* src/sp-item-group.c (sp_group_update): Implement

	* src/sp-object.h: Replaced ::read_attr with ::set, signature change.
	This involves modification in all subclasses as well.

	* src/attributes.h: New file. We enumerate/define all allowed attributes
	and properties, to save few string compares later.

	* src/attributes.c: New file

2002-12-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-object.c (sp_object_request_update): New method. We implement
	separate ::update cascade that precedes ::modified, and is meant to
	be used for building item states (styles, paths and so on). In many
	aspects it shares code path with ::modified.
	(sp_object_invoke_update): Ditto

Wed Dec  4 01:05:05 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/widget/sp-menu-button.c: Fixed to work well.

	* src/toolbox.c: enable draw buttons.
	Comment out signal_connect_after.

2002-12-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-item.h: Replaced libart transforms and bboxes with libnr ones -
	this involves changes almost every file there.

	* src/main.c: Added POPT_AUTOHELP

2002-12-03  Masatake YAMATO  <jet@gyve.org>

	* tools-version.sh (TOOLS): Added automake-1.6 and
	aclocal-1.6. Suggested by MenTaLguY.
	(srcdir): remove version number from grep pattern.

2002-12-02  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.h: Made scrolling offsets integers

	* src/helper/sp-canvas.c (scroll_to): Scroll instead of draw

	* tools-version.sh (ENVPATTERN): Added FLAGS

2002-12-02  Masatake YAMATO  <jet@gyve.org>

	* distro, tools-version.sh: New files.
	distro comes from distro-0.8.1(http://distro.pipfield.ca/).
	distro and tools-version.sh should be included only in CVS version
	of sodipodi.

	* autogen.sh: Call tools-version.sh.

2002-12-02  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/desktop-properties.c: Partial color picker implementation

2002-12-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c: GtkObject/GObject cleanup

	* src/file.c: Ditto

	* TODO: Update with 0.29 tasks

	* src/sp-gradient.c: GtkObject/GObject cleanup

	* src/widgets/sp-widget.c: Ditto

	* src/widgets/gradient-selector.c: Ditto

	* src/widgets/gradient-vector.c: Ditto

	* src/widgets/gradient-position.c: Ditto

	* src/widgets/gradient-image.c: Ditto

	* src/dialogs/fill-style.c: Ditto

2002-11-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/view.h: Derive directly from GObject

2002-11-30  Masatake YAMATO  <jet@gyve.org>

	* configure.in (ENABLE_AUTOTRACE): Comment out autotrace/frontline
	checking till frontline becomes gtk+2 based.

2002-11-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/selection.h: Inherit directly from GObject

	* src/event-context.h: Inherit directly from GObject

	* src/helper/sp-canvas.c (sp_canvas_item_dispose): Set xform to NULL

	* src/display/canvas-arena.c (sp_canvas_arena_destroy): Fixed typo, so
	multiple destroys are allowed

	* src/nodepath.c: Removed external cursor pointers

	* src/knot.c (sp_knot_set_property): Ref new cursors

	* src/document.c (sp_document_get_type): Inherit directly from GObject

2002-11-29  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/knot.c (sp_knot_handler): Signature change, return correct value as it should

	* src/helper/sp-canvas.c (scroll_to): Blit window, unless explicitly forbidden
	(sp_canvas_size_allocate): Update onlu changed areas

	* src/sp-item.c (sp_item_invoke_bbox): Signature change

	* src/desktop.c (sp_desktop_widget_update_rulers): Reenabled it
	(sp_desktop_set_display_area): Only update canvas root if zoom factor changes
	(sp_desktop_update_scrollbars): Working

	* src/helper/sp-canvas.c (paint): use full visible are for clipping, fixed
	type on specifying area dimensionf in event
	(sp_canvas_get_viewbox): New method

	* src/desktop.c (sp_desktop_set_display_area): New method, replaces show_region
	(sp_desktop_get_display_area): Replacement for ...
	(sp_desktop_zoom_absolute): Use generic sp_desktop_set_visible_area
	(sp_desktop_zoom_relative): Ditto

2002-11-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: ... and everyting else - merged SODIPODI_GTK2_BRANCH

	* po/Makevars: Added this

2002-11-28  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add intl, m4.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add intl/Makefile, po/Makefile.in, m4/Makefile.

2002-11-27  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): New variable.
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): New variable.
	* configure.in (AC_OUTPUT): Add intl/Makefile, po/Makefile.in, m4/Makefile.

2002-11-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Version 0.29pre

2002-11-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-arena-glyphs.c (nr_arena_glyphs_group_add_component): Skip
	if zero-sized valid path

	* src/libnr/nr-path.c (nr_path_matrix_f_bbox_f_union): Allow NULL path member
	(nr_path_matrix_f_point_f_bbox_wind_distance): Ditto
	(nr_path_duplicate_transform): Ditto

	* src/libnrtype/nr-typeface.h: Added family member to definition

	* src/libnrtype/nr-type-directory.c (nr_type_register): Use family from def

	* src/libnrtype/nr-type-ft2.c (nr_type_ft2_build_def): Set family member

	* src/libnrtype/nr-type-gnome.c (nr_type_gnome_build_def): Set family member

2002-11-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dyna-draw-context.c: Clamp drag to [0.0 1.0]

2002-11-23  Masatake YAMATO  <jet@gyve.org>

	* src/node-context.c: Inlucde document.h.
	(sp_node_context_stamp): New function.
	(sp_node_context_root_handler): Do stamp if space key
	is pressed during dragging.

	* src/nodepath.c (stamp_repr): New function.
	(node_event): Do stamp if the space key is pressed.
	(node_ctrl_event): New function.
	(sp_nodepath_node_new): Connected node_ctrl_event to n->p.knot::event.
	Connected node_ctrl_event to n->n.knot::event. 

	* src/helper/bezier-utils.c (sp_bezier_fit_cubic_full): Fix memry leaks(u, uPrime).
	This leaks are reported by Michel Schinz <Michel.Schinz@epfl.ch>.

2002-11-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-type-gnome.c (nr_typeface_gnome_lookup): Added all
	glyphs to 0xe000 private plane as well.

	* src/widgets/gradient-selector.c (sp_gradient_selector_set_spread): Set
	position widget spread as well
	(sp_gradient_selector_spread_activate): Ditto

2002-11-21  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/curve.c (sp_curve_closepath): Reinitialize pointers, as we may
	have reallocated path in helper

	* src/knotholder.h: Added hook for knot ungrabbing

	* src/knotholder.c (knot_ungrabbed_handler): Implement
	(sp_knot_holder_destroy): Free list items

	* src/sp-ellipse.c (sp_arc_start_set): Use genericellipse closed marker
	(sp_arc_end_set): Ditto
	(sp_arc_set_elliptical_path_attribute): Ditto

	* autogen.sh: Added '--intl' to gettextize flags, seems to be safe for
	older gettexts as well

	* src/dialogs/xml-tree.c (on_tree_select_row): Remove extra blockade
	counting (thanks to MenTaLguY)
	(on_tree_unselect_row): Ditto

2002-11-20  Masatake YAMATO  <jet@gyve.org>

	* src/seltrans.c (sp_sel_trans_init): Set null to
	stamp_cache.
	(sp_sel_trans_ungrab): Clear stamp_cache.
	(sp_sel_trans_stamp): If available, use stamp_cache.
	Else build stamp_cache. l0 is removed. Don't
	free the list here.

	* src/seltrans.h: Included glib.h.
	(struct _SPSelTrans): added new field stamp_cache.

2002-11-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/interface.c (sp_ui_dialog_menu): Do not bring up > 1 transform dialogs at once

	* src/seltrans.c (sp_sel_trans_stamp): Reversing still was not correct,
	replaced it with explicit sort

2002-11-20  Masatake YAMATO  <jet@gyve.org>

	* src/seltrans.c (sp_sel_trans_stamp): The order of
	selections is reversed before stamping.

	The bug was reported by Michel Schinz <Michel.Schinz@epfl.ch>.

2002-11-19  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/desktop.c (sp_desktop_prepare_shutdown): New method, allowing us nice
	cleanup before ::destroy is invoked
	(sp_dtw_desktop_shutdown): Prepare desktop for shutdown

	* src/sp-text.c (sp_text_is_empty): Treat unicode private plane as graphical

	* src/libnrtype/nr-type-ft2.c (nr_typeface_ft2_lookup): Use private plane
	direct index, if no unimap
	(nr_typeface_ft2_new): Set unimap flag according to whether we have
	unicode mapping table or not

2002-11-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in (FREETYPE_LIBS): Added direct freetype check

	* src/widgets/dash-selector.c (sp_dash_selector_menu_item_new): Use created
	GC, as widget is not mapped yet
	(sp_dash_selector_new): Load stroke definitions from preferences

2002-11-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sodipodi-ctrl.c (sp_ctrl_build_cache): Cleaned up bitmap build

2002-11-17  Masatake YAMATO  <jet@gyve.org>

	* src/dialogs/xml-tree.c (sp_xml_tree_dialog): Added small
	space between attribute name text field and set attribute 
	button.

2002-11-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/xml-tree.c (sp_xml_tree_dialog): Cleanup by MenTaLguY

	* src/widgets/sp-xmlview-attr-list.c (event_attr_changed): Clamping string
	width to 64[+3], thanks to MenTaLguY

2002-11-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.c (sp_canvas_motion): Get pointer if motion hints are requested

	* src/select-context.c (sp_select_context_item_handler): Use motion hints

	* src/dialogs/text-edit.c (sp_text_edit_dialog_read_selection): Kill annoying
	warning about position > length

	* src/style.h (SP_SCALE24_FROM_FLOAT): Use temporary (double) cast
	(SP_SCALE24_TO_FLOAT): Ditto

	* src/dialogs/xml-tree.c (cmd_set_attr): Use gal unicode wrappers

	* src/widgets/sp-xmlview-attr-list.c (event_attr_changed): Use gal unicode wrappers

	* src/widgets/sp-xmlview-content.c (event_content_changed): Use gal unicode wrappers
	(sp_xmlview_content_changed): Ditto

	* src/widgets/sp-xmlview-tree.c (element_attr_changed): Use gal unicode wrapper
	(text_content_changed): Ditto

	* src/dialogs/xml-tree.c: Sorted out includes a bit
	(set_tree_desktop): Comment aout transient, as some WMs do not do it proper
	(on_desktop_selection_changed): Set/release block
	(on_tree_unselect_row): Ditto
	(on_tree_select_row): Ditto
	(get_dt_select): Use selection helper methods

2002-11-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnrtype/nr-type-gnome.c (nr_typeface_gnome_glyph_outline_get): Use
	metrics properly

	* src/libnrtype/nr-type-ft2.c (nr_typeface_ft2_ensure_slot_v): Implement for
	font missing vertical metrics
	(nr_typeface_ft2_ensure_outline): Ditto

	* src/libnrtype/nr-type-directory.c (nr_type_read_private_list): Read face
	number from proper place

	* src/libnrtype/nr-font.c (nr_font_generic_glyph_area_get): Implement

	* src/sp-text.c (sp_string_calculate_dimensions): Use metrics properly
	(sp_string_set_shape): Ditto

	* src/print.c (sp_print_stroke): Print dash

2002-11-14  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/file.c (sp_file_exit): Close all views before exiting

	* src/interface.c (sp_ui_close_view): Destroy viewwidget properly
	(sp_ui_close_all): New method

	* src/sp-rect.c (sp_rect_write_transform): Adjust dash in addition to stroke width

	* src/display/nr-arena-shape.c (nr_arena_shape_update): Only dash if
	total dash length is >= 1.0 pixels

	* src/dialogs/stroke-style.c (sp_stroke_style_line_update_repr): Divide
	dash values by line width
	(sp_stroke_style_scale_line): Multiply dash values by line width
	(sp_stroke_style_line_update): Ditto

	* src/widgets/dash-selector.c (sp_dash_selector_set_dash): Use 1/1000 of
	total dash distance as delta

	* src/sp-gradient.c (sp_gradient_write): Set xlink:href attribute
	(sp_stop_write): Do it the right way

2002-11-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/style.c (sp_style_read_dash): Allow comma separators
	(sp_style_read): Read dash presentation attributes

	* src/widgets/dash-selector.c: New file

	* src/widgets/dash-selector.h: New file

	* src/dialogs/stroke-style.c (sp_stroke_style_line_widget_new): Added dash
	pattern selector
	(sp_stroke_style_line_update): Update dash
	(sp_stroke_style_line_update_repr): Ditto
	(sp_stroke_style_line_dash_changed): Callback

2002-11-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/xml-tree.c: Naviagtion buttons, better layout and other
	improvements by MenTaLguY <mental@rydia.net>

2002-11-12  Masatake YAMATO  <jet@gyve.org>

	* configure.in: required frontline-0.5.4.
	You can get both autotrace and frontline from
	http://sourceforge.net/autotrace.
	(AC_PROG_AS): wrapped by ifdef.
	Missing to add ChangeLog before commiting.

2002-11-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-gradient.c (nr_rgradient_render_generic_symmetric): Fix
	array read overflow
	(nr_rgradient_render_generic_optimized): Ditto

	* src/widgets/paint-selector.c (sp_paint_selector_write_lineargradient): Normalize
	gradient transform and recalculate positions before applying
	(sp_paint_selector_write_radialgradient): Ditto

	* src/widgets/gradient-selector.c (sp_gradient_selector_set_mode): New method
	(sp_gradient_selector_init): Added units and spread optionmenu

	* src/widgets/gradient-position.c (sp_gradient_position_motion_notify): Comment
	out nonuniform placement, as it did not work correctly

	* src/libnr/nr-matrix.c (nr_matrix_d_invert): Fix really silly bug generating identities
	(nr_matrix_f_invert): Ditto

	* src/dialogs/stroke-style.c (sp_stroke_style_paint_update): Set gradient props

	* src/dialogs/fill-style.c (sp_fill_style_widget_update): Set gradient props

	* src/sp-gradient.h: Changed units enumeration, so 0 is default

	* src/display/nr-arena-shape.c (nr_arena_shape_pick): Re-enable SVP based check,
	only do winding check, if object is filled

	* src/file.c: Removed printing code, only frontends remain

	* src/print.c (sp_print_document): Implement
	(sp_print_document_to_file): Ditto

	* src/sp-gradient.c (sp_gradient_ensure_colors): Fixed writing last color
	outside of allocated color vector

2002-11-10  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Commented out AM_PROG_AS, as there is not such macro
	in my installation

	* src/libnrtype/nr-typeface.h: Signature change for outline unref

	* src/libnrtype/nr-type-gnome.c (nr_typeface_gnome_glyph_outline_get): Implemented
	vertical metrics outline
	(nr_typeface_gnome_glyph_advance_get): Ditto for advance

	* src/libnrtype/nr-type-directory.c: Cleaned up a lot, now we can hopefully
	work with multiple font sources

	* src/libnrtype/nr-type-directory.h: Moved namelist to nr-type-primitives

	* src/libnrtype/nr-type-primitives.c: New file

	* src/libnrtype/nr-type-primitives.h: New file

	* src/libnrtype/nr-type-ft2.c: New file

	* src/libnrtype/nr-type-ft2.h: New file

2002-11-09  Masatake YAMATO  <jet@gyve.org>

	* configure.in (AM_CONDITIONAL(USING_OAF)): moved to toplevel.
	(AM_PROG_AS): used to check gas/as.

	* src/toolbox.c (sp_update_draw_toolbox): tooltips
	are added to the buttons.
	(gtk_event_box_new_with_image_file_and_tooltips) 
	(gtk_event_box_force_draw_parent): New functions.

	* src/widgets/sp-menu-button.c (sp_menu_button_draw_arrow): New function.
	(sp_menu_button_draw): used sp_menu_button_draw_arrow.
	(sp_menu_button_expose): ditto.

2002-11-06  Masatake YAMATO  <jet@gyve.org>

	* src/helper/curve.c (sp_curve_new_from_bpath): Initialize substart
	field.
	(sp_curve_reverse): assert if bs->code is ART_MOVETO_OPEN 
	or ART_MOVETO.

	Added functions that converts multiple items to curves.
	* src/path-chemistry.c (sp_selected_item_to_curved_repr): 
	Use sp_selected_item_to_curved_repr0.
	(sp_selected_path_to_curves0): New function.
	(sp_selected_path_to_curves): New function.
	(SP_TOCURVE_*): Placeholders.

2002-11-05  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/export.c: Made glade-free dialog

	* src/file.c (sp_export_png_file): Make filename const

	* configure.in (CFLAGS): Added GCC warnings

2002-11-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/node-edit.c: Removed unused glade stuff

2002-11-04  Masatake YAMATO  <jet@gyve.org>

	* src/dialogs/xml-tree.c (sp_xml_tree_dialog): Added vpaned
	between sp_xmlview_attr_list_new and text fields.

2002-11-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* Makefile.am (SUBDIRS): Removed macros

	* autogen.sh: Made self-contained

	* configure.in: Removed macros

	* src/widgets/sp-xmlview-tree.c: new file by MenTaLguY

	* src/widgets/sp-xmlview-content.c: new file by MenTaLguY

	* src/widgets/sp-xmlview-attr-list.c: new file by MenTaLguY

	* src/libnrtype/nr-type-directory.c: Parsing works for normal fonts

2002-11-02  Masatake YAMATO  <jet@gyve.org>

	* README: removed GYVE.

	* doc/keybindings.txt: added a item for stamping.

	* doc/architecture.txt: Fix a typo in a document.
	/ is forgotten in a sample svg.

	* src/rect-context.c (sp_rect_context_config_widget): Fix a typo in a 
	label.

2002-11-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/desktop.h: s/GtkEventBoxClass/SPViewClass/; thanks to MenTaLguY

	* configure.in (have_gnome_print): Gnome-print support can be disabled

	* src/libnrtype/Makefile.am (INCLUDES): SODIPODI_GNOME_PRINT_CFLAGS

	* src/Makefile.am (sodipodi_LDADD): Added SODIPODI_GNOME_PRINT_LIBS
	(INCLUDES): Same for CFLAGS

2002-10-31  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/font-selector.c (struct _SPFontSelector): Use NRNameListss
	(sp_font_selector_init): Setup family namelist
	(sp_font_selector_family_select_row): Setup style namelist
	(sp_font_selector_set_font): Use namelist

	* src/libnrtype/nr-type-directory.c (nr_type_directory_lookup): New method
	(nr_type_directory_style_list_get): Return list of full names

	* src/libnrtype/nr-typeface.h: Added full name, removed generic style query

2002-10-31  Masatake YAMATO  <jet@gyve.org>

	* src/sp-image.c (autotrace_dialog): invokeed frontline_init
	if it is defined. in-cvs version of frontline defines 
	frontline_init.

2002-10-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/curve.c (sp_bpath_clean): Fixed warning (thanks to MenTaLguY)

2002-10-26  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c (sp_text_edit_dialog_update_object): Make
	style srings lowercase before applying

	* src/dialogs/desktop-properties.c (sp_desktop_dialog_new): Added
	togglebutton for showing/hiding page border

	* src/desktop.c (sp_dt_namedview_modified): Show/hide page border

	* src/sp-namedview.c (sp_namedview_read_attr): Listen to "showborder"

2002-10-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/item-properties.c: Removed libglade dependency

2002-10-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Added check for popt.h

	* src/dialogs/align.c: Removed libglade dependency

	* src/toolbox.c: Removed libglade dependency

2002-10-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/toolbox.c (sp_toolbox_button_new): Helper
	(sp_toolbox_toggle_button_new): Ditto
	(sp_toolbox_file_create): Degladeified method

	* src/file.c (sp_file_export_dialog): Frontend

	* src/toolbox.c (sp_toolbox_toggle_button_new): Helper
	(sp_toolbox_draw_create): Use previous

	* src/main.c: #include <desktop.h>

Mon Oct 21 13:31:41 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* configure.in: Fixed dependency bug.
	Removed --with/without-gnome-xml2 config option.

2002-10-21  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/sp-toolbox.c: Removed whole gtk.h inclusion

	* src/toolbox.c: Added missing headers

	* src/print.c (sp_print_image_R8G8B8A8_N): Implement
	(sp_print_preview): Remove root transform
	(sp_print_fill): Do not apply ctm twice

Mon Oct 21 02:11:08 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* autogen.sh: Fixed package version in echo message.

	* configure.in: Rewrite using PKG_CHECK_MODULES.
	It reduced verbose package checks.

	* src/main.c: Removed unused GNOME headers.

	* src/sp-ellipse.c: Ditto.

	* src/sp-image.c: Ditto.

	* src/toolbox.c: Ditto.

	* src/dialogs/align.c: Ditto.

	* src/dialogs/desktop-properties.c: Ditto.

	* src/dialogs/display-settings.c: Ditto.

	* src/dialogs/document-properties.c: Ditto.

	* src/dialogs/object-attributes.c: Ditto.

	* src/dialogs/object-properties.c: Ditto.

	* src/dialogs/stroke-style.c: Ditto.

	* src/dialogs/text-edit.c: Ditto.

	* src/dialogs/tool-attributes.c: Ditto.

	* src/dialogs/tool-options.c: Ditto.

	* src/helper/units.c: Ditto.

	* src/widgets/font-selector.c: Ditto.

	* src/widgets/gradient-selector.c: Ditto.

	* src/widgets/paint-selector.c: Ditto.

	* src/widgets/sp-color-selector.c: Ditto.

	* src/selection.c: Renamed release handler.

	* src/sp-gradient.c: Fixed non existence destroy signal bug.

	* src/sp-item.c: Ditto.

	* src/style.c: Ditto.

	* src/widgets/gradient-image.c: Ditto.

	* src/widgets/gradient-vector.c: Ditto.

	* src/sp-object.c: Cleanup.

Sun Oct 20 12:22:03 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* autogen.sh: Specify automake version to 1.6.1.

	* configure.in: Cleanup.

	* src/desktop-events.c: Cleanup and removed unused gnome header.

	* src/desktop.c: Ditto.

	* src/draw-context.c: Ditto.

	* src/dyna-draw-context.c: Ditto.

	* src/event-context.c: Ditto.

	* src/rect-context.c: Ditto.

	* src/spiral-context.c: Ditto.

	* src/star-context.c: Ditto.

	* src/file.c: Ditto.

	* src/help.c: Ditto.

	* src/main.c: Ditto.

	* src/sp-anchor.c: Ditto.

	* src/sp-item-group.c: Ditto.

	* src/sp-item.c: Ditto.

	* src/sp-rect.c: Ditto.

	* src/sp-shape.c: Ditto.

	* src/sp-spiral.c: Ditto.

	* src/sp-star.c: Ditto.

	* src/interface.c: Ditto.
	We lost icon for sp_about function.

	* src/sp-image.c: Cleanup and removed unused gnome header.
	Replaced by GtkDialog.

	* src/document.c: Ditto.

	* src/sodipodi.c: Ditto.

	* src/sp-namedview.c: Fixed bug that SPGuide was unrefed by
	gtk_object_unref.

	* src/sp-object.c: Fixed up release/disopse/finalize policy.
	We now got works again.
	(sp_object_class_init): Fixed object signal handler connection bug
	at release signal creation.

	* src/sp-pattern.c: Moved to g_object_unref.

	* src/sp-root.c (sp_root_release): Check if namedviews is NULL.

	* src/sp-text.c: Moved to g_object_unref.
	Removed unused gnome dependency.

	* src/svg-view.c: Moved to g_object_unref and
	g_object_get/set_data.

	* src/toolbox.c: Reverted from SPWrap to GtkTable.
	It's not a time to use SPWrap.

	* src/dialogs/export.c: Moved arena object to GObject functions.

	* src/dialogs/item-properties.c: Moved to g_object_unref.

	* src/dialogs/xml-tree.c: Cleanup.

	* src/display/nr-arena-glyphs.c: Moved from finalize to dispose.

	* src/display/nr-arena-group.c: Ditto.

	* src/display/nr-arena-image.c: Ditto.

	* src/display/nr-arena-item.c: Ditto.

	* src/display/nr-arena-shape.c: Ditto.

	* src/display/nr-arena.c: Ditto.

	* src/xml/sp-color-selector.c (sp_color_selector_init): Added
	GINT_TO_POINTER cast.

2002-10-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-compose-transform.c (nr_R8G8B8A8_P_R8G8B8A8_P_R8G8B8A8_N_TRANSFORM):
	Use mmx subcomposers if needed

	* src/libnr/nr_mmx_R8G8B8A8_P_R8G8B8A8_P_R8G8B8A8_N_TRANSFORM.S: New file

2002-10-19  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-compose-transform.c (nr_R8G8B8A8_P_R8G8B8A8_P_R8G8B8A8_N_TRANSFORM_0):
	Split composer
	(nr_R8G8B8A8_P_R8G8B8A8_P_R8G8B8A8_N_TRANSFORM_n): Ditto

2002-10-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr_mmx_R8G8B8A8_P_EMPTY_A8_RGBAP.S: new file

	* src/libnr/nr-path.c (nr_path_matrix_f_bbox_f_union): Moved bpath
	bbox calculation here
	(nr_curve_bbox): Rearrange comparisons

Thu Oct 17 15:25:43 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* Removed macros directory.

	* Makefile.am, autogen.sh, configure.in: Corresponding changes.

2002-10-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.c: Use idle priority lower than Gtk redraw

	* src/display/nr-arena-shape.c (nr_arena_shape_pick): Use libnr
	distance7wind calculation, if item is not at render state
	(nr_arena_shape_update): Only update bbox, if render state is not
	needed. This gave us approximately 10x faster dragging of comlex shapes

	* src/libnr/nr-path.c (nr_line_wind_distance): New helper method
	(nr_curve_bbox_wind_distance): Ditto
	(nr_path_matrix_f_point_f_bbox_wind_distance): Fast method to find
	bbox and/or wind and/or distance to bezier path

2002-10-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/print.h: New file, frontend to printing

	* src/print.c: New file, frontend to printing

2002-10-15  Davide Puricelli  <evo@debian.org>

	* debian/*: Updated

2002-10-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-item.c (sp_item_invoke_print): Rename, signature change

	* src/sp-item.h: SPItem::print signature change

	* src/forward.h: Added SPPrintContext

	* src/libnr/testnr.c (main): Fill mask with blocks of transparent, opaque
	and random data. This should be closer to reality and (surprise!) gives better
	performance numbers too!

	* src/libnrtype/nr-typeface.c: Moved everyting to virtual method vector

Sun Oct 13 20:54:15 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* autogen.sh: Come from GNOME2.

Sun Oct 13 20:27:04 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/desktop-events.c, src/desktop.c,
	src/dialogs/object-properties.c:
	Moved gnome_pixmap_new_from_file to gtk_image_new_from_file.

	* src/draw-context.c: Replaced finalize with destory.

	* src/sp-polygon.c: Fixed property bug which did not work
	correctly.

	* src/widgets/sp-wrap-box.c, src/widgets/sp-wrap-box.h,
	src/widgets/sp-hwrap-box.c, src/widgets/sp-hwrap-box.h,
	src/widgets/sp-vwrap-box.c, src/widgets/sp-vwrap-box.h: New files.

	* src/widgets/test-wrapbox.c: New file.

	* src/widgets/Makefile.am: Added wrapbox stuffs.

	* src/widgets/.cvsignore: Added test-wrapbox.

	* src/widgets/sp-toolbox.c: Used g_signal_new instead of
	gtk_signal_new, because we need accumulater to control signal
	handler flow, and previous codes are not perfect.

Sun Oct 13 04:18:41 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sodipodi.c, sodipodi.h: sodipodi_get_elapsed_time()
	was useless, so removed.

	* src/knot.c: Replaced finalize with dispose.
	use GDK_CURRENT_TIME instead of sodipodi_get_elapsed_time().

	* src/select-context.c: Use GDK_CURRENT_TIME instead of
	sodipodi_get_elapsed_time().

	* src/style.c: Replaced destroy with release.

	* src/text-context.c: Replaced finalize with destory,
	because it's not a direct subclass of GObject.
	Replaced noisy gtk_signal_disconnect_by_data with
	g_signal_handlers_disconnect_matched.

	* src/toolbox.c: Use normal gtk_menu_item_set_submenu instead of
	original gtk_menu_popup callback.

	* src/sp-object.c: Fixed illegal signal emission.

	* src/selection.c:

	* src/dialogs/fill-style.c: Added required headler files.

	* src/dialogs/item-properties.c: Depressed warning.

	* src/display/canvas-arena.c: Use GDK_CURRENT_TIME instead of
	sodipodi_get_elapsed_time().

	* src/helper/sp-guide.c: Cleanup.

	* src/widgets/sp-menu-button.c: Use GDK_CURRENT_TIME instead of
	sodipodi_get_elapsed_time().
	Changed popup style.

2002-10-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.c (uta_clear): Experimental method
	(paint): Return, if events pending (commented out)
	(do_update): Return value
	(idle_handler): Use update return value

	* src/libnr/testnr.c: Speed test

	* src/libnr/nr_mmx_R8G8B8_R8G8B8_R8G8B8A8_P.S: New file

	* src/helper/sp-canvas-util.c (sp_canvas_clear_buffer): Be quick

	* src/helper/sp-canvas.h: Moved update flags back here

	* src/display/canvas-arena.c (sp_canvas_arena_update): Sort updates according to affine (again)

	* src/libnr/have_mmx.S: New file (copied from gdk-pixbuf)

	* configure.in (use_mmx_asm): Check for mmx

	* src/libnr/nr-compose.c (nr_R8G8B8A8_P_R8G8B8A8_P_A8_RGBA32): Use mmx if present

	* src/libnr/nr_mmx_R8G8B8A8_P_R8G8B8A8_P_A8_RGBAP.S: Assembler code

2002-10-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.h: Changed object type to SPCanvas, cleanup

	* src/helper/sp-canvas.c: Ditto

2002-10-10  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas.c: Local version of praised GnomeCanvas

	* src/helper/sp-canvas.h: Local version of praised GnomeCanvas

	* src/libnr/nr-gradient.c (nr_rgradient_render_generic_symmetric): Optimize

2002-10-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-blit.c (nr_blit_pixblock_mask_rgba32): New method

	* src/libnr/nr-gradient.c (nr_rgradient_renderer_setup): Do r == 0 correctly
	(nr_rgradient_render_generic_optimized): Optimize
	(nr_rgradient_render_block_end): New method

	* configure.in: Version 0.28pre

2002-10-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Version 0.27

	* src/text-context.c (sp_text_context_root_handler): Only turn off unimode,
	if there really is string associated with key

2002-10-09  Masatake YAMATO  <jet@gyve.org>

	* src/sp-image.c (load_splines): changed the order
	of arguments. this change is for frontline-0.5.3.

	* configure.in: required frontline-0.5.3.
	To build sodipodi with frontline you have to get:
	http://autotrace.sourceforge.net/snapshots/autotrace-0.30.8.tar.gz
	http://autotrace.sourceforge.net/frontline/frontline-0.5.3.tar.gz

2002-10-08  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/gradient-position.c (sp_gradient_position_motion_notify): Do
	not mess with lineargradient skew

	* src/sp-ellipse.c (sp_arc_modified): Continue upstream

Mon Oct  7 01:41:23 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* Merged from HEAD branch.

2002-10-07  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c: Moved frontends here

	* src/dialogs/node-edit.h: Moved declarations here

	* src/desktop.c (sp_desktop_widget_view_position_set): Use grid placement
	(sp_desktop_widget_namedview_modified): Read grid placement
	(sp_desktop_widget_update_rulers): Use grid placement
	(sp_desktop_set_coordinate_status): Disable, until sorted out

	* src/widgets/font-selector.c (sp_font_selector_set_font): Implement

	* src/libnrtype/nr-rasterfont.c (nr_rasterfont_ensure_glyph_slot): Oops, alloc
	and clear the right number of blocks

	* src/libnr/nr-compose.c (nr_R8G8B8_R8G8B8_A8_RGBA32): Implement
	(nr_R8G8B8_EMPTY_A8_RGBA32): Implement

	* src/libnr/nr-blit.c (nr_blit_pixblock_mask_rgba32): Implement

	* src/widgets/font-selector.c (sp_font_preview_expose): Implement
	(sp_font_preview_set_font): Ditto

	* src/libnr/nr-pixblock-pattern.h: New file

	* src/libnr/nr-pixblock-pattern.c: New file

2002-10-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/toolbox.c (sp_toolbox_draw_create): Do not expand/fill use correct name for text

	* sodipodi.spec.in: Update to cleaner version by Dag Vieers

	* src/sp-text.c (sp_text_is_empty): New method
	(sp_string_release): Use ::release, not ::destroy
	(sp_tspan_release): Ditto
	(sp_text_release): Ditto

	* src/text-context.c (sp_text_context_selection_changed): Forget text
	(sp_text_context_forget_text): New method, remove empty text item

	* src/sp-text.c (sp_tspan_build): Ensure there is always text child

	* src/sp-item-group.c (sp_group_bbox): Do not set bbox to 0,0,0,0

	* src/select-context.c (sp_select_context_root_handler): Set grabbed to NULL on release

	* src/path-chemistry.c (sp_selected_path_combine): Use item2root transform
	(sp_selected_path_break_apart): Ditto

	* src/sp-item.c (sp_item_i2root_affine): New method

	* src/widgets/gradient-position.c (sp_gradient_position_motion_notify): Reset
	gradient relative transform to symmetric rectilinear if dragging

	* src/style.c (sp_style_merge_ipaint): Use "release" signal
	(sp_style_read_ipaint): Ditto

	* src/sp-pattern.c (sp_pattern_read_attr): Use "release" signal

	* src/sp-item.c (sp_item_read_attr): Use "release" signal

	* src/sp-image.c (autotrace_dialog): Connect "release" instead of "destroy"

	* src/sp-gradient.c (sp_gradient_href_release): Use "release" instead of "destroy"

2002-10-06  suzuki toshiya <mpsuzuki@hiroshima-u.ac.jp>

	* src/libnr/Makefile.am (libnr_a_SOURCES): added
	nr-gradient.h. (nr-gradient.c appeared twice.)

2002-10-04  Masatake YAMATO  <jet@gyve.org>

	* src/widgets/font-selector.c: Inlucded stdlib.h for atof.

2002-10-05  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-gradient.c (nr_rgradient_renderer_setup): Use different base renderers
	(nr_rgradient_render_block_symmetric): Split frontend
	(nr_rgradient_render_block_optimized): Ditto
	(nr_rgradient_render_generic_optimized): Asymmetric renderer

	* src/sp-object.c (sp_object_invoke_release): new frontend
	(sp_object_detach): release object
	(sp_object_detach_unref): Ditto

	* src/sp-object.h: Added ::release virtual method

	* src/sp-object.c (sp_object_invoke_shutdown): New method

2002-10-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-item-group.c (sp_item_group_ungroup): Rewrite it, so it moves
	all non-items to main <defs> node, preserving logical order and building
	objects in correct sequence

	* src/desktop-affine.c: Methods for root coordinate system, fixes misplacement bug

	* src/libnrtype/nr-rasterfont.c: Made working

	* src/libnrtype/nr-font.c (nr_font_new_default): Do linking
	(nr_font_unref): Ditto

	* src/libnrtype/nr-type-directory.c (nr_typeface_unref): Moved here, implemented list

	* src/display/nr-arena-glyphs.c (nr_arena_glyphs_update): Port to rfont
	(nr_arena_glyphs_pick): Ditto (placeholder)
	(nr_arena_glyphs_set_path): Ditto
	(nr_arena_glyphs_fill_mask): Ditto

	* src/libnr/nr-matrix.h (NR_MATRIX_DF_EXPANSION): New macro
	(NR_MATRIX_DF_EXPANSION2): Ditto

2002-10-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_text_set_shape): Make document insensitive temporarily

	* src/text-context.c (sp_text_context_root_handler): Allow entering
	unicode mode by Ctrl-u

2002-10-02  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-chars.c (sp_chars_add_element): Signature change
	(sp_chars_show): Ditto

	* src/display/nr-arena-glyphs.c (nr_arena_glyphs_group_add_component): Signature change

	* src/libnrtype/nr-rasterfont.c (nr_rasterfont_new): Set it up
	(nr_rasterfont_unref): Release glyph slots
	(nr_rasterfont_render_glyph_mask): Implement
	(nr_rasterfont_ensure_glyph_slot): New helper

	* src/sp-text.c: Port to new chars signature

	* src/sp-chars.h: Use font instead of typeface

	* src/libnr/nr-gradient.c (nr_lgradient_render_block): Signature change
	(nr_lgradient_renderer_setup): Use generic base class
	(nr_rgradient_renderer_setup): Ditto
	(nr_rgradient_render_block): Signature change

	* src/libnr/nr-render.h: New file

2002-10-01  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c (sp_text_edit_dialog_update_object): Use libnrtype
	(sp_text_edit_dialog_read_selection): Ditto
	(sp_text_edit_dialog_font_changed): Ditto

	* src/libnrtype/nr-type-directory.h: Implement NRNameList

	* src/libnrtype/nr-type-directory.c (nr_type_directory_lookup_fuzzy): Force lowercase
	(nr_type_directory_family_list_destructor): Implement
	(nr_type_directory_family_list_get): Ditto
	(nr_type_directory_style_list_destructor): Ditto
	(nr_type_directory_style_list_get): Ditto

	* src/widgets/font-selector.c: New file

	* src/widgets/font-selector.h: New file

	* src/libnrtype/nr-rasterfont.c: New file

	* src/libnrtype/nr-rasterfont.h: New file

	* src/libnr/nr-matrix.c (nr_matrix_f_set_scale): Correct signature

	* src/sp-text.c (sp_font_get_glyph_bbox): Use libnrtype
	(sp_font_get_glyph_advance): Ditto
	(sp_font_get_glyph_bbox_lr2tb): Ditto
	(sp_string_calculate_dimensions): Ditto
	(sp_string_set_shape): Ditto

	* src/sp-chars.c (sp_chars_destroy): Use libnrtype
	(sp_chars_bbox): Ditto
	(sp_chars_show): Ditto
	(sp_chars_clear): Ditto
	(sp_chars_add_element): Ditto
	(sp_chars_normalized_bpath): Ditto
	(sp_chars_do_print): Ditto

	* src/sp-chars.h (sp_chars_set_paintbox): Use libnrtype

	* src/libnrtype/nr-type-gnome.h: Placeholder

	* src/libnrtype/nr-type-directory.c: New file

	* src/libnrtype/nr-type-directory.h: New file

	* src/libnrtype/nr-font.c: New file

	* src/libnrtype/nr-font.h: New file

	* src/libnrtype/nr-typeface.c: New file

	* src/libnrtype/nr-typeface.h: New file

	* src/Makefile.am (SUBDIRS): Added libnrtype

	* src/libnr/nr-path.h: Placeholder

2002-09-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/gradient-position.c (spgp_clip_line): New method
	(spgp_draw_rect): Ditto

Sun Sep 29 14:17:31 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/knot.c, knot.h: Moved SPKnot from subclass of GtkObject
	to GObject.

	* src/knotholder.c: Ditto

	* src/seltrans.c: Ditto

	* src/selection.c: Migrated dispose to destroy for remainder.

	* src/desktop-events.c: Fixed to connect signal handler correctly.

	* src/desktop.c: Fixed to add button correctly.

	* src/sp-use.c: Depressed gchar * warnings.

	* src/sp-guide.c: Indented.

2002-09-29  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-gradient.c (sp_gradient_set_gs2d_matrix_f): Oops, write the right transform

	* src/widgets/gradient-position.c: Use new sensible internals

	* src/widgets/gradient-position.h: Ported to ne internals

	* src/widgets/paint-selector.c (sp_paint_selector_set_mode_gradient): Removed
	separate linear/radial optionmenu

	* src/widgets/gradient-selector.c (sp_gradient_selector_set_gs2d_matrix_f): New method
	(sp_gradient_selector_get_gs2d_matrix_f): Ditto
	(sp_gradient_selector_set_rgradient_position): Implement
	(sp_gradient_selector_init): Pax buttons under vector

	* src/widgets/gradient-position.c: New positioning syntax, lots of radial stuff

	* src/libnr/nr-matrix.h (NR_MATRIX_DF_TRANSFORM_X): Convenience macro
	(NR_MATRIX_DF_TRANSFORM_Y): Ditto

	* src/dialogs/object-properties.c (sp_object_properties_dialog): Shorten string

	* src/dialogs/stroke-style.c (sp_stroke_style_paint_update): Use new
	gradient widgets syntax
	(sp_stroke_style_paint_dragged): Ditto
	(sp_stroke_style_paint_changed): Ditto

	* src/dialogs/fill-style.c (sp_fill_style_widget_update): Use new gradient
	widgets syntax for bbox, transform, position
	(sp_fill_style_widget_paint_dragged): Ditto, use helper
	(sp_fill_style_widget_paint_changed): Ditto

	* src/sp-gradient.c (sp_gradient_get_gs2d_matrix_f): New method
	(sp_gradient_set_gs2d_matrix_f): Ditto
	(sp_gradient_write): Implement
	(sp_lineargradient_write): Ditto
	(sp_radialgradient_write): Ditto

	* src/select-context.c (sp_select_context_root_handler): Process button
	release only if grabbed

2002-09-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/gradient-vector.c (sp_gvs_rebuild_gui_full): Do not add id label

	* src/widgets/paint-selector.c (sp_paint_selector_init): Added radial button
	(sp_paint_selector_set_style_buttons): Set radial
	(sp_paint_selector_set_mode_gradient): Set correct button

	* glade/Makefile.am (pixmaps): Added fill_radial.xpm

Sat Sep 28 14:35:21 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/toolbox.c: Use gtk_window_set_resizable() instead of
	gtk_window_set_policy(), because it is deprecated in GTK+2.

	* src/file.c: Depressed warning on gnome_print_master_perview_new.

	* src/sp-object.h, sp-object.c: Added destroy signal and
	remove dispose signal.

	* src/selection.c, sp-gradient.c, style.c,
	src/widgets/gradient-vector.c: Moved dispose to destroy.

	* src/sp-guide.c: Added property.

	* src/helper/sp-guide.c: Added property.

	* src/sp-namedview.c: Moved gtk_object_unref to g_object_unref.

	* src/dialogs/text-edit.c: Removed some GNOME dependencies.

	* src/helper/gnome-utils.h gnome-utils.c: New file.
	Utilities to help to remove GNOME libraries.

	* src/interface.c: Moved some GNOME functions to gnome-utils.h.

2002-09-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/paint-selector.c (sp_paint_selector_get_gradient_position_floatv): Set radial

	* src/libnr/nr-pixblock-pixel.c (nr_compose_pixblock_pixblock_pixel): Kill
	division by zero, if fg and bg are both fully transparent

	* src/dialogs/fill-style.c (sp_fill_style_widget_update): Implement radial
	(sp_fill_style_widget_paint_dragged): Ditto
	(sp_fill_style_widget_paint_changed): Ditto

	* src/sp-gradient.c (sp_radialgradient_set_position): New method

	* src/gradient-chemistry.c (sp_gradient_ensure_radial_private_normalized): New method
	(sp_gradient_get_radial_private_normalized): Ditto
	(sp_item_force_fill_radialgradient_vector): Ditto
	(sp_item_force_stroke_radialgradient_vector): Ditto

2002-09-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/widgets/paint-selector.c (sp_paint_selector_set_gradient_radial): New method

	* src/widgets/gradient-position.c (sp_gradient_position_set_mode): New method
	(sp_gradient_position_update): Setup linear/radial renderer as needed

	* src/widgets/gradient-selector.c (sp_gradient_selector_set_mode): New method
	(sp_gradient_selector_set_lgradient_position): Renamed method
	(sp_gradient_selector_set_rgradient_position): Ditto
	(sp_gradient_selector_get_lgradient_position_floatv): Renamed method
	(sp_gradient_selector_get_rgradient_position_floatv): Ditto

	* src/libnr/nr-pixblock-pixel.c (nr_compose_pixblock_pixblock_pixel): Fixed
	R8G8B8 target to render channels separately

	* src/sp-gradient.c (sp_gradient_from_position_xy): Made gradient method,
	changed signature, added gradientTransform to list
	(sp_gradient_to_position_xy): Ditto

	* src/libnr/nr-pixblock-pixel.c: New file

	* src/libnr/nr-pixblock-pixel.h: New file

	* src/libnr/nr-gradient.c (nr_lgradient_renderer_setup): Use gradientspace
	(nr_lgradient_render_block): Use generic renderer, if no specific one
	(nr_lgradient_render_generic): Implement

	* src/sp-gradient.c (sp_gradient_render_vector_block_rgb): Compose correctly

	* src/libnr/nr-blit.c (nr_compose_pixblock_pixblock_pixel): Generic pixel composer

2002-09-26  Masatake YAMATO  <jet@gyve.org>

	* src/select-context.c (sp_select_context_root_handler):
	used sp_canvas_item_grab where I want to receive key_press event.
	(sp_select_context_item_handler): Ditto.

2002-09-26  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-gradient.c: New file

	* src/libnr/nr-gradient.h: New file

	* src/sp-gradient.c (sp_lineargradient_painter_new): Construct libnr renderer
	(sp_lg_fill): Use it
	(sp_radialgradient_painter_new): Construct renderer
	(sp_rg_fill): Use it

	* src/sp-shape.c (sp_shape_print): Clear pixelstore

	* src/sp-chars.c (sp_chars_print_bpath): Clear pixelstore before each rendering

	* src/sp-gradient.c (sp_rg_fill): Oops, moved declaration before statements
	(sp_rg_fill): Ditto

2002-09-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-compose.c (nr_R8G8B8A8_N_EMPTY_R8G8B8A8_P): Oops, evil bug

	* src/libnr/nr-rect.c (nr_rect_d_matrix_d_transform): New method
	(nr_rect_f_matrix_f_transform): Ditto

	* src/sp-object-repr.c (sp_object_type_lookup): Added <pattern>

	* src/sp-pattern.h: New file

	* src/sp-pattern.c: New file

	* src/Makefile.am (sodipodi_SOURCES): Added sp-pattern.[c,h]

	* src/sp-gradient.c (sp_rg_fill): Implement, seems correct although SLOW
	(sp_radialgradient_painter_new): Implement, except viewport percentages
	(sp_radialgradient_read_attr): Initialize right numbers
	(sp_radialgradient_init): Ditto

Tue Sep 24 01:01:21 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/interface.c (sp_ui_menu_append_item): Fixed to work well,
	even if label is exist and stock is not exist.

	* src/widgets/sp-menu-button.c (sp_menu_button_menu_position):
	Modified for popup menu calculation.

	* src/widgets/sp-toolbox.c: Added GTK_SIGNAL_FUNC cast.

2002-09-24  Masatake YAMATO  <jet@gyve.org>

	* src/select-context.c (sp_select_context_root_handler,
	sp_select_context_item_handler): used GDK_space instead
	of GDK_BUTTON_2. Added Lauris's event mask code after 
	grabbing an item.

	* src/seltrans.c (sp_sel_trans_handle_stamp): removed.
	(sp_seltrans_handle_event): handled "pressing space" as 
	stamping.
	(gdk/gdkkeysyms.h): included.

	* src/knot.c (sp_knot_class_init): removed "stamped" signal 
	again.
	(sp_knot_handler): didn't emit stamped anymore.

2002-09-24  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/nr-matrix.c (nr_matrix_d_set_scale): new method
	(nr_matrix_f_set_scale): Ditto

	* src/sp-use.c (sp_use_href_changed): Use unref instead of destroy
	(sp_use_destroy): Ditto

	* src/seltrans.c (sp_sel_trans_scale): Allow scaling in one dimension,
	if it is > 0.0
	(sp_sel_trans_scale_request): Snap in one dimension, if > 0.0

	* src/sp-path.c (sp_path_bbox): Allow empty bboxen

	* src/helper/art-utils.c (sp_bpath_matrix_d_bbox_d_union): Union always,
	even if computed bbox is empty

Mon Sep 23 01:37:09 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/widgets/sp-menu-button.c: Clean up code.

	* src/widgets/sp-menu-button.c (sp_menu_button_menu_position):
	In GTK+2, button widget share its window among toplevel window,
	so I fixed offset calculation.

	* src/knot.c: Clean up unused marshaller.

	* src/knotholder.c: Ported.

2002-09-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/sp-canvas-util.c (sp_canvas_item_grab): new method to
	circumvent GnomeCanvas bug

	* src/knot.c (sp_knot_handler): Use sp_canvas_item_grab

2002-09-23  Masatake YAMATO  <jet@gyve.org>

	* src/knot.c (sp_knot_class_init): Added "stamped" signal
	(sp_knot_handler): Emit it

	* src/select-context.c (sp_select_context_item_handler): Do stamping
	(sp_select_context_root_handler): Ditto

	* src/seltrans.c (sp_sel_trans_stamp): new method
	(sp_show_handles): Connect "stamped" signal
	(sp_sel_trans_handle_stamp): new handler

2002-09-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/seltrans.c (sp_seltrans_handle_event): Just here for my debugging

	* src/knot.c (sp_knot_handler): No ungrabbing, added TOP CANVAS HACK,
	so we can now get key events and do not kill Gdk

	* configure.in: Version 0.27pre

Sun Sep 22 22:06:57 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/desktop.c: add destroy call for GtkDialog.

	* src/sp-object.c, sp-polyline.c, style.c,
	src/display/canvas-area.c, src/widgets/gradient-image.c,
	gradient-vector.c: Ported and fixed.

	* src/sp-ruler.c: Bug fixed that
	misspelling s/GtkHRuler/SPHRuler/ and s/GtkVRuler/SPVRuler/.

	* src/widgets/sp-menu-button.c, sp-menu-button.h, src/toolbox.c:
	Found duplicated signal "activate".
	So, renamed SPMenuButton::activate to "activate-item" and
	did corresponding change for toolbox.c.

	* src/helper/sp-ctrlline.c: Avoid to duplicated free call for ctrlline->svp.

2002-09-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Version 0.26

	* src/main.c: #include <locale.h>, thanks to Masatake

Sun Sep 22 22:21:14 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-ruler.c: Bug fixed that
	misspelling s/GtkHRuler/SPHRuler/ and s/GtkVRuler/SPVRuler/.

Sat Sep 21 03:02:21 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* Now, sodipodi can build and start up again (but often cause segv).

	* src/display/canvas-arena.c, nr-arena-glyphs.h, nr-arena.c:
	Ported.

	* src/dialogs/export.c, text-edit.c: Ported.

	* src/widgets/sp-color-slider.c, sp-menu-button.c: Ported.

	* src/*.c, *.h: Ported.

	* glade/*.glade: conveted to glade-2.

2002-09-21  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/fill-style.c (sp_fill_style_widget_new): Fill rule selector
	(sp_fill_style_widget_update): Update fill rule selector
	(sp_fill_style_widget_update_repr): Ditto
	(sp_fill_style_widget_fill_rule_activate): Set fill-rule

	* src/document.c (sp_document_new): Do not set style

	* src/xml/repr.c (sp_repr_merge): Duplicate node without id key

	* src/sp-path.c (sp_path_build): Set fill to none for old version open path

	* src/bonobo/embeddable-document.c (sp_embeddable_document_pf_load): New
	document constructor signature, thanks to Ted Gould
	(sp_embeddable_document_ps_load): Ditto
	(sp_embeddable_document_new): Ditto

	* src/help.c (sp_help_about): use sp_text_set_repr_multiline

	* src/style.c (sp_style_write_difference): Rewind pointer

	* src/sp-ellipse.c (sp_genericellipse_set_shape): Request modified
	(sp_arc_modified): Implement, write path attribute

2002-09-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-object.c (sp_object_private_write): Duplicate repr if needed

	* src/xml/repr-util.c (sp_repr_set_double_default): New method

	* src/sp-rect.c (sp_rect_write): Set default on radiuses

	* src/sp-root.c (sp_root_write): Set namespaces here

	* src/xml/repr.c (sp_repr_document_new): Set doctype and comment

	* src/xml/repr-io.c (sp_repr_read_file): Set doctype and comment if SVG
	(sp_repr_read_mem): Ditto
	(sp_repr_save_stream): Save doctype and comment

Thu Sep 19 19:24:04 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-marshal.*, src/Makefile.am: Removed old marshaller codes.

2002-09-19  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_string_set_shape): Update position array
	(sp_text_get_cursor_coords): New method
	(sp_text_set_shape): Set tspan position to text, if unset; Limit block
	to tspans with unspecified role
	(sp_text_insert_line): Implement

	* src/text-context.c (sp_text_context_setup): Set blink to 250ms
	(sp_text_context_selection_modified): Implement, update cursor position
	(sp_text_context_selection_changed): Ditto
	(sp_text_context_root_handler): Cursor placement, insertion and deletion
	work as they should

	* src/display/nr-arena-shape.c (nr_arena_shape_update): Do not try to
	fill paths consisting of single lineto

	* src/gradient-chemistry.c (sp_gradient_ensure_private_normalized): Only keep
	if hrefcount == 1 (fixed bug)

	* src/style.c (sp_style_read): Only parse CMYK if RGBA present

2002-09-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-ellipse.c (sp_arc_set_elliptical_path_attribute): Lay 2PI arcs as 2 segments
	(sp_arc_write): Write SVG <ellipse> if it really is one

	* src/style.c (sp_style_write_ienum): We compare computed values, to
	avoid unnecessary setting of attributes
	(sp_style_merge_from_parent): Set only computed values for everything

	* src/helper/art-utils.c (sp_vpath_from_bpath_closepath): New method,
	borrowed relevant helpers from libart code

	* src/display/nr-arena-shape.c (nr_arena_shape_update): Closeall if filled,
	limit min width to 0.125 instead of cutting it to 0

2002-09-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/event-context.c (sp_event_context_destroy): Do not disconnect
	desktop signal, as there is no such
	(sp_event_context_new): Do not connect desktop signal

	* src/draw-context.c (sp_pencil_context_root_handler): Changed grabbing only
	to happen, if pointer is moved button-down. This changed irritating
	double-click total grab problem.
	(sp_pen_context_root_handler): Ditto

	* src/display/nr-arena-group.c (nr_arena_group_update): Multiply
	with group second transformation

	* src/display/nr-arena-group.h: Added child_affine member

	* src/sp-root.c (sp_root_read_attr): Use NRMatrixD for viewbox
	(sp_root_show): Implement, apply viewBox
	(sp_root_bbox): Ditto
	(sp_root_print): Ditto

	* src/sp-item.c (sp_item_i2doc_affine): Apply viewBox

Tue Sep 17 13:50:40 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/dialogs/stroke-style.c: A few fix from my office.

Mon Sep 16 21:31:33 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/display/*: Really done.

	* src/*: Half done, but partially adhock.

Mon Sep 16 14:22:10 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* Start migration to GTK+2 environment.

	* Makefile.am, configure.in, acconfig.h: Use pkgconfig, GLib2,
	Pango, GTK+2, GNOME2, etc.

	* src/dialogs/*: Done.

	* src/display/*: Done.

	* src/helper/*: Done.

	* src/svg/*: Done.

	* src/widgets/*: Done.

	* src/xml/*: Done.

	* src/*: Partialy done.

2002-09-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/png-write.c (sp_png_get_block_stripe): Helper
	(sp_png_write_rgba): Use striped writer
	(sp_png_write_rgba_striped): New method

	* src/dialogs/export.c (sp_export_get_rows): Renderer
	(sp_export_do_export): Use striped exporter

	* src/file.c: Added <time.h> - Thanks to Masatake for finding it

2002-09-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/nr-arena-image.c (nr_arena_image_render): Use libnr
	transformed composition methods

	* src/libnr/nr-compose-transform.c: New file

	* src/libnr/nr-compose-transform.h: New file

2002-09-15  Masatake YAMATO  <jet@gyve.org>

	* src/toolbox.c (sp_maintoolbox_drag_data_received): made
	it a static scoped function.
	(sp_maintoolbox_create): Connected sp_maintoolbox_drag_data_received
	to maintoolbox. (glade based version is obsoleted.)

	* src/toolbox.c (sp_maintoolbox_drag_data_received): removed 
	declaration.

2002-09-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/file.c (sp_file_save_as): Added "file type" optionmenu
	(sp_file_save_type_activate): Helper
	(file_save_ok): Save plain SVG if needed

	* src/sp-namedview.c (sp_namedview_write): Implement

	* src/sp-text.c (sp_text_write): Implement

	* src/sp-use.c (sp_use_write): implement

	* src/sp-root.c (sp_root_write): Implement

	* src/sp-polyline.c (sp_polyline_write): Implement

	* src/sp-line.c (sp_line_write): Implement

	* src/sp-image.c (sp_image_write): Implement

	* src/sp-gradient.c (sp_stop_write): Implement

	* src/sp-defs.c (sp_defs_write): Implement

	* src/sp-clippath.c (sp_clippath_write): Implement

	* src/sp-anchor.c (sp_anchor_write): Implement

	* src/sp-polygon.c (sp_polygon_write): new ::write syntax

	* src/sp-spiral.c (sp_spiral_write): New ::write syntax

	* src/sp-star.c (sp_star_write): New ::write syntax

	* src/sp-ellipse.c (sp_ellipse_write): New ::write syntax
	(sp_circle_write): Ditto
	(sp_arc_write): Ditto

	* src/sp-rect.c (sp_rect_write): New ::write syntax

	* src/sp-shape.c (sp_shape_write): New ::write syntax

	* src/star-context.c (sp_star_finish): New ::write syntax

	* src/spiral-context.c (sp_spiral_finish): New ::write syntax

	* src/knotholder.c (knot_moved_handler): new ::write syntax

	* src/sp-object.c (sp_object_invoke_write): Renamed and enhanced
	::write_repr method, can now construct trees and write plain SVG

	* src/sp-item-group.c (sp_group_write): Implement

2002-09-14  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/toolbox.c (sp_maintoolbox_menu_button_press): Construct main
	menu here dynamically

	* src/main.c (sp_main_console): Hide documents for nongui, slideshow

	* src/interface.c (sp_ui_file_menu): Recent list
	(sp_ui_main_menu): Ditto
	(sp_menu_append_recent_documents): New helper

	* src/help.c (sp_help_about): Hide document from list

	* src/file.c (sp_file_open): New method
	(sp_file_open_dialog): Renamed old sp_file_open

	* src/sodipodi.c (sodipodi_add_document): Emit "new_document"
	(sodipodi_remove_document): Emit "destroy_document", update recent list
	(sodipodi_segv_handler): Truncate filenames to sensible part

	* src/toolbox.c (sp_maintoolbox_open_one_file_with_check): Use sp_file_open

2002-09-13  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/draw-context.c (sp_pencil_context_root_handler): Clear anchors
	(spdc_finish_endpoint): Ditto
	(spdc_pen_finish): Ditto

	* src/document.h: Moved uri/base/name to main structure

	* src/draw-context.c (sp_pen_context_finish): Call parent method, fixes
	habit of crashing after using pen

2002-09-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/libnr/*: Started composing sensible library at last

	* src/document.c: Fix DTD typo

	* src/main.c (sp_main_gui): Moved setting LC_NUMERIC after gnome init
	(sp_main_console): Set LC_NUMERIC to "C" here too

2002-09-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* configure.in: Version 0.26pre

	* src/display/Makefile.am (libspdisplay_a_SOURCES): Removed fill.[c,h] and stroke.[c,h]

2002-09-11  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/node-context.c (sp_node_context_item_handler): Do not
	select, if rubberband has been dragged

	* src/widgets/sp-menu-button.c (sp_menu_button_draw): Implement,
	draw small indication arrow here
	(sp_menu_button_expose): Ditto

	* src/helper/curve.c (sp_bpath_clean): New method
	(sp_curve_new_from_bpath): Clean bpath, if not good
	(sp_curve_new_from_static_bpath): Ditto
	(sp_curve_new_from_foreign_bpath): Ditto

	* src/macros.h: Some new macros

	* src/sp-object.c (sp_object_modified): Oops! Replaced '&&' with '&',
	this fixed super-slow rendering during drag bug

2002-09-10  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/selection-chemistry.c (sp_group_cleanup): Helper
	(sp_edit_cleanup): New method

	* src/path-chemistry.c (sp_path_cleanup): New method

	* src/draw-context.c (sp_draw_context_finish): Implement

	* src/seltrans.c (sp_sel_trans_ungrab): Do not set identity

	* src/sp-item-transform.c: Do not set identity transform

	* src/sp-text.c (sp_text_write_transform): Do not write identity

	* src/sp-rect.c (sp_rect_write_transform): Do not write identity

	* src/xml/repr.c (sp_repr_remove_listener_by_data): Oops, removed excess step

	* src/sp-shape.c (sp_shape_build): Force style rewrite for old versions

	* src/view.c (sp_view_widget_view_destroy): handler
	(sp_view_widget_set_view): Connect "destroy"

	* src/main.c (sp_do_export_png): Move exporting code here, implement
	--export-width, --export-height, --export-backround arguments

	* src/helper/nr-plain-stuff.c (nr_render_r8g8b8a8_r8g8b8a8_alpha): Implement
	using internal composer

	* src/sp-item.c (sp_item_paint): Render buffer instead of copy

2002-09-09  Masatake YAMATO  <jet@gyve.org>

	* src/sp-image.c (autotrace_dialog): Used 
	gtk_signal_connect_object_while_alive and 
	gtk_signal_connect_object instead of gtk_signal_connect_while_alive
	and gtk_signal_connect.
	(object_destroyed): Removed.
	(load_trace_result): ask the user whehter loading or net.

	* configure.in (AM_PATH_FRONTLINE): Check the version of frontline(>= 0.5.1).

2002-09-09  Zbigniew Chyla  <cyba@gnome.pl>

	* src/draw-context.c, src/dyna-draw-context.c, src/select-context.c,
	src/spiral-context.c, src/star-context.c,
	src/dialogs/tool-attributes.c, src/dialogs/tool-options.c,
	src/dialogs/xml-tree.c: Added <config.h>

2002-09-09  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/gradient-chemistry.c (sp_gradient_ensure_private_normalized): Normalize
	if flag is set, but hrefcount > 1
	(sp_item_force_fill_lineargradient_vector): Check for hrefcount
	(sp_item_force_stroke_lineargradient_vector): Ditto

	* src/interface.c: Added <config.h>

	* glade/toolbox.glade: Fixed non-ASCII character

2002-09-08  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/export.c (sp_export_do_export): Fixed affine

	* src/main.c (sp_main_console): Fixed affine

	* src/toolbox.c (sp_maintoolbox_create): Construct main window by hand

	* src/interface.c (sp_ui_main_menu): New method

	* src/help.c (sp_help_about): Use document width and height

	* src/svg-view.c (sp_svg_view_rescale): Use pixel coords
	(sp_svg_view_widget_size_request): Ditto

	* src/spiral-context.c (sp_spiral_context_config_widget): Implement
	(sp_spiral_context_setup): Ditto
	(sp_spiral_context_set): Ditto

	* src/star-context.c (sp_star_context_config_widget): Implement

	* src/desktop.c (sp_desktop_new): Use repr key for initial select context

	* src/select-context.c (sp_select_context_config_widget): Implement
	(sp_select_context_transform_toggled): Helper
	(sp_select_context_show_toggled): Ditto

	* src/display/nr-arena-shape.c (nr_arena_shape_update): Do not stroke,
	if width < 0.125

	* src/display/nr-arena-glyphs.c (nr_arena_glyphs_group_update): Use paintbox
	(nr_arena_glyphs_group_set_paintbox): New method
	(nr_arena_glyphs_update): Do not stroke if width < 0.125
	(nr_arena_glyphs_render): Do not render here
	(nr_arena_glyphs_fill_mask): New helper
	(nr_arena_glyphs_stroke_mask): Ditto
	(nr_arena_glyphs_group_update): Create painters here
	(nr_arena_glyphs_group_render): Render here

	* src/dialogs/tool-attributes.c (sp_tool_attributes_dialog_setup): Added
	SPSelectContext

	* src/dialogs/stroke-style.c (sp_stroke_style_paint_update): Use new gradient
	position widget logic
	(sp_stroke_style_paint_dragged): Ditto
	(sp_stroke_style_paint_changed): Ditto

	* src/dialogs/fill-style.c (sp_fill_style_widget_update): Use new gradient
	position widget logic
	(sp_fill_style_widget_paint_dragged): Ditto
	(sp_fill_style_widget_paint_changed): Ditto

	* src/sp-shape.c (sp_shape_show): Calculate and set paintbox
	(sp_shape_modified): Ditto

	* src/sp-gradient.c (sp_lineargradient_from_position): New method
	(sp_lineargradient_to_position): Ditto

	* src/sp-chars.c (sp_chars_print_bpath): Implement via nr plain buffers
	(sp_chars_set_paintbox): New method

	* src/seltrans.c (sp_sel_trans_shutdown): Destroy handles and canvasitems

	* src/seltrans.h: Added modifieable parameters

	* src/selection.c (sp_selection_bbox_document): New method

	* src/select-context.c (sp_select_context_set): Implement this

	* src/arc-context.c (sp_arc_finish): Oops, set sodipodi namespace

2002-09-07  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/style.c (sp_length_differ): Oops, if units differ check value

	* src/sp-paint-server.h: painter contructor signature change

	* src/display/nr-arena-shape.c: Remove group stuff
	(nr_arena_shape_set_paintbox): New method

	* src/display/nr-arena-shape.h: Remove group stuff

	* src/sp-object.c (sp_object_get_style_property): read presentation attr

	* src/sp-chars.c (sp_chars_style_modified): Use nr_arena_glyphs_group
	(sp_chars_show): Ditto
	(sp_chars_clear): Ditto
	(sp_chars_add_element): Ditto

	* src/sp-shape.c (sp_shape_modified): Set paintbox
	(sp_shape_style_modified): Use single nr_arena_shape
	(sp_shape_show): Ditto
	(sp_shape_remove_comp): Ditto
	(sp_shape_add_comp): Ditto

	* src/macros.h: Add total silencing

	* src/sp-gradient.c (sp_lineargradient_painter_new): Implement userSpaceOnUse
	except percentages (still not clear, what to do with those), but do
	bbox correctly

2002-09-06  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c (sp_text_edit_dialog_update_object): Generic method
	(sp_text_edit_dialog_set_default): New method
	(sp_text_edit_dialog_read_selection): Read defaults if no text
	(sp_text_edit_dialog_text_changed): Update default button
	(sp_text_edit_dialog_font_changed): Ditto
	(sp_text_edit_dialog_any_toggled): Ditto
	(sp_ted_get_selected_text_item): Helper

	* src/dialogs/tool-options.c (sp_tool_options_dialog_setup): Implement
	using sp_event_context_config_widget

	* src/event-context.h: Added ::config_widget virtual method

	* src/event-context.c (sp_event_context_config_widget): New method

	* src/dyna-draw-context.c (sp_dyna_draw_context_config_widget): new method

2002-09-05  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/stroke-style.c (sp_stroke_style_paint_construct): Handler
	(sp_stroke_style_paint_attr_changed): Ditto
	(sp_stroke_style_repr_get_style): Helper
	(sp_stroke_style_paint_update_repr): For SPRepr associated styles
	(sp_stroke_style_paint_changed): Write bare repr if needed
	(sp_stroke_style_line_construct): Handler
	(sp_stroke_style_line_attr_changed): Ditto
	(sp_stroke_style_line_update_repr): Alternate parser
	(sp_stroke_style_width_changed): Write repr if needed
	(sp_stroke_style_any_toggled): Ditto

	* src/dialogs/object-properties.c (sp_object_properties_dialog): build
	optionmenu for choosing between selection/tools

	* src/dialogs/fill-style.c (sp_fill_style_widget_new): Attach attr_changed
	(sp_fill_style_repr_get_style): Helper
	(sp_fill_style_widget_update_repr): Repr-associated version updater
	(sp_fill_style_widget_paint_changed): Write repr instead of item list if needed

	* src/widgets/sp-widget.c (spw_repr_attr_changed): Repr callback
	(sp_widget_new_global): Build from sodipodi
	(sp_widget_new_repr): Build from repr
	(sp_widget_construct_global): Constructor
	(sp_widget_construct_repr): Ditto

	* src/style.c (sp_style_new): New method
	(sp_style_read): Move evrything here
	(sp_style_read_from_object): Frontend
	(sp_style_read_from_repr): Ditto

2002-09-04  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-path.c (sp_path_build): Update SODIPODI-PATH-NODE-TYPES attribute

2002-09-03  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_text_set_shape): Oooooooops, use MAX for bbox other corner

	* src/document.c (sp_document_new): Set docname attribute after build

	* src/sp-text.c (sp_text_find_version): Helper
	(sp_text_build): Build tspans etc. if 0.0 < version < 0.25

	* src/sp-ellipse.c (sp_arc_find_version): Helper
	(sp_arc_build): Per-version attributes
	(sp_arc_read_attr): Ditto

	* src/document.c (sp_document_new): Delay namespaces etc. to determine version
	(sp_document_new_from_mem): Ditto

	* src/document.h: Bring some members here

2002-09-02  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/stroke-style.c (sp_stroke_style_line_update): Make insensitive, if not stroked

	* src/sp-rect.c (sp_rect_write_transform): Adjust stroke width, if scale changes

	* src/sp-text.c: Port to SPSVGUnits

	* src/sp-root.c: Port to SPSVGLength, use pixels as basic units from now on

	* src/sp-rect.c: Port to SPSVGLength

	* src/sp-image.c: Port to SPSVGLength

	* src/sp-gradient.c: Port to SPSVGLength

	* src/sp-ellipse.c: Port to SPSVGLength

	* src/file.c (sp_do_file_print_to_printer): Fix px/pt ratio
	(sp_do_file_print_preview): Ditto

	* src/document.c (sp_document_width): Fix px/pt ratio
	(sp_document_height): Ditto
	(sp_document_new): Add sodipodi:version
	(sp_document_new_from_mem): Ditto

	* src/desktop.c (sp_desktop_init): Fix px/pt ratio in doc2dt matrix

	* src/svg/svg-length.c (sp_svg_length_read): New method
	(sp_svg_length_read_lff): Ditto
	(sp_svg_length_unset): Ditto

	* src/svg/svg-types.h: New file

	* src/dialogs/Makefile.am (libspdialogs_a_SOURCES): Added tool-options.[c,h]

2002-08-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_text_set_shape): Do layouting here, so we can handle blocks

	* src/dialogs/text-edit.c (sp_text_edit_dialog): Layout radiobuttons
	(sp_text_edit_dialog_apply): Do layout
	(sp_text_edit_dialog_read_selection): Ditto

	* src/sp-text.c (sp_font_get_glyph_bbox): New helper
	(sp_font_get_glyph_advance): Ditto
	(sp_font_get_glyph_bbox_lr2tb): Ditto
	(sp_string_calculate_dimensions): Do vertical dimension correctly
	(sp_string_set_shape): Ditto

2002-08-29  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_string_calculate_dimensions): New method

	* configure.in: Rewind required gnome-print version to 0.29

	* src/sp-object.h: Added viewport and user flags

	* src/style.c: Added functional 'text-anchor' property

	* src/style.h: Added functional 'text-anchor' property

	* src/svg/svg-color.c (sp_svg_read_color): Read rgb(r,g,b) variants

	* src/style.c: Created new IEnum type with immediate and computed members,
	ported font-style, font-variant, font-weight, font-stretch to it

	* src/sp-text.c (sp_string_set_shape): Use computed 'font-style' value

	* glade/Makefile.am (glade_DATA): Removed text-dialog.glade

	* src/dialogs/text-edit.c: Get rid of glade

2002-08-28  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/display/canvas-arena.c: Ref active item, so it does not disappear

	* src/style.c: Implement SPIFontSize and various helpers for it

	* src/sp-text.c: New font size type

	* src/sp-shape.c: 24-bit opacity scale

	* src/sp-item.c (sp_item_read_attr): Reread style for font-size

	* src/sp-image.c: 24-bit opacity scale

	* src/sp-chars.c: 24-bit opacity scale

	* src/gradient-chemistry.c: 24-bit opacity scale

	* src/file.c (sp_do_file_print_preview): Ensure up-to-date
	(sp_do_file_print_to_printer): Ditto

2002-08-27  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/export.c (sp_export_do_export): Fix affine (one more time)

	* src/sp-item.c (sp_item_paint): Ensure document is up-to-date

	* src/sp-chars.c (sp_chars_print_bpath): Use new transformed bpath bbox
	(sp_chars_bbox): Ditto

	* src/sp-path.c (sp_path_bbox): Use new transformed bpath bbox

	* src/helper/art-utils.c (sp_bpath_matrix_d_bbox_d_union): New method
	(sp_bpath_segment_bbox_d): Helper

2002-08-26  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c (sp_text_dialog_apply): Oops, set size, not some crap here

	* src/sp-chars.c (sp_chars_do_print): New direct method
	(sp_chars_print_bpath): Helper

	* src/gradient-chemistry.c (sp_item_repr_set_style_gradient): Set recursive

2002-08-25  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/text-context.c (sp_text_context_finalize): Do not use desktop here
	(sp_text_context_finish): Implement, release desktop stuff here

	* src/sp-text.c (sp_text_normalized_bpath): New method
	(sp_text_print): Implement, still needs SPChars method

	* src/sp-chars.c (sp_chars_normalized_bpath): New method

	* src/path-chemistry.c (sp_selected_path_to_curves): Convert the new text object

	* src/interface.c (sp_ui_file_menu): Use helpers, the right export dialog

	* src/draw-context.c (sp_pen_context_finish): Flush object
	(sp_pen_context_root_handler): Added 'BackSpace', should work OK now

	* src/event-context.c (sp_event_context_finish): New method and virtual method

	* src/desktop.c (sp_desktop_set_event_context): Finish eventcontext

	* src/helper/curve.c (sp_curve_backspace): New method

2002-08-24  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/helper/curve.c (sp_curve_append): Handle open/closed end and start

	* src/preferences-skeleton.h: Added pen tool, made AI style default

	* src/draw-context.c (sp_draw_context_setup): Set attach
	(sp_draw_context_root_handler): React to '+' key
	(spdc_set_attach): Set/clear append mode
	(spdc_attach_selection): Renamed
	(spdc_detach_selection): New method
	(spdc_reset_white): Only need white, not all colors
	(sp_pencil_context_root_handler): Destroy green anchor on release
	(sp_pen_context_setup): Handle "mode" attribute
	(sp_pen_context_set): Ditto
	(sp_pen_context_root_handler): Has now AI style (default) and click-click modes
	(spdc_pen_set_ctrl): Handle modes
	(spdc_pen_finish): New method

2002-08-23  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/sp-attribute-widget.h: It can now be attached to mere SPRepr too

	* src/dialogs/sp-attribute-widget.c (sp_attribute_widget_new_repr): New constructor
	(sp_attribute_widget_set_repr): New method
	(sp_attribute_table_new_repr): New constructor
	(sp_attribute_table_set_repr): New method

	* src/star-context.c (sp_star_context_set): Attribute reader
	(sp_star_context_setup): parse attributes

	* src/marshal.c (sp_marshal_NONE__STRING_BOOL): New method

	* src/interface.c (sp_ui_dialog_menu): Tool attributes menu

	* src/event-broker.c: Added event context node location

	* src/dyna-draw-context.c (sp_dyna_draw_context_set): Attribute reader
	(sp_dyna_draw_context_setup): Parse attributes

	* src/draw-context.h: Added selection member

	* src/view.c (sp_view_set_position): Frontend to virtual method
	(sp_view_set_status): Ditto

	* src/view.h: Added virtual methods for marking status and position

	* src/desktop.c (sp_desktop_widget_view_status_set): Moved status to
	parent container, where it belongs
	(sp_desktop_widget_view_position_set): Same for position
	(sp_desktop_widget_new): Listen status and position signals

	* src/dialogs/tool-attributes.c: New file

	* src/dialogs/tool-attributes.h: New file

2002-08-20  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dyna-draw-context.c: Removed control knot, as we do not attach to anything

	* src/xml/repr.c (sp_repr_unref): Implemented launching destroy listener

	* src/xml/repr-private.h: Added destroy listener

2002-08-19  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sodipodi.c (sodipodi_segv_handler): Do better names and inform user about these

	* src/selection-chemistry.c (sp_item_list_common_parent_group): Helper
	(sp_selection_raise): Made it to work with all item combinations
	(sp_selection_lower): Ditto, do not lower under non-items

	* src/sp-item-group.c (sp_group_order_changed): Fix item order calculation

2002-08-18  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/document-undo.c (sp_document_order_changed): Set correct action type

2002-08-17  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/selection-chemistry.c (sp_selection_ungroup): Use method from item group

	* src/sp-item-group.c (sp_item_group_ungroup): Preserve order and styles

	* src/style.c (sp_style_read_from_object): Synchronized with new style structure
	(sp_style_merge_property): Ditto
	(sp_style_merge_from_object_parent): Ditto
	(sp_style_merge_ipaint): Renamed
	(sp_style_write_string): New write semantics
	(sp_style_write_difference): New method
	(sp_text_style_write): New write semantics
	(sp_style_read_ifloat): Rename
	(sp_style_read_iscale30): Ditto
	(sp_style_read_ienum): Ditto
	(sp_style_read_istring): Ditto
	(sp_style_read_ipaint): Ditto
	(sp_style_write_ifloat): Signature, semantics and name change
	(sp_style_write_iscale30): Ditto
	(sp_style_write_ienum): Ditto
	(sp_style_write_istring): Ditto
	(sp_style_write_ipaint): Ditto
	(sp_paint_differ): Helper

	* src/style.h: Renamed inherited types, changed miterlimit to ifloat

	* src/color.c (sp_color_is_equal): New method

	* src/style.c (sp_style_merge_from_style_string): Accept (although warn)
	properties without end marker

	* src/dialogs/export.c (sp_export_do_export): Use correct transformation

	* src/main.c: Added command-line export functionality
	(main): Cleanup
	(sp_main_gui): Broke GUI-specific stuff here
	(sp_main_console): Same for console mode, implement export, use current dor for print

2002-08-16  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/toolbox.c (sp_maintoolbox_create): Moved draw toolbox to separate method
	(sp_toolbox_draw_set_object): Callback
	(sp_toolbox_draw_create): New method, create MenuButtons
	(sp_update_draw_toolbox): Use MenuButtons

	* src/event-broker.c: Added pen context, use pencil and pen instead of draw

	* src/draw-context.c: Break draw context into parent, pencil and pen

	* src/draw-context.h: Ditto

	* src/widgets/sp-menu-button.h: New file

	* src/widgets/sp-menu-button.c: New file, implement something similar to
	GtkOptionmenu, but with some sodipodi-specific sugar

	* glade/draw_pen.xpm: New file

	* src/draw-context.c (sp_draw_context_finalize): Destroy pen controls
	(sp_draw_context_setup): Setup pen controls
	(sp_draw_context_root_handler): Do pen stuff
	(spdc_pen_set_point): New helper
	(spdc_pen_set_ctrl): Ditto
	(spdc_pen_finish_segment): Ditto

	* src/helper/sp-ctrlline.c (sp_ctrlline_set_rgba32): New method

2002-08-15  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/toolbox.c (sp_update_draw_toolbox): Freehand keeps undo/redo sensitive now

	* src/document.c (sp_document_ensure_up_to_date): New method

	* src/draw-context.c (sp_draw_context_setup): Read selection data
	(sp_draw_context_root_handler): Use colors for freehand, place green anchor
	(spdc_selection_changed): Use read_selection
	(spdc_selection_modified): Ditto
	(spdc_read_selection): New method
	(spdc_add_freehand_point): Ditto
	(spdc_concat_colors_and_flush): Check, whehter green anchor exist, do contiguous append
	(fit_and_split): Use continious append
	(sp_draw_anchor_destroy): Signature change

2002-08-14  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/draw-context.c (sp_draw_context_destroy): Do not destroy start and end anchors
	(sp_draw_context_selection_modified): Save white curves in desktop coordinates
	(sp_draw_context_root_handler): Use state indicator, change addline modes on release
	(spdc_concat_colors_and_flush): Use continuous append
	(spdc_flush_white): Translate everything to item coordinates here

	* src/draw-context.h: Replace booleans with single state indicator

	* src/helper/curve.c (sp_curve_transform): New method
	(sp_curve_append_continuous): New method

2002-08-12  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/draw-context.c (spdc_finish_endpoint): Cleanup
	(spdc_flush_white): Do concat, create object if needed, do red->white transform if needed
	(spdc_clear_red_data): Helper

	* src/draw-context.h: Member rename

	* src/helper/curve.c (sp_curve_append): Append the whole curve, not just last segment
	(sp_curve_concat): Set lengths etc. correctly, fixes draw crash

2002-08-08  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/text-edit.c (sp_text_dialog_apply): Why there were strdups here?

	* src/style.c (sp_style_read_from_object): Cleanup font-family and font-size
	(sp_style_merge_property): Ditto
	(sp_style_merge_from_object_parent): Ditto
	(sp_text_style_write): Ditto
	(sp_style_read_inherited_float): New helper
	(sp_style_read_inherited_string): Ditto
	(sp_style_write_inherited_float): Ditto
	(sp_style_write_inherited_string): Ditto

	* src/sp-text.c (sp_text_set_repr_text_multiline): Set roles and line positions

2002-08-07  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_text_read_attr): Request relayout
	(sp_text_child_added): Ditto
	(sp_text_remove_child): Ditto
	(sp_text_modified): Check, whether relayout is needed
	(sp_text_request_relayout): Helper

	* src/style.c (sp_style_merge_from_object_parent): Inherit font size (still wrong)

	* src/text-context.c (sp_text_context_root_handler): Allow control key
	to be passed, send nonbreaking space for Ctrl+Space

	* src/sp-text.c (sp_string_set_shape): Try to collect spaces across item boundaries
	(sp_tspan_set_shape): Ditto
	(sp_text_set_shape): Ditto

2002-08-05  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/text-context.c (sp_text_context_root_handler): Use sp_text_append

	* src/sp-text.c (sp_text_append): New method

2002-07-31  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/text-context.c (sp_text_context_finalize): Use it instead of ::destroy
	(sp_text_context_setup): Create cursor
	(sp_text_context_root_handler): Show cursor
	(sp_text_context_selection_changed): Update cursor
	(sp_text_context_timeout): Blink handler

	* src/text-context.h: Added cursor

2002-07-30  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/Makefile.am (sodipodi_SOURCES): Added macros.h

	* src/sp-text.c (sp_text_write_transform): Do multiline transforming
	the right way

	* src/macros.h: New file for useful macros

2002-07-29  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_tspan_build): Get attributes at right place, read role as well
	(sp_tspan_read_attr): Parse "sodipodi:role" attribute
	(sp_text_append_line): New method

	* src/sp-text.h: Specify role for <tspan> element

2002-07-26  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-text.c (sp_string_set_shape): Changed signature, pass layout and currentpoint
	(sp_tspan_set_shape): New method
	(sp_text_build): Use normal order, as shape will be set asynchronously
	(sp_text_read_attr): Request update everywhere
	(sp_text_child_added): Fix bug, now keep old children in list
	(sp_text_set_shape): New method, nothing interesting yet

	* src/text-context.c (sp_text_context_selection_changed): Set active object
	to NULL, if nothing selected

2002-07-24  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/sp-object.c (sp_object_modified): Merge style with parent if needed,
	moved style_modified after signal

	* src/sp-text.c (sp_tspan_modified): Include style flag in cascade
	(sp_text_modified): Ditto
	(sp_string_modified): Re-enable it (although this is probably not correct)

	* src/style.c (sp_style_merge_from_object_parent): Merge writing mode

	* src/sp-item-group.c (sp_group_modified): Include style flag in cascade

	* src/sp-gradient.c (sp_gradient_modified): Include style flag in cascade

2002-07-22  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/style.c (sp_style_new_from_object): Renamed sp_style_new
	(sp_style_read_from_object): Use SP_SCALE30 for opacity, new paint structure
	(sp_style_merge_property): Ditto
	(sp_style_merge_from_object_parent): Renamed sp_style_merge_from_object,
	read only from immediate parent (which should have merged from ancestors itself)
	(sp_style_write_string): Use SP_SCALE30 for opacity, new paint structure
	(sp_style_clear): Ditto
	(sp_style_set_opacity): Ditto
	(sp_style_read_inherited_scale30): New method
	(sp_style_write_inherited_scale30): Ditto
	(sp_style_read_inherited_paint): Renamed, parse "inherit" value
	(sp_style_write_inherited_paint): Ditto, write it
	(sp_style_merge_inherited_paint): Do hunref here
	(sp_style_set_fill_color_rgba): Do hunref instead of gtk_object_unref, new structure
	(sp_style_set_fill_color_cmyka): Ditto
	(sp_style_set_stroke_color_rgba): Ditto
	(sp_style_set_stroke_color_cmyka): Ditto
	(sp_style_read_color_cmyk): Helper method here
	(sp_style_merge_from_style_string): Renamed method

	* src/style.h: Created new 30-bit scaled value type, used for opacity
	Renamed SPPaint to SPInheritedPaint

Sat Jul 13 19:47:16 2002 Davide Puricelli <evo@debian.org>

	* po/ja.po: Updated, thanks Junichi Uekawa <dancer@netfort.gr.jp>

Sat Jul 13 05:52:15 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-item-group.c (sp_group_bbox): Fixed group selection bug -
	thanks to Ted Gould and his bug report.

2002-05-20  Lauris Kaplinski  <lauris@ximian.com>

	* src/xml/repr-io.c (sp_repr_svg_read_node): Add namespaces back -
	thanks to Pawel

	* src/dialogs/xml-tree.c: Complete refactoring by Pawel Palucha

	* src/document.c (sp_document_lookup_id): Check values

2002-04-21  Masatake YAMATO  <jet@gyve.org>

	* src/toolbox.c (sp_maintoolbox_open_files): Use 
	gnome_uri_list_extract_filenames.

	* src/interface.c (sp_ui_import_files): Ditto.

2002-04-19  Lauris Kaplinski  <lauris@ximian.com>

	* src/text-context.c (sp_text_context_root_handler): Port to new
	text object (incomplete)
	(sp_text_context_selection_changed): Ditto

	* src/sp-text.c: Lot of new stuff, shows something on screen at last

	* src/sp-object.c (sp_object_modified): Do not allow reentrancy
	- think SPText will like it

	* src/sp-item.c: Removed sp_item_update and virtual method

	* src/sp-item-group.c: Removed ::update method

2002-04-17  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-rect.c (sp_rect_rx_set): Make argument const, kill warning
	(sp_rect_ry_set): Ditto

2002-04-12  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-text.h: Broke into SPText, SPTSpan and SPString objects

	* src/sp-text.c (sp_text_build): Build <tspan> and TEXT elements

	* src/forward.h: Moved SPText and SPTSpan here

2002-04-08  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item.h: Changed ::bbox signature

	* src/sp-item.c (sp_item_invoke_bbox): New generic method
	(sp_item_bbox_desktop): renamed old method

	* src/display/nr-arena-glyphs.c: Ditto

	* src/display/nr-arena-glyphs.h: New file

	* src/sp-chars.c (sp_chars_get_type): Change parent class
	(sp_chars_class_init): Ditto
	(sp_chars_destroy): New elements structure
	(sp_chars_style_modified): New virtual method
	(sp_chars_bbox): Ditto
	(sp_chars_show): Ditto
	(sp_chars_print): Ditto (not implemented)
	(sp_chars_clear): New structure
	(sp_chars_add_element): Ditto

	* src/sp-chars.h: Derive directly from item instead of shape

	* src/dialogs/align.c (sp_quick_align_arrange): New bbox logic

	* src/dialogs/export.c (sp_export_drawing): New bbox logic

Sun Apr  7 01:37:29 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/style.c: (sp_style_read_from_object): Fixed to work stroke-cmyk.

	* src/sp-item.c: (sp_item_read_attr): Ditto

2002-04-06  Lauris Kaplinski  <lauris@ximian.com>

	* src/xml/repr-io.c (sp_repr_read_file): Use new signature
	(sp_repr_read_mem): Ditto
	(sp_repr_qualified_name): New method
	(sp_repr_svg_read_node): Signature change, create text nodes

	* src/xml/repr-util.c (sp_xml_document_createTextNode): New method
	(sp_xml_document_createElement): Ditto
	(sp_xml_document_createElementNS): Ditto
	(sp_xml_node_get_Document): Ditto
	(sp_xml_element_setAttributeNS): Ditto

	* src/xml/repr.c (sp_repr_new_from_code): Set type

	* src/svg/svg-length.c (sp_svg_read_number_f): New method with right signature
	(sp_svg_read_number_d): Ditto

	* src/style.c (sp_style_privatize_text): New method
	(sp_style_merge_property): Moved text properties here

	* src/sp-text.c (sp_text_init): No properties
	(sp_text_build): No style anymore
	(sp_text_style_modified): New virtual method
	(sp_text_font_weight_to_gp): Helper
	(sp_text_font_italic_to_gp): Ditto
	(sp_text_set_shape): Use style properties, hackish support for vertical writing

	* src/sp-text.h: Removed properties from object, as these are handled by style

2002-04-04  Lauris Kaplinski  <lauris@ximian.com>

	* src/helper/canvas-bpath.c (sp_canvas_bpath_init): Can be filled now
	(sp_canvas_bpath_destroy): Ditto
	(sp_canvas_bpath_update): Ditto
	(sp_canvas_bpath_render): Ditto
	(sp_canvas_bpath_point): Ditto
	(sp_canvas_bpath_set_fill): New method
	(sp_canvas_bpath_set_stroke): Name change

	* src/display/nr-arena-shape.c (nr_arena_shape_render): No real_opacity
	anymore

	* src/sp-shape.c (sp_shape_print): No real opacity anymore

	* src/dyna-draw-context.c (sp_dyna_draw_context_setup): Port to
	canvas bpath instead of canvas shape
	(clear_current): Ditto
	(fit_and_split_line): Ditto
	(fit_and_split_calligraphics): Ditto
	(draw_temporary_box): Ditto

	* src/draw-context.c (sp_draw_context_setup): Port to new canvas bpath
	(fit_and_split): Ditto

	* src/dialogs/item-properties.c: Removed #ifdef 0 code

	* src/style.c (sp_style_new): Require object validity
	(sp_style_merge_property): Moved actual code to new method
	(sp_style_merge_from_string): Does not clear style anymore, thus name change
	(sp_style_paint_server_modified): Use sp_object_request_modified
	(sp_style_set_fill_color_rgba): Request modified
	(sp_style_set_fill_color_cmyka): Ditto
	(sp_style_set_stroke_color_rgba): Ditto
	(sp_style_set_stroke_color_cmyka): Ditto
	(sp_style_set_opacity): Ditto
	(sp_style_property_index): New enumerated property codes

	* src/sp-shape.c (sp_shape_style_modified): Renamed method

	* src/sp-item.c (sp_item_read_attr): Use sp_object_request_modified
	(sp_item_style_modified): Renamed method, otherwise same

	* src/sp-item-group.c (sp_group_class_init): No ::style_changed anymore

	* src/sp-object.c (sp_object_request_modified): Accept style modification
	flag (but not alone)
	(sp_object_modified): Ditto, invoke ::style_changed if needed

	* src/sp-object.h (SP_OBJECT_STYLE_MODIFIED_FLAG): New flag - we now
	collect style modifications into single-step async apply too

Sun Mar 31 19:09:25 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-rect.c (sp_rect_*_set): Fixed a little.

2002-03-22  Davide Puricelli <evo@debian.org>

	* Updated debian/ directory, synced with Debian unstable.

2002-03-18  Lauris Kaplinski <lauris@ximian.com>

	* configure.in: Disabled frontline check, until I find time
	to make it to work without frontline too

2002-03-18  Masatake YAMATO  <jet@gyve.org, masata-y@maa.spacetown.ne.jp>

	* src/toolbox.h (sp_maintoolbox_drag_data_received): New
	declaration.

	* src/toolbox.c (sp_maintoolbox_open_one_file) 
	(sp_maintoolbox_open_files, sp_maintoolbox_drag_data_received): 
	New functions.
	(sp_maintoolbox_create): Invoked gtk_drag_dest_set 
	against ui.
	(toolbox_drop_target_info, toolbox_drop_target_entries,
	ENTRIES_SIZE, ntoolbox_drop_target_entries): New constants
	and macros for DnD.

	* src/interface.c (sp_ui_import_one_file, sp_ui_import_files) 
	(sp_ui_drag_data_received): New functions.
	(sp_create_window): sp_ui_drag_data_received is connected
	to "drag_data_received" of ui. Invoked gtk_drag_dest_set 
	against ui.
	(nui_drop_target_entries, ENTRIES_SIZE, ui_drop_target_entries,
	ui_drop_target_info): New constants and macros for DnD.

	* glade/toolbox.glade: sp_maintoolbox_drag_data_received is
	connected to drag_data_received of maintoolbox.

2002-03-18  Masatake YAMATO  <jet@gyve.org, masatake@maa.sst.ne.jp>

	* configure.in (ENABLE_AUTOTRACE): Check Frontline.

	* acconfig.h: Added ENABLE_AUTOTRACE.

	* src/sp-image.c: Added code that supports Frontline.
	New codes are wrapped by ENABLE_AUTOTRACE. 

Tue Mar 19 02:30:40 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* New SPRect rx, ry editing feature in node context.

	* src/sp-rect.c (sp_rect_rx_get): New method for KnotHolder
	(sp_rect_rx_set): Ditto
	(sp_rect_ry_get): Ditto
	(sp_rect_ry_set): Ditto
	(sp_rect_knot_holder): Ditto
	(sp_rect_write_repr): New method
	(sp_rect_glue_set_shape): Ditto

2002-03-14  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added "sk" to ALL_LINGUAS.

Sun Mar 10 21:00:01 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/document.c (sp_document_partial_items_in_box):
	New method. Return list of items, that the parts of the item
	containd in box.

	* select-context.h: Add button_press_shift attribute

	* select-context.c: (sp_select_context_root_handler):
	New feature to select items which is partially contained in
	rubberband box with shift key.

Wed Mar  6 01:52:09 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* Support open/closed arc feature. We can edit it on node edit.

	* src/sp-ellipse.c (sp_genericellipse_side): New method to
	determine point is inside or outside.
	(sp_arc_start_set): Add is_closed feature
	(sp_arc_end_set): Ditto

	* src/sp-ellipse.h: Add SPArc::is_closed attribute

	* src/preferences-skeleton.h: Modified arc style

	* src/arc-context.c: Ditto


2002-03-05  Lauris Kaplinski  <lauris@ximian.com>

	* src/display/nr-arena-shape.c (nr_arena_shape_pick): Use delta (tolerance)

	* src/display/canvas-arena.c (sp_canvas_arena_update): Use global delta (tolerance)
	(sp_canvas_arena_point): Ditto
	(sp_canvas_arena_event): Ditto

	* src/display/nr-arena-item.c (nr_arena_item_invoke_pick): Changed
	virtual method signature

	* src/dialogs/display-settings.c (sp_display_dialog_cursor_tolerance_changed): Implement
	(sp_display_dialog_new): Create pick tolerance spinbutton

	* src/view.c (sp_view_shutdown): New method and signal
	(sp_view_request_redraw): New virtual method

	* src/sodipodi.c (sodipodi_refresh_display): Use sp_view_request_redraw

	* src/interface.c (sp_ui_delete): Use sp_view_shutdown
	(sp_ui_menu_append_item): Helper
	(sp_ui_file_menu): New method
	(sp_ui_edit_menu): Ditto
	(sp_ui_selection_menu): Ditto
	(sp_ui_view_menu): Ditto
	(sp_ui_event_context_menu): Ditto
	(sp_ui_dialog_menu): Ditto
	(sp_ui_generic_menu): Ditto

	* src/file.c (sp_file_exit): Use sodipodi_exit method

	* src/event-context.c (sp_event_root_menu_popup): Use sp_ui_generic_menu

	* src/desktop.c (sp_desktop_request_redraw): New virtual method implementation
	(sp_desktop_widget_set_focus): Do that widget method instead

	* src/desktop-events.c (sp_dt_ruler_event): Do not use desktop->owner

	* src/Makefile.am (INCLUDES): -DSODIPODI_PIXMAPDIR

Mon Mar  4 01:23:05 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-ellipse.c (sp_genericellipse_normalize): Fixed start and
	end arg conditions.
	(sp_arc_start_set): Added per pi/4 radian constraint with control key.
	(sp_arc_end_set): Ditto

Sun Mar  3 03:40:07 2002  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* Merged from ge-arc-branch

	* src/sp-ellipse.h (SPArc): New class

	* src/sp-ellipse.c (sp_arc_*): New methods

	* src/arc-context.c: New event context for SPArc. Mainly it is
	renamed from ellipse-context.c.
	So we should remove ellipse-context.c later.

	* src/arc-context.h: Ditto

	* glade/draw_arc.xpm: New pixmap file for draw arc tool.
	Now, we does not need draw_ellipse.xpm.

	* src/pixmaps/cursor-arc.xpm: Ditto

2002-02-25  Lauris Kaplinski  <lauris@ximian.com>

	* src/helper/curve.c (sp_curve_append): Do not requite non-empty curves

	* src/draw-context.c (fit_and_split): Commetn out boundary checks

	* src/document.c (sp_document_idle_handler): Bring up uncommited undo
	warning, if compiled with debug
	(sp_action_print_pending_list): Debug method
	(sp_document_warn_undo_stack): Ditto

	* src/document-private.h: Moved idel_id into base struct

2002-02-23  Lauris Kaplinski  <lauris@ximian.com>

	* src/helper/units.c (sp_points_get_units): New method
	(sp_units_get_points): Ditto

	* src/dialogs/object-properties.c: Made layout dynamic

	* src/document-undo.c (sp_document_private_done): New static method
	(sp_document_done): Just a wrapper
	(sp_document_maybe_done): Implement the real thing

	* src/document-private.h: Moved document definition here

2002-02-21  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/stroke-style.c (sp_stroke_style_any_toggled): Handle
	cap/join style changes
	(sp_stroke_style_widget_new): Create cap/join togglebuttons
	(sp_stroke_style_widget_update): Set cap/join selector activity
	(sp_stroke_style_set_join_buttons): New method
	(sp_stroke_style_set_cap_buttons): Ditto

2002-02-19  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/stroke-style.c: New file

	* src/dialogs/stroke-style.h: New file

	* src/helper/units.c (sp_distance_get_units): New method
	(sp_distance_get_points): Ditto

	* src/helper/units.h: Moved SPDistance here

	* src/style.h: Moved SPDistance to units.h

	* src/display/nr-arena-shape.c (nr_arena_shape_render): Render gradient
	strokes as well

	* src/dialogs/object-properties.c: Start rewriting to use dynamic
	fill/stroke widgets instead of original glade dialog

	* src/dialogs/stroke-style.h: New file

	* src/dialogs/stroke-style.c: New file

	* src/gradient-chemistry.c (sp_style_change_property): Reimplement,
	hopefully the correct way now

	* src/widgets/gradient-position.c (sp_gradient_position_update): Pre
	build local renderer here 

	* src/helper/nr-gradient.c (nr_lgradient_renderer_setup_r8g8b8a8): Do
	not allocate renderer, allow using static ones too
	(nr_lgradient_renderer_setup_r8g8b8): Ditto

	* src/widgets/paint-selector.c (sp_paint_selector_set_style_buttons): Do not
	activate pattern and fractal fill buttons

2002-02-18  Lauris Kaplinski  <lauris@ximian.com>

	* src/widgets/paint-selector.c: Lot of rearrangements everywhere -
	I am too tired to write all these down. Basically we have one frontend
	megawidget SPPaintSelector, that interfaces to colors, gradient and more.

2002-02-10  Lauris Kaplinski  <lauris@ximian.com>

	* src/desktop.c (sp_desktop_widget_destroy): Removed stale signal
	disconnect (no idea what it was originally for)

2002-02-09  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in: Removed rbuf, frgba, new font checks and arena switch

	* src/sp-namedview.c (sp_namedview_setup_grid_item): Grid settings are
	always in points, units are there just for user preference
	(sp_namedview_read_attr): Ditto

	* src/desktop-snap.c (sp_desktop_horizontal_snap): Read snap distances
	from new desktop members
	(sp_desktop_vertical_snap): Ditto
	(sp_desktop_vector_snap): Ditto
	(sp_desktop_circular_snap): Ditto

	* src/desktop-handles.c (sp_desktop_canvas): Update to new desktop structure

	* src/sodipodi.c (sodipodi_activate_desktop_private): Default method
	implementation to chain activation signal on desktop
	(sodipodi_deactivate_desktop_private): Ditto

	* src/desktop.c (sp_desktop_new): Owner does not have document pointer
	any more, so had to change signature here
	(sp_desktop_widget_init): Moved activation signals to public constructor
	(sp_dtw_desktop_activate): Activation signal handler
	(sp_dtw_desktop_deactivate): Ditto
	(sp_desktop_widget_new): Use desktop "activate" and "deactivate" signals
	instead of sodipodi ones, signature change
	(sp_desktop_class_init): Added "activate" and "deactivate" signals

	* src/dialogs/display-settings.c: Removed glade, made mostly dynamic

	* src/sodipodi.c (sodipodi_remove_desktop): Emit "destroy_desktop" if
	destroyed one was not active too
	(sodipodi_refresh_display): Convenience method

2002-02-08  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/document-properties.c: Do not use glade anymore, made
	everything dynamic

	* src/helper/canvas-grid.c (sp_grid_hline): Use helpers from ctrlrect
	(sp_grid_vline): Ditto
	(sp_cgrid_render): Render real grid instead of dots

	* src/xml/repr-util.c (sp_repr_get_boolean): Saner conveninence method
	(sp_repr_get_int): Ditto
	(sp_repr_get_double): Ditto
	(sp_repr_set_boolean): Ditto
	(sp_repr_set_int): Ditto
	(sp_repr_set_double): Ditto

	* src/svg/svg-length.c (sp_svg_read_length): Added meter

	* src/dialogs/sp-attribute-widget.c (sp_attribute_widget_changed): Kill warning
	(sp_attribute_widget_set_object): Ditto
	(sp_attribute_widget_object_modified): Ditto
	(sp_attribute_table_set_object): Ditto
	(sp_attribute_table_object_modified): Ditto
	(sp_attribute_table_entry_changed): Ditto

	* src/dialogs/desktop-properties.c: Do not use glade anymore, made
	everything dynamic

	* src/sp-namedview.c (sp_namedview_init): Do not init distances here,
	as ::build invokes full reread anyways
	(sp_namedview_read_attr): Use saner structure and read measured distances
	(sp_namedview_setup_grid_item): Convert distances to points here
	(sp_str_to_bool): Convenience stuff (should be moved to some central place)
	(sp_nv_read_length): Ditto
	(sp_nv_read_opacity): Ditto

	* src/sp-namedview.h: Use real units for distances, some cleanup

	* src/desktop-snap.c (sp_desktop_horizontal_snap): Ported to namedview
	changed internals
	(sp_desktop_vertical_snap): Ditto
	(sp_desktop_vector_snap): Ditto
	(sp_desktop_circular_snap): Ditto

2002-02-04 Frank Felfe <innerspace@iname.com>

	* src/sp-item.c (sp_item_distance_to_svg_bbox): Fix compilation error

2002-02-03  Lauris Kaplinski  <lauris@ximian.com>

	* src/helper/units.c: Fix userspace/device confusion

	* src/sp-gradient.c (sp_stop_read_attr): Convert percentages to dimensionless
	units

	* src/gradient-chemistry.c (sp_gradient_vector_release_references): New
	method to prepare gradient vector for deletion

	* src/dialogs/gradient-vector.c (sp_gradient_vector_selector_init): Connect
	button dialogs
	(sp_gvs_rebuild_gui_full): Set selection to current active gradient
	(sp_gvs_gradient_edit_clicked): From old gradient selector
	(sp_gvs_gradient_add_clicked): Ditto
	(sp_gvs_gradient_delete_clicked): Ditto

2002-02-02  Kjartan Maraas  <kmaraas@gnome.org>

	* glade/object_props.glade: Fix a typo. s/Mitter/Miter/

2002-01-27  Lauris Kaplinski  <lauris@ximian.com>

	* src/bonobo/Makefile.am (INCLUDES): Remove excess -I

2002-01-21  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item.c (sp_item_distance_to_svg_viewport): New method
	(sp_item_distance_to_svg_bbox): Ditto
	(sp_item_style_changed): Use generic distance conversion method

	* src/helper/units.c: New file, ported from libgnomeprint, we collect
	all unit management into here

	* src/helper/units.h: New file

	* src/svg/svg-length.c (sp_svg_write_percentage): New unit logic
	(sp_svg_read_length): Ditto

	* src/helper/unit-menu.c: Ported widget from libgnomeprint

	* src/helper/unit-menu.h: Ported widget from libgnomeprint

	* src/dialogs/text-edit.c (sp_text_read_selection): New unit logic

	* src/dialogs/object-properties.c (sp_object_properties_apply_stroke): New
	unit logic

	* src/dialogs/gradient-selector.c (sp_gradient_widget_new): Use
	SPGradientVectorSelector here

	* src/style.c (sp_style_read_from_string): New unit logic
	(sp_style_write_string): Ditto
	(sp_style_init): Ditto

	* src/sp-text.c (sp_text_read_attr): New unit logic

	* src/sp-star.c (sp_star_read_attr): New unit logic

	* src/sp-spiral.c (sp_spiral_read_attr): New unit logic

	* src/sp-shape-style.c (sp_stroke_read): New unit logic

	* src/sp-root.c (sp_root_read_attr): New unit logic

	* src/sp-rect.c (sp_rect_read_attr): New unit logic

	* src/sp-namedview.c (sp_namedview_read_attr): New unit logic

	* src/sp-item.c (sp_item_style_changed): New unit logic

	* src/sp-image.c (sp_image_read_attr): New unit logic

	* src/sp-ellipse.c (sp_circle_read_attr): New unit logic

	* src/dyna-draw-context.c (sp_dyna_draw_context_setup): New unit logic
	(fit_and_split_line): Ditto
	(fit_and_split_calligraphics): Ditto

	* src/desktop-events.c (sp_dt_simple_guide_dialog): Use new unit widget
	(guide_dialog_apply): Ditto

2002-01-13  Wang Jian  <lark@linux.net.cn>

	* configure.in(ALL_LINGUAS): Added zh_CN for Simplifed Chinese.

2002-01-05  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/helper/bezier-utils.c (BEZIER_DEBUG): inhibit debug messages.

2002-01-04  Zbigniew Chyla  <cyba@gnome.pl>

	* src/desktop.c (sp_desktop_widget_init, sp_desktop_widget_set_title,
	sp_desktop_widget_shutdown): Marked strings for translation.

	* src/document.c (sp_document_new, sp_document_new_from_mem): Ditto.

2002-01-01  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added "AC_PROG_INTLTOOL(0.11)" line.

	* Makefile.am: Use intltool.

	* GNOME_Sodipodi.oaf.in: New, copied from GNOME_Sodipodi.oafinfo.

	* sodipodi.desktop.in: New, generated from sodipodi.desktop.

	* GNOME_Sodipodi.oafinfo, sodipodi.desktop: Removed.

	* glade/Makefile.am (glade_DATA): Removed *.c.

	* glade/*.c: Removed.

	* .cvsignore: Added intltool-*, sodipodi.desktop, GNOME_Sodipodi.oaf.

	* src/bonobo/svg-doc-factory.c, src/desktop.c, src/dialogs/align.c,
	src/dialogs/display-settings.c, src/dialogs/document-properties.c,
	src/dialogs/fill-style.c, src/dialogs/gradient-selector.c,
	src/dialogs/gradient-vector.c, src/dialogs/item-properties.c,
	src/dialogs/object-attributes.c, src/dialogs/object-properties.c,
	src/help.c, src/helper/unit-menu.c, src/main.c, src/sodipodi.c,
	src/sp-anchor.c, src/sp-image.c, src/sp-item-group.c, src/sp-rect.c,
	src/sp-shape.c, src/sp-spiral.c, src/sp-star.c, src/sp-text.c,
	src/widgets/sp-color-selector.c: Added missing #include <config.h>.

2001-12-30  Lauris Kaplinski  <lauris@localhost.localdomain>

	* src/widgets/sp-color-selector.c (sp_color_selector_adjustment_changed): Set
	updating flag here, so we get single "changed" signal whatever happens

	* src/sp-gradient.c (sp_gradient_repr_set_vector): Allow setting our
	own vector too here

	* src/sp-object.h (SP_OBJECT_NEXT): New macro

	* src/gradient-chemistry.c (sp_gradient_ensure_vector_normalized): Should
	work as intended now
	(sp_gradient_ensure_private_normalized): Ditto
	(sp_gradient_repr_set_link): Set NULL link too

2001-12-30  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-spiral.c src/sp-star.c:
	Revert to previous cx, cy attribute implementation.
	Because SVG standard shape introduce cx, cy,
	so we coordinate to that policy.

	* src/sp-spiral.c (sp_spiral_get_polar): New function
	(sp_spiral_is_invalid): New function to protect attributes
	consistency. sp_spiral_read_attr use it.

2001-12-29  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/knotholder.c src/knotholder.h
	(sp_knot_holder_add_full): New method

	* src/sp-spiral.c: Removed cx, cy attribute,
	so we use item matrix for that.
	Fixed up debug code.

	* src/sp-star.c src/sp-star.h src/star-context.c:
	Removed cx, cy attribute

2001-12-29  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/knotholder.c (knot_moved_handler):
	Lauris found a incorrect invert matrix bug. I just fixed it.

2001-12-28  Simos Xenitellis  <simos@hellug.gr>

	* configure.in: Added "el" (Greek) to ALL_LINGUAS.

2001-12-28  Lauris Kaplinski  <lauris@localhost.localdomain>

	* src/sp-gradient.c: Lot of changes due to class member rearrangement
	(sp_gradient_repr_flatten_attributes): New method
	(sp_gradient_repr_set_vector): Ditto

	* src/sp-gradient.h: Moved gradientUnits and gradientTransform to
	base SPGradient class, added ::flatten_attributes virtual method

	* src/gradient-chemistry.c (sp_gradient_ensure_vector_normalized): Works
	now for lonely gradients as well

	* src/desktop-events.c (guide_dialog_apply): Flush undo
	(guide_dialog_delete): Ditto
	(sp_dt_guide_event): Ditto

	* src/widgets/sp-color-selector.c: Added 'rrggbbaa' hex value entry,
	use SPColor helpers instead of doing conversions here, added some
	generic color methods and renamed/changed signature of old ones.

	* src/widgets/sp-color-slider.c (sp_color_slider_paint): Update arrow
	the right way

	* src/helper/nr-plain-stuff.c (nr_render_rgba32_rgb): Use computed channels
	instead of plain color ones

	* src/helper/nr-plain-stuff-gdk.c (nr_gdk_draw_rgba32_solid): New method

	* src/text-context.c (sp_text_context_setup): Some XIM handling
	(sp_text_context_destroy): Ditto
	(sp_text_context_root_handler): Ditto

	* src/sp-gradient.c: Killed gcc 3 warnings

	* src/draw-context.c: Started rewriting of drawing context, added 4-member
	path cache (instead of 2 in old version), the goal is to make selection
	continuation and pen tool

	* src/draw-context.h: New members in class

	* src/color.c (sp_color_get_colorspace_class): Broke colorspace descriptor
	into class (process | spot) and type (rgb | cmyk), added new methods and
	renamed old one accordingly
	(sp_color_get_colorspace_type): Ditto
	(sp_color_rgb_to_hsv_floatv): Convenience method
	(sp_color_hsv_to_rgb_floatv): Ditto
	(sp_color_rgb_to_cmyk_floatv): Ditto
	(sp_color_cmyk_to_rgb_floatv): Ditto

	* src/color.h: New convenience macros and methods

	* configure.in (have_bonobo): Made --without-bonobo default

	* src/widgets/sp-color-preview.c: New file, implement simple
	color preview object, a la the one in Gtk+ color selector

	* src/widgets/sp-color-preview.h: New file

2001-12-21  Mitsuru Oka  <oka326@parkcity.ne.jp>

	* src/sp-spiral.*, spiral-context.c
	(sp_spiral_inner_*, sp_spiral_outer_*, sp_spiral_knot_holder):
	Add SPKnotHolder codes
	(sp_spiral_set_shape, sp_spiral_fit_and_draw):
	Fixed some drawing bugs

	* src/dyna-draw-context.*, sp-shape.c, sp-star.c:
	Clean up codes

2001-12-15  Lauris Kaplinski  <lauris@ximian.com>

	* src/helper/canvas-bpath.h: New file

	* src/helper/canvas-bpath.c: New file

	* src/helper/Makefile.am (libspchelp_a_SOURCES): Added
	canvas-bpath.[c,h]

	* src/helper/curve.c (sp_curve_ref): Signature change
	(sp_curve_unref): Ditto

	* src/display/Makefile.am (nr_sources): Removed stale files

	* src/helper/bezier-utils.c (sp_bezier_fit_cubic): Added argument
	checks, signature change, cleanup
	(sp_bezier_fit_cubic_r): Ditto
	(sp_bezier_fit_cubic_full): Ditto

	* src/helper/bezier-utils.h: Changed fit method signatures

	* src/draw-context.c (fit_and_split): Use new sp_bezier_fit signature

	* src/dyna-draw-context.c (fit_and_split_line): Use new sp_bezier_fit
	signature
	(fit_and_split_caligraphics): Ditto

2001-12-07  Lauris Kaplinski  <lauris@ximian.com>

	* src/sodipodi.c (sodipodi_application_new): Catch SIGFPE and SIGILL as well

	* src/sp-gradient.c (sp_gradient_write_colors): Skip, if integer stop
	values coincide (fixes div 0 bug with gradients)

2001-11-25 Duarte Loreto <happyguy_pt@hotmail.com>

	* Added Alvaro Lopes <alvieboy@alvie.com> portuguese translation to configure.in (ALL_LINGUAS)

01-11-19  Lauris Kaplinski  <lauris@ximian.com>

	* src/preferences-skeleton.h: Removed '%' from opacity

2001-11-12  Lauris Kaplinski  <lauris@ximian.com>

	* src/display/canvas-arena.c (sp_canvas_arena_render): Try to fit
	buffer, instead of just using 64x64 rectangles

	* src/sp-rect.c: Remove Gtk+ arguments

	* src/display/nr-arena-image.c (nr_arena_image_update): Request
	rendering previous area

2001-11-11  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-rect.c (sp_rect_write_transform): Scale rx and ry
	(sp_rect_menu): Implement
	(sp_rect_rect_properties): Implement

	* src/dialogs/object-properties.c (sp_object_properties_apply_fill): Use
	float value, not percentage
	(sp_object_properties_apply_stroke): Ditto

	* src/file.c (file_save_ok): Update relative image references

	* src/sp-image.c (sp_image_destroy): Unregister resource
	(sp_image_build): Register resource

	* src/sp-spiral.c (sp_spiral_menu): Implement
	(sp_spiral_spiral_properties): Generic attributes dialog

2001-11-10  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-anchor.c (sp_anchor_menu): New method
	(sp_anchor_link_properties): Ditto
	(sp_anchor_link_follow): Ditto
	(sp_anchor_link_remove): Ditto

	* src/sp-star.c (sp_star_menu): New method
	(sp_star_star_properties): Ditto

	* src/sp-item.c (sp_item_create_link): New method

	* src/sp-item-group.c (sp_item_group_ungroup): Ungroup anchors too

	* src/forward.h: Added SPAnchor

	* src/dialogs/sp-attribute-widget.h: New file, implement generic
	asynchronous attribute widget, and table of attribute widgets

	* src/dialogs/sp-attribute-widget.c: New file

	* src/dialogs/object-attributes.h: New file, implement generic
	asynchronous object attribute dialog

	* src/dialogs/object-attributes.c: New file

	* src/display/Makefile.am (INCLUDES): Added SODIPODI_CFLAGS

	* src/sp-anchor.c: New file, implement SVG <a> element. Actual event
	code is pure experimental and need some serious thinking.

	* src/sp-anchor.h: Ditto

	* src/svg-view.c (arena_handler): Forward arena events to SPEvents

	* src/sp-object-repr.c (sp_object_type_lookup): parse <a> as anchor

	* src/sp-item.h: Added ::event virtual method plus some test code

	* src/sp-item.c (sp_item_event): New method

	* src/desktop.c (sp_desktop_new): Moved drawing behind all other layers
	(sp_desktop_document_resized): Resize page frame

	* src/helper/sodipodi-ctrlrect.h: More complex structure to represent
	page frame as well

	* src/helper/sodipodi-ctrlrect.c (sp_ctrlrect_hline): New render method
	(sp_ctrlrect_vline): Ditto
	(sp_ctrlrect_area): Ditto
	(sp_ctrlrect_render): Use more complex structure
	(sp_ctrlrect_update): Ditto
	(sp_ctrlrect_set_area): New method
	(sp_ctrlrect_set_color): Ditto
	(sp_ctrlrect_set_shadow): Ditto

2001-11-09  Lauris Kaplinski  <lauris@ximian.com>

	* src/display/nr-arena-image.c (nr_arena_image_update): Implemented
	explicit geometry
	(nr_arena_image_set_geometry): New method

	* src/sp-image.c: Implemented "x", "y", "width", "height"
	(sp_image_read_attr): Ditto
	(sp_image_bbox): Ditto
	(sp_image_print): Ditto
	(sp_image_show): Ditto
	(sp_image_write_transform): Implement

	* src/file.c (file_import_ok): Try to load pixbuf and set
	"width" and "height" attributes

	* src/desktop.c: Some cleanups of View/Widget structure

	* src/desktop.h: Ditto

	* glade/Makefile.am (images): Added about.svg

2001-11-08  Lauris Kaplinski  <lauris@ximian.com>

	* src/svg/svg-affine.c (sp_svg_write_affine): Write scale and
	translate, if everything can be represented by these

	* src/sp-text.c (sp_text_write_transform): Implement

	* src/sp-rect.c (sp_rect_write_transform): Implement

	* src/sp-item.c (sp_item_write_transform): New class and virtual
	method pair, to allow object to optimize representation (i.e.
	rects can set x,y,width,height instead of just transformation

	* src/seltrans.c (sp_sel_trans_ungrab): Use sp_item_write_transform

	* src/selection-chemistry.c: Use sp_item_write_transform

	* src/help.c (sp_help_about): Set title string to "Sodipodi VERSION"

	* src/Makefile.am (INCLUDES): Define SODIPODI_VERSION

	* src/xml/repr-io.c (repr_write): Avoid newlines in content

	* src/view.c: Sorted out lot os signalling stuff

	* src/svg-view.c: Lot of work, basically works

	* src/sp-root.c (sp_root_modified): Call parent method as well

	* src/interface.c (sp_ui_new_view_preview): New method
	(sp_create_window): Sort out editable/non-editable views

	* src/help.c (sp_help_about): Create about maunally (not much here yet)

	* src/desktop.c: Use ::document_resized virtual method

2001-10-31  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/text-edit.c (sp_text_read_selection): Use gal
	utf8/editable methods
	(sp_text_dialog_apply): Ditto
	(sp_text_dialog_text_changed): Ditto

	* src/sp-text.c (sp_text_set_shape): Use correct utf8 methods

	* src/display/nr-arena-image.c (nr_arena_image_class_init): Use
	correct parent class

2001-10-31  Mitsuru Oka <oka326@parkcity.ne.jp>

	* src/knotholder.c:
	Removed unnecessary ref/unref.
	Added sp_object_invoke_write_repr() to reflect item changes to repr

	* src/sp-object.c: Added new virtual function SPObject::write_repr()

	* src/sp-object.h: Ditto

	* src/sp-shape.c (sp_shape_write_repr): Added

	* src/sp-star.c (sp_star_write_repr): Added.
	Moved subclass of SPShape to SPPolygon

	* src/star-context.c: Ditto

2001-10-30 Mitsuru Oka <oka326@parkcity.ne.jp>

	* src/knotholder.c: New file
	We can manage plural SPKnot in one SPKnotHolder.
	SPKnotHolder is created by SPItem::knot_holder virtual function.
	Moving SPKnot is propageted to another SPKnot.
	* src/knotholder.h: Ditto

	* src/node-context.c: Added SPKnotHolder
	* src/node-context.h: Ditto

	* src/sp-item.c: Added knot_holder virtual function.
	* src/sp-item.h: Ditto

	* src/sp-shape.c: Added set_shape virtual function.
	It is used to build bpath from extra shape attributes.

	* src/sp-shape.h: Ditto

	* src/sp-star.c: Added knot_holder and set_shape implementations.
	(sp_star_build_repr): Modified function name.
	* src/sp-star.h: Ditto

	* src/sp-spiral.c: Added set_shape implementation.
	(sp_spiral_build_repr): Modified function name.
	* src/sp-spiral.h: Ditto

	* src/star-context.c: Modified build_repr function name.
	* src/spiral-context.c: Ditto

2001-10-29  Lauris Kaplinski  <lauris@ximian.com>

	* src/desktop.c (sp_desktop_coordinate_status): Free allocated memory

	* src/display/nr-arena-shape.c (nr_arena_shape_group_add_component): Unref
	item once it is added

2001-10-29 Mitsuru Oka <oka326@parkcity.ne.jp>

	* src/desktop.c:
	Added gtk_object_unref() after *_add_child to fix memory leaks.

	* src/document: Ditto

	* src/selection-chemistry.c: Ditto

	* src/sp-item-group.c: Ditto

	* src/sp-clippath.c, src/sp-use.c: Ditto
	Missing to add ChangeLog before commiting.

2001-10-23  Mitsuru Oka <oka326@parkcity.ne.jp>

	* src/sp-star.*, src/sp-spiral.*, src/star-context.* and
	spiral-context.*:
	Add SPStar, SPStarContext, SPSpiral and SPSpiralContext classes.
	SPStar and SPSpiral behave as new shape and they can convert to
	bezier curves. More works are required.

	* glade/draw_star.xpm, glade/draw_spiral.xpm, src/pixmaps/cursor-star.xpm,
	src/pixmaps/cursor-spiral.xpm:
	Add toolbox icon and mouse cursor for star and spiral.

	* src/helper/bezier-utils.*:
	Add lowlevel APIs and reformat source code.

	* src/xml/repr-io.c:
	Fix repr_write() to generate more short SVG.
	New code support <foo /> tags generation.

	* src/xml/repr-util.c, src/xml/repr.*, src/sodipodi.c:
	Add new SPRepr APIs sp_repr_lookup_child(), sp_repr_overwrite (),
	and sp_repr_document_overwrite ()
	Now, we can merge ~/.sodipodi/preferences into preferences_skeleton.

2001-10-23  Lauris Kaplinski  <lauris@ximian.com>

	* src/file.c (sp_file_new): Use new signatures
	(file_open_ok): Ditto

	* src/interface.c (sp_create_window): New signature

	* src/desktop.c: Break desktop functionality into SPView/SPViewWidget
	parts, wrap most of the old code in ugly way, but we can go on
	cleaning it up method-by-method

	* src/desktop.h: Ditto

	* src/view.h: New file

	* src/view.c: New file, we implement abstract base classes for
	all document views (editable, noneditable, widget, non-widget)
	here

	* src/svg-view.h: New file

	* src/svg-view.c: New file, implementing SVG preview

	* src/marshal.h: New file

	* src/marshal.c: New file

2001-10-20  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-root.c (sp_root_read_attr): Removed desktop->document coordinate
	setup from here - it has to be done in desktop instead

2001-10-19  Frank Felfe <innerspace@iname.com>

	* src/widgets/sp-toolbox.*: patch from MenTaLguY <mental@rydia.net>
	change seperate button into toggle button and add arrow to 
	hide button indicating state of toolbox

	* src/path-chemistry.c (sp_selected_path_to_curves): apply to all paths in selection

	* src/selection-chemistry.c (sp_selection_delete): remove widget text

	* src/desktop.c (sp_desktop_set_focus): make canvas catch key events

	* src/desktop-events.c (sp_desktop_root_handler): don't grab focus here

2001-10-18  Lauris Kaplinski  <lauris@ximian.com>

	* src/display/nr-arena-image.c (nr_arena_image_render): Use right
	pixel coposers

	* configure.in: Version 0.25

2001-10-18  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item-group.c: Removed paint virtual method implementation

	* src/sp-image.c: Ditto

	* src/sp-shape.c: Ditto

	* src/sp-use.c: Ditto

	* src/sp-item.c (sp_item_paint): Ported to NRArena/::show()

	* src/sp-item.h: Removed ::paint()

	* samples: Removed extra sample files (these are in clipart distribution)

2001-10-17  Lauris Kaplinski  <lauris@ximian.com>

	* src/display/nr-arena*: Merged NR_ARENA branch into HEAD.
	NRArena is new experimental display list engine, that replaces
	most canvas stuff for SVG items (old canvas code is still
	used for controls etc.).
	It is less integrated with Gtk widgetry, and should also allow reuse
	of code for paint-server type things (patterns, symbols etc.).
	NRArena rendering also allows higher-level graphic stuff, from
	masking to filters, to be implemented.

2001-10-13  Mitsuru Oka <oka326@parkcity.ne.jp>

	* src/dynadraw-context.c: Removed rotating brush bug

	* src/draw-context.h: Removed duplicate bezier-fitting code

2001-10-12  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-clippath.c: New file

	* src/sp-clippath.h: New file

	* src/sp-object-group.c (sp_objectgroup_build): Check child type
	(sp_objectgroup_child_added): Ditto

	* src/sp-object-group.h: Removed useless 'tranparent' member

2001-10-07  Lauris Kaplinski  <lauris@ximian.com>

	* src/display/nr-primitives.c (nr_irect_union): New method

	* src/helper/nr-buffers.h: New file

	* src/helper/nr-buffers.c: New file

	* src/helper/nr-plain-stuff.c (nr_render_rgba32_rgba32): New method

2001-10-06  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item.c (sp_item_read_attr): Query presentation attributes

	* src/style.c (sp_style_read_from_object): Added some presentation attributes

2001-10-05  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-use.c (sp_use_build): Reinclude, change 'href' to 'xlink:href'

	* src/sp-object.c (sp_object_style_changed): Use SP_OBJECT_MODIFIED_FLAG

	* src/document.c (sp_document_new): Force "height" and "width" attributes,
	if not present already
	(sp_document_new_from_mem): Ditto

2001-10-04  Lauris Kaplinski  <lauris@ximian.com>

	* src/xml/repr-io.c (sp_repr_save_stream): Correct header

2001-10-02  Peter Moulder <pmoulder@csse.monash.edu.au>

	* src/xml/repr-io.c (repr_quote_write): New method, quotes
	special chars correctly for xml
	(repr_write): Use repr_quote_write

2001-10-02  Lauris Kaplinski  <lauris@ximian.com>

	* src/dyna-draw-context.c: Stroking by Mitsuru Oka

	* src/helper/bezier-utils.h: New file by Motsuru oka

	* src/helper/bezier-utils.c: Ditto

	* src/sp-shape.c (sp_shape_print): Translate gradients the right way

2001-10-01  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-shape.c (sp_shape_print): Use rule for clip and fill
	(sp_shape_paint): Use winding rule

2001-09-30  Lauris Kaplinski  <lauris@ximian.com>

	* src/style.c (sp_style_write_string): Write rule
	(sp_style_read_from_string): Parse rule

	* src/style.h: Made rule libart enum

	* src/display/path-archetype.c (sp_path_at): Search by rule
	(sp_path_at_new): Rewind with rule
	(sp_pat_equal): Compare rules

	* src/display/path-archetype.h: Added rule argument

	* src/display/cpath-component.c (sp_cpath_comp_new): Init rule
	(sp_cpath_comp_update): Use rule
	(sp_cpath_comp_change): Ditto

	* src/display/cpath-component.h: Added rule member

	* src/display/canvas-shape.c (sp_canvas_shape_update): Set fill rule

2001-09-29  Lauris Kaplinski  <lauris@ximian.com>

	* src/selection-chemistry.c (sp_selection_lower_to_bottom): Do not lower
	behind non-items (i.e. base <defs> object)
	(sp_selection_lower): Ditto

	* configure.in: Version 0.24.1

	* src/document.c (sp_document_new): Set xmlns:xlink
	(sp_document_new_from_mem): Ditto

	* src/sp-defs.c (sp_defs_destroy): Correct list emptying

	* src/dialogs/gradient-selector.c (sp_gradient_selector_add_vector_clicked): unref repr

	* src/gradient-chemistry.c (sp_object_ensure_fill_gradient_normalized): unref repr

	* src/helper/art-utils.c (art_rgb_run_rgba): Fix 255/256 bug

	* src/display/canvas-shape.c (sp_canvas_shape_render): Removed #ifdef 0 code

	* src/widgets/gradient-image.c (sp_gradient_image_expose): Draw grabage
	using fresh new nr functions
	(sp_gradient_image_update): Ditto (not used)

	* src/helper/nr-plain-stuff.h: New file

	* src/helper/nr-plain-stuff.c: New file

	* src/helper/nr-plain-stuff-gdk.h: New file

	* src/helper/nr-plain-stuff-gdk.c: New file

2001-09-27  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/object-properties.c (sp_object_properties_dialog): Create
	dynamic fill page

	* src/sp-shape.c (sp_shape_print): Print gradients (somewhat)
	(sp_shape_paint): Paint gradients (somewhat)

	* src/document.c (sp_document_new_from_mem): Use fresh namespace

	* src/xml/repr-io.c (sp_repr_save_stream): Write fresher descriptor

	* src/widgets/gradient-position.c: New file and widget

	* src/widgets/gradient-position.h: New file and widget

	* src/dialogs/gradient-selector.c (sp_gradient_widget_new): Make
	delete vector inactive, shorter button names, create gradient
	positioning widget
	(sp_gradient_selector_load_selection): Update positioning widget
	(sp_gradient_selection_position_dragged): Implement
	(sp_gradient_selection_position_changed): Implement

	* src/sodipodi.c (sodipodi_segv_handler): Abort on recursion

2001-09-26  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-text.c (sp_text_read_attr): Use unit-loading method for x & y

2001-09-25  Christopher R. Gabriel  <cgabriel@cgabriel.org>

	* sodipodi.1.in: new man page
	* configure.in: Likewise
	* Makefile.am (man_MANS): Likewise

2001-09-24 Frank Felfe <innerspace@iname.com>

	* src/helper/sodipodi-ctrl.*: New ctrl-shapes

	* src/knot.*: Ditto

	* src/pixmaps/cursor-node-d.xpm: New file

	* src/pixmaps/cursor-node-m.xpm: New file

	* src/pixmaps/cursor-select-d.xpm: New file

	* src/pixmaps/cursor-select-m.xpm: New file

	* src/pixmaps/handles.xpm: New file

	* src/sp-cursor.* (sp_cursor_new_from_xpm): New function

	* src/seltrans.c: Use new ctrl-shapes and cursors

	* src/seltrans-handles.*: Use new ctrl-shapes 

	* src/select-context.c (sp_node_context_class_init): Init cursors and handle pix

	* src/nodepath.* (node_event): Redirect key events
	(node_key): New key handler
	(sp_node_selected_break): Handle first and last node
	(node_ctrl_moved): Update ctrlline after setting coords
	(sp_nodepath_node_new): Use new ctrl-shapes and cursors

	* src/node-context.c (sp_node_context_class_init): Init cursors

2001-09-22  Mitsuru Oka <oka326@parkcity.ne.jp>

	* src/dynadraw-context.c: New file

	* src/dynadraw-context.h: New file

	* src/event-context.c (sp_event_context_set_dynahand): New handler

2001-09-21  Lauris Kaplinski  <lauris@ximian.com>

	* src/svg/svg-path.c: Quick port of latest librsvg path code

2001-09-19  Lauris Kaplinski  <lauris@ximian.com>

	* src/document.c (sp_document_destroy): Remove document
	(sp_document_new): Add document
	(sp_document_new_from_mem): Ditto

	* src/sodipodi.c (sodpodi_remove_document): New method
	(sodpodi_add_document): Ditto
	(sodipodi_segv_handler): Not very intelligent signal handler

2001-09-18  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/gradient-selector.c (sp_gradient_selector_add_vector_clicked): 
	New handler
	(sp_gradient_selector_delete_vector_clicked): Ditto (empty)
	(sp_gradient_selector_load_selection): New method

	* src/desktop.c (sp_desktop_init): Typo fix

2001-09-17  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/gradient-vector.c (sp_gradient_vector_widget_destroy): Handler
	(sp_gradient_vector_gradient_destroy): Ditto
	(sp_gradient_vector_gradient_modified): Ditto
	(sp_gradient_vector_color_dragged): Ditto
	(sp_gradient_vector_color_changed): Ditto
	(sp_gradient_vector_widget_load_gradient): Connect/disconnect signals,
	handle NULL gradient etc.

	* src/sp-gradient.c (sp_gradient_set_vector): New method

	* src/widgets/gradient-image.c (sp_gradient_image_update): New method
	(sp_gradient_image_gradient_modified): Handler
	(sp_gradient_image_gradient_destroy): Ditto
	(sp_gradient_image_set_gradient): New method
	(sp_gradient_image_unrealize): Implement
	(sp_gradient_image_realize): Ditto

2001-09-16  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/gradient-selector.c (sp_gradient_widget_new): Added buttons
	(sp_gradient_selector_edit_vector_clicked): Handler

	* src/sp-defs.c (sp_defs_build): Use attach method

2001-09-15  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-gradient.c: Added radial gradient

	* src/sp-gradient.h: Ditto

	* src/sp-paint-server.c (sp_paint_server_destroy): Do not leak painters

	* src/gradient-chemistry.c (sp_gradient_ensure_vector_normalized): New method
	(sp_item_force_fill_lineargradient_vector): Ditto

	* src/sp-object.h (SP_OBJECT_STYLE): New macro

2001-09-14  Lauris Kaplinski  <lauris@ximian.com>

	* src/zoom-context.c (sp_zoom_2_to_1): Noop if no active desktop
	(sp_zoom_1_to_2): Ditto

2001-09-07  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-header.c: New file, implements document header, consisting
	of nested <defs> nodes, for different resource definitions

	* src/sp-header.h: New file

	* src/forward.h: Added SPHeader forward typedefs

2001-09-05  Lauris Kaplinski  <lauris@ximian.com>

	* src/document.c (sp_document_del_repr): Moved here, commented out
	(sp_document_add_repr): Moved here, made non-item compatible

	* src/style.c (sp_style_object_destroyed): Catcher method
	(sp_style_new): Signature change
	(sp_style_ref): Ditto
	(sp_style_unref): Ditto

	* src/sp-paint-server.c (sp_paint_server_destroy): Removed insane
	paint server referencing by painters and replaced it witw (a bit)
	less insane stale painter maintenance
	(sp_paint_server_painter_new): Ditto
	(sp_paint_server_painter_free): Ditto
	(sp_painter_free): Ditto
	(sp_painter_stale_fill): Ditto

	* src/sp-object.c (sp_object_invoke_build): Added verbose error

	* src/style.c (sp_style_paint_server_destroy): Implemented signal-based
	paintserver spying, instead of hardrefing it
	(sp_style_paint_server_changed): Ditto
	(sp_style_merge_paint): Ditto

	* src/sp-object.c (sp_object_ref): Wrapper method for debugging
	(sp_object_unref): Ditto
	(sp_object_attach_reref): Convenience connect method
	(sp_object_detach_unref): Ditto

2001-09-04  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-shape.c (sp_shape_print): Do not fill open paths

	* src/document.c (sp_document_add_resource): Implemented simple
	named resource lists
	(sp_document_remove_resource): Ditto
	(sp_document_get_resource_list): Ditto

2001-09-03  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-gradient.c: Added middle SPGradient class and morphed
	LinearGradient accordingly

	* src/sp-gradient.h: Added middle SPGradient Class

	* src/forward.h: Declare stops and gradients here

	* src/dialogs/gradient-vector.c: New file

	* src/dialogs/gradient-vector.h: New file

	* src/bonobo/embeddable-document.c (sp_embeddable_document_ps_save):
	Kill warning

	* src/select-context.c: Kill warning

2001-08-31  Lauris Kaplinski  <lauris@ximian.com>

	* src/forward.h: typedef SPDefs[Class] here

	* src/sp-root.h: Added pointer to root-level <defs> node

	* src/sp-gradient.c (sp_stop_get_type): Fixed type on type init

2001-08-30  Lauris Kaplinski  <lauris@ximian.com>

	* src/document.c (sp_document_new): Use fill-opacity 0.5, not 50%

2001-08-21  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/fill-style.c: Implement CMYK/RGB colorspace switching

	* src/widgets/sp-color-selector.c: Implement CMYK read/set methods

	* src/widgets/sp-color-slider.c (sp_color_slider_adjustment_value_changed): Set
	local value, even if arrow is not visible

	* src/color.c: New file

	* src/color.h: New file

	* src/sp-item.c (sp_item_read_attr): Check for "fill-cmyk"

	* src/style.c (sp_style_read_from_object): Parse "fill-cmyk" (quick hack)

2001-08-20  Lauris Kaplinski  <lauris@ximian.com>

	* src/svg/svg-path.c (svg_parse_path_data): Kill warning

	* src/widgets/sp-color-selector.c: New file & class

	* src/widgets/sp-color-slider.c: New file & class

	* src/sp-object.c (sp_object_style_changed): New virtual method

2001-08-13  Lauris Kaplinski  <lauris@ximian.com>

	* src/selection-chemistry.c (sp_selection_copy): Use prepend/reverse
	(sp_item_compare_order): New method
	(sp_item_list_sort_by_visual_order): New method

	* src/sp-path.c (sp_path_read_attr): Req modification

	* src/sp-item.c (sp_item_toggle_sensitivity): Call document::done
	(sp_item_reset_transformation): Ditto
	(sp_item_read_attr): Request modifiaction for style change

	* src/sp-object.h (SP_OBJECT_PARENT): Added convenience macros

2001-08-01  Lauris Kaplinski  <lauris@ximian.com>

	* src/document-undo.c (sp_document_undo): Fresh logic
	(sp_document_redo): Ditto
	(sp_document_child_added): Real listener
	(sp_document_child_removed): Ditto
	(sp_document_attr_changed): Ditto
	(sp_document_content_changed): Ditto
	(sp_document_order_changed): Ditto
	(sp_document_add_repr): Fresh logic, use only as wrapper
	(sp_document_del_repr): Ditto
	(sp_document_clear_undo): Use new logic, free actions at last
	(sp_document_clear_redo): Ditto
	(sp_action_list_undo): New functions, plus handful children
	(sp_action_list_redo): Ditto
	(sp_action_new): New function
	(sp_action_free): Ditto
	(sp_action_free_list): Ditto

2001-07-31  Lauris Kaplinski  <lauris@ximian.com>

	* src/xml/repr.c (sp_repr_ref): Return referenced repr
	(sp_repr_unref): Ditto
	(sp_repr_duplicate): Cleanup
	(sp_repr_set_content): Ditto, new handler signatures

	* src/xml/repr-private.h: Lot of signature changes

2001-07-30  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item-group.c: #include <config.h> for i18n

	* src/sp-item.c: Ditto

	* src/event-context.c: Ditto

	* src/toolbox.c: Ditto

2001-07-25  Lauris Kaplinski  <lauris@ximian.com>

	* src/document-undo.c (sp_document_maybe_done): New function

2001-07-19  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/sp-widget.c (sp_widget_modify_selection): New function
	(sp_widget_show): Connect "modify_selection"
	(sp_widget_hide): Disconnect by data
	(sp_widget_new): New function
	(sp_widget_class_init): Added signals
	(sp_widget_change_selection): Emit signal
	(sp_widget_set_selection): Ditto

	* src/sodipodi.c (sodipodi_selection_modified): New function
	(sodipodi_class_init): Added "modify_selection" signal

	* src/selection.c (sp_selection_idle_handler): Signal sodipodi

	* src/document.c (sp_document_class_init): Added "modified" signal
	(sp_document_idle_handler): Emit modified signal

	* src/seltrans.c (sp_sel_trans_sel_modified): New function

	* src/sp-item.c (sp_item_set_item_transform): New function

	* src/sp-object.c (sp_object_class_init): Add "modified" signal
	(sp_object_request_modified): New function
	(sp_object_modified): New base method

	* src/sp-object.h (SP_OBJECT_UNSET_FLAGS): Added modifiaction state flags
	and handlers for scheduling and emitting modifiaction signal

	* src/selection.c (sp_selection_class_init): Added "modified" signal
	(sp_selection_destroy): Remove pending idle, if present
	(sp_selection_selected_item_modified): Added handler for object signal
	(sp_selection_idle_handler): Emit our own modified signal in idle loop

	* src/selection.h: Added idle id and ::modified virtual member

2001-07-17  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-namedview.c (sp_namedview_get_name): Initialize exception

	* src/sp-item-group.c (sp_item_group_ungroup_activate): New function
	(sp_item_group_ungroup): Implement this

	* src/sp-item.c (sp_item_select_this): New function
	(sp_item_private_menu): Added "Select this"
	(sp_item_properties): Select item

	* src/desktop.c (sp_desktop_menu_popup): Use new signature

	* src/event-context.c (sp_event_root_menu_popup): Use desktop
	in signature instead of widget

	* src/sp-object.c (sp_object_getAttribute): Return NULL, if
	exception is not clear
	(sp_object_setAttribute): Ditto
	(sp_object_removeAttribute): Ditto

2001-07-08  Lauris Kaplinski  <lauris@ximian.com>

	* src/xml/repr-io.c (sp_repr_svg_read_node): Preserve namespaces for
	everything but "svg"

2001-07-07  F.J.Franklin  <F.J.Franklin@sheffield.ac.uk>

	* src/svg/svg-color.c (sp_svg_read_color): Accept ';' as
	terminator

	* src/sp_image.c (sp_image_repr_read_dataURI): New function
	(sp_image_repr_read_b64): New function
	(sp_image_read_attr): Accept embedded data

	* configure.in: Added --with-libwmf switch

	* src/xml/repr-io.c (sp_repr_read_file): Read *.wmf using libwmf
	(sp_wmf_convert): New function
	(sp_wmf_image_name): New function

2001-07-07  Frank Felfe  <innerspace@iname.com>

	* src/desktop.h: Added number field

	* src/desktop.c (sp_desktop_new): Initialize number from
	namedview viewcount
	(sp_desktop_set_title): Compose name from uri, nameview and number

	* src/document.c (sp_document_set_uri): New method

	* src/file.c (file_save_ok): Set ducument uri

	* src/interface.c (sp_create_window): Set desktop title

	* src/select-context.c (sp_select_context_root_handler): Added
	backward cycling

	* src/selection-chemistry.c (sp_selection_item_next): Cleared
	list mess
	(sp_selection_item_prev): New function

	* src/sp-item-group.c (sp_item_group_item_list): New function

	* src/sp-namedview.h: Added viewcount field

	* src/sp-namedview.c (sp_namedview_get_name): New method

	* doc/keybindings.txt: Added Shift-Tab

2001-06-07  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in: Version 0.24

	* src/sp-item.c (sp_item_read_attr): Quick noscale hack
	for style stroke widths

	* src/display/canvas-shape.c (sp_canvas_shape_update): Use
	stroke_width as well ;)

2001-05-24  Lauris Kaplinski  <lauris@ximian.com>

	* src/seltrans-handles.*: Make structs const

	* src/seltrans.*: Make view type variable, move it to
	header for adding GUI later

2001-05-23  Frank Felfe  <innerspace@iname.com>

	* src/desktop-snap.*: Implement circualr and list snapping

	* src/sp-item.*: New virtual function ::snappoints()

	* src/seltrans.c: New structure

	* src/sp-rect.c (sp_rect_snappointss): Implement

	* src/sp-ellipse.c (sp_ellipse_snappoints): Ditto

	* src/sp-text.c (sp_text_snappoints): Ditto

	* src/sp-image.c (sp_image_snappoints): Ditto

2001-05-18  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in: Version 0.23 final

	* src/sp-gradient.c (sp_lg_fill): Do opacity

	* src/document-undo.c (sp_document_redo): Fixed bug in redoing
	order changes

2001-05-17  Lauris Kaplinski  <lauris@ximian.com>

	* src/toolbox.c (sp_maintoolbox_create): Show toolbox, if
	it already exists and reference sodipodi
	(sp_maintoolbox_close): Hide toolbox

	* glade/Makefile.am (glade_DATA): Added item.glade, item.c

	* configure.in: Version 0.23

	* src/dialogs/display-settings.h: New file

	* glade/Makefile.am (glade_DATA): Added display.glade, display.c

2001-05-06  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in (use_arena): Added with-arena flag

	* acconfig.h: Added ARENA

2001-04-16  Jesus Bravo Alvarez  <jba@pobox.com>

	* configure.in: Added gl (Galician) to ALL_LINGUAS

2001-04-14  Lauris Kaplinski  <lauris@ximian.com>

	* everywhere (TM): Changed the basic structure of Reprs (they are
	not GtkObjects any more) and SPObjects (they have own list sequence
	instead of using GLists)

2001-04-06  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item-group.c (sp_item_group_ungroup): New method

	* src/draw-context.c (set_to_accumulated): Transform path instead of
	setting initial transform, so clear transform does not do interesting
	things for freehand curves ;-)

2001-04-04  Lauris Kaplinski  <lauris@ximian.com>

	* src/file.c (sp_file_open): Do not connect "delete_event"
	(sp_file_save_as): Ditto
	(sp_file_import): Ditto, do not use static widget pointer
	(sp_file_export): Ditto
	(sp_file_save_document): Clear "modified" attribute
	(file_save_ok): Ditto

	* src/svg/svg.h: #include glib.h instead of full gtk.h

	* src/svg/svg-stroke.c: #include string.h, kill warning

	* src/svg/svg-font.c: Ditto

	* src/sp-shape-style.c: Ditto

	* src/sp-metrics.h: #include gtkruler.h intead of full gtk.h

	* src/zoom-context.c (sp_zoom_page): Get document from desktop
	instead of using ACTIVE_DOCUMENT

	* src/slide-context.c: New file, implement slideshow context

	* src/main.c (main): Create slideshow, if requested

2001-03-22  Lauris Kaplinski  <lauris@ximian.com>

	* src/svg/Makefile.am (INCLUDES): Add SODIPODI_CFLAGS

2001-03-21  Lauris Kaplinski  <lauris@ximian.com>

	* src/sodipodi.h: Remove Sodipodi typedef

	* src/forward.h: Typedef Sodipodi here

	* src/dialogs/sp-widget.c: New file

	* src/dialogs/sp-widget.h: New file, implement abstract base class for
	configuration widgets

	* glade/Makefile.am (pixmaps): Added guide_dialog.png

	* src/dialogs/document-properties.c (sp_document_dialog_delete): New function, or
	we crash if user closes dialog

	* src/dialogs/desktop-properties.c (sp_desktop_dialog_delete): New function, or
	we crash if user closes window

	* src/draw-context.c (sp_draw_context_root_handler): Do not crash for zero
	length lines PLEEAAAASSSSEEEEE!

	* src/selection-chemistry.c (sp_selection_group): Use copy/del/add to make
	undo system happy

2001-03-20  Frank Felfe  <innerspace@iname.com>

	* src/nodepath.c (node_ctrl_moved) : set coorinate status

	* src/seltrans.c (sp_sel_trans_handle_new_event) : set coordinate status

	* src/sp-guide.* : new functions sp_guide_set, sp_guide_remove

	* src/helper/unit-menu.h : add abbreviation string into unitdesc

	* src/event-context.c (set_event_location) : set coordinate status
	popup desktop-properties on double click

	* src/desktop.* : new functions for statusbars
	(sp_desktop_indicator_*) : make indicator only show when decorations are visible

	* src/desktop-events.* : new guideline dialog
	small changes in sp_dt_ruler_event, sp_dt_guide_event

	* src/*_context.c (sp_*_context_root_handler) : make desktop->acetate
	grab mouse events during drawing

	* glade/guide_dialog.png: New file

2001-03-20  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-item-group.c (sp_group_menu): Add "Ungroup" item (does nothing at moment)

	* src/display/canvas-bgroup.c (sp_canvas_bgroup_point): Test sensitivity and stickyness
	(sp_canvas_bgroup_set_sensitive): New function

	* src/display/canvas-shape.c (sp_canvas_shape_point): Test sensitivity and stickyness
	(sp_canvas_shape_set_sensitive): New function

	* src/sp-item-group.c (sp_group_read_attr): Read "insensitive" too

	* src/sp-shape.c (sp_shape_read_attr): Read "insensitive" too

	* src/sp-item.c (sp_item_private_menu): Set menuitem label depending on sensibility

	* src/desktop.c (sp_desktop_init): Bind "event" to manipulate sticky state

	* src/display/canvas-image.c (sp_canvas_image_point): Check for
	SP_CANVAS_STICKY_FLAG

	* src/desktop.c (sp_desktop_event): New function, Set SP_CANVAS_STICKY_FLAG if
	user holds Shift key

2001-03-09  Lauris Kaplinski  <lauris@ximian.com>

	* glade/Makefile.am (pixmaps): Added all pixmaps to dist

	* configure.in: Version 0.22

2001-03-09  Frank Felfe  <innerspace@iname.com>

	* src/desktop.c (sp_desktop_update_scrollbars): Cleanup

	* src/event-context.c (sp_event_context_private_root_handler): Use
	Gdk keysyms instead of numeric values. Add moving/panning keybindings,
	space for root menu popup
	(sp_event_root_menu_popup): Pop menu on space

	* select-context.c (sp_select_context_root_handler): Use Gdk keysyms
	instead of numeric values

	* selection-chemistry.c (sp_selection_move_screen): New function
	(sp_selection_item_next): New function

	* doc/keybingings.txt: New keybingings

2001-03-09  Lauris Kaplinski  <lauris@ximian.com>

	* src/nodepath.c (node_event): Update repr after deletion

	* src/file.c (file_open_ok): Destroy widget instead of hiding
	(file_open_cancel): New function
	(sp_file_open): Connect new cancel handler
	(file_save_ok): Exit from private main loop
	(file_save_cancel): New function
	(sp_file_save_as): Connect new cancel handler, enter private loop
	(file_import_cancel): New function
	(sp_file_import): Connect new cancel handler
	(file_export_cancel): New function
	(sp_file_export): Connect new cancel handler

2001-03-08  Lauris Kaplinski  <lauris@ximian.com>

	* src/interface.c (sp_ui_delete): New function presenting close
	dialog box if needed
	(sp_ui_close_view): Use sp_ui_delete ()
	(sp_create_window): Connect "delete_event" and set window title

	* src/file.c (sp_file_save_document): New function

	* src/document-undo.c (sp_document_done):  Set "modified" attribute

	* src/file.c (file_save_ok): Clear "modified" attribute

2001-03-07  Lauris Kaplinski  <lauris@ximian.com>

	* doc/keybindings.txt: Register node editing keystrokes

	* src/desktop.c (sp_desktop_new): Do not grab focus here

	* src/helper/sodipodi-ctrl.c: Added shape argument type
	(sp_ctrl_class_init): Ditto
	(sp_ctrl_init): Ditto
	(sp_ctrl_set_arg): Ditto
	(sp_ctrl_update): New logic, keep node absolute size always odd number
	(sp_ctrl_point): Ditto
	(draw_line): New function
	(draw_point): New function
	(sp_ctrl_render): New logic, draw diamond shape

	* src/desktop-events.c (sp_desktop_root_handler): Grab focus on
	acetate enter notify

	* src/knot.c (sp_knot_set_arg): Set shape attribute
	(sp_knot_handler): Grab focus on enter notify
	(sp_knot_update_ctrl): Set shape
	(sp_knot_set_ctrl_state): New function

	* src/node-context.c (sp_node_context_root_handler): Process keypresses

	* src/nodepath.c (sp_nodepath_node_new): Connect "event" and set knot shape
	(node_clicked): Toggle type on Ctrl-click
	(node_event): New signal handler for keypresses
	(sp_nodepath_set_node_type): Set knot shape

2001-02-21  Michael Meeks  <michael@ximian.com>

	* configure.in: depend on Bonobo >= 0.37.

2001-02-21  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in: Commented out GNOME_PRINT_CHECK

2001-02-19  Lauris Kaplinski  <lauris@ximian.com>

	* src/desktop.c (sp_desktop_connect_item): New function

	* src/sp-item.c (sp_item_view_new_prepend): View list management
	(sp_item_view_list_remove): Ditto

	* src/sp-item.h: SPItemView - new object encapsulating view. I also induced
	changes in almost all source files

	* src/sp-item-group.h: New file

	* src/bonobo/embeddable-drawing.c (sp_embeddable_drawing_get_type):
	Use new bonobo object stuff
	(sp_embeddable_drawing_factory): Ditto

	* src/bonobo/embeddable-desktop.c (sp_embeddable_desktop_get_type):
	Use new bonobo object stuff
	(sp_embeddable_desktop_factory): Ditto

	* src/bonobo/embeddable-document.c (sp_embeddable_document_get_type):
	Use new bonobo object stuff
	(sp_embeddable_document_new): Ditto

2001-02-17  Lauris Kaplinski  <lauris@ximian.com>

	* src/sp-object.c (sp_object_getAttribute): New function
	(sp_object_setAttribute): New function
	(sp_object_removeAttribute): New function

2001-02-11  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in: Added es to ALL_LINGUAS

2001-02-07  Lauris Kaplinski  <lauris@ximian.com>

	* src/dialogs/object-properties.c: Added channel sliders
	* glade/object_props.glade: Ditto
	* samples/mangatips6.svg: New file
	* samples/mangatips7.svg: New file
	* samples/mangatips8.svg: New file
	* samples/mangatips9.svg: New file
	* samples/mangatips10.svg: New file

2001-02-06  Lauris Kaplinski  <lauris@ximian.com>

	* samples/mangatips3.svg: New file
	* samples/mangatips4.svg: New file
	* samples/mangatips5.svg: New file

2001-01-29  Fatih Demir	<kabalak@gmx.net>

	* src/widgets/.cvsignore: Added this.

2001-01-26  Lauris Kaplinski  <lauris@ximian.com>

	* configure.in: Version 0.21

2001-01-24  Lauris Kaplinski  <lauris@ximian.com>

	* src/document-undo.c (sp_document_add_repr): Do not expect repr
	always correspond to item

	* src/toolbox.c (sp_maintoolbox_create): Save edit/undo/redo widgets
	(sp_update_draw_toolbox): Unsensitize undo/redo for draw and node
	contexts

2001-01-09  Lauris Kaplinski  <lauris@ximian.com>

	* src/desktop (sp_desktop_change_document): Update namedviews aslo

2001-01-09  Lauris Kaplinski  <lauris@ximian.com>

	* samples/mangatips1.svg: New file
	* samples/mangatips2.svg: New file

	* src/xml/Makefile.am: Use SODIPODI_CFLAGS

2001-01-08  Frank Felfe  <innerspace@iname.com>

	* desktop.*: use gnomeappbar in desktop-window,
	use gtk_combo_text widget from libgal

	* src/desktop-events.c: use gnomeappbar

	* src/event-context.c: global keybindings

	* src/select-context.c: keybindings

	* src/text-context.c: filter Ctrl-keys for keybindings

	* src/interface.c: connect to focus-in-event from desktop-window

	* glade/toolbox.glade: keybindings for the maintoolbox-menu

	* doc/keybindings.txt

2001-01-08  Lauris Kaplinski  <lauris@helixcode.com>

	* src/selection-chemistry.c (sp_selection_rotate_90): Brought
	function here from toolbox.c and renamed

	* glade/toolbox.glade: Use sp_selection_rotate_90

	* src/desktop_snap.* (sp_desktop_circular_snap): New function

	* src/rect-context.c (sp_rect_context_destroy): Finish object, if exists

	* src/ellipse-context.c: (sp_ellipse_context_destroy): Ditto

2001-01-04  Lauris Kaplinski  <lauris@helixcode.com>

	* src/helper/sodipodi-ctrlrect.*: Draw by hand instead of using
	libart. That fixed ugly-ugly freezing bug in Mandrake

	* src/preferences-skeleton.h: New file, encoding default preferences

	* glade/sodipodi.glade: Changes _Uus to _New in menu ;)

	* src_sodipodi.* (sodipodi_load_preferences): New function
	(sodipodi_save_preferences): New function
	(sodipodi_get_repr): New function for retrieving data from preferences
	DOM tree.

	* src/draw-context.c (set_to_accumulated): Use style preferences
	* src/rect-context.c (sp_rect_drag): Ditto
	* src/ellipse-context.c (sp_ellipse_drag): Ditto
	* src/text-context.c (sp_text_context_root_handler): Ditto
	(sp_text_complete): ungrab keyboard

	* src/toolbox.c (sp_toolbox_create): Use preferences

2001-01-02  Lauris Kaplinski  <lauris@helixcode.com>

	* src/widgets/sp-toolbox.*: general toolbox implementation

	* src/toolbox.c: Use SPToolBox widget, load and save toolbox states

	* src/sodipodi.* (sodipodi_set_key): New function for setting
	preference values into xml tree
	(sodipodi_get_key): Ditto
	(sodipodi_set_key_as_number): Ditto
	(sodipodi_get_key_as_number): Ditto

	* src/xml/repr-io.c (sp_repr_read_file): Load whatever element node as root
	(sp_repr_read_mem): Ditto

2000-12-31  Michael Meeks  <michael@helixcode.com>

	* src/xml/repr-io.c (sp_repr_save_file): split into
	(sp_repr_save_stream): here.

	* src/bonobo/embeddable-document.c (sp_embeddable_document_pf_load),
	(sp_embeddable_document_pf_save): update signatures for new persistfile API.

2000-12-30  Lauris Kaplinski  <lauris@helixcode.com>

	* src/main.c (main): Reenable command-line filenames

	* src/sodipodi.* (sodipodi_application_new): New function

2000-12-29  Michael Meeks  <michael@helixcode.com>

	* src/bonobo/embeddable-document.c (sp_embeddable_document_factory): upd.

	* Makefile.am (oafdir): kill gnorba bits, update naming.

	* src/bonobo/svg-doc-factory.c (sp_svg_doc_factory_init): upd.
	(sp_svg_factory): new multi factory.

	* GNOME_Sodipodi.oafinfo: add, rename stuff.

	* configure.in (have_bonobo): require bonobo >= 0.30

2000-12-28  Christopher R. Gabriel  <cgabriel@softwarelibero.org>

	* configure.in (ALL_LINGUAS): 'it'

2000-12-27  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-svp-uncross.c: Lot of clenaup

	* src/display/nr-svp-render: Comment out printouts

	* src/display/nr-primitives.h: #define NR_COORD_TOLERANCE

2000-12-26  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-svp-uncross.c (nr_svp_uncross_full): more cases -
	rays, intersection - some cleanups

	* src/display/nr-svp-render.c (nr_svp_render_rgb_rgba): Cleanups

2000-12-25  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-primitives.h: Move NRCoord and NRPoint here
	* src/display/nr-primitives.c: NRDRect methods

	* src/display/nr-svp.*: Rewrite. NRSVP is now simple ordered
	segment and we use linked (sorted) lists for describing more
	complex geometries
	* src/display/nr-svp-uncross.*: Ditto, partial implementation
	* src/display/nr-svp-render.* Ditto. Works.

2000-12-21  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-svp-render.c: Lot's of cleanup

2000-12-20  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-svp-render.c (nr_svp_render_rgb_rgba): It
	works to some extent!
	* src/display/canvas-shape.c (sp-canvas_shape_render): Use New
	Rendering, #ifdef NEW_RENDER

	* src/display/testnr.c: Silly file

2000-12-19  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-uta.*: UTA Implementation

	* src/display/nr-aa-canvas.*: RGB Buffer canvas

	* src/display/sp-arena.*: Widget, using RGB canvas

	* src/display/sp-canvas-item.*: Item subclass for arena
	* src/display/sp-canvas-group.*: Ditto

2000-12-17  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-primitves.h: typedef NRPoint

	* src/display/nr-canvas.*: More code
	* src/display/nr-canvas-item.*: Ditto
	* src/display/nr-canvas-group.*: Ditto

2000-12-16  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-canvas-group.*: Base class for canvas groups
	* src/display/nr-primitives.*: Graphic primitives

2000-12-15  Lauris Kaplinski  <lauris@helixcode.com>

	* src/display/nr-canvas.*: Experimental new rendering stuff (not working)
	* src/display/nr-canvas-item.*: Ditto (not working)
	* src/display/nr-svp.*: Ditto (works)
	* src/display/nr-svp-uncross.*: Ditto (works)
	* src/display/nr-svp-render.*: Not working yet

	* configure.in: Added {with|without}-new-render switch

2000-11-30  Szabolcs Ban  <shooby@gnome.hu>

	* glade/toolbox.c: corrected "zom factor" to "zoom factor"

2000-11-30  Szabolcs Ban  <shooby@gnome.hu>

	* configure.in (ALL_LINGUAS): add hu.

2000-11-26  Lauris Kaplinski  <lauris@helixcode.com>

	* src/toolbox.c (sp_maintoolbox_create): Strip toolbox names
	(sp_toolbox_create_widgets): Make windows toplevel

	* glade/*.glade: Make windows to be toplevel

2000-11-25  Christopher R. Gabriel  <cgabriel@softwarelibero.org>

	* debian/: added the debian scripts from package maintainer,
	Davide Puricelli <evo@debian.org>

2000-11-17  Yuri Syrota  <rasta@renome.rovno.ua>

	* glade/transformation.c
	* glade/transformation.glade: correct "vertival move" to "vertical move"

2000-11-17  Lauris Kaplinski  <lauris@helixcode.com>

	* src/dialogs/text/edit.c (sp-text-dialog-close): Destroy
	dialog, so font listing will be regenerated

2000-11-02  Michael Meeks  <michael@helixcode.com>

	* configure.in: Check for bonobo >= 0.27

2000-10-27  Michael Meeks  <michael@helixcode.com>

	* configure.in (ALL_LINGUAS): add pt_BR.

2000-10-26  Lauris Kaplinski  <lauris@helixcode.com>

	* configure.in: Define libxml include path

	* src/Makefile.am: Use libxml include path

	* src/main.c: Ditto

	* src/xml/Makefile.am: Ditto

	* src/xml/repr-io.c: Ditto

2000-10-21  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added pl to ALL_LINGUAS.

2000-10-21  Zbigniew Chyla  <cyba@gnome.pl>

	* sodipodi/src/toolbox.c (sp_maintoolbox_create):
	Marked strings for translation.

2000-10-18  Christophe Merlet  <christophe@merlet.net>

	* configure.in: Oups, forgotten to add French (fr) to $ALL_LINGUAS

2000-10-18  Christophe Merlet  <christophe@merlet.net>

	* sodipodi.desktop: Added French string.

2000-10-17  Lauris Kaplinski  <lauris@helixcode.com>

	* src/nodepath.c (sp_nodepath_node_destroy): fixed YANC (Yet
	Another Nodepath Crash)

2000-10-16  Frank Felfe  <innerspace@iname.com>

	* glade/toolbox.glade: Updated zoom toolbox

	* src/desktop-events.*: Added sp_canvas_root_handler

	* src/desktop.c: Added statusbar, clean up zooming

	* src/sp-metrics.* (sp_metric_to_metric_string): A way to
	suppress metric identifier in strings

	* src/sp-ruler.c: Copy GtkRuler object

	* src/zoom-context.c: Use desktop region markup with border

	* src/bonobo/embeddable-desktop.c: Ditto

2000-10-13  Lauris Kaplinski  <lauris@helixcode.com>

	* src/text-context.c (sp_text_context_item_handler): Return
	if repr == NULL; Commit changes to undo stack.

2000-10-11  Lauris Kaplinski  <lauris@helixcode.com>

	* src/draw-context.c (sp_draw_context-destroy): Detach signal

2000-10-11  Frederic Devernay <Frederic.Devernay@sophia.inria.fr>

	* Makefile.am: Use test -r for compatibility

	* src/Makefile.am: Remove -export-dynamic

	* src/main.c: Use libxml 1.8.8/2.0

	* src/interface.c: Make fake_dialogs nonstatic

	* src/xml/repr-io.c: Use libxml 1.8.8/2.0

2000-10-09  Lauris Kaplinski  <lauris@helixcode.com>

	* configure.in: Version 0.20

	* src/helper/unit-menu.*: New convenience object

	* src/desktop.c (sp_desktop_destroy): Destroy first eventcontext,
	then selection

	* src/draw-context.c: Make silent

	* src/file.c (sp_file_import_ok): Use "xlink:href" for images

	* src/sp-image.c (sp_image_read_attr): Use "xlink:href"
	(sp_image_repr_read_image): Ditto

	* src/svg/svg.h: Use bitfield for units

2000-10-08  Lauris Kaplinski  <lauris@helixcode.com>

	* src/dialogs/object-properties.c: Do not keep CSS objects, so
	fill & stroke do not overwrite each other settings

2000-10-08  Frank Felfe  <innerspace@iname.com>

	* glade/align.glade: Improvements

	* glade/object_props.glade: New layout

	* src/sp-ruler.*: New files, implementing wrapper for Gtk rulers

	* src/sp-metrics.*: Default metrics, ruler metrics

	* src/desktop.c (sp_desktop_init): use ruler wrappers

2000-10-07  Lauris Kaplinski  <lauris@helixcode.com>

	* src/desktop.c (sp_desktop_realize): Zoom to page on first display

	* src/document-undo.c (sp_document_done): Limit undo to 128 levels

	* src/document.c (sp_document_new): Set docbase & docname before
	creating object tree

	* src/sp-image.c (sp_image_repr_read_image): Find right root repr

	* src/sp-shape.c (sp_shape_paint): Use right stroke width

	* src/dialogs/export.c (sp_export_do_export): use ::paint() method

	* src/xml/repr-io.c (sp_repr_svg_read_node): Return on comment and text
	nodes

	* src/xml/repr.c (sp_repr_document): Implement

2000-10-06  Lauris Kaplinski  <lauris@helixcode.com>

	* glade/document.glade: Page setup dialog

	* src/dialogs/document-properties.c: Implement page
	setup dialog

	* src/desktop.*: Keep page rectangle in SPDesktop

	* src/sp-root.c: Update page rectangle

	* src/file.c (sp_file_print_to_printer): gnome_print_bgeinpage ()
	Remove FRGBA creation

	* src/dialogs/export.c (sp_export_do_export): gnome_print_beginpage ()

	* glade/sodipodi.glade: Add document & xml tree to properties menu

	* src/interface.c (sp_create_window): Remove ugly buttons

	* src/mdi-ui.*: Removed
	* src/dialogs/object-fill.*, object-stroke.*: Removed

2000-10-05  Lauris Kaplinski  <lauris@helixcode.com>

	* src/helper/canvas-grid.*: Grid item for canvas

	* src/sp-namedview.c: Use & update grid

	* src/desktop-snap.c: Snap to grid

2000-10-04  Frank Felfe <innerspace@iname.com>

	* glade/transformation.glade: Improved dialog

	* glade/*.xpm: New icons

	* src/dialogs/transformation.*: Improved dialog

	* src/selection-chemistry.*: new transformation functions

	* src/sp-metrics.*: New files

2000-10-04  Lauris Kaplinski  <lauris@helixcode.com>

	* src/nodepath.c: #define reasonable knot colors
	(sp_nodepath_selected_nodes_move): Implement snapping
	(node_ctrl_request): Implement snapping

2000-10-03  Lauris Kaplinski  <lauris@helixcode.com>

	* src/nodepath.c (update_repr): Call sp_document_done ()

	* src/dialogs/desktop-properties.*: Use new dialog layout

	* glade/desktop.glade: Use new dialog layout

	* src/sp-guide.*: "color" and "hicolor" attributes

	* src/sp-namedview.*: Bunch of new attributes

	* src/desktop-events.c (sp_dt_guide_event): Use guide colors
	(sp_dt_ruler_event): Use guide colors

2000-10-02  Lauris Kaplinski  <lauris@helixcode.com>

	* src/knot.c (sp_knot_set_flag): Implement different outlines
	(sp_knot_update_ctrl): New function to set SPCtrl colors

	* src/nodepath.*: Mostly rewritten

	* src/node-context.*: Use new SPNodePath

2000-09-30  Yukihiro Nakai  <nakai@gnome.gr.jp>

	* configure.in ALL_LINGUAS: Add Japanese 'ja'

2000-09-21  Pablo Saratxaga <pablo@mandrakesoft.com>

	* configure.in: ALL_LINGUAS: added 'ca' for Catalan translation.

2000-09-18  Lauris Kaplinski  <lauris@helixcode.com>

	* src/dialogs/object-properties.*: New combined fill + stroke +
	transformation dialog by Frank Felfe

	* glade/*.xpm: Lots of new icons etc. by Frank Felfe

	* src/desktop.*, interface.c, select-context.c, seltrans.c: Changes

	* selection-chemistry.* (sp_selection_apply_affine): New function by
	Frank Felfe
	(sp_selection_remove_transforms): Same

2000-09-17  Lauris Kaplinski  <lauris@helixcode.com>

	* src/draw-context.c (sp_draw_context_root_handler): Handle Ctrl
	and fix an missing segment, while continuing Ctrl-aligned line.

	* src/ellipse-context.c (sp_ellipse_read-attr): Use sodipodi namespace
	for "start", "end". Replace "closed" with "open", so closed is default

	* src/sp-ellipse_context.c: Ditto

	* src/sp-object.c: #define SP_OBJECT_CLONED_FLAG

	* src/sp-root.c (sp_root_read_attr): Tru to read "viewBox" attribute.
	The implementation is hackish, but it works, until document size is fixed

	* src/display/canvas-shape.c (sp_canvas_shape_update): Calculate correct
	line thickness

2000-09-16  Lauris Kaplinski  <lauris@helixcode.com>

	* src/draw-context.*: Freehand should work OK now

	* src/display/canvas-shape.c (sp_canvas_shape_render): Test, if
	archetype has stroke SVP

	* src/display/path-archetype.c (sp_path_at_new): Disturb Vpaths
	before stroking - this removes ugly random crashing in art_uta_from_svp

2000-09-15  Lauris Kaplinski  <lauris@helixcode.com>

	* src/sp-line.h, sp-line.c: <line> item

	* src/sp-polyline.h, sp-polyline.c: <polyline> item

	* src/sp-polygon.c, sp-polygon.h: <polygon> item

	* src/sp-object-repr.c (sp_object_type_lookup): Register new item types

	* src/helper/curve.c (sp_curve_closepath): Add point, if end != start

2000-09-14  Lauris Kaplinski  <lauris@helixcode.com>

	* src/Makefile.am: Define GNOME_PIXMAPDIR

	* src/main.c (main): Set default icon

	* interface.c (sp_create_window): Set icon

	* src/sp-text.c (sp_text_set_shape): Use helvetica for unknown font

	* src/helper/art-utils.* (art_svp_translate): New function
	(art_uta_from_svp_translated): Use art_svp_translate ()

	* draw-context.*: Use experimental spline fitting for freehand
	lines, during drawing generate many small lines, instead of
	one big.

2000-09-13  Lauris Kaplinski  <lauris@helixcode.com>

	* desktop-snap.c, desktop-snap.h (sp_desktop_horizontal_snap):
	Implemented
	(sp_desktop_vertical_snap): Ditto
	(sp_desktop_free_snap): Rewrote, using horiz. and vert. snapping
	(sp-desktop_vector_snap): Implemented

	* rect-context.c, rect-context.h: Rewrote event handling stuff,
	so it now supports (hopefully) all snapping chemistry

	* sp-namedview.c (sp_namedview_build, sp_namedview_read_arg):
	Implemented arguments "snaptoguides" and "guidetolerance"

	* sp-rect.c (sp_rect_set_arg): Implemented Gtk+ argument setting

	* ellipse-context.c, ellipse-context.h: Ditto

2000-09-12  Lauris Kaplinski  <lauris@helixcode.com>

	* src/*.c, glade/desktop.*, src/dialog/desktop-properties.*:
	Hacked together a preliminary guideline support stuff.  It
	sucks really for anything other than scaling, but now we have
	at least something to improve in future.

2000-09-09  Lauris Kaplinski  <lauris@helixcode.com>

	* sodipodi.c, sodipodi-private.h: New filed. Bye-bye to
	Gnome-MDI interface, instead we have much more convenient
	sodipodi object.
	This introduced many changes mostly everywhere.

	* src/helper/gt1*, src/helper/parseAFM.*: removed gt1 library,
	as it is now accessible through gnome-print

	* Makefile.am, src/Makefile.am, glade/Makefile.am: We'll pass
	'make distcheck' again

	* src/sp-item-group.c: Children update, if parent's style is
	changed

2000-09-06  Lauris Kaplinski  <lauris@helixcode.com>

	* glade/*: Added Frank Felfe new icons and toolbopx stuff

	* src/toolbox.*: Toolbox stuff (Frank Felfe)

	* src/sp-item-transform.*: Same

2000-08-24 Alastait McKinstry <mckinstry@computer.org>

	* configure.in: ALL_LINGUAS: added 'ga' for Irish translation.

2000-08-19  Lauris Kaplinski  <lauris@helixcode.com>

	* glade/transformation.glade: Transformation dialog (Frank Felfe)

	* src/dilaogs/transfomration.*: Transfomration dialog (Frank Felfe)

	* src/mdi-ui.c: Added transformation dialog

	* po/POTFILES.in: Added glade/transformation.c

2000-08-18  Lauris Kaplinski  <lauris@helixcode.com>

	* configure.in: Version 0.19
	* Makefile.am: Comment out dist-hook
	* sodipodi.spec.in: Build 0

	* glade/align.glade: Added alignment base selection

	* po/POTFILES.in: Added src/dialogs/align.c

	* src/desktop.c: Display page borders

	* src/sp-text.c: break text at newlines

	* src/dialogs/align.c: New algorithm plus alignment base selection

2000-08-15  Lauris Kaplinski  <lauris@helixcode.com>

	* glade/stroke.glade: Moved dialog to separate file
	* Added Frank Felfe icons, that I forgot last time

2000-08-10  Lauris Kaplinski  <lauris@helixcode.com>

	* src/main.c (main): Commented out arg parsing - it segfaulted for me

	* glade/align.glade
	* glade/al*
	* src/dialogs/align.*: Alignmeant dialog by Frank Felfe <innerspace@iname.com>

	* configure.in: Need bonobo >= 0.17

	* src/bonobo/embeddable-document.c (sp_bonobo_stream_read): Bonobo API change

2000-08-10  Lauris Kaplinski  <lauris@helixcode.com>

	* doc/architecture.txt: First step in generating developers documentation

2000-08-09  Lauris Kaplinski  <lauris@helixcode.com>

	* glade/*.xpm: Added Frank Felfe's node editing icons and node dialog

	* src/sp-ellipse.c (sp_ellipse_description): return "Ellipse"

	* src/sp-text.c (sp_text_description): Return either contents or "Text" if NULL

2000-08-07  Lauris Kaplinski  <lauris@helixcode.com>

	* configure.in: Require gnome-print >= 0.21

	* glade/text-dialog.glade: New layout, suitable for gnome-font-selection

	* src/Makefile.am: Add libunicode

	* src/sp-chars.h:
	* src/sp-chars.c:
	* src/sp-text.h:
	* src/sp-text.c: Use gnome-font instead of wrapper

	* src/dialogs/text-edit.c: Use new GnomeFontSelection and GnomeFontPreview

2000-08-03  Michael Meeks  <michael@helixcode.com>

	* configure.in: update for BonoboX

2000-07-01  Lauris Kaplinski  <lauris@helixcode.com>

	* src/sp-namedview.c (and everywhere else): Guides are visible,
	although not functional yet.

	* src/desktop.c (sp_desktop_new): Use document + namedview
	combination for creating desktop.

2000-07-01  Lauris Kaplinski  <lauris@helixcode.com>

	* src/file.c (sp_do_file_print_preview): Don't use FRGBA, as
	print preview can handle alpha itself

	* src/sp-object-group.h
	* src/object-group.c: Added SPObjectGroup to handle groups of
	invisible objects (such as NamedViews)

	* src/sp-namedview.h:
	* src/sp-namedview.c: Extends SPObjectGroup

	* src/xml/sp-repr.c (sp-repr-destroy): fix hash table destroy

2000-06-21  Chema Celorio  <chema@celorio.com>

	* src/file.c (sp_do_file_print_preview): added print preview
	stuff. new function
	(sp_print_preview_destroy_cb): new function
	(sp_file_print_preview): new function
	modified the menu to include a print preview item

2000-06-21  Lauris Kaplinski  <lauris@helixcode.com>

	* src/selection.c (sp_selection_update_statusbar): Added original
	idea of printing sp_image_description (), if single item is
	selected

	* glade/*.xpm: Jeff's icons. I need to find a way to use png
	variants, xpm sucks

2000-06-21  Chema Celorio  <chema@celorio.com>

	* src/desktop.c (sp_desktop_set_status): it was #if'ed out,
	reenabel it.

	* src/selection.c (SP_SELECTION_C): added debug messages and macro
	If lauris does not like them I will take them away.
	(sp_selection_update_statusbar): new function

	* src/mdi.c (sp_mdi_app_created): add statusbar to main window.

2000-06-11  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* configure.in: Added de to ALL_LINGUAS.
	* sodipodi.desktop: Added German translations

2000-06-05  Lauris Kaplinski  <lauris@kaplinski.com>

	* src/dialogs/export.c (sp_export_do_export): use pixbuf context,
	instead of rbuf

2000-06-05  Michael Meeks  <michael@helixcode.com>

	* src/dialogs/export.c (sp_export_do_export): s/rbuf_rgba_new/rbuf_new/

	* src/bonobo/embeddable-document.c: kill a load of redundant prototypes,
	and re-order to suit. (sp_embeddable_document_ps_save),
	(sp_embeddable_document_ps_load): fix for new stream API.
	(sp_embeddable_document_factory): update stream constructor.

2000-05-14  Lauris Kaplinski  <lauris@ariman.ee>

	* src/knot.*: Lot of rearranging, new signals

	* src/seltrans.c: Changes induced by new knot signalling
	Added fake snapping to PostScript points (remove it, if you dare ;)

2000-05-13  Lauris Kaplinski  <lauris@ariman.ee>

	* src/document-private.h: Removed width and height attributes

	* src/sp-root.c: Added "width" and "height" readable attributes

2000-05-12  Lauris Kaplinski  <lauris@ariman.ee>

	* src/xml/repr.h: A bit rearranging, added SPReprDoc, induces
	changes almost everywhere else

	* src/document-private.h: Hide all document internal structure

2000-05-12  Lauris Kaplinski  <lauris@ariman.ee>

	* src/sp-namedview.*: Implemented skeleton

	* src/sp-guide.*: Implemented skeleton

	* src/sp-object-repr.c: Added NamedView and Guide

	* src/helper/sp-guide.*: Changed name to SPGuideLine

2000-05-11  Lauris Kaplinski  <lauris@ariman.ee>

	* src/desktop-events.c: Collected events to separate file
	Added guidline and grid positioning skeleton

	* src/helper/sp-guide.*: Guideline implementation

2000-05-10  Lauris Kaplinski  <lauris@ariman.ee>

	* glade/*.xpm: Some new icons (thanks to Jeff Mrochuk)

	* src/knot.*: signals clicked, grabbed, ungrabbed, moved
	Many fixes and enhancements

	* src/seltrans.c: Use knots instead of Ctrl canvas items

2000-05-09  Michael Meeks  <michael@helixcode.com>

	* src/bonobo/svg-doc-factory.c (sp_svg_doc_factory_init): add
	config.h + OAFIID.

	* Makefile.am: Install oaf data.

	* src/main.c (main): re-tool for oaf.

	* configure.in: Check for oaf.

2000-05-06  Lauris Kaplinski  <lauris@ariman.ee>

	* src/knot.h: Added signals "grab", "ungrab" and "move"
	* src/knot.c: Implemented signals, event etc.

2000-05-05  Lauris Kaplinski  <lauris@ariman.ee>

	* src/desktop-handles.h: Added SP_DT_IS_EDITABLE
	* src/knot.*: started implementing universal handle object for
	all contexts

2000-05-05  Lauris Kaplinski  <lauris@ariman.ee>

	* src/Makefile.am: Define $gladedir, which has been forgotten :)
	* src/sp-image.c (sp_image_print): Do it :)

2000-05-03  Lauris Kaplinski  <lauris@ariman.ee>

	* src/main.c: Uncommented line interpreting unknown command-line
	arguments as filenames
	* src/document-undo.c (sp_document_undo): If attribute is 'id', find
	affected object from 'new' instead of 'key'
	* src/dialogs/xml-tree.c: Added missing sp_document_done flushes
	* src/sp-object.c (sp_object_read_attr): Fixed def-ing repr
	id attribute instead of objects one

2000-05-02  Lauris Kaplinski  <lauris@ariman.ee>

	* src/sp-item-group.c (sp_group_build): Check that xml node is
	known, before trying to build object from it

2000-05-02  Lauris Kaplinski  <lauris@ariman.ee>

	* src/sp-gradient.*: Implemented skeleton for gradient fills
	* src/sp-object-repr.c: Gradient parsing

2000-05-01  Lauris Kaplinski  <lauris@ariman.ee>

	* src/helper/sodipodi-ctrl.c: Fixed bug in ::render, which left
	buffer->is_bg untouched
	* src/sp-defs.*: New objects, implementing <defs> nodes
	* src/sp-group.*: Groups have both item and non-item members
	* src/sp-image.c: Changed "src" attribute to "href"

2000-04-29  Lauris Kaplinski  <lauris@ariman.ee>

	* xml/repr.*: Reprs are now GtkObjects
	* xml/repr-io.c: Preliminary namespacing (xmlns:sodipodi)

2000-04-29  Lauris Kaplinski  <lauris@ariman.ee>

	* src/dialogs/xml-tree.c (sp_xml_tree_change_attribute_long):
	new function to change long attribute (GtkEntry does not like
	long strings). Also attribute changing in xml pushes Undo stack.

2000-04-28  Lauris Kaplinski  <lauris@ariman.ee>

	* glade/Makefile.am: Added xml-tree.glade

	* src/dialogs/xml-tree.c (sp_xml_tree_change_attribute): implemented
	this

2000-04-27  Miguel de Icaza  <miguel@helixcode.com>

	* glade/Makefile.am: New file.

	* src/dialogs/Makefile.am (gladedir): Define gladedir based on
	$datadir

	* Makefile.am: Remove the local install hack stuff.  And process
	the glade directory.

	* configure.in: Do not define PACKAGE_GLADEDIR based on the output
	of gnome-config.  Let the Makefile.am compute that value from the
	various $prefix settings.

2000-04-27  Lauris Kaplinski  <lauris@ariman.ee>

	* src/dialogs/xml-tree.c: Attribute deletion mostly work

2000-04-27  Lauris Kaplinski  <lauris@ariman.ee>

	* src/dialogs/xml-tree.*: Started implementing direct xml editing

	* glade/xml-tree.glade: XML editing dialogs

2000-04-26  Lauris Kaplinski  <lauris@ariman.ee>

	* helper/curve.c (sp_curve_split): Fixed evil memcpy size bug

2000-04-24  Lauris Kaplinski  <lauris@ariman.ee>

	* src/selection-chemistry.c: Implemented Cut/Copy/Paste

2000-04-23  Lauris Kaplinski  <lauris@ariman.ee>

	* src/document.h: added aspect and clip attributes

	* src/bonobo/embeddable-desktop.c: keep full page always visible

	* src/bonobo/embeddable-document.c: print scaled full page

2000-04-21  Lauris Kaplinski  <lauris@ariman.ee>

	* src/mdi-document.c: extract ACTIVE_DOCUMENT for ACTIVE_DESKTOP
	instead of MDIChild

	* glade/sodipodi.glade: Popup menu

	* src/event-context.c: (sp_event_context_private_root_handler)
	Popup menu on button 3, if event is not consumed

	* src/zoom-context.c: (sp_zoom_context_root_handler)
	Assign zoom_out to Shift+Button1 to free Button3 for popup

	* src/draw-context.c: (sp_draw_context_root_handler)
	Invoke parent handler, if event is not consumed

2000-04-21  Lauris Kaplinski  <lauris@ariman.ee>

	* configure.in: removed plugins/Makefile (not yet folks!)

	* src/bonobo/embeddable-document.c (sp_embeddable_document_factory):
	switched to original gnome-print-context instead of FRGBA

2000-04-21  Michael Meeks  <michael@helixcode.com>

	* configure.in (have_bonobo): add -lbonobo-print

	* src/bonobo/embeddable-document.c (sp_embeddable_document_factory):
	add the print interface.

2000-04-21  Fatih Demir	<kabalak@gmx.net>

	* configure.in : Added tr to ALL_LINGUAS .

	* sodipodi.desktop : Added [tr] ..

2000-04-20  Lauris Kaplinski  <lauris@ariman.ee>

	* glade/sodipodi.glade: toggling rulers and scrollbars on/off
	* desktop.c: construct it by hand, borders can be removed
	* mdi-desktop.c: new logic for activating desktops (bonobo needed it)
	* bonobo/embeddable-document.c: removed MDI refcounting
	* bonobo/embeddable-desktop.c: added MDI refcounting, active desktop
	management and hiding borders, if not active

2000-04-20  Andreas Hyden  <a.hyden@cyberpoint.se>

	* sodipodi.desktop: Added Swedish translation.
	* configure.in: Added sv to ALL_LINGUAS.

2000-04-19  Lauris Kaplinski  <lauris@ariman.ee>

	* configure.in: Added chack for GnomePrintRBuf and GnomePrintFRGBA
	* sp-shape.c: if FRGBA is present, do not emulate alpha
	* file.c: print via FRGBA, if present
	* dialogs/export.c: export via RBuf, if present
	* sp-object.c: fixed infinite loop in allocating id-s

2000-04-17  Lauris Kaplinski  <lauris@ariman.ee>

	* src/sp-image.c: completed migration to new gdk-pixbuf
	* src/display/canvas-image.c: completed migration

2000-04-17  Michael Meeks  <michael@helixcode.com>

	* src/sp-image.c (sp_image_pixbuf_force_rgba): fix.
	(sp_image_bbox): fix.

2000-04-14  Lauris Kaplinski <lauris@ariman.ee>

	* Makefile.am: fixed .desktop inclusion to distribution

2000-04-12  Pablo Saratxaga Pablo <pablo@mandrakesoft.com>

	* configure.in (ALL_LINGUAS): Add Danish

200-04-09  Lauris Kaplinski  <lauris@ariman.ee>

	* bonobo/canvas-translator.*: implemented a translator group, which
	translates xlib canvas calls to antialiased canvas ones.

200-04-09  Lauris Kaplinski  <lauris@ariman.ee>

	* document.c: Removed bad memory corruption bug in ::destroy
	* embeddable-document.c: Added PersistentFile interface
	* embeddable-drawing.*: Added BonoboCanvasComponent interface

200-04-08  Lauris Kaplinski  <lauris@ariman.ee>

	* Makefile.am: create sodipodi-bonobo symlink if we use bonobo
	* src/sodipodi/*: Added bonobo component, nothing interesting yet

200-04-07  Lauris Kaplinski  <lauris@ariman.ee>

	* sodipodi.gnorba: added this, embeddable document will follow soon
	* configure.in: added bonobo check

200-04-07  Lauris Kaplinski  <lauris@ariman.ee>

	* sp-shape.c: It prints now semitransparent shapes, rendering these
	to bitmaps. No clipping yet and resolution is hardcoded to 72dpi

200-04-05  Kjartan Maraas  <kmaraas@online.no>

	* no.po: Added no to ALL_LINGUAS.

2000-04-05  Lauris Kaplinski <lauris@ariman.ee>

	* sp-document.c, sp-file.c, sp-image.c: removed namespace. How to
	extract this correctly from libxml?

2000-04-05  Lauris Kaplinski <lauris@ariman.ee>

	* xml/repr.c: added order_changed_pre callback
	* document-undo.c: stacking order changes are now undoable
	* sp-document.c, sp-file.c, sp-image.c: added namespace "sodipodi",
	still have to do official definition

2000-04-04  Lauris Kaplinski <lauris@ariman.ee>

	* xml/repr-io.c: save DTD & standard header
	* dialogs/object-*: modify default fill & stroke, if nothing selected

2000-04-04  Lauris Kaplinski <lauris@ariman.ee>

	* selection.*: Added functions to select via reprs (now when we have
	unique id-s there isn't any reason thare wasn't such)

2000-04-02  Lauris Kaplinski <lauris@ariman.ee>

	* xml/repr-io.c: A very quick hack to load real svg code (DTD & stuff).
	* sp-shape.c: Fixed bug in exporting open paths, so they are not filled
	anymore.
	* sp-image.c: We can print semitransparent images, although better do not
	stretch these very much

2000-04-02  Lauris Kaplinski <lauris@ariman.ee>

	* document-undo.c, document.c: Undo should now work!

2000-04-01  Lauris Kaplinski <lauris@ariman.ee>

	* document.c: Some undoing/redoing works (duplicate & delete)

2000-04-01  Lauris Kaplinski <lauris@ariman.ee>

	* sp-item-group.c: cleaned up signals, reordering should work now
	* hunted memory leaks & removed most obvious ones

2000-03-31  Lauris Kaplinski <lauris@ariman.ee>

	* Basically completed rewrite, most things do not work

2000-03-30  Lauris Kaplinski <lauris@ariman.ee>

	* Bumped version number to 0.18 & started rewrite of object system

2000-03-29  Lauris Kaplinski <lauris@ariman.ee>

	* Modified argument parsing, --without-gui, if present, has to be first
	* argument, but otherwise now all GNOME/Gtk args work
	* You can also specify multiple files for displaying or printing

2000-03-28  Lauris Kaplinski <lauris@ariman.ee>

	* Added cute little squirrel to /gnome/apps/Graphics ;-)
	* src/desktop.c: Set canvas background to white
	* Makefile.am: added samples to tarball

2000-03-27  Lauris Kaplinski <lauris@ariman.ee>

	* main.c: Applied Yukihiro Nakai FreeBSD patches
	* main.c: Set LC_NUMERIC to "C", to avoid localisation of SVG files :-(

2000-01-25  Lauris Kaplinski <lauris@ariman.ee>

	* dialogs/export.*: a bit better png exporting, still sucks

2000-01-25  Lauris Kaplinski <lauris@ariman.ee>

	* sp-image.c: Cleanups here and there
	* display/canvas-image.c: point method uses alpha, removed SVP-s

2000-01-23  Lauris Kaplinski <lauris@ariman.ee>

	* helper/art*: functions for rendering into RGBA buffer
	* file.*, sp-shape.*, sp-image.*: exporting png bitmaps

2000-01-23  Lauris Kaplinski <lauris@ariman.ee>

	* Uses SPCurve everywhere

2000-01-19  Lauris Kaplinski <lauris@ariman.ee>

	* src/helper/sodipodi-ctrl.*: removed aa rendering

2000-01-18 David Metcalfe (crdjm@sgi.com)

	* Added command line options:
	. [ -f ] file  to load file at startup
	. -p file      to print the file without the GUI starting
	. -t file      to send the print output to the named file
	* -t is currently required for -p as I couldn't find a way of creating
	  a GnomePrinter that goes to the default printer. ??
	* Printing doesn't require that X be started

2000-01-16  Lauris Kaplinski <lauris@ariman.ee>

	* Bumped version to 0.17
	* Most things, that worked in 0.15 work again
	* still looses selections, dialogs suck etc.

2000-01-14  Lauris Kaplinski <lauris@ariman.ee>

	* Now uses Gnome MDI
	* Stroke & fill dialogs almost work for multiple displays

2000-01-08  Lauris Kaplinski <lauris@ariman.ee>

	* Major rewrite of object system
	* Multiple views almost work
	* Multiple documents almost work
	* Rects, Ellipses, Drawing and Nodes almost work
	* Nothing else works ;-(

1999-12-30  Lauris Kaplinski <lauris@ariman.ee>

	* Bumped version number to 0.15
	* Node editing works enough to be usable
	* Images use relative paths, if possible
	* Text can show accented chars

1999-12-25  Lauris Kaplinski <lauris@ariman.ee>

	* Increased version number to 0.14
	* Preliminary node editing mode
	* Stacking order can be changed again
	* Convert to Curves, Combine & Separate functions
	* Corrected repr refcounting - much fewer segfaults now
	* Countless bugfixes here & there

1999-12-23  Lauris Kaplinski <lauris@ariman.ee>

	* Major cleanup - most things work better now, but some
	don't work at all :-(
	* Implemented SPChars class
	* Text editing
	* svg importing
	* loading, saving and printing almost works

1999-09-02  Lauris Kaplinski <lauris@ariman.ee>

	* Rewrote many things and hacked up the rest.
	Removed Gdome dependency, as I had neither time nor patience
	to mess with it. As a temporary solution I've created SPRepr objects,
	which can contain xml data.
	Added functions: group, ungroup, delete, duplicate, to_front,
	to_back, up, down
	Freehand drawing almost works although need some cleanup
	Outlines are implemented, although not usable yet
	Rect can handle round corners i hope
	Ellipse can be sliced

# Local Variables:
# tab-width:8
# indent-tabs-mode:t
# End:
# vim: tabstop=4:noexpandtab:shiftwidth=4
